var EB=Object.defineProperty,CB=(t,e,n)=>e in t?EB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kc=(t,e,n)=>(CB(t,typeof e!="symbol"?e+"":e,n),n),$c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SB(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function Ka(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var E9={exports:{}};(function(t,e){(function(n,r){t.exports=r()})($c,function(){var n;function r(){return n.apply(null,arguments)}function i(g){return g instanceof Array||Object.prototype.toString.call(g)==="[object Array]"}function a(g){return g!=null&&Object.prototype.toString.call(g)==="[object Object]"}function o(g,E){return Object.prototype.hasOwnProperty.call(g,E)}function s(g){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(g).length===0;for(var E in g)if(o(g,E))return;return 1}function l(g){return g===void 0}function u(g){return typeof g=="number"||Object.prototype.toString.call(g)==="[object Number]"}function h(g){return g instanceof Date||Object.prototype.toString.call(g)==="[object Date]"}function f(g,E){for(var D=[],I=g.length,K=0;K<I;++K)D.push(E(g[K],K));return D}function d(g,E){for(var D in E)o(E,D)&&(g[D]=E[D]);return o(E,"toString")&&(g.toString=E.toString),o(E,"valueOf")&&(g.valueOf=E.valueOf),g}function p(g,E,D,I){return _i(g,E,D,I,!0).utc()}function m(g){return g._pf==null&&(g._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),g._pf}function _(g){if(g._isValid==null){var E=m(g),D=b.call(E.parsedDateParts,function(I){return I!=null}),D=!isNaN(g._d.getTime())&&E.overflow<0&&!E.empty&&!E.invalidEra&&!E.invalidMonth&&!E.invalidWeekday&&!E.weekdayMismatch&&!E.nullInput&&!E.invalidFormat&&!E.userInvalidated&&(!E.meridiem||E.meridiem&&D);if(g._strict&&(D=D&&E.charsLeftOver===0&&E.unusedTokens.length===0&&E.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(g))return D;g._isValid=D}return g._isValid}function y(g){var E=p(NaN);return g!=null?d(m(E),g):m(E).userInvalidated=!0,E}var b=Array.prototype.some||function(g){for(var E=Object(this),D=E.length>>>0,I=0;I<D;I++)if(I in E&&g.call(this,E[I],I,E))return!0;return!1},k=r.momentProperties=[],T=!1;function x(g,E){var D,I,K,ht=k.length;if(l(E._isAMomentObject)||(g._isAMomentObject=E._isAMomentObject),l(E._i)||(g._i=E._i),l(E._f)||(g._f=E._f),l(E._l)||(g._l=E._l),l(E._strict)||(g._strict=E._strict),l(E._tzm)||(g._tzm=E._tzm),l(E._isUTC)||(g._isUTC=E._isUTC),l(E._offset)||(g._offset=E._offset),l(E._pf)||(g._pf=m(E)),l(E._locale)||(g._locale=E._locale),0<ht)for(D=0;D<ht;D++)l(K=E[I=k[D]])||(g[I]=K);return g}function A(g){x(this,g),this._d=new Date(g._d!=null?g._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),T===!1&&(T=!0,r.updateOffset(this),T=!1)}function C(g){return g instanceof A||g!=null&&g._isAMomentObject!=null}function L(g){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+g)}function S(g,E){var D=!0;return d(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,g),D){for(var I,K,ht=[],_t=arguments.length,St=0;St<_t;St++){if(I="",typeof arguments[St]=="object"){for(K in I+=`
[`+St+"] ",arguments[0])o(arguments[0],K)&&(I+=K+": "+arguments[0][K]+", ");I=I.slice(0,-2)}else I=arguments[St];ht.push(I)}L(g+`
Arguments: `+Array.prototype.slice.call(ht).join("")+`
`+new Error().stack),D=!1}return E.apply(this,arguments)},E)}var N={};function v(g,E){r.deprecationHandler!=null&&r.deprecationHandler(g,E),N[g]||(L(E),N[g]=!0)}function M(g){return typeof Function<"u"&&g instanceof Function||Object.prototype.toString.call(g)==="[object Function]"}function w(g,E){var D,I=d({},g);for(D in E)o(E,D)&&(a(g[D])&&a(E[D])?(I[D]={},d(I[D],g[D]),d(I[D],E[D])):E[D]!=null?I[D]=E[D]:delete I[D]);for(D in g)o(g,D)&&!o(E,D)&&a(g[D])&&(I[D]=d({},I[D]));return I}function R(g){g!=null&&this.set(g)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;var B=Object.keys||function(g){var E,D=[];for(E in g)o(g,E)&&D.push(E);return D};function $(g,E,D){var I=""+Math.abs(g);return(0<=g?D?"+":"":"-")+Math.pow(10,Math.max(0,E-I.length)).toString().substr(1)+I}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Q=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nt={},z={};function Y(g,E,D,I){var K=typeof I=="string"?function(){return this[I]()}:I;g&&(z[g]=K),E&&(z[E[0]]=function(){return $(K.apply(this,arguments),E[1],E[2])}),D&&(z[D]=function(){return this.localeData().ordinal(K.apply(this,arguments),g)})}function rt(g,E){return g.isValid()?(E=lt(E,g.localeData()),nt[E]=nt[E]||function(D){for(var I,K=D.match(F),ht=0,_t=K.length;ht<_t;ht++)z[K[ht]]?K[ht]=z[K[ht]]:K[ht]=(I=K[ht]).match(/\[[\s\S]/)?I.replace(/^\[|\]$/g,""):I.replace(/\\/g,"");return function(St){for(var zt="",Rt=0;Rt<_t;Rt++)zt+=M(K[Rt])?K[Rt].call(St,D):K[Rt];return zt}}(E),nt[E](g)):g.localeData().invalidDate()}function lt(g,E){var D=5;function I(K){return E.longDateFormat(K)||K}for(Q.lastIndex=0;0<=D&&Q.test(g);)g=g.replace(Q,I),Q.lastIndex=0,--D;return g}var J={};function Z(g,E){var D=g.toLowerCase();J[D]=J[D+"s"]=J[E]=g}function q(g){return typeof g=="string"?J[g]||J[g.toLowerCase()]:void 0}function it(g){var E,D,I={};for(D in g)o(g,D)&&(E=q(D))&&(I[E]=g[D]);return I}var ut={};function G(g,E){ut[g]=E}function j(g){return g%4==0&&g%100!=0||g%400==0}function P(g){return g<0?Math.ceil(g)||0:Math.floor(g)}function X(E){var E=+E,D=0;return D=E!=0&&isFinite(E)?P(E):D}function O(g,E){return function(D){return D!=null?(U(this,g,D),r.updateOffset(this,E),this):V(this,g)}}function V(g,E){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+E]():NaN}function U(g,E,D){g.isValid()&&!isNaN(D)&&(E==="FullYear"&&j(g.year())&&g.month()===1&&g.date()===29?(D=X(D),g._d["set"+(g._isUTC?"UTC":"")+E](D,g.month(),ie(D,g.month()))):g._d["set"+(g._isUTC?"UTC":"")+E](D))}var H=/\d/,le=/\d\d/,xt=/\d{3}/,co=/\d{4}/,Ta=/[+-]?\d{6}/,ot=/\d\d?/,Nt=/\d\d\d\d?/,Mt=/\d\d\d\d\d\d?/,wt=/\d{1,3}/,Ea=/\d{1,4}/,wa=/[+-]?\d{1,6}/,Et=/\d+/,bt=/[+-]?\d+/,mt=/Z|[+-]\d\d:?\d\d/gi,Tt=/Z|[+-]\d\d(?::?\d\d)?/gi,kt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function st(g,E,D){Jt[g]=M(E)?E:function(I,K){return I&&D?D:E}}function Zt(g,E){return o(Jt,g)?Jt[g](E._strict,E._locale):new RegExp($t(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(D,I,K,ht,_t){return I||K||ht||_t})))}function $t(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Jt={},Ht={};function qt(g,E){var D,I,K=E;for(typeof g=="string"&&(g=[g]),u(E)&&(K=function(ht,_t){_t[E]=X(ht)}),I=g.length,D=0;D<I;D++)Ht[g[D]]=K}function oe(g,E){qt(g,function(D,I,K,ht){K._w=K._w||{},E(D,K._w,K,ht)})}var Xt,It=0,Pt=1,yt=2,Ct=3,pt=4,Ft=5,dt=6,Ee=7,gt=8;function ie(g,E){if(isNaN(g)||isNaN(E))return NaN;var D=(E%(D=12)+D)%D;return g+=(E-D)/12,D==1?j(g)?29:28:31-D%7%2}Xt=Array.prototype.indexOf||function(g){for(var E=0;E<this.length;++E)if(this[E]===g)return E;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(g){return this.localeData().monthsShort(this,g)}),Y("MMMM",0,0,function(g){return this.localeData().months(this,g)}),Z("month","M"),G("month",8),st("M",ot),st("MM",ot,le),st("MMM",function(g,E){return E.monthsShortRegex(g)}),st("MMMM",function(g,E){return E.monthsRegex(g)}),qt(["M","MM"],function(g,E){E[Pt]=X(g)-1}),qt(["MMM","MMMM"],function(g,E,D,I){I=D._locale.monthsParse(g,I,D._strict),I!=null?E[Pt]=I:m(D).invalidMonth=g});var se="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),_e="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),he=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,me=kt,Vt=kt;function te(g,E){var D;if(g.isValid()){if(typeof E=="string"){if(/^\d+$/.test(E))E=X(E);else if(!u(E=g.localeData().monthsParse(E)))return}D=Math.min(g.date(),ie(g.year(),E)),g._d["set"+(g._isUTC?"UTC":"")+"Month"](E,D)}}function de(g){return g!=null?(te(this,g),r.updateOffset(this,!0),this):V(this,"Month")}function ge(){function g(_t,St){return St.length-_t.length}for(var E,D=[],I=[],K=[],ht=0;ht<12;ht++)E=p([2e3,ht]),D.push(this.monthsShort(E,"")),I.push(this.months(E,"")),K.push(this.months(E,"")),K.push(this.monthsShort(E,""));for(D.sort(g),I.sort(g),K.sort(g),ht=0;ht<12;ht++)D[ht]=$t(D[ht]),I[ht]=$t(I[ht]);for(ht=0;ht<24;ht++)K[ht]=$t(K[ht]);this._monthsRegex=new RegExp("^("+K.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+I.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+D.join("|")+")","i")}function fe(g){return j(g)?366:365}Y("Y",0,0,function(){var g=this.year();return g<=9999?$(g,4):"+"+g}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),Z("year","y"),G("year",1),st("Y",bt),st("YY",ot,le),st("YYYY",Ea,co),st("YYYYY",wa,Ta),st("YYYYYY",wa,Ta),qt(["YYYYY","YYYYYY"],It),qt("YYYY",function(g,E){E[It]=g.length===2?r.parseTwoDigitYear(g):X(g)}),qt("YY",function(g,E){E[It]=r.parseTwoDigitYear(g)}),qt("Y",function(g,E){E[It]=parseInt(g,10)}),r.parseTwoDigitYear=function(g){return X(g)+(68<X(g)?1900:2e3)};var Su=O("FullYear",!0);function ji(g,E,D,I,K,ht,_t){var St;return g<100&&0<=g?(St=new Date(g+400,E,D,I,K,ht,_t),isFinite(St.getFullYear())&&St.setFullYear(g)):St=new Date(g,E,D,I,K,ht,_t),St}function $e(g){var E;return g<100&&0<=g?((E=Array.prototype.slice.call(arguments))[0]=g+400,E=new Date(Date.UTC.apply(null,E)),isFinite(E.getUTCFullYear())&&E.setUTCFullYear(g)):E=new Date(Date.UTC.apply(null,arguments)),E}function Pe(g,E,D){return D=7+E-D,D-(7+$e(g,0,D).getUTCDay()-E)%7-1}function Kt(g,_t,St,I,K){var ht,_t=1+7*(_t-1)+(7+St-I)%7+Pe(g,I,K),St=_t<=0?fe(ht=g-1)+_t:_t>fe(g)?(ht=g+1,_t-fe(g)):(ht=g,_t);return{year:ht,dayOfYear:St}}function Vn(g,E,D){var I,K,ht=Pe(g.year(),E,D),ht=Math.floor((g.dayOfYear()-ht-1)/7)+1;return ht<1?I=ht+en(K=g.year()-1,E,D):ht>en(g.year(),E,D)?(I=ht-en(g.year(),E,D),K=g.year()+1):(K=g.year(),I=ht),{week:I,year:K}}function en(g,K,D){var I=Pe(g,K,D),K=Pe(g+1,K,D);return(fe(g)-I+K)/7}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),Z("week","w"),Z("isoWeek","W"),G("week",5),G("isoWeek",5),st("w",ot),st("ww",ot,le),st("W",ot),st("WW",ot,le),oe(["w","ww","W","WW"],function(g,E,D,I){E[I.substr(0,1)]=X(g)});function Ke(g,E){return g.slice(E,7).concat(g.slice(0,E))}Y("d",0,"do","day"),Y("dd",0,0,function(g){return this.localeData().weekdaysMin(this,g)}),Y("ddd",0,0,function(g){return this.localeData().weekdaysShort(this,g)}),Y("dddd",0,0,function(g){return this.localeData().weekdays(this,g)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),Z("day","d"),Z("weekday","e"),Z("isoWeekday","E"),G("day",11),G("weekday",11),G("isoWeekday",11),st("d",ot),st("e",ot),st("E",ot),st("dd",function(g,E){return E.weekdaysMinRegex(g)}),st("ddd",function(g,E){return E.weekdaysShortRegex(g)}),st("dddd",function(g,E){return E.weekdaysRegex(g)}),oe(["dd","ddd","dddd"],function(g,E,D,I){I=D._locale.weekdaysParse(g,I,D._strict),I!=null?E.d=I:m(D).invalidWeekday=g}),oe(["d","e","E"],function(g,E,D,I){E[I]=X(g)});var Ye="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Dt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),At=kt,Qt=kt,Be=kt;function ze(){function g(Rt,ue){return ue.length-Rt.length}for(var E,D,I,K=[],ht=[],_t=[],St=[],zt=0;zt<7;zt++)I=p([2e3,1]).day(zt),E=$t(this.weekdaysMin(I,"")),D=$t(this.weekdaysShort(I,"")),I=$t(this.weekdays(I,"")),K.push(E),ht.push(D),_t.push(I),St.push(E),St.push(D),St.push(I);K.sort(g),ht.sort(g),_t.sort(g),St.sort(g),this._weekdaysRegex=new RegExp("^("+St.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+_t.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+ht.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+K.join("|")+")","i")}function De(){return this.hours()%12||12}function pn(g,E){Y(g,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),E)})}function Ve(g,E){return E._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,De),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+De.apply(this)+$(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+De.apply(this)+$(this.minutes(),2)+$(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+$(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+$(this.minutes(),2)+$(this.seconds(),2)}),pn("a",!0),pn("A",!1),Z("hour","h"),G("hour",13),st("a",Ve),st("A",Ve),st("H",ot),st("h",ot),st("k",ot),st("HH",ot,le),st("hh",ot,le),st("kk",ot,le),st("hmm",Nt),st("hmmss",Mt),st("Hmm",Nt),st("Hmmss",Mt),qt(["H","HH"],Ct),qt(["k","kk"],function(g,E,D){g=X(g),E[Ct]=g===24?0:g}),qt(["a","A"],function(g,E,D){D._isPm=D._locale.isPM(g),D._meridiem=g}),qt(["h","hh"],function(g,E,D){E[Ct]=X(g),m(D).bigHour=!0}),qt("hmm",function(g,E,D){var I=g.length-2;E[Ct]=X(g.substr(0,I)),E[pt]=X(g.substr(I)),m(D).bigHour=!0}),qt("hmmss",function(g,E,D){var I=g.length-4,K=g.length-2;E[Ct]=X(g.substr(0,I)),E[pt]=X(g.substr(I,2)),E[Ft]=X(g.substr(K)),m(D).bigHour=!0}),qt("Hmm",function(g,E,D){var I=g.length-2;E[Ct]=X(g.substr(0,I)),E[pt]=X(g.substr(I))}),qt("Hmmss",function(g,E,D){var I=g.length-4,K=g.length-2;E[Ct]=X(g.substr(0,I)),E[pt]=X(g.substr(I,2)),E[Ft]=X(g.substr(K))}),kt=O("Hours",!0);var Ue,xa={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:se,monthsShort:_e,week:{dow:0,doy:6},weekdays:Ye,weekdaysMin:Dt,weekdaysShort:tt,meridiemParse:/[ap]\.?m?\.?/i},Ce={},Ui={};function ku(g){return g&&g.toLowerCase().replace("_","-")}function bc(g){for(var E,D,I,K,ht=0;ht<g.length;){for(E=(K=ku(g[ht]).split("-")).length,D=(D=ku(g[ht+1]))?D.split("-"):null;0<E;){if(I=qn(K.slice(0,E).join("-")))return I;if(D&&D.length>=E&&function(_t,St){for(var zt=Math.min(_t.length,St.length),Rt=0;Rt<zt;Rt+=1)if(_t[Rt]!==St[Rt])return Rt;return zt}(K,D)>=E-1)break;E--}ht++}return Ue}function qn(g){var E;if(Ce[g]===void 0&&!0&&t&&t.exports&&g.match("^[^/\\\\]*$")!=null)try{E=Ue._abbr,Ka("./locale/"+g),Yt(E)}catch{Ce[g]=null}return Ce[g]}function Yt(g,E){return g&&((E=l(E)?Bt(g):ce(g,E))?Ue=E:typeof console<"u"&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?")),Ue._abbr}function ce(g,E){if(E===null)return delete Ce[g],null;var D,I=xa;if(E.abbr=g,Ce[g]!=null)v("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),I=Ce[g]._config;else if(E.parentLocale!=null)if(Ce[E.parentLocale]!=null)I=Ce[E.parentLocale]._config;else{if((D=qn(E.parentLocale))==null)return Ui[E.parentLocale]||(Ui[E.parentLocale]=[]),Ui[E.parentLocale].push({name:g,config:E}),null;I=D._config}return Ce[g]=new R(w(I,E)),Ui[g]&&Ui[g].forEach(function(K){ce(K.name,K.config)}),Yt(g),Ce[g]}function Bt(g){var E;if(!(g=g&&g._locale&&g._locale._abbr?g._locale._abbr:g))return Ue;if(!i(g)){if(E=qn(g))return E;g=[g]}return bc(g)}function Fe(g){var E=g._a;return E&&m(g).overflow===-2&&(E=E[Pt]<0||11<E[Pt]?Pt:E[yt]<1||E[yt]>ie(E[It],E[Pt])?yt:E[Ct]<0||24<E[Ct]||E[Ct]===24&&(E[pt]!==0||E[Ft]!==0||E[dt]!==0)?Ct:E[pt]<0||59<E[pt]?pt:E[Ft]<0||59<E[Ft]?Ft:E[dt]<0||999<E[dt]?dt:-1,m(g)._overflowDayOfYear&&(E<It||yt<E)&&(E=yt),m(g)._overflowWeeks&&E===-1&&(E=Ee),m(g)._overflowWeekday&&E===-1&&(E=gt),m(g).overflow=E),g}var et=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ct=/Z|[+-]\d\d(?::?\d\d)?/,Dn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Qo=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ad=/^\/?Date\((-?\d+)/i,wu=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Md={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ln(g){var E,D,I,K,ht,_t,zt=g._i,St=et.exec(zt)||Fn.exec(zt),zt=Dn.length,Rt=Qo.length;if(St){for(m(g).iso=!0,E=0,D=zt;E<D;E++)if(Dn[E][1].exec(St[1])){K=Dn[E][0],I=Dn[E][2]!==!1;break}if(K==null)g._isValid=!1;else{if(St[3]){for(E=0,D=Rt;E<D;E++)if(Qo[E][1].exec(St[3])){ht=(St[2]||" ")+Qo[E][0];break}if(ht==null)return void(g._isValid=!1)}if(I||ht==null){if(St[4]){if(!ct.exec(St[4]))return void(g._isValid=!1);_t="Z"}g._f=K+(ht||"")+(_t||""),vc(g)}else g._isValid=!1}}else g._isValid=!1}function Hi(g,E,D,I,K,ht){return g=[function(_t){_t=parseInt(_t,10);{if(_t<=49)return 2e3+_t;if(_t<=999)return 1900+_t}return _t}(g),_e.indexOf(E),parseInt(D,10),parseInt(I,10),parseInt(K,10)],ht&&g.push(parseInt(ht,10)),g}function Jo(g){var E,D,I,K,ht=wu.exec(g._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));ht?(E=Hi(ht[4],ht[3],ht[2],ht[5],ht[6],ht[7]),D=ht[1],I=E,K=g,D&&tt.indexOf(D)!==new Date(I[0],I[1],I[2]).getDay()?(m(K).weekdayMismatch=!0,K._isValid=!1):(g._a=E,g._tzm=(D=ht[8],I=ht[9],K=ht[10],D?Md[D]:I?0:60*(((D=parseInt(K,10))-(I=D%100))/100)+I),g._d=$e.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),m(g).rfc2822=!0)):g._isValid=!1}function bi(g,E,D){return g!=null?g:E!=null?E:D}function _c(g){var E,D,I,K,ht,_t,St,zt,Rt,ue,ne,Ze=[];if(!g._d){for(I=g,K=new Date(r.now()),D=I._useUTC?[K.getUTCFullYear(),K.getUTCMonth(),K.getUTCDate()]:[K.getFullYear(),K.getMonth(),K.getDate()],g._w&&g._a[yt]==null&&g._a[Pt]==null&&((K=(I=g)._w).GG!=null||K.W!=null||K.E!=null?(zt=1,Rt=4,ht=bi(K.GG,I._a[It],Vn(Se(),1,4).year),_t=bi(K.W,1),((St=bi(K.E,1))<1||7<St)&&(ue=!0)):(zt=I._locale._week.dow,Rt=I._locale._week.doy,ne=Vn(Se(),zt,Rt),ht=bi(K.gg,I._a[It],ne.year),_t=bi(K.w,ne.week),K.d!=null?((St=K.d)<0||6<St)&&(ue=!0):K.e!=null?(St=K.e+zt,(K.e<0||6<K.e)&&(ue=!0)):St=zt),_t<1||_t>en(ht,zt,Rt)?m(I)._overflowWeeks=!0:ue!=null?m(I)._overflowWeekday=!0:(ne=Kt(ht,_t,St,zt,Rt),I._a[It]=ne.year,I._dayOfYear=ne.dayOfYear)),g._dayOfYear!=null&&(K=bi(g._a[It],D[It]),(g._dayOfYear>fe(K)||g._dayOfYear===0)&&(m(g)._overflowDayOfYear=!0),ue=$e(K,0,g._dayOfYear),g._a[Pt]=ue.getUTCMonth(),g._a[yt]=ue.getUTCDate()),E=0;E<3&&g._a[E]==null;++E)g._a[E]=Ze[E]=D[E];for(;E<7;E++)g._a[E]=Ze[E]=g._a[E]==null?E===2?1:0:g._a[E];g._a[Ct]===24&&g._a[pt]===0&&g._a[Ft]===0&&g._a[dt]===0&&(g._nextDay=!0,g._a[Ct]=0),g._d=(g._useUTC?$e:ji).apply(null,Ze),ht=g._useUTC?g._d.getUTCDay():g._d.getDay(),g._tzm!=null&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),g._nextDay&&(g._a[Ct]=24),g._w&&g._w.d!==void 0&&g._w.d!==ht&&(m(g).weekdayMismatch=!0)}}function vc(g){if(g._f===r.ISO_8601)ln(g);else if(g._f===r.RFC_2822)Jo(g);else{g._a=[],m(g).empty=!0;for(var E,D,I,K,ht,_t=""+g._i,St=_t.length,zt=0,Rt=lt(g._f,g._locale).match(F)||[],ue=Rt.length,ne=0;ne<ue;ne++)D=Rt[ne],(E=(_t.match(Zt(D,g))||[])[0])&&(0<(I=_t.substr(0,_t.indexOf(E))).length&&m(g).unusedInput.push(I),_t=_t.slice(_t.indexOf(E)+E.length),zt+=E.length),z[D]?(E?m(g).empty=!1:m(g).unusedTokens.push(D),I=D,ht=g,(K=E)!=null&&o(Ht,I)&&Ht[I](K,ht._a,ht,I)):g._strict&&!E&&m(g).unusedTokens.push(D);m(g).charsLeftOver=St-zt,0<_t.length&&m(g).unusedInput.push(_t),g._a[Ct]<=12&&m(g).bigHour===!0&&0<g._a[Ct]&&(m(g).bigHour=void 0),m(g).parsedDateParts=g._a.slice(0),m(g).meridiem=g._meridiem,g._a[Ct]=function(Ze,gn,Gr){return Gr==null?gn:Ze.meridiemHour!=null?Ze.meridiemHour(gn,Gr):Ze.isPM!=null?((Ze=Ze.isPM(Gr))&&gn<12&&(gn+=12),gn=Ze||gn!==12?gn:0):gn}(g._locale,g._a[Ct],g._meridiem),(St=m(g).era)!==null&&(g._a[It]=g._locale.erasConvertYear(St,g._a[It])),_c(g),Fe(g)}}function Nn(g){var E,D,I,K=g._i,ht=g._f;return g._locale=g._locale||Bt(g._l),K===null||ht===void 0&&K===""?y({nullInput:!0}):(typeof K=="string"&&(g._i=K=g._locale.preparse(K)),C(K)?new A(Fe(K)):(h(K)?g._d=K:i(ht)?function(_t){var St,zt,Rt,ue,ne,Ze,gn=!1,Gr=_t._f.length;if(Gr===0)return m(_t).invalidFormat=!0,_t._d=new Date(NaN);for(ue=0;ue<Gr;ue++)ne=0,Ze=!1,St=x({},_t),_t._useUTC!=null&&(St._useUTC=_t._useUTC),St._f=_t._f[ue],vc(St),_(St)&&(Ze=!0),ne=(ne+=m(St).charsLeftOver)+10*m(St).unusedTokens.length,m(St).score=ne,gn?ne<Rt&&(Rt=ne,zt=St):(Rt==null||ne<Rt||Ze)&&(Rt=ne,zt=St,Ze&&(gn=!0));d(_t,zt||St)}(g):ht?vc(g):l(ht=(K=g)._i)?K._d=new Date(r.now()):h(ht)?K._d=new Date(ht.valueOf()):typeof ht=="string"?(D=K,(E=Ad.exec(D._i))!==null?D._d=new Date(+E[1]):(ln(D),D._isValid===!1&&(delete D._isValid,Jo(D),D._isValid===!1&&(delete D._isValid,D._strict?D._isValid=!1:r.createFromInputFallback(D))))):i(ht)?(K._a=f(ht.slice(0),function(_t){return parseInt(_t,10)}),_c(K)):a(ht)?(E=K)._d||(I=(D=it(E._i)).day===void 0?D.date:D.day,E._a=f([D.year,D.month,I,D.hour,D.minute,D.second,D.millisecond],function(_t){return _t&&parseInt(_t,10)}),_c(E)):u(ht)?K._d=new Date(ht):r.createFromInputFallback(K),_(g)||(g._d=null),g))}function _i(g,E,D,I,K){var ht={};return E!==!0&&E!==!1||(I=E,E=void 0),D!==!0&&D!==!1||(I=D,D=void 0),(a(g)&&s(g)||i(g)&&g.length===0)&&(g=void 0),ht._isAMomentObject=!0,ht._useUTC=ht._isUTC=K,ht._l=D,ht._i=g,ht._f=E,ht._strict=I,(K=new A(Fe(Nn(K=ht))))._nextDay&&(K.add(1,"d"),K._nextDay=void 0),K}function Se(g,E,D,I){return _i(g,E,D,I,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){},Nt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=Se.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:y()}),Mt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=Se.apply(null,arguments);return this.isValid()&&g.isValid()?this<g?this:g:y()});function ts(g,E){var D,I;if(!(E=E.length===1&&i(E[0])?E[0]:E).length)return Se();for(D=E[0],I=1;I<E.length;++I)E[I].isValid()&&!E[I][g](D)||(D=E[I]);return D}var Mr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Wi(E){var E=it(E),D=E.year||0,I=E.quarter||0,K=E.month||0,ht=E.week||E.isoWeek||0,_t=E.day||0,St=E.hour||0,zt=E.minute||0,Rt=E.second||0,ue=E.millisecond||0;this._isValid=function(ne){var Ze,gn,Gr=!1,Fd=Mr.length;for(Ze in ne)if(o(ne,Ze)&&(Xt.call(Mr,Ze)===-1||ne[Ze]!=null&&isNaN(ne[Ze])))return!1;for(gn=0;gn<Fd;++gn)if(ne[Mr[gn]]){if(Gr)return!1;parseFloat(ne[Mr[gn]])!==X(ne[Mr[gn]])&&(Gr=!0)}return!0}(E),this._milliseconds=+ue+1e3*Rt+6e4*zt+1e3*St*60*60,this._days=+_t+7*ht,this._months=+K+3*I+12*D,this._data={},this._locale=Bt(),this._bubble()}function hr(g){return g instanceof Wi}function es(g){return g<0?-1*Math.round(-1*g):Math.round(g)}function oo(g,E){Y(g,0,0,function(){var D=this.utcOffset(),I="+";return D<0&&(D=-D,I="-"),I+$(~~(D/60),2)+E+$(~~D%60,2)})}oo("Z",":"),oo("ZZ",""),st("Z",Tt),st("ZZ",Tt),qt(["Z","ZZ"],function(g,E,D){D._useUTC=!0,D._tzm=kr(Tt,g)});var xc=/([\+\-]|\d\d)/gi;function kr(g,D){var D=(D||"").match(g);return D===null?null:(D=60*(g=((D[D.length-1]||[])+"").match(xc)||["-",0,0])[1]+X(g[2]))===0?0:g[0]==="+"?D:-D}function Ld(g,E){var D;return E._isUTC?(E=E.clone(),D=(C(g)||h(g)?g:Se(g)).valueOf()-E.valueOf(),E._d.setTime(E._d.valueOf()+D),r.updateOffset(E,!1),E):Se(g).local()}function Bd(g){return-Math.round(g._d.getTimezoneOffset())}function h5(){return!!this.isValid()&&this._isUTC&&this._offset===0}r.updateOffset=function(){};var mB=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,bB=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Wr(g,E){var D,I=g,K=null;return hr(g)?I={ms:g._milliseconds,d:g._days,M:g._months}:u(g)||!isNaN(+g)?(I={},E?I[E]=+g:I.milliseconds=+g):(K=mB.exec(g))?(D=K[1]==="-"?-1:1,I={y:0,d:X(K[yt])*D,h:X(K[Ct])*D,m:X(K[pt])*D,s:X(K[Ft])*D,ms:X(es(1e3*K[dt]))*D}):(K=bB.exec(g))?(D=K[1]==="-"?-1:1,I={y:so(K[2],D),M:so(K[3],D),w:so(K[4],D),d:so(K[5],D),h:so(K[6],D),m:so(K[7],D),s:so(K[8],D)}):I==null?I={}:typeof I=="object"&&("from"in I||"to"in I)&&(E=function(ht,_t){var St;return!ht.isValid()||!_t.isValid()?{milliseconds:0,months:0}:(_t=Ld(_t,ht),ht.isBefore(_t)?St=d5(ht,_t):((St=d5(_t,ht)).milliseconds=-St.milliseconds,St.months=-St.months),St)}(Se(I.from),Se(I.to)),(I={}).ms=E.milliseconds,I.M=E.months),K=new Wi(I),hr(g)&&o(g,"_locale")&&(K._locale=g._locale),hr(g)&&o(g,"_isValid")&&(K._isValid=g._isValid),K}function so(g,E){return g=g&&parseFloat(g.replace(",",".")),(isNaN(g)?0:g)*E}function d5(g,E){var D={};return D.months=E.month()-g.month()+12*(E.year()-g.year()),g.clone().add(D.months,"M").isAfter(E)&&--D.months,D.milliseconds=+E-+g.clone().add(D.months,"M"),D}function f5(g,E){return function(D,I){var K;return I===null||isNaN(+I)||(v(E,"moment()."+E+"(period, number) is deprecated. Please use moment()."+E+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),K=D,D=I,I=K),p5(this,Wr(D,I),g),this}}function p5(g,_t,D,I){var K=_t._milliseconds,ht=es(_t._days),_t=es(_t._months);g.isValid()&&(I=I==null||I,_t&&te(g,V(g,"Month")+_t*D),ht&&U(g,"Date",V(g,"Date")+ht*D),K&&g._d.setTime(g._d.valueOf()+K*D),I&&r.updateOffset(g,ht||_t))}Wr.fn=Wi.prototype,Wr.invalid=function(){return Wr(NaN)},se=f5(1,"add"),Ye=f5(-1,"subtract");function g5(g){return typeof g=="string"||g instanceof String}function _B(g){return C(g)||h(g)||g5(g)||u(g)||function(E){var D=i(E),I=!1;return D&&(I=E.filter(function(K){return!u(K)&&g5(E)}).length===0),D&&I}(g)||function(E){var D,I,K=a(E)&&!s(E),ht=!1,_t=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],St=_t.length;for(D=0;D<St;D+=1)I=_t[D],ht=ht||o(E,I);return K&&ht}(g)||g==null}function Tu(g,K){if(g.date()<K.date())return-Tu(K,g);var D=12*(K.year()-g.year())+(K.month()-g.month()),I=g.clone().add(D,"months"),K=K-I<0?(K-I)/(I-g.clone().add(D-1,"months")):(K-I)/(g.clone().add(1+D,"months")-I);return-(D+K)||0}function y5(g){return g===void 0?this._locale._abbr:((g=Bt(g))!=null&&(this._locale=g),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Dt=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(g){return g===void 0?this.localeData():this.locale(g)});function m5(){return this._locale}var b5=126227808e5;function ns(g,E){return(g%E+E)%E}function _5(g,E,D){return g<100&&0<=g?new Date(g+400,E,D)-b5:new Date(g,E,D).valueOf()}function v5(g,E,D){return g<100&&0<=g?Date.UTC(g+400,E,D)-b5:Date.UTC(g,E,D)}function Dd(g,E){return E.erasAbbrRegex(g)}function Nd(){for(var g=[],E=[],D=[],I=[],K=this.eras(),ht=0,_t=K.length;ht<_t;++ht)E.push($t(K[ht].name)),g.push($t(K[ht].abbr)),D.push($t(K[ht].narrow)),I.push($t(K[ht].name)),I.push($t(K[ht].abbr)),I.push($t(K[ht].narrow));this._erasRegex=new RegExp("^("+I.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+E.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+g.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+D.join("|")+")","i")}function Eu(g,E){Y(0,[g,g.length],0,E)}function x5(g,E,D,I,K){var ht;return g==null?Vn(this,I,K).year:(ht=en(g,I,K),function(_t,St,zt,Rt,ue){return _t=Kt(_t,St,zt,Rt,ue),St=$e(_t.year,0,_t.dayOfYear),this.year(St.getUTCFullYear()),this.month(St.getUTCMonth()),this.date(St.getUTCDate()),this}.call(this,g,E=ht<E?ht:E,D,I,K))}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),st("N",Dd),st("NN",Dd),st("NNN",Dd),st("NNNN",function(g,E){return E.erasNameRegex(g)}),st("NNNNN",function(g,E){return E.erasNarrowRegex(g)}),qt(["N","NN","NNN","NNNN","NNNNN"],function(g,E,D,I){I=D._locale.erasParse(g,I,D._strict),I?m(D).era=I:m(D).invalidEra=g}),st("y",Et),st("yy",Et),st("yyy",Et),st("yyyy",Et),st("yo",function(g,E){return E._eraYearOrdinalRegex||Et}),qt(["y","yy","yyy","yyyy"],It),qt(["yo"],function(g,E,D,I){var K;D._locale._eraYearOrdinalRegex&&(K=g.match(D._locale._eraYearOrdinalRegex)),D._locale.eraYearOrdinalParse?E[It]=D._locale.eraYearOrdinalParse(g,K):E[It]=parseInt(g,10)}),Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Eu("gggg","weekYear"),Eu("ggggg","weekYear"),Eu("GGGG","isoWeekYear"),Eu("GGGGG","isoWeekYear"),Z("weekYear","gg"),Z("isoWeekYear","GG"),G("weekYear",1),G("isoWeekYear",1),st("G",bt),st("g",bt),st("GG",ot,le),st("gg",ot,le),st("GGGG",Ea,co),st("gggg",Ea,co),st("GGGGG",wa,Ta),st("ggggg",wa,Ta),oe(["gggg","ggggg","GGGG","GGGGG"],function(g,E,D,I){E[I.substr(0,2)]=X(g)}),oe(["gg","GG"],function(g,E,D,I){E[I]=r.parseTwoDigitYear(g)}),Y("Q",0,"Qo","quarter"),Z("quarter","Q"),G("quarter",7),st("Q",H),qt("Q",function(g,E){E[Pt]=3*(X(g)-1)}),Y("D",["DD",2],"Do","date"),Z("date","D"),G("date",9),st("D",ot),st("DD",ot,le),st("Do",function(g,E){return g?E._dayOfMonthOrdinalParse||E._ordinalParse:E._dayOfMonthOrdinalParseLenient}),qt(["D","DD"],yt),qt("Do",function(g,E){E[yt]=X(g.match(ot)[0])}),Ea=O("Date",!0),Y("DDD",["DDDD",3],"DDDo","dayOfYear"),Z("dayOfYear","DDD"),G("dayOfYear",4),st("DDD",wt),st("DDDD",xt),qt(["DDD","DDDD"],function(g,E,D){D._dayOfYear=X(g)}),Y("m",["mm",2],0,"minute"),Z("minute","m"),G("minute",14),st("m",ot),st("mm",ot,le),qt(["m","mm"],pt);var ka,co=O("Minutes",!1),wa=(Y("s",["ss",2],0,"second"),Z("second","s"),G("second",15),st("s",ot),st("ss",ot,le),qt(["s","ss"],Ft),O("Seconds",!1));for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Z("millisecond","ms"),G("millisecond",16),st("S",wt,H),st("SS",wt,le),st("SSS",wt,xt),ka="SSSS";ka.length<=9;ka+="S")st(ka,Et);function vB(g,E){E[dt]=X(1e3*("0."+g))}for(ka="S";ka.length<=9;ka+="S")qt(ka,vB);Ta=O("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName"),H=A.prototype;function k5(g){return g}H.add=se,H.calendar=function(D,K){arguments.length===1&&(arguments[0]?_B(arguments[0])?(D=arguments[0],K=void 0):function(ht){for(var _t=a(ht)&&!s(ht),St=!1,zt=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],Rt=0;Rt<zt.length;Rt+=1)St=St||o(ht,zt[Rt]);return _t&&St}(arguments[0])&&(K=arguments[0],D=void 0):K=D=void 0);var D=D||Se(),I=Ld(D,this).startOf("day"),I=r.calendarFormat(this,I)||"sameElse",K=K&&(M(K[I])?K[I].call(this,D):K[I]);return this.format(K||this.localeData().calendar(I,this,Se(D)))},H.clone=function(){return new A(this)},H.diff=function(g,E,D){var I,K,ht;if(!this.isValid())return NaN;if(!(I=Ld(g,this)).isValid())return NaN;switch(K=6e4*(I.utcOffset()-this.utcOffset()),E=q(E)){case"year":ht=Tu(this,I)/12;break;case"month":ht=Tu(this,I);break;case"quarter":ht=Tu(this,I)/3;break;case"second":ht=(this-I)/1e3;break;case"minute":ht=(this-I)/6e4;break;case"hour":ht=(this-I)/36e5;break;case"day":ht=(this-I-K)/864e5;break;case"week":ht=(this-I-K)/6048e5;break;default:ht=this-I}return D?ht:P(ht)},H.endOf=function(g){var E,D;if((g=q(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(D=this._isUTC?v5:_5,g){case"year":E=D(this.year()+1,0,1)-1;break;case"quarter":E=D(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":E=D(this.year(),this.month()+1,1)-1;break;case"week":E=D(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":E=D(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":E=D(this.year(),this.month(),this.date()+1)-1;break;case"hour":E=this._d.valueOf(),E+=36e5-ns(E+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":E=this._d.valueOf(),E+=6e4-ns(E,6e4)-1;break;case"second":E=this._d.valueOf(),E+=1e3-ns(E,1e3)-1;break}return this._d.setTime(E),r.updateOffset(this,!0),this},H.format=function(g){return g=g||(this.isUtc()?r.defaultFormatUtc:r.defaultFormat),g=rt(this,g),this.localeData().postformat(g)},H.from=function(g,E){return this.isValid()&&(C(g)&&g.isValid()||Se(g).isValid())?Wr({to:this,from:g}).locale(this.locale()).humanize(!E):this.localeData().invalidDate()},H.fromNow=function(g){return this.from(Se(),g)},H.to=function(g,E){return this.isValid()&&(C(g)&&g.isValid()||Se(g).isValid())?Wr({from:this,to:g}).locale(this.locale()).humanize(!E):this.localeData().invalidDate()},H.toNow=function(g){return this.to(Se(),g)},H.get=function(g){return M(this[g=q(g)])?this[g]():this},H.invalidAt=function(){return m(this).overflow},H.isAfter=function(g,E){return g=C(g)?g:Se(g),!(!this.isValid()||!g.isValid())&&((E=q(E)||"millisecond")==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(E).valueOf())},H.isBefore=function(g,E){return g=C(g)?g:Se(g),!(!this.isValid()||!g.isValid())&&((E=q(E)||"millisecond")==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(E).valueOf()<g.valueOf())},H.isBetween=function(g,E,D,I){return g=C(g)?g:Se(g),E=C(E)?E:Se(E),!!(this.isValid()&&g.isValid()&&E.isValid())&&((I=I||"()")[0]==="("?this.isAfter(g,D):!this.isBefore(g,D))&&(I[1]===")"?this.isBefore(E,D):!this.isAfter(E,D))},H.isSame=function(D,E){var D=C(D)?D:Se(D);return!(!this.isValid()||!D.isValid())&&((E=q(E)||"millisecond")==="millisecond"?this.valueOf()===D.valueOf():(D=D.valueOf(),this.clone().startOf(E).valueOf()<=D&&D<=this.clone().endOf(E).valueOf()))},H.isSameOrAfter=function(g,E){return this.isSame(g,E)||this.isAfter(g,E)},H.isSameOrBefore=function(g,E){return this.isSame(g,E)||this.isBefore(g,E)},H.isValid=function(){return _(this)},H.lang=Dt,H.locale=y5,H.localeData=m5,H.max=Mt,H.min=Nt,H.parsingFlags=function(){return d({},m(this))},H.set=function(g,E){if(typeof g=="object")for(var D=function(ht){var _t,St=[];for(_t in ht)o(ht,_t)&&St.push({unit:_t,priority:ut[_t]});return St.sort(function(zt,Rt){return zt.priority-Rt.priority}),St}(g=it(g)),I=D.length,K=0;K<I;K++)this[D[K].unit](g[D[K].unit]);else if(M(this[g=q(g)]))return this[g](E);return this},H.startOf=function(g){var E,D;if((g=q(g))===void 0||g==="millisecond"||!this.isValid())return this;switch(D=this._isUTC?v5:_5,g){case"year":E=D(this.year(),0,1);break;case"quarter":E=D(this.year(),this.month()-this.month()%3,1);break;case"month":E=D(this.year(),this.month(),1);break;case"week":E=D(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":E=D(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":E=D(this.year(),this.month(),this.date());break;case"hour":E=this._d.valueOf(),E-=ns(E+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":E=this._d.valueOf(),E-=ns(E,6e4);break;case"second":E=this._d.valueOf(),E-=ns(E,1e3);break}return this._d.setTime(E),r.updateOffset(this,!0),this},H.subtract=Ye,H.toArray=function(){var g=this;return[g.year(),g.month(),g.date(),g.hour(),g.minute(),g.second(),g.millisecond()]},H.toObject=function(){var g=this;return{years:g.year(),months:g.month(),date:g.date(),hours:g.hours(),minutes:g.minutes(),seconds:g.seconds(),milliseconds:g.milliseconds()}},H.toDate=function(){return new Date(this.valueOf())},H.toISOString=function(g){if(!this.isValid())return null;var E=(g=g!==!0)?this.clone().utc():this;return E.year()<0||9999<E.year()?rt(E,g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?g?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",rt(E,"Z")):rt(E,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},H.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g,E="moment",D="";return this.isLocal()||(E=this.utcOffset()===0?"moment.utc":"moment.parseZone",D="Z"),E="["+E+'("]',g=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(E+g+"-MM-DD[T]HH:mm:ss.SSS"+(D+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(H[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},H.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},H.eraName=function(){for(var g,E=this.localeData().eras(),D=0,I=E.length;D<I;++D)if(g=this.clone().startOf("day").valueOf(),E[D].since<=g&&g<=E[D].until||E[D].until<=g&&g<=E[D].since)return E[D].name;return""},H.eraNarrow=function(){for(var g,E=this.localeData().eras(),D=0,I=E.length;D<I;++D)if(g=this.clone().startOf("day").valueOf(),E[D].since<=g&&g<=E[D].until||E[D].until<=g&&g<=E[D].since)return E[D].narrow;return""},H.eraAbbr=function(){for(var g,E=this.localeData().eras(),D=0,I=E.length;D<I;++D)if(g=this.clone().startOf("day").valueOf(),E[D].since<=g&&g<=E[D].until||E[D].until<=g&&g<=E[D].since)return E[D].abbr;return""},H.eraYear=function(){for(var g,E,D=this.localeData().eras(),I=0,K=D.length;I<K;++I)if(g=D[I].since<=D[I].until?1:-1,E=this.clone().startOf("day").valueOf(),D[I].since<=E&&E<=D[I].until||D[I].until<=E&&E<=D[I].since)return(this.year()-r(D[I].since).year())*g+D[I].offset;return this.year()},H.year=Su,H.isLeapYear=function(){return j(this.year())},H.weekYear=function(g){return x5.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},H.isoWeekYear=function(g){return x5.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)},H.quarter=H.quarters=function(g){return g==null?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)},H.month=de,H.daysInMonth=function(){return ie(this.year(),this.month())},H.week=H.weeks=function(g){var E=this.localeData().week(this);return g==null?E:this.add(7*(g-E),"d")},H.isoWeek=H.isoWeeks=function(g){var E=Vn(this,1,4).week;return g==null?E:this.add(7*(g-E),"d")},H.weeksInYear=function(){var g=this.localeData()._week;return en(this.year(),g.dow,g.doy)},H.weeksInWeekYear=function(){var g=this.localeData()._week;return en(this.weekYear(),g.dow,g.doy)},H.isoWeeksInYear=function(){return en(this.year(),1,4)},H.isoWeeksInISOWeekYear=function(){return en(this.isoWeekYear(),1,4)},H.date=Ea,H.day=H.days=function(g){if(!this.isValid())return g!=null?this:NaN;var E,D,I=this._isUTC?this._d.getUTCDay():this._d.getDay();return g!=null?(E=g,D=this.localeData(),g=typeof E!="string"?E:isNaN(E)?typeof(E=D.weekdaysParse(E))=="number"?E:null:parseInt(E,10),this.add(g-I,"d")):I},H.weekday=function(g){if(!this.isValid())return g!=null?this:NaN;var E=(this.day()+7-this.localeData()._week.dow)%7;return g==null?E:this.add(g-E,"d")},H.isoWeekday=function(g){return this.isValid()?g!=null?(E=g,D=this.localeData(),D=typeof E=="string"?D.weekdaysParse(E)%7||7:isNaN(E)?null:E,this.day(this.day()%7?D:D-7)):this.day()||7:g!=null?this:NaN;var E,D},H.dayOfYear=function(g){var E=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return g==null?E:this.add(g-E,"d")},H.hour=H.hours=kt,H.minute=H.minutes=co,H.second=H.seconds=wa,H.millisecond=H.milliseconds=Ta,H.utcOffset=function(g,E,D){var I,K=this._offset||0;if(!this.isValid())return g!=null?this:NaN;if(g==null)return this._isUTC?K:Bd(this);if(typeof g=="string"){if((g=kr(Tt,g))===null)return this}else Math.abs(g)<16&&!D&&(g*=60);return!this._isUTC&&E&&(I=Bd(this)),this._offset=g,this._isUTC=!0,I!=null&&this.add(I,"m"),K!==g&&(!E||this._changeInProgress?p5(this,Wr(g-K,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this},H.utc=function(g){return this.utcOffset(0,g)},H.local=function(g){return this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(Bd(this),"m")),this},H.parseZone=function(){var g;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((g=kr(mt,this._i))!=null?this.utcOffset(g):this.utcOffset(0,!0)),this},H.hasAlignedHourOffset=function(g){return!!this.isValid()&&(g=g?Se(g).utcOffset():0,(this.utcOffset()-g)%60==0)},H.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},H.isLocal=function(){return!!this.isValid()&&!this._isUTC},H.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},H.isUtc=h5,H.isUTC=h5,H.zoneAbbr=function(){return this._isUTC?"UTC":""},H.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},H.dates=S("dates accessor is deprecated. Use date instead.",Ea),H.months=S("months accessor is deprecated. Use month instead",de),H.years=S("years accessor is deprecated. Use year instead",Su),H.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(g,E){return g!=null?(this.utcOffset(g=typeof g!="string"?-g:g,E),this):-this.utcOffset()}),H.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var g,E={};return x(E,this),(E=Nn(E))._a?(g=(E._isUTC?p:Se)(E._a),this._isDSTShifted=this.isValid()&&0<function(D,I,K){for(var ht=Math.min(D.length,I.length),_t=Math.abs(D.length-I.length),St=0,zt=0;zt<ht;zt++)(K&&D[zt]!==I[zt]||!K&&X(D[zt])!==X(I[zt]))&&St++;return St+_t}(E._a,g.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),le=R.prototype;function Cu(g,E,D,ht){var K=Bt(),ht=p().set(ht,E);return K[D](ht,g)}function w5(g,E,D){if(u(g)&&(E=g,g=void 0),g=g||"",E!=null)return Cu(g,E,D,"month");for(var I=[],K=0;K<12;K++)I[K]=Cu(g,K,D,"month");return I}function Od(g,E,D,I){E=(typeof g=="boolean"?u(E)&&(D=E,E=void 0):(E=g,g=!1,u(D=E)&&(D=E,E=void 0)),E||"");var K,ht=Bt(),_t=g?ht._week.dow:0,St=[];if(D!=null)return Cu(E,(D+_t)%7,I,"day");for(K=0;K<7;K++)St[K]=Cu(E,(K+_t)%7,I,"day");return St}le.calendar=function(g,E,D){return M(g=this._calendar[g]||this._calendar.sameElse)?g.call(E,D):g},le.longDateFormat=function(g){var E=this._longDateFormat[g],D=this._longDateFormat[g.toUpperCase()];return E||!D?E:(this._longDateFormat[g]=D.match(F).map(function(I){return I==="MMMM"||I==="MM"||I==="DD"||I==="dddd"?I.slice(1):I}).join(""),this._longDateFormat[g])},le.invalidDate=function(){return this._invalidDate},le.ordinal=function(g){return this._ordinal.replace("%d",g)},le.preparse=k5,le.postformat=k5,le.relativeTime=function(g,E,D,I){var K=this._relativeTime[D];return M(K)?K(g,E,D,I):K.replace(/%d/i,g)},le.pastFuture=function(g,E){return M(g=this._relativeTime[0<g?"future":"past"])?g(E):g.replace(/%s/i,E)},le.set=function(g){var E,D;for(D in g)o(g,D)&&(M(E=g[D])?this[D]=E:this["_"+D]=E);this._config=g,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},le.eras=function(g,E){for(var D,I=this._eras||Bt("en")._eras,K=0,ht=I.length;K<ht;++K){switch(typeof I[K].since){case"string":D=r(I[K].since).startOf("day"),I[K].since=D.valueOf();break}switch(typeof I[K].until){case"undefined":I[K].until=1/0;break;case"string":D=r(I[K].until).startOf("day").valueOf(),I[K].until=D.valueOf();break}}return I},le.erasParse=function(g,E,D){var I,K,ht,_t,St,zt=this.eras();for(g=g.toUpperCase(),I=0,K=zt.length;I<K;++I)if(ht=zt[I].name.toUpperCase(),_t=zt[I].abbr.toUpperCase(),St=zt[I].narrow.toUpperCase(),D)switch(E){case"N":case"NN":case"NNN":if(_t===g)return zt[I];break;case"NNNN":if(ht===g)return zt[I];break;case"NNNNN":if(St===g)return zt[I];break}else if(0<=[ht,_t,St].indexOf(g))return zt[I]},le.erasConvertYear=function(g,E){var D=g.since<=g.until?1:-1;return E===void 0?r(g.since).year():r(g.since).year()+(E-g.offset)*D},le.erasAbbrRegex=function(g){return o(this,"_erasAbbrRegex")||Nd.call(this),g?this._erasAbbrRegex:this._erasRegex},le.erasNameRegex=function(g){return o(this,"_erasNameRegex")||Nd.call(this),g?this._erasNameRegex:this._erasRegex},le.erasNarrowRegex=function(g){return o(this,"_erasNarrowRegex")||Nd.call(this),g?this._erasNarrowRegex:this._erasRegex},le.months=function(g,E){return g?(i(this._months)?this._months:this._months[(this._months.isFormat||he).test(E)?"format":"standalone"])[g.month()]:i(this._months)?this._months:this._months.standalone},le.monthsShort=function(g,E){return g?(i(this._monthsShort)?this._monthsShort:this._monthsShort[he.test(E)?"format":"standalone"])[g.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},le.monthsParse=function(g,E,D){var I,K;if(this._monthsParseExact)return function(ne,_t,St){var zt,Rt,ue,ne=ne.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],zt=0;zt<12;++zt)ue=p([2e3,zt]),this._shortMonthsParse[zt]=this.monthsShort(ue,"").toLocaleLowerCase(),this._longMonthsParse[zt]=this.months(ue,"").toLocaleLowerCase();return St?_t==="MMM"?(Rt=Xt.call(this._shortMonthsParse,ne))!==-1?Rt:null:(Rt=Xt.call(this._longMonthsParse,ne))!==-1?Rt:null:_t==="MMM"?(Rt=Xt.call(this._shortMonthsParse,ne))!==-1||(Rt=Xt.call(this._longMonthsParse,ne))!==-1?Rt:null:(Rt=Xt.call(this._longMonthsParse,ne))!==-1||(Rt=Xt.call(this._shortMonthsParse,ne))!==-1?Rt:null}.call(this,g,E,D);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),I=0;I<12;I++)if(K=p([2e3,I]),D&&!this._longMonthsParse[I]&&(this._longMonthsParse[I]=new RegExp("^"+this.months(K,"").replace(".","")+"$","i"),this._shortMonthsParse[I]=new RegExp("^"+this.monthsShort(K,"").replace(".","")+"$","i")),D||this._monthsParse[I]||(K="^"+this.months(K,"")+"|^"+this.monthsShort(K,""),this._monthsParse[I]=new RegExp(K.replace(".",""),"i")),D&&E==="MMMM"&&this._longMonthsParse[I].test(g)||D&&E==="MMM"&&this._shortMonthsParse[I].test(g)||!D&&this._monthsParse[I].test(g))return I},le.monthsRegex=function(g){return this._monthsParseExact?(o(this,"_monthsRegex")||ge.call(this),g?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Vt),this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex)},le.monthsShortRegex=function(g){return this._monthsParseExact?(o(this,"_monthsRegex")||ge.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=me),this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex)},le.week=function(g){return Vn(g,this._week.dow,this._week.doy).week},le.firstDayOfYear=function(){return this._week.doy},le.firstDayOfWeek=function(){return this._week.dow},le.weekdays=function(g,E){return E=i(this._weekdays)?this._weekdays:this._weekdays[g&&g!==!0&&this._weekdays.isFormat.test(E)?"format":"standalone"],g===!0?Ke(E,this._week.dow):g?E[g.day()]:E},le.weekdaysMin=function(g){return g===!0?Ke(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin},le.weekdaysShort=function(g){return g===!0?Ke(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort},le.weekdaysParse=function(g,E,D){var I,K;if(this._weekdaysParseExact)return function(ne,_t,St){var zt,Rt,ue,ne=ne.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],zt=0;zt<7;++zt)ue=p([2e3,1]).day(zt),this._minWeekdaysParse[zt]=this.weekdaysMin(ue,"").toLocaleLowerCase(),this._shortWeekdaysParse[zt]=this.weekdaysShort(ue,"").toLocaleLowerCase(),this._weekdaysParse[zt]=this.weekdays(ue,"").toLocaleLowerCase();return St?_t==="dddd"?(Rt=Xt.call(this._weekdaysParse,ne))!==-1?Rt:null:_t==="ddd"?(Rt=Xt.call(this._shortWeekdaysParse,ne))!==-1?Rt:null:(Rt=Xt.call(this._minWeekdaysParse,ne))!==-1?Rt:null:_t==="dddd"?(Rt=Xt.call(this._weekdaysParse,ne))!==-1||(Rt=Xt.call(this._shortWeekdaysParse,ne))!==-1||(Rt=Xt.call(this._minWeekdaysParse,ne))!==-1?Rt:null:_t==="ddd"?(Rt=Xt.call(this._shortWeekdaysParse,ne))!==-1||(Rt=Xt.call(this._weekdaysParse,ne))!==-1||(Rt=Xt.call(this._minWeekdaysParse,ne))!==-1?Rt:null:(Rt=Xt.call(this._minWeekdaysParse,ne))!==-1||(Rt=Xt.call(this._weekdaysParse,ne))!==-1||(Rt=Xt.call(this._shortWeekdaysParse,ne))!==-1?Rt:null}.call(this,g,E,D);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),I=0;I<7;I++)if(K=p([2e3,1]).day(I),D&&!this._fullWeekdaysParse[I]&&(this._fullWeekdaysParse[I]=new RegExp("^"+this.weekdays(K,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[I]=new RegExp("^"+this.weekdaysShort(K,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[I]=new RegExp("^"+this.weekdaysMin(K,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[I]||(K="^"+this.weekdays(K,"")+"|^"+this.weekdaysShort(K,"")+"|^"+this.weekdaysMin(K,""),this._weekdaysParse[I]=new RegExp(K.replace(".",""),"i")),D&&E==="dddd"&&this._fullWeekdaysParse[I].test(g)||D&&E==="ddd"&&this._shortWeekdaysParse[I].test(g)||D&&E==="dd"&&this._minWeekdaysParse[I].test(g)||!D&&this._weekdaysParse[I].test(g))return I},le.weekdaysRegex=function(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=At),this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex)},le.weekdaysShortRegex=function(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qt),this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},le.weekdaysMinRegex=function(g){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||ze.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Be),this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},le.isPM=function(g){return(g+"").toLowerCase().charAt(0)==="p"},le.meridiem=function(g,E,D){return 11<g?D?"pm":"PM":D?"am":"AM"},Yt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var E=g%10;return g+(X(g%100/10)===1?"th":E==1?"st":E==2?"nd":E==3?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",Yt),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",Bt);var Gi=Math.abs;function T5(g,E,D,I){return E=Wr(E,D),g._milliseconds+=I*E._milliseconds,g._days+=I*E._days,g._months+=I*E._months,g._bubble()}function E5(g){return g<0?Math.floor(g):Math.ceil(g)}function C5(g){return 4800*g/146097}function Rd(g){return 146097*g/4800}function Vi(g){return function(){return this.as(g)}}wt=Vi("ms"),xt=Vi("s"),se=Vi("m"),Mt=Vi("h"),Nt=Vi("d"),Ye=Vi("w"),kt=Vi("M"),co=Vi("Q"),wa=Vi("y");function lo(g){return function(){return this.isValid()?this._data[g]:NaN}}var Ta=lo("milliseconds"),Ea=lo("seconds"),Su=lo("minutes"),le=lo("hours"),xB=lo("days"),kB=lo("months"),wB=lo("years"),qi=Math.round,rs={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function TB(g,E,D,I){var Rt=Wr(g).abs(),ue=qi(Rt.as("s")),K=qi(Rt.as("m")),ht=qi(Rt.as("h")),_t=qi(Rt.as("d")),St=qi(Rt.as("M")),zt=qi(Rt.as("w")),Rt=qi(Rt.as("y")),ue=(ue<=D.ss?["s",ue]:ue<D.s&&["ss",ue])||K<=1&&["m"]||K<D.m&&["mm",K]||ht<=1&&["h"]||ht<D.h&&["hh",ht]||_t<=1&&["d"]||_t<D.d&&["dd",_t];return(ue=(ue=D.w!=null?ue||zt<=1&&["w"]||zt<D.w&&["ww",zt]:ue)||St<=1&&["M"]||St<D.M&&["MM",St]||Rt<=1&&["y"]||["yy",Rt])[2]=E,ue[3]=0<+g,ue[4]=I,function(ne,Ze,gn,Gr,Fd){return Fd.relativeTime(Ze||1,!!gn,ne,Gr)}.apply(null,ue)}var Id=Math.abs;function is(g){return(0<g)-(g<0)||+g}function Au(){if(!this.isValid())return this.localeData().invalidDate();var g,E,D,I,K,ht,_t,St=Id(this._milliseconds)/1e3,zt=Id(this._days),Rt=Id(this._months),ue=this.asSeconds();return ue?(g=P(St/60),E=P(g/60),St%=60,g%=60,D=P(Rt/12),Rt%=12,I=St?St.toFixed(3).replace(/\.?0+$/,""):"",K=is(this._months)!==is(ue)?"-":"",ht=is(this._days)!==is(ue)?"-":"",_t=is(this._milliseconds)!==is(ue)?"-":"",(ue<0?"-":"")+"P"+(D?K+D+"Y":"")+(Rt?K+Rt+"M":"")+(zt?ht+zt+"D":"")+(E||g||St?"T":"")+(E?_t+E+"H":"")+(g?_t+g+"M":"")+(St?_t+I+"S":"")):"P0D"}var Oe=Wi.prototype;return Oe.isValid=function(){return this._isValid},Oe.abs=function(){var g=this._data;return this._milliseconds=Gi(this._milliseconds),this._days=Gi(this._days),this._months=Gi(this._months),g.milliseconds=Gi(g.milliseconds),g.seconds=Gi(g.seconds),g.minutes=Gi(g.minutes),g.hours=Gi(g.hours),g.months=Gi(g.months),g.years=Gi(g.years),this},Oe.add=function(g,E){return T5(this,g,E,1)},Oe.subtract=function(g,E){return T5(this,g,E,-1)},Oe.as=function(g){if(!this.isValid())return NaN;var E,D,I=this._milliseconds;if((g=q(g))==="month"||g==="quarter"||g==="year")switch(E=this._days+I/864e5,D=this._months+C5(E),g){case"month":return D;case"quarter":return D/3;case"year":return D/12}else switch(E=this._days+Math.round(Rd(this._months)),g){case"week":return E/7+I/6048e5;case"day":return E+I/864e5;case"hour":return 24*E+I/36e5;case"minute":return 1440*E+I/6e4;case"second":return 86400*E+I/1e3;case"millisecond":return Math.floor(864e5*E)+I;default:throw new Error("Unknown unit "+g)}},Oe.asMilliseconds=wt,Oe.asSeconds=xt,Oe.asMinutes=se,Oe.asHours=Mt,Oe.asDays=Nt,Oe.asWeeks=Ye,Oe.asMonths=kt,Oe.asQuarters=co,Oe.asYears=wa,Oe.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*X(this._months/12):NaN},Oe._bubble=function(){var g=this._milliseconds,E=this._days,D=this._months,I=this._data;return 0<=g&&0<=E&&0<=D||g<=0&&E<=0&&D<=0||(g+=864e5*E5(Rd(D)+E),D=E=0),I.milliseconds=g%1e3,g=P(g/1e3),I.seconds=g%60,g=P(g/60),I.minutes=g%60,g=P(g/60),I.hours=g%24,E+=P(g/24),D+=g=P(C5(E)),E-=E5(Rd(g)),g=P(D/12),D%=12,I.days=E,I.months=D,I.years=g,this},Oe.clone=function(){return Wr(this)},Oe.get=function(g){return g=q(g),this.isValid()?this[g+"s"]():NaN},Oe.milliseconds=Ta,Oe.seconds=Ea,Oe.minutes=Su,Oe.hours=le,Oe.days=xB,Oe.weeks=function(){return P(this.days()/7)},Oe.months=kB,Oe.years=wB,Oe.humanize=function(g,E){if(!this.isValid())return this.localeData().invalidDate();var D=!1,I=rs;return typeof g=="object"&&(E=g,g=!1),typeof g=="boolean"&&(D=g),typeof E=="object"&&(I=Object.assign({},rs,E),E.s!=null&&E.ss==null&&(I.ss=E.s-1)),g=this.localeData(),E=TB(this,!D,I,g),D&&(E=g.pastFuture(+this,E)),g.postformat(E)},Oe.toISOString=Au,Oe.toString=Au,Oe.toJSON=Au,Oe.locale=y5,Oe.localeData=m5,Oe.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Au),Oe.lang=Dt,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),st("x",bt),st("X",/[+-]?\d+(\.\d{1,3})?/),qt("X",function(g,E,D){D._d=new Date(1e3*parseFloat(g))}),qt("x",function(g,E,D){D._d=new Date(X(g))}),r.version="2.29.4",n=Se,r.fn=H,r.min=function(){return ts("isBefore",[].slice.call(arguments,0))},r.max=function(){return ts("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=p,r.unix=function(g){return Se(1e3*g)},r.months=function(g,E){return w5(g,E,"months")},r.isDate=h,r.locale=Yt,r.invalid=y,r.duration=Wr,r.isMoment=C,r.weekdays=function(g,E,D){return Od(g,E,D,"weekdays")},r.parseZone=function(){return Se.apply(null,arguments).parseZone()},r.localeData=Bt,r.isDuration=hr,r.monthsShort=function(g,E){return w5(g,E,"monthsShort")},r.weekdaysMin=function(g,E,D){return Od(g,E,D,"weekdaysMin")},r.defineLocale=ce,r.updateLocale=function(g,E){var D,I;return E!=null?(I=xa,Ce[g]!=null&&Ce[g].parentLocale!=null?Ce[g].set(w(Ce[g]._config,E)):(E=w(I=(D=qn(g))!=null?D._config:I,E),D==null&&(E.abbr=g),(I=new R(E)).parentLocale=Ce[g],Ce[g]=I),Yt(g)):Ce[g]!=null&&(Ce[g].parentLocale!=null?(Ce[g]=Ce[g].parentLocale,g===Yt()&&Yt(g)):Ce[g]!=null&&delete Ce[g]),Ce[g]},r.locales=function(){return B(Ce)},r.weekdaysShort=function(g,E,D){return Od(g,E,D,"weekdaysShort")},r.normalizeUnits=q,r.relativeTimeRounding=function(g){return g===void 0?qi:typeof g=="function"&&(qi=g,!0)},r.relativeTimeThreshold=function(g,E){return rs[g]!==void 0&&(E===void 0?rs[g]:(rs[g]=E,g==="s"&&(rs.ss=E-1),!0))},r.calendarFormat=function(g,E){return(g=g.diff(E,"days",!0))<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"},r.prototype=H,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})})(E9);const ii=E9.exports,Xi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},W={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},R3=function(t="fatal"){let e=Xi.fatal;typeof t=="string"?(t=t.toLowerCase(),t in Xi&&(e=Xi[t])):typeof t=="number"&&(e=t),W.trace=()=>{},W.debug=()=>{},W.info=()=>{},W.warn=()=>{},W.error=()=>{},W.fatal=()=>{},e<=Xi.fatal&&(W.fatal=console.error?console.error.bind(console,Lr("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Lr("FATAL"))),e<=Xi.error&&(W.error=console.error?console.error.bind(console,Lr("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Lr("ERROR"))),e<=Xi.warn&&(W.warn=console.warn?console.warn.bind(console,Lr("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Lr("WARN"))),e<=Xi.info&&(W.info=console.info?console.info.bind(console,Lr("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Lr("INFO"))),e<=Xi.debug&&(W.debug=console.debug?console.debug.bind(console,Lr("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Lr("DEBUG"))),e<=Xi.trace&&(W.trace=console.debug?console.debug.bind(console,Lr("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Lr("TRACE")))},Lr=t=>`%c${ii().format("ss.SSS")} : ${t} : `;var I3={};Object.defineProperty(I3,"__esModule",{value:!0});var $i=I3.sanitizeUrl=void 0,AB=/^([^\w]*)(javascript|data|vbscript)/im,MB=/&#(\w+)(^\w|;)?/g,LB=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,BB=/^([^:]+):/gm,DB=[".","/"];function NB(t){return DB.indexOf(t[0])>-1}function OB(t){return t.replace(MB,function(e,n){return String.fromCharCode(n)})}function RB(t){var e=OB(t||"").replace(LB,"").trim();if(!e)return"about:blank";if(NB(e))return e;var n=e.match(BB);if(!n)return e;var r=n[0];return AB.test(r)?"about:blank":e}$i=I3.sanitizeUrl=RB;function tn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function C9(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i0(t){let e,n,r;t.length!==2?(e=tn,n=(s,l)=>tn(t(s),l),r=(s,l)=>t(s)-l):(e=t===tn||t===C9?t:IB,n=t,r=t);function i(s,l,u=0,h=s.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(s[f],l)<0?u=f+1:h=f}while(u<h)}return u}function a(s,l,u=0,h=s.length){if(u<h){if(e(l,l)!==0)return h;do{const f=u+h>>>1;n(s[f],l)<=0?u=f+1:h=f}while(u<h)}return u}function o(s,l,u=0,h=s.length){const f=i(s,l,u,h-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function IB(){return 0}function S9(t){return t===null?NaN:+t}function*A9(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const M9=i0(tn),L9=M9.right,FB=M9.left,$B=i0(S9).center,zo=L9;function PB(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=F3(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const B9=D9(F3),YB=D9(zB);function D9(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),l=r&&t(r),u=i.slice();return s&&l?(as(s,u,i,a,o),as(s,i,u,a,o),as(s,u,i,a,o),os(l,i,u,a,o),os(l,u,i,a,o),os(l,i,u,a,o)):s?(as(s,i,u,a,o),as(s,u,i,a,o),as(s,i,u,a,o)):l&&(os(l,i,u,a,o),os(l,u,i,a,o),os(l,i,u,a,o)),e}}function as(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function os(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function zB(t){const e=F3(t);return(n,r,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(n,r,i+0,a+0,o),e(n,r,i+1,a+1,o),e(n,r,i+2,a+2,o),e(n,r,i+3,a+3,o)}}function F3(t){const e=Math.floor(t);if(e===t)return jB(t);const n=t-e,r=2*t+1;return(i,a,o,s,l)=>{if(!((s-=l)>=o))return;let u=e*a[o];const h=l*e,f=h+l;for(let d=o,p=o+h;d<p;d+=l)u+=a[Math.min(s,d)];for(let d=o,p=s;d<=p;d+=l)u+=a[Math.min(s,d+h)],i[d]=(u+n*(a[Math.max(o,d-f)]+a[Math.min(s,d+f)]))/r,u-=a[Math.max(o,d-h)]}}function jB(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const l=o*t;for(let u=i,h=i+l;u<h;u+=o)s+=r[Math.min(a,u)];for(let u=i,h=a;u<=h;u+=o)s+=r[Math.min(a,u+l)],n[u]=s/e,s-=r[Math.max(i,u-l)]}}function a0(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function UB(t){return t.length|0}function HB(t){return!(t>0)}function WB(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function GB(t){return e=>t(...e)}function VB(...t){const e=typeof t[t.length-1]=="function"&&GB(t.pop());t=t.map(WB);const n=t.map(UB),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(HB))return a;for(;;){a.push(i.map((s,l)=>t[l][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}function qB(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function N9(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function O9(t,e){const n=N9(t,e);return n&&Math.sqrt(n)}function tl(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class wn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function XB(t,e){const n=new wn;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function KB(t,e){const n=new wn;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}class yl extends Map{constructor(e,n=F9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(im(this,e))}has(e){return super.has(im(this,e))}set(e,n){return super.set(R9(this,e),n)}delete(e){return super.delete(I9(this,e))}}class Eo extends Set{constructor(e,n=F9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(im(this,e))}add(e){return super.add(R9(this,e))}delete(e){return super.delete(I9(this,e))}}function im({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function R9({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function I9({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function F9(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ls(t){return t}function $9(t,...e){return rc(t,Ls,Ls,e)}function P9(t,...e){return rc(t,Array.from,Ls,e)}function Y9(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function ZB(t,...e){return Y9(P9(t,...e),e)}function QB(t,e,...n){return Y9(j9(t,e,...n),n)}function z9(t,e,...n){return rc(t,Ls,e,n)}function j9(t,e,...n){return rc(t,Array.from,e,n)}function JB(t,...e){return rc(t,Ls,U9,e)}function tD(t,...e){return rc(t,Array.from,U9,e)}function U9(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function rc(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new yl,l=r[o++];let u=-1;for(const h of a){const f=l(h,++u,a),d=s.get(f);d?d.push(h):s.set(f,[h])}for(const[h,f]of s)s.set(h,i(f,o));return e(s)}(t,0)}function H9(t,e){return Array.from(e,n=>t[n])}function am(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=Bs(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>Bs(n[i],n[a]))),H9(t,r)}return t.sort($3(n))}function $3(t=tn){if(t===tn)return Bs;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Bs(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function eD(t,e,n){return(e.length!==2?am(z9(t,e,n),([r,i],[a,o])=>tn(i,o)||tn(r,a)):am($9(t,n),([r,i],[a,o])=>e(i,o)||tn(r,a))).map(([r])=>r)}var nD=Array.prototype,rD=nD.slice;function Mu(t){return()=>t}var om=Math.sqrt(50),sm=Math.sqrt(10),cm=Math.sqrt(2);function Co(t,e,n){var r,i=-1,a,o,s;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),(s=Ds(t,e,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(t/s),u=Math.round(e/s);for(l*s<t&&++l,u*s>e&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)*s}else{s=-s;let l=Math.round(t*s),u=Math.round(e*s);for(l/s<t&&++l,u/s>e&&--u,o=new Array(a=u-l+1);++i<a;)o[i]=(l+i)/s}return r&&o.reverse(),o}function Ds(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=om?10:a>=sm?5:a>=cm?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=om?10:a>=sm?5:a>=cm?2:1)}function ml(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=om?i*=10:a>=sm?i*=5:a>=cm&&(i*=2),e<t?-i:i}function W9(t,e,n){let r;for(;;){const i=Ds(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function P3(t){return Math.ceil(Math.log(a0(t))/Math.LN2)+1}function S5(){var t=Ls,e=tl,n=P3;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var h=e(u),f=h[0],d=h[1],p=n(u,f,d);if(!Array.isArray(p)){const b=d,k=+p;if(e===tl&&([f,d]=W9(f,d,k)),p=Co(f,d,k),p[0]<=f&&(l=Ds(f,d,k)),p[p.length-1]>=d)if(b>=d&&e===tl){const T=Ds(f,d,k);isFinite(T)&&(T>0?d=(Math.floor(d/T)+1)*T:T<0&&(d=(Math.ceil(d*-T)+1)/-T))}else p.pop()}for(var m=p.length;p[0]<=f;)p.shift(),--m;for(;p[m-1]>d;)p.pop(),--m;var _=new Array(m+1),y;for(a=0;a<=m;++a)y=_[a]=[],y.x0=a>0?p[a-1]:f,y.x1=a<m?p[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=d&&_[Math.min(m,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&f<=s&&s<=d){const b=Math.floor((f-s)*l);_[Math.min(m,b+(p[b]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=d&&_[zo(p,s,0,m)].push(i[a]);return _}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Mu(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Mu([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?Mu(rD.call(i)):Mu(i),r):n},r}function Ns(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Y3(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function bl(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function z3(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function o0(t,e,n=0,r=t.length-1,i){for(i=i===void 0?Bs:$3(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,h=Math.log(l),f=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*f/l+d)),m=Math.min(r,Math.floor(e+(l-u)*f/l+d));o0(t,e,p,m,i)}const a=t[e];let o=n,s=r;for(wc(t,n,e),i(t[r],a)>0&&wc(t,n,r);o<s;){for(wc(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?wc(t,n,s):(++s,wc(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function wc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function G9(t,e=tn){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?tn(o,i)>0:tn(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function _l(t,e,n){if(t=Float64Array.from(A9(t,n)),!!(r=t.length)){if((e=+e)<=0||r<2)return bl(t);if(e>=1)return Ns(t);var r,i=(r-1)*e,a=Math.floor(i),o=Ns(o0(t,a).subarray(0,a+1)),s=bl(t.subarray(a+1));return o+(s-o)*(i-a)}}function V9(t,e,n=S9){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function q9(t,e,n){if(t=Float64Array.from(A9(t,n)),!!(r=t.length)){if((e=+e)<=0||r<2)return z3(t);if(e>=1)return Y3(t);var r,i=Math.floor((r-1)*e),a=(s,l)=>Bs(t[s],t[l]),o=o0(Uint32Array.from(t,(s,l)=>l),i,0,r-1,a);return G9(o.subarray(0,i+1),s=>t[s])}}function iD(t,e,n){return Math.ceil((n-e)/(2*(_l(t,.75)-_l(t,.25))*Math.pow(a0(t),-1/3)))}function aD(t,e,n){return Math.ceil((n-e)*Math.cbrt(a0(t))/(3.49*O9(t)))}function oD(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function sD(t,e){return _l(t,.5,e)}function cD(t,e){return q9(t,.5,e)}function*lD(t){for(const e of t)yield*e}function j3(t){return Array.from(lD(t))}function uD(t,e){const n=new yl;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function hD(t,e=dD){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function dD(t,e){return[t,e]}function Oa(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function fD(t,e=tn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=tn);const i=(s,l)=>e(n[s],n[l]);let a,o;return Uint32Array.from(n,(s,l)=>l).sort(e===tn?(s,l)=>Bs(n[s],n[l]):$3(i)).forEach((s,l)=>{const u=i(s,a===void 0?s:a);u>=0?((a===void 0||u>0)&&(a=s,o=l),r[s]=o):r[s]=NaN}),r}function pD(t,e=tn){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?tn(o,i)<0:tn(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function X9(t,e=tn){if(e.length===1)return z3(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)<0)&&(n=a,r=i);return r}function gD(t,e=tn){if(e.length===1)return Y3(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)>0)&&(n=a,r=i);return r}function yD(t,e){const n=X9(t,e);return n<0?void 0:n}const mD=K9(Math.random);function K9(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const a=t()*i--|0,o=e[i+n];e[i+n]=e[a+n],e[a+n]=o}return e}}function bD(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Z9(t){if(!(a=t.length))return[];for(var e=-1,n=bl(t,_D),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r}function _D(t){return t.length}function vD(){return Z9(arguments)}function xD(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function kD(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function wD(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function TD(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function ED(t,e,n){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)n=e(n,a,++o,t);return n}function CD(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function SD(t,...e){t=new Eo(t);for(const n of e)for(const r of n)t.delete(r);return t}function AD(t,e){const n=e[Symbol.iterator](),r=new Eo;for(const i of t){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0}function MD(t,...e){t=new Eo(t),e=e.map(LD);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function LD(t){return t instanceof Eo?t:new Eo(t)}function Q9(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){const a=A5(i);if(r.has(a))continue;let o,s;for(;{value:o,done:s}=n.next();){if(s)return!1;const l=A5(o);if(r.add(l),Object.is(a,l))break}}return!0}function A5(t){return t!==null&&typeof t=="object"?t.valueOf():t}function BD(t,e){return Q9(e,t)}function DD(...t){const e=new Eo;for(const n of t)for(const r of n)e.add(r);return e}function ND(t){return t}var uh=1,hh=2,lm=3,Pc=4,M5=1e-6;function OD(t){return"translate("+t+",0)"}function RD(t){return"translate(0,"+t+")"}function ID(t){return e=>+t(e)}function FD(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function $D(){return!this.__axis}function s0(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===uh||t===Pc?-1:1,h=t===Pc||t===hh?"x":"y",f=t===uh||t===lm?OD:RD;function d(p){var m=r==null?e.ticks?e.ticks.apply(e,n):e.domain():r,_=i==null?e.tickFormat?e.tickFormat.apply(e,n):ND:i,y=Math.max(a,0)+s,b=e.range(),k=+b[0]+l,T=+b[b.length-1]+l,x=(e.bandwidth?FD:ID)(e.copy(),l),A=p.selection?p.selection():p,C=A.selectAll(".domain").data([null]),L=A.selectAll(".tick").data(m,e).order(),S=L.exit(),N=L.enter().append("g").attr("class","tick"),v=L.select("line"),M=L.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(N),v=v.merge(N.append("line").attr("stroke","currentColor").attr(h+"2",u*a)),M=M.merge(N.append("text").attr("fill","currentColor").attr(h,u*y).attr("dy",t===uh?"0em":t===lm?"0.71em":"0.32em")),p!==A&&(C=C.transition(p),L=L.transition(p),v=v.transition(p),M=M.transition(p),S=S.transition(p).attr("opacity",M5).attr("transform",function(w){return isFinite(w=x(w))?f(w+l):this.getAttribute("transform")}),N.attr("opacity",M5).attr("transform",function(w){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(w))?R:x(w))+l)})),S.remove(),C.attr("d",t===Pc||t===hh?o?"M"+u*o+","+k+"H"+l+"V"+T+"H"+u*o:"M"+l+","+k+"V"+T:o?"M"+k+","+u*o+"V"+l+"H"+T+"V"+u*o:"M"+k+","+l+"H"+T),L.attr("opacity",1).attr("transform",function(w){return f(x(w)+l)}),v.attr(h+"2",u*a),M.attr(h,u*y).text(_),A.filter($D).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===hh?"start":t===Pc?"end":"middle"),A.each(function(){this.__axis=x})}return d.scale=function(p){return arguments.length?(e=p,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),d):r&&r.slice()},d.tickFormat=function(p){return arguments.length?(i=p,d):i},d.tickSize=function(p){return arguments.length?(a=o=+p,d):a},d.tickSizeInner=function(p){return arguments.length?(a=+p,d):a},d.tickSizeOuter=function(p){return arguments.length?(o=+p,d):o},d.tickPadding=function(p){return arguments.length?(s=+p,d):s},d.offset=function(p){return arguments.length?(l=+p,d):l},d}function J9(t){return s0(uh,t)}function PD(t){return s0(hh,t)}function tw(t){return s0(lm,t)}function YD(t){return s0(Pc,t)}var zD={value:()=>{}};function jo(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new dh(n)}function dh(t){this._=t}function jD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}dh.prototype=jo.prototype={constructor:dh,on:function(t,e){var n=this._,r=jD(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=UD(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=L5(n[i],t.name,e);else if(e==null)for(i in n)n[i]=L5(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new dh(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function UD(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function L5(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=zD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var um="http://www.w3.org/1999/xhtml";const hm={svg:"http://www.w3.org/2000/svg",xhtml:um,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ql(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),hm.hasOwnProperty(e)?{space:hm[e],local:t}:t}function HD(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===um&&e.documentElement.namespaceURI===um?e.createElement(t):e.createElementNS(n,t)}}function WD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c0(t){var e=Ql(t);return(e.local?WD:HD)(e)}function GD(){}function l0(t){return t==null?GD:function(){return this.querySelector(t)}}function VD(t){typeof t!="function"&&(t=l0(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,h=0;h<o;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),s[h]=u);return new ar(r,this._parents)}function ew(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function qD(){return[]}function U3(t){return t==null?qD:function(){return this.querySelectorAll(t)}}function XD(t){return function(){return ew(t.apply(this,arguments))}}function KD(t){typeof t=="function"?t=XD(t):t=U3(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new ar(r,i)}function H3(t){return function(){return this.matches(t)}}function nw(t){return function(e){return e.matches(t)}}var ZD=Array.prototype.find;function QD(t){return function(){return ZD.call(this.children,t)}}function JD(){return this.firstElementChild}function tN(t){return this.select(t==null?JD:QD(typeof t=="function"?t:nw(t)))}var eN=Array.prototype.filter;function nN(){return Array.from(this.children)}function rN(t){return function(){return eN.call(this.children,t)}}function iN(t){return this.selectAll(t==null?nN:rN(typeof t=="function"?t:nw(t)))}function aN(t){typeof t!="function"&&(t=H3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new ar(r,this._parents)}function rw(t){return new Array(t.length)}function oN(){return new ar(this._enter||this._groups.map(rw),this._parents)}function $h(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}$h.prototype={constructor:$h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function sN(t){return function(){return t}}function cN(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new $h(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function lN(t,e,n,r,i,a,o){var s,l,u=new Map,h=e.length,f=a.length,d=new Array(h),p;for(s=0;s<h;++s)(l=e[s])&&(d[s]=p=o.call(l,l.__data__,s,e)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<f;++s)p=o.call(t,a[s],s,a)+"",(l=u.get(p))?(r[s]=l,l.__data__=a[s],u.delete(p)):n[s]=new $h(t,a[s]);for(s=0;s<h;++s)(l=e[s])&&u.get(d[s])===l&&(i[s]=l)}function uN(t){return t.__data__}function hN(t,e){if(!arguments.length)return Array.from(this,uN);var n=e?lN:cN,r=this._parents,i=this._groups;typeof t!="function"&&(t=sN(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var h=r[u],f=i[u],d=f.length,p=dN(t.call(h,h&&h.__data__,u,r)),m=p.length,_=s[u]=new Array(m),y=o[u]=new Array(m),b=l[u]=new Array(d);n(h,f,_,y,b,p,e);for(var k=0,T=0,x,A;k<m;++k)if(x=_[k]){for(k>=T&&(T=k+1);!(A=y[T])&&++T<m;);x._next=A||null}}return o=new ar(o,r),o._enter=s,o._exit=l,o}function dN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fN(){return new ar(this._exit||this._groups.map(rw),this._parents)}function pN(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function gN(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],h=r[l],f=u.length,d=s[l]=new Array(f),p,m=0;m<f;++m)(p=u[m]||h[m])&&(d[m]=p);for(;l<i;++l)s[l]=n[l];return new ar(s,this._parents)}function yN(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function mN(t){t||(t=bN);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,h=0;h<s;++h)(u=o[h])&&(l[h]=u);l.sort(e)}return new ar(i,this._parents).order()}function bN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _N(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function vN(){return Array.from(this)}function xN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function kN(){let t=0;for(const e of this)++t;return t}function wN(){return!this.node()}function TN(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function EN(t){return function(){this.removeAttribute(t)}}function CN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function SN(t,e){return function(){this.setAttribute(t,e)}}function AN(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function MN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function LN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function BN(t,e){var n=Ql(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?CN:EN:typeof e=="function"?n.local?LN:MN:n.local?AN:SN)(n,e))}function W3(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function DN(t){return function(){this.style.removeProperty(t)}}function NN(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ON(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function RN(t,e,n){return arguments.length>1?this.each((e==null?DN:typeof e=="function"?ON:NN)(t,e,n==null?"":n)):So(this.node(),t)}function So(t,e){return t.style.getPropertyValue(e)||W3(t).getComputedStyle(t,null).getPropertyValue(e)}function IN(t){return function(){delete this[t]}}function FN(t,e){return function(){this[t]=e}}function $N(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function PN(t,e){return arguments.length>1?this.each((e==null?IN:typeof e=="function"?$N:FN)(t,e)):this.node()[t]}function iw(t){return t.trim().split(/^|\s+/)}function G3(t){return t.classList||new aw(t)}function aw(t){this._node=t,this._names=iw(t.getAttribute("class")||"")}aw.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ow(t,e){for(var n=G3(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function sw(t,e){for(var n=G3(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function YN(t){return function(){ow(this,t)}}function zN(t){return function(){sw(this,t)}}function jN(t,e){return function(){(e.apply(this,arguments)?ow:sw)(this,t)}}function UN(t,e){var n=iw(t+"");if(arguments.length<2){for(var r=G3(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?jN:e?YN:zN)(n,e))}function HN(){this.textContent=""}function WN(t){return function(){this.textContent=t}}function GN(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function VN(t){return arguments.length?this.each(t==null?HN:(typeof t=="function"?GN:WN)(t)):this.node().textContent}function qN(){this.innerHTML=""}function XN(t){return function(){this.innerHTML=t}}function KN(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function ZN(t){return arguments.length?this.each(t==null?qN:(typeof t=="function"?KN:XN)(t)):this.node().innerHTML}function QN(){this.nextSibling&&this.parentNode.appendChild(this)}function JN(){return this.each(QN)}function tO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eO(){return this.each(tO)}function nO(t){var e=typeof t=="function"?t:c0(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function rO(){return null}function iO(t,e){var n=typeof t=="function"?t:c0(t),r=e==null?rO:typeof e=="function"?e:l0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aO(){var t=this.parentNode;t&&t.removeChild(this)}function oO(){return this.each(aO)}function sO(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cO(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function lO(t){return this.select(t?cO:sO)}function uO(t){return arguments.length?this.property("__data__",t):this.node().__data__}function hO(t){return function(e){t.call(this,e,this.__data__)}}function dO(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function fO(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function pO(t,e,n){return function(){var r=this.__on,i,a=hO(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function gO(t,e,n){var r=dO(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,h;l<u;++l)for(i=0,h=s[l];i<a;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(s=e?pO:fO,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function cw(t,e,n){var r=W3(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function yO(t,e){return function(){return cw(this,t,e)}}function mO(t,e){return function(){return cw(this,t,e.apply(this,arguments))}}function bO(t,e){return this.each((typeof e=="function"?mO:yO)(t,e))}function*_O(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var V3=[null];function ar(t,e){this._groups=t,this._parents=e}function Uo(){return new ar([[document.documentElement]],V3)}function vO(){return this}ar.prototype=Uo.prototype={constructor:ar,select:VD,selectAll:KD,selectChild:tN,selectChildren:iN,filter:aN,data:hN,enter:oN,exit:fN,join:pN,merge:gN,selection:vO,order:yN,sort:mN,call:_N,nodes:vN,node:xN,size:kN,empty:wN,each:TN,attr:BN,style:RN,property:PN,classed:UN,text:VN,html:ZN,raise:JN,lower:eO,append:nO,insert:iO,remove:oO,clone:lO,datum:uO,on:gO,dispatch:bO,[Symbol.iterator]:_O};function Lt(t){return typeof t=="string"?new ar([[document.querySelector(t)]],[document.documentElement]):new ar([[t]],V3)}function xO(t){return Lt(c0(t).call(document.documentElement))}var kO=0;function lw(){return new dm}function dm(){this._="@"+(++kO).toString(36)}dm.prototype=lw.prototype={constructor:dm,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function uw(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Er(t,e){if(t=uw(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function wO(t,e){return t.target&&(t=uw(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>Er(n,e))}function u0(t){return typeof t=="string"?new ar([document.querySelectorAll(t)],[document.documentElement]):new ar([ew(t)],V3)}const TO={passive:!1},vl={capture:!0,passive:!1};function $d(t){t.stopImmediatePropagation()}function xs(t){t.preventDefault(),t.stopImmediatePropagation()}function h0(t){var e=t.document.documentElement,n=Lt(t).on("dragstart.drag",xs,vl);"onselectstart"in e?n.on("selectstart.drag",xs,vl):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function d0(t,e){var n=t.document.documentElement,r=Lt(t).on("dragstart.drag",null);e&&(r.on("click.drag",xs,vl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Lu=t=>()=>t;function fm(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}fm.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function EO(t){return!t.ctrlKey&&!t.button}function CO(){return this.parentNode}function SO(t,e){return e==null?{x:t.x,y:t.y}:e}function AO(){return navigator.maxTouchPoints||"ontouchstart"in this}function MO(){var t=EO,e=CO,n=SO,r=AO,i={},a=jo("start","drag","end"),o=0,s,l,u,h,f=0;function d(x){x.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",b,TO).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(x,A){if(!(h||!t.call(this,x,A))){var C=T(this,e.call(this,x,A),x,A,"mouse");!C||(Lt(x.view).on("mousemove.drag",m,vl).on("mouseup.drag",_,vl),h0(x.view),$d(x),u=!1,s=x.clientX,l=x.clientY,C("start",x))}}function m(x){if(xs(x),!u){var A=x.clientX-s,C=x.clientY-l;u=A*A+C*C>f}i.mouse("drag",x)}function _(x){Lt(x.view).on("mousemove.drag mouseup.drag",null),d0(x.view,u),xs(x),i.mouse("end",x)}function y(x,A){if(t.call(this,x,A)){var C=x.changedTouches,L=e.call(this,x,A),S=C.length,N,v;for(N=0;N<S;++N)(v=T(this,L,x,A,C[N].identifier,C[N]))&&($d(x),v("start",x,C[N]))}}function b(x){var A=x.changedTouches,C=A.length,L,S;for(L=0;L<C;++L)(S=i[A[L].identifier])&&(xs(x),S("drag",x,A[L]))}function k(x){var A=x.changedTouches,C=A.length,L,S;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),L=0;L<C;++L)(S=i[A[L].identifier])&&($d(x),S("end",x,A[L]))}function T(x,A,C,L,S,N){var v=a.copy(),M=Er(N||C,A),w,R,B;if((B=n.call(x,new fm("beforestart",{sourceEvent:C,target:d,identifier:S,active:o,x:M[0],y:M[1],dx:0,dy:0,dispatch:v}),L))!=null)return w=B.x-M[0]||0,R=B.y-M[1]||0,function $(F,Q,nt){var z=M,Y;switch(F){case"start":i[S]=$,Y=o++;break;case"end":delete i[S],--o;case"drag":M=Er(nt||Q,A),Y=o;break}v.call(F,x,new fm(F,{sourceEvent:Q,subject:B,target:d,identifier:S,active:Y,x:M[0]+w,y:M[1]+R,dx:M[0]-z[0],dy:M[1]-z[1],dispatch:v}),L)}}return d.filter=function(x){return arguments.length?(t=typeof x=="function"?x:Lu(!!x),d):t},d.container=function(x){return arguments.length?(e=typeof x=="function"?x:Lu(x),d):e},d.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Lu(x),d):n},d.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Lu(!!x),d):r},d.on=function(){var x=a.on.apply(a,arguments);return x===a?d:x},d.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,d):Math.sqrt(f)},d}function ic(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Jl(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Za(){}var Ao=.7,Os=1/Ao,ks="\\s*([+-]?\\d+)\\s*",xl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LO=/^#([0-9a-f]{3,8})$/,BO=new RegExp(`^rgb\\(${ks},${ks},${ks}\\)$`),DO=new RegExp(`^rgb\\(${Mi},${Mi},${Mi}\\)$`),NO=new RegExp(`^rgba\\(${ks},${ks},${ks},${xl}\\)$`),OO=new RegExp(`^rgba\\(${Mi},${Mi},${Mi},${xl}\\)$`),RO=new RegExp(`^hsl\\(${xl},${Mi},${Mi}\\)$`),IO=new RegExp(`^hsla\\(${xl},${Mi},${Mi},${xl}\\)$`),B5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ic(Za,Ua,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:D5,formatHex:D5,formatHex8:FO,formatHsl:$O,formatRgb:N5,toString:N5});function D5(){return this.rgb().formatHex()}function FO(){return this.rgb().formatHex8()}function $O(){return hw(this).formatHsl()}function N5(){return this.rgb().formatRgb()}function Ua(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=LO.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?O5(e):n===3?new Sn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=BO.exec(t))?new Sn(e[1],e[2],e[3],1):(e=DO.exec(t))?new Sn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=NO.exec(t))?Bu(e[1],e[2],e[3],e[4]):(e=OO.exec(t))?Bu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=RO.exec(t))?F5(e[1],e[2]/100,e[3]/100,1):(e=IO.exec(t))?F5(e[1],e[2]/100,e[3]/100,e[4]):B5.hasOwnProperty(t)?O5(B5[t]):t==="transparent"?new Sn(NaN,NaN,NaN,0):null}function O5(t){return new Sn(t>>16&255,t>>8&255,t&255,1)}function Bu(t,e,n,r){return r<=0&&(t=e=n=NaN),new Sn(t,e,n,r)}function q3(t){return t instanceof Za||(t=Ua(t)),t?(t=t.rgb(),new Sn(t.r,t.g,t.b,t.opacity)):new Sn}function Rs(t,e,n,r){return arguments.length===1?q3(t):new Sn(t,e,n,r==null?1:r)}function Sn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ic(Sn,Rs,Jl(Za,{brighter(t){return t=t==null?Os:Math.pow(Os,t),new Sn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ao:Math.pow(Ao,t),new Sn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Sn(xo(this.r),xo(this.g),xo(this.b),Ph(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R5,formatHex:R5,formatHex8:PO,formatRgb:I5,toString:I5}));function R5(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}`}function PO(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}${_o((isNaN(this.opacity)?1:this.opacity)*255)}`}function I5(){const t=Ph(this.opacity);return`${t===1?"rgb(":"rgba("}${xo(this.r)}, ${xo(this.g)}, ${xo(this.b)}${t===1?")":`, ${t})`}`}function Ph(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _o(t){return t=xo(t),(t<16?"0":"")+t.toString(16)}function F5(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qr(t,e,n,r)}function hw(t){if(t instanceof qr)return new qr(t.h,t.s,t.l,t.opacity);if(t instanceof Za||(t=Ua(t)),!t)return new qr;if(t instanceof qr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new qr(o,s,l,t.opacity)}function Yh(t,e,n,r){return arguments.length===1?hw(t):new qr(t,e,n,r==null?1:r)}function qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ic(qr,Yh,Jl(Za,{brighter(t){return t=t==null?Os:Math.pow(Os,t),new qr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ao:Math.pow(Ao,t),new qr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Sn(Pd(t>=240?t-240:t+120,i,r),Pd(t,i,r),Pd(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qr($5(this.h),Du(this.s),Du(this.l),Ph(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ph(this.opacity);return`${t===1?"hsl(":"hsla("}${$5(this.h)}, ${Du(this.s)*100}%, ${Du(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $5(t){return t=(t||0)%360,t<0?t+360:t}function Du(t){return Math.max(0,Math.min(1,t||0))}function Pd(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const dw=Math.PI/180,fw=180/Math.PI,zh=18,pw=.96422,gw=1,yw=.82521,mw=4/29,ws=6/29,bw=3*ws*ws,YO=ws*ws*ws;function _w(t){if(t instanceof ei)return new ei(t.l,t.a,t.b,t.opacity);if(t instanceof Ci)return xw(t);t instanceof Sn||(t=q3(t));var e=Ud(t.r),n=Ud(t.g),r=Ud(t.b),i=Yd((.2225045*e+.7168786*n+.0606169*r)/gw),a,o;return e===n&&n===r?a=o=i:(a=Yd((.4360747*e+.3850649*n+.1430804*r)/pw),o=Yd((.0139322*e+.0971045*n+.7141733*r)/yw)),new ei(116*i-16,500*(a-i),200*(i-o),t.opacity)}function zO(t,e){return new ei(t,0,0,e==null?1:e)}function jh(t,e,n,r){return arguments.length===1?_w(t):new ei(t,e,n,r==null?1:r)}function ei(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}ic(ei,jh,Jl(Za,{brighter(t){return new ei(this.l+zh*(t==null?1:t),this.a,this.b,this.opacity)},darker(t){return new ei(this.l-zh*(t==null?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=pw*zd(e),t=gw*zd(t),n=yw*zd(n),new Sn(jd(3.1338561*e-1.6168667*t-.4906146*n),jd(-.9787684*e+1.9161415*t+.033454*n),jd(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Yd(t){return t>YO?Math.pow(t,1/3):t/bw+mw}function zd(t){return t>ws?t*t*t:bw*(t-mw)}function jd(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ud(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vw(t){if(t instanceof Ci)return new Ci(t.h,t.c,t.l,t.opacity);if(t instanceof ei||(t=_w(t)),t.a===0&&t.b===0)return new Ci(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*fw;return new Ci(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function jO(t,e,n,r){return arguments.length===1?vw(t):new Ci(n,e,t,r==null?1:r)}function Uh(t,e,n,r){return arguments.length===1?vw(t):new Ci(t,e,n,r==null?1:r)}function Ci(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function xw(t){if(isNaN(t.h))return new ei(t.l,0,0,t.opacity);var e=t.h*dw;return new ei(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ic(Ci,Uh,Jl(Za,{brighter(t){return new Ci(this.h,this.c,this.l+zh*(t==null?1:t),this.opacity)},darker(t){return new Ci(this.h,this.c,this.l-zh*(t==null?1:t),this.opacity)},rgb(){return xw(this).rgb()}}));var kw=-.14861,X3=1.78277,K3=-.29227,f0=-.90649,kl=1.97294,P5=kl*f0,Y5=kl*X3,z5=X3*K3-f0*kw;function UO(t){if(t instanceof ko)return new ko(t.h,t.s,t.l,t.opacity);t instanceof Sn||(t=q3(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(z5*r+P5*e-Y5*n)/(z5+P5-Y5),a=r-i,o=(kl*(n-i)-K3*a)/f0,s=Math.sqrt(o*o+a*a)/(kl*i*(1-i)),l=s?Math.atan2(o,a)*fw-120:NaN;return new ko(l<0?l+360:l,s,i,t.opacity)}function ai(t,e,n,r){return arguments.length===1?UO(t):new ko(t,e,n,r==null?1:r)}function ko(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ic(ko,ai,Jl(Za,{brighter(t){return t=t==null?Os:Math.pow(Os,t),new ko(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ao:Math.pow(Ao,t),new ko(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*dw,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Sn(255*(e+n*(kw*r+X3*i)),255*(e+n*(K3*r+f0*i)),255*(e+n*(kl*r)),this.opacity)}}));function ww(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Tw(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return ww((n-r/e)*e,o,i,a,s)}}function Ew(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return ww((n-r/e)*e,i,a,o,s)}}const p0=t=>()=>t;function Cw(t,e){return function(n){return t+n*e}}function HO(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function g0(t,e){var n=e-t;return n?Cw(t,n>180||n<-180?n-360*Math.round(n/360):n):p0(isNaN(t)?e:t)}function WO(t){return(t=+t)==1?An:function(e,n){return n-e?HO(e,n,t):p0(isNaN(e)?n:e)}}function An(t,e){var n=e-t;return n?Cw(t,n):p0(isNaN(t)?e:t)}const wl=function t(e){var n=WO(e);function r(i,a){var o=n((i=Rs(i)).r,(a=Rs(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=An(i.opacity,a.opacity);return function(h){return i.r=o(h),i.g=s(h),i.b=l(h),i.opacity=u(h),i+""}}return r.gamma=t,r}(1);function Sw(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=Rs(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var Aw=Sw(Tw),GO=Sw(Ew);function Z3(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Mw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function VO(t,e){return(Mw(e)?Z3:Lw)(t,e)}function Lw(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Qa(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Bw(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Rr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dw(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Qa(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var pm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hd=new RegExp(pm.source,"g");function qO(t){return function(){return t}}function XO(t){return function(e){return t(e)+""}}function Q3(t,e){var n=pm.lastIndex=Hd.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=pm.exec(t))&&(i=Hd.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Rr(r,i)})),n=Hd.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?XO(l[0].x):qO(e):(e=l.length,function(u){for(var h=0,f;h<e;++h)s[(f=l[h]).i]=f.x(u);return s.join("")})}function Qa(t,e){var n=typeof e,r;return e==null||n==="boolean"?p0(e):(n==="number"?Rr:n==="string"?(r=Ua(e))?(e=r,wl):Q3:e instanceof Ua?wl:e instanceof Date?Bw:Mw(e)?Z3:Array.isArray(e)?Lw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dw:Rr)(t,e)}function KO(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function ZO(t,e){var n=g0(+t,+e);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function y0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var j5=180/Math.PI,Nw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ow(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*j5,skewX:Math.atan(l)*j5,scaleX:o,scaleY:s}}var Nu;function QO(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Nw:Ow(e.a,e.b,e.c,e.d,e.e,e.f)}function JO(t){return t==null||(Nu||(Nu=document.createElementNS("http://www.w3.org/2000/svg","g")),Nu.setAttribute("transform",t),!(t=Nu.transform.baseVal.consolidate()))?Nw:(t=t.matrix,Ow(t.a,t.b,t.c,t.d,t.e,t.f))}function Rw(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,h,f,d,p,m){if(u!==f||h!==d){var _=p.push("translate(",null,e,null,n);m.push({i:_-4,x:Rr(u,f)},{i:_-2,x:Rr(h,d)})}else(f||d)&&p.push("translate("+f+e+d+n)}function o(u,h,f,d){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Rr(u,h)})):h&&f.push(i(f)+"rotate("+h+r)}function s(u,h,f,d){u!==h?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Rr(u,h)}):h&&f.push(i(f)+"skewX("+h+r)}function l(u,h,f,d,p,m){if(u!==f||h!==d){var _=p.push(i(p)+"scale(",null,",",null,")");m.push({i:_-4,x:Rr(u,f)},{i:_-2,x:Rr(h,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(u,h){var f=[],d=[];return u=t(u),h=t(h),a(u.translateX,u.translateY,h.translateX,h.translateY,f,d),o(u.rotate,h.rotate,f,d),s(u.skewX,h.skewX,f,d),l(u.scaleX,u.scaleY,h.scaleX,h.scaleY,f,d),u=h=null,function(p){for(var m=-1,_=d.length,y;++m<_;)f[(y=d[m]).i]=y.x(p);return f.join("")}}}var Iw=Rw(QO,"px, ","px)","deg)"),Fw=Rw(JO,", ",")",")"),tR=1e-12;function U5(t){return((t=Math.exp(t))+1/t)/2}function eR(t){return((t=Math.exp(t))-1/t)/2}function nR(t){return((t=Math.exp(2*t))-1)/(t+1)}const $w=function t(e,n,r){function i(a,o){var s=a[0],l=a[1],u=a[2],h=o[0],f=o[1],d=o[2],p=h-s,m=f-l,_=p*p+m*m,y,b;if(_<tR)b=Math.log(d/u)/e,y=function(L){return[s+L*p,l+L*m,u*Math.exp(e*L*b)]};else{var k=Math.sqrt(_),T=(d*d-u*u+r*_)/(2*u*n*k),x=(d*d-u*u-r*_)/(2*d*n*k),A=Math.log(Math.sqrt(T*T+1)-T),C=Math.log(Math.sqrt(x*x+1)-x);b=(C-A)/e,y=function(L){var S=L*b,N=U5(A),v=u/(n*k)*(N*nR(e*S+A)-eR(A));return[s+v*p,l+v*m,u*N/U5(e*S+A)]}}return y.duration=b*1e3*e/Math.SQRT2,y}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},i}(Math.SQRT2,2,4);function Pw(t){return function(e,n){var r=t((e=Yh(e)).h,(n=Yh(n)).h),i=An(e.s,n.s),a=An(e.l,n.l),o=An(e.opacity,n.opacity);return function(s){return e.h=r(s),e.s=i(s),e.l=a(s),e.opacity=o(s),e+""}}}const rR=Pw(g0);var iR=Pw(An);function aR(t,e){var n=An((t=jh(t)).l,(e=jh(e)).l),r=An(t.a,e.a),i=An(t.b,e.b),a=An(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=r(o),t.b=i(o),t.opacity=a(o),t+""}}function Yw(t){return function(e,n){var r=t((e=Uh(e)).h,(n=Uh(n)).h),i=An(e.c,n.c),a=An(e.l,n.l),o=An(e.opacity,n.opacity);return function(s){return e.h=r(s),e.c=i(s),e.l=a(s),e.opacity=o(s),e+""}}}const zw=Yw(g0);var oR=Yw(An);function jw(t){return function e(n){n=+n;function r(i,a){var o=t((i=ai(i)).h,(a=ai(a)).h),s=An(i.s,a.s),l=An(i.l,a.l),u=An(i.opacity,a.opacity);return function(h){return i.h=o(h),i.s=s(h),i.l=l(Math.pow(h,n)),i.opacity=u(h),i+""}}return r.gamma=e,r}(1)}const sR=jw(g0);var m0=jw(An);function Uw(t,e){e===void 0&&(e=t,t=Qa);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function cR(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Is=0,Yc=0,Tc=0,Hw=1e3,Hh,zc,Wh=0,Mo=0,b0=0,Tl=typeof performance=="object"&&performance.now?performance:Date,Ww=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tu(){return Mo||(Ww(lR),Mo=Tl.now()+b0)}function lR(){Mo=0}function El(){this._call=this._time=this._next=null}El.prototype=_0.prototype={constructor:El,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?tu():+n)+(e==null?0:+e),!this._next&&zc!==this&&(zc?zc._next=this:Hh=this,zc=this),this._call=t,this._time=n,gm()},stop:function(){this._call&&(this._call=null,this._time=1/0,gm())}};function _0(t,e,n){var r=new El;return r.restart(t,e,n),r}function Gw(){tu(),++Is;for(var t=Hh,e;t;)(e=Mo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Is}function H5(){Mo=(Wh=Tl.now())+b0,Is=Yc=0;try{Gw()}finally{Is=0,hR(),Mo=0}}function uR(){var t=Tl.now(),e=t-Wh;e>Hw&&(b0-=e,Wh=t)}function hR(){for(var t,e=Hh,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Hh=n);zc=t,gm(r)}function gm(t){if(!Is){Yc&&(Yc=clearTimeout(Yc));var e=t-Mo;e>24?(t<1/0&&(Yc=setTimeout(H5,t-Tl.now()-b0)),Tc&&(Tc=clearInterval(Tc))):(Tc||(Wh=Tl.now(),Tc=setInterval(uR,Hw)),Is=1,Ww(H5))}}function ym(t,e,n){var r=new El;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}function dR(t,e,n){var r=new El,i=e;return e==null?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(a,o,s){o=+o,s=s==null?tu():+s,r._restart(function l(u){u+=i,r._restart(l,i+=o,s),a(u)},o,s)},r.restart(t,e,n),r)}var fR=jo("start","end","cancel","interrupt"),pR=[],Vw=0,mm=1,bm=2,fh=3,W5=4,_m=5,ph=6;function v0(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;gR(t,n,{name:e,index:r,group:i,on:fR,tween:pR,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Vw})}function J3(t,e){var n=hi(t,e);if(n.state>Vw)throw new Error("too late; already scheduled");return n}function Pi(t,e){var n=hi(t,e);if(n.state>fh)throw new Error("too late; already running");return n}function hi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function gR(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=_0(a,0,n.time);function a(u){n.state=mm,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var h,f,d,p;if(n.state!==mm)return l();for(h in r)if(p=r[h],p.name===n.name){if(p.state===fh)return ym(o);p.state===W5?(p.state=ph,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[h]):+h<e&&(p.state=ph,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[h])}if(ym(function(){n.state===fh&&(n.state=W5,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=bm,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bm){for(n.state=fh,i=new Array(d=n.tween.length),h=0,f=-1;h<d;++h)(p=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(u){for(var h=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=_m,1),f=-1,d=i.length;++f<d;)i[f].call(t,h);n.state===_m&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ph,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function wo(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>bm&&r.state<_m,r.state=ph,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function yR(t){return this.each(function(){wo(this,t)})}function mR(t,e){var n,r;return function(){var i=Pi(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function bR(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Pi(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function _R(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=hi(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?mR:bR)(n,t,e))}function t4(t,e,n){var r=t._id;return t.each(function(){var i=Pi(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return hi(i,r).value[e]}}function qw(t,e){var n;return(typeof e=="number"?Rr:e instanceof Ua?wl:(n=Ua(e))?(e=n,wl):Q3)(t,e)}function vR(t){return function(){this.removeAttribute(t)}}function xR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kR(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function wR(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function TR(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function ER(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function CR(t,e){var n=Ql(t),r=n==="transform"?Fw:qw;return this.attrTween(t,typeof e=="function"?(n.local?ER:TR)(n,r,t4(this,"attr."+t,e)):e==null?(n.local?xR:vR)(n):(n.local?wR:kR)(n,r,e))}function SR(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function AR(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function MR(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&AR(t,a)),n}return i._value=e,i}function LR(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&SR(t,a)),n}return i._value=e,i}function BR(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ql(t);return this.tween(n,(r.local?MR:LR)(r,e))}function DR(t,e){return function(){J3(this,t).delay=+e.apply(this,arguments)}}function NR(t,e){return e=+e,function(){J3(this,t).delay=e}}function OR(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?DR:NR)(e,t)):hi(this.node(),e).delay}function RR(t,e){return function(){Pi(this,t).duration=+e.apply(this,arguments)}}function IR(t,e){return e=+e,function(){Pi(this,t).duration=e}}function FR(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?RR:IR)(e,t)):hi(this.node(),e).duration}function $R(t,e){if(typeof e!="function")throw new Error;return function(){Pi(this,t).ease=e}}function PR(t){var e=this._id;return arguments.length?this.each($R(e,t)):hi(this.node(),e).ease}function YR(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Pi(this,t).ease=n}}function zR(t){if(typeof t!="function")throw new Error;return this.each(YR(this._id,t))}function jR(t){typeof t!="function"&&(t=H3(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new Ni(r,this._parents,this._name,this._id)}function UR(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],h=l.length,f=o[s]=new Array(h),d,p=0;p<h;++p)(d=l[p]||u[p])&&(f[p]=d);for(;s<r;++s)o[s]=e[s];return new Ni(o,this._parents,this._name,this._id)}function HR(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function WR(t,e,n){var r,i,a=HR(e)?J3:Pi;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function GR(t,e){var n=this._id;return arguments.length<2?hi(this.node(),n).on.on(t):this.each(WR(n,t,e))}function VR(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function qR(){return this.on("end.remove",VR(this._id))}function XR(t){var e=this._name,n=this._id;typeof t!="function"&&(t=l0(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),h,f,d=0;d<l;++d)(h=s[d])&&(f=t.call(h,h.__data__,d,s))&&("__data__"in h&&(f.__data__=h.__data__),u[d]=f,v0(u[d],e,n,d,u,hi(h,n)));return new Ni(a,this._parents,e,n)}function KR(t){var e=this._name,n=this._id;typeof t!="function"&&(t=U3(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,h,f=0;f<u;++f)if(h=l[f]){for(var d=t.call(h,h.__data__,f,l),p,m=hi(h,n),_=0,y=d.length;_<y;++_)(p=d[_])&&v0(p,e,n,_,d,m);a.push(d),o.push(h)}return new Ni(a,o,e,n)}var ZR=Uo.prototype.constructor;function QR(){return new ZR(this._groups,this._parents)}function JR(t,e){var n,r,i;return function(){var a=So(this,t),o=(this.style.removeProperty(t),So(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Xw(t){return function(){this.style.removeProperty(t)}}function tI(t,e,n){var r,i=n+"",a;return function(){var o=So(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function eI(t,e,n){var r,i,a;return function(){var o=So(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),So(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function nI(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=Pi(this,t),u=l.on,h=l.value[a]==null?s||(s=Xw(e)):void 0;(u!==n||i!==h)&&(r=(n=u).copy()).on(o,i=h),l.on=r}}function rI(t,e,n){var r=(t+="")=="transform"?Iw:qw;return e==null?this.styleTween(t,JR(t,r)).on("end.style."+t,Xw(t)):typeof e=="function"?this.styleTween(t,eI(t,r,t4(this,"style."+t,e))).each(nI(this._id,t)):this.styleTween(t,tI(t,r,e),n).on("end.style."+t,null)}function iI(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function aI(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&iI(t,o,n)),r}return a._value=e,a}function oI(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,aI(t,e,n==null?"":n))}function sI(t){return function(){this.textContent=t}}function cI(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function lI(t){return this.tween("text",typeof t=="function"?cI(t4(this,"text",t)):sI(t==null?"":t+""))}function uI(t){return function(e){this.textContent=t.call(this,e)}}function hI(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&uI(i)),e}return r._value=t,r}function dI(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,hI(t))}function fI(){for(var t=this._name,e=this._id,n=Zw(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var h=hi(l,e);v0(l,t,n,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ni(r,this._parents,t,n)}function pI(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=Pi(this,r),h=u.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var gI=0;function Ni(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Kw(t){return Uo().transition(t)}function Zw(){return++gI}var Ki=Uo.prototype;Ni.prototype=Kw.prototype={constructor:Ni,select:XR,selectAll:KR,selectChild:Ki.selectChild,selectChildren:Ki.selectChildren,filter:jR,merge:UR,selection:QR,transition:fI,call:Ki.call,nodes:Ki.nodes,node:Ki.node,size:Ki.size,empty:Ki.empty,each:Ki.each,on:GR,attr:CR,attrTween:BR,style:rI,styleTween:oI,text:lI,textTween:dI,remove:qR,tween:_R,delay:OR,duration:FR,ease:PR,easeVarying:zR,end:pI,[Symbol.iterator]:Ki[Symbol.iterator]};const yI=t=>+t;function mI(t){return t*t}function bI(t){return t*(2-t)}function G5(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function _I(t){return t*t*t}function vI(t){return--t*t*t+1}function vm(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var e4=3,xI=function t(e){e=+e;function n(r){return Math.pow(r,e)}return n.exponent=t,n}(e4),kI=function t(e){e=+e;function n(r){return 1-Math.pow(1-r,e)}return n.exponent=t,n}(e4),V5=function t(e){e=+e;function n(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return n.exponent=t,n}(e4),Qw=Math.PI,Jw=Qw/2;function wI(t){return+t==1?1:1-Math.cos(t*Jw)}function TI(t){return Math.sin(t*Jw)}function q5(t){return(1-Math.cos(Qw*t))/2}function Ha(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function EI(t){return Ha(1-+t)}function CI(t){return 1-Ha(t)}function X5(t){return((t*=2)<=1?Ha(1-t):2-Ha(t-1))/2}function SI(t){return 1-Math.sqrt(1-t*t)}function AI(t){return Math.sqrt(1- --t*t)}function K5(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var xm=4/11,MI=6/11,LI=8/11,BI=3/4,DI=9/11,NI=10/11,OI=15/16,RI=21/22,II=63/64,Ou=1/xm/xm;function FI(t){return 1-Cl(1-t)}function Cl(t){return(t=+t)<xm?Ou*t*t:t<LI?Ou*(t-=MI)*t+BI:t<NI?Ou*(t-=DI)*t+OI:Ou*(t-=RI)*t+II}function $I(t){return((t*=2)<=1?1-Cl(1-t):Cl(t-1)+1)/2}var n4=1.70158,PI=function t(e){e=+e;function n(r){return(r=+r)*r*(e*(r-1)+r)}return n.overshoot=t,n}(n4),YI=function t(e){e=+e;function n(r){return--r*r*((r+1)*e+r)+1}return n.overshoot=t,n}(n4),Z5=function t(e){e=+e;function n(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return n.overshoot=t,n}(n4),Fs=2*Math.PI,r4=1,i4=.3,zI=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Fs);function i(a){return e*Ha(- --a)*Math.sin((r-a)/n)}return i.amplitude=function(a){return t(a,n*Fs)},i.period=function(a){return t(e,a)},i}(r4,i4),Q5=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Fs);function i(a){return 1-e*Ha(a=+a)*Math.sin((a+r)/n)}return i.amplitude=function(a){return t(a,n*Fs)},i.period=function(a){return t(e,a)},i}(r4,i4),jI=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Fs);function i(a){return((a=a*2-1)<0?e*Ha(-a)*Math.sin((r-a)/n):2-e*Ha(a)*Math.sin((r+a)/n))/2}return i.amplitude=function(a){return t(a,n*Fs)},i.period=function(a){return t(e,a)},i}(r4,i4),UI={time:null,delay:0,duration:250,ease:vm};function HI(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function WI(t){var e,n;t instanceof Ni?(e=t._id,t=t._name):(e=Zw(),(n=UI).time=tu(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&v0(l,t,e,u,o,n||HI(l,e));return new Ni(r,this._parents,t,e)}Uo.prototype.interrupt=yR;Uo.prototype.transition=WI;var GI=[null];function VI(t,e){var n=t.__transition,r,i;if(n){e=e==null?null:e+"";for(i in n)if((r=n[i]).state>mm&&r.name===e)return new Ni([[t]],GI,e,+i)}return null}const Wd=t=>()=>t;function qI(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function XI(t){t.stopImmediatePropagation()}function Gd(t){t.preventDefault(),t.stopImmediatePropagation()}var J5={name:"drag"},Vd={name:"space"},ss={name:"handle"},cs={name:"center"};const{abs:t_,max:$n,min:Pn}=Math;function e_(t){return[+t[0],+t[1]]}function km(t){return[e_(t[0]),e_(t[1])]}var gh={name:"x",handles:["w","e"].map(Sl),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},yh={name:"y",handles:["n","s"].map(Sl),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},KI={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Sl),input:function(t){return t==null?null:km(t)},output:function(t){return t}},Zi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},n_={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},r_={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ZI={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},QI={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Sl(t){return{type:t}}function JI(t){return!t.ctrlKey&&!t.button}function tF(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function eF(){return navigator.maxTouchPoints||"ontouchstart"in this}function qd(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function nF(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function rF(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function iF(){return a4(gh)}function aF(){return a4(yh)}function oF(){return a4(KI)}function a4(t){var e=tF,n=JI,r=eF,i=!0,a=jo("start","brush","end"),o=6,s;function l(y){var b=y.property("__brush",_).selectAll(".overlay").data([Sl("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Zi.overlay).merge(b).each(function(){var T=qd(this).extent;Lt(this).attr("x",T[0][0]).attr("y",T[0][1]).attr("width",T[1][0]-T[0][0]).attr("height",T[1][1]-T[0][1])}),y.selectAll(".selection").data([Sl("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Zi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var k=y.selectAll(".handle").data(t.handles,function(T){return T.type});k.exit().remove(),k.enter().append("rect").attr("class",function(T){return"handle handle--"+T.type}).attr("cursor",function(T){return Zi[T.type]}),y.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(y,b,k){y.tween?y.on("start.brush",function(T){h(this,arguments).beforestart().start(T)}).on("interrupt.brush end.brush",function(T){h(this,arguments).end(T)}).tween("brush",function(){var T=this,x=T.__brush,A=h(T,arguments),C=x.selection,L=t.input(typeof b=="function"?b.apply(this,arguments):b,x.extent),S=Qa(C,L);function N(v){x.selection=v===1&&L===null?null:S(v),u.call(T),A.brush()}return C!==null&&L!==null?N:N(1)}):y.each(function(){var T=this,x=arguments,A=T.__brush,C=t.input(typeof b=="function"?b.apply(T,x):b,A.extent),L=h(T,x).beforestart();wo(T),A.selection=C===null?null:C,u.call(T),L.start(k).brush(k).end(k)})},l.clear=function(y,b){l.move(y,null,b)};function u(){var y=Lt(this),b=qd(this).selection;b?(y.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(k){return k.type[k.type.length-1]==="e"?b[1][0]-o/2:b[0][0]-o/2}).attr("y",function(k){return k.type[0]==="s"?b[1][1]-o/2:b[0][1]-o/2}).attr("width",function(k){return k.type==="n"||k.type==="s"?b[1][0]-b[0][0]+o:o}).attr("height",function(k){return k.type==="e"||k.type==="w"?b[1][1]-b[0][1]+o:o})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(y,b,k){var T=y.__brush.emitter;return T&&(!k||!T.clean)?T:new f(y,b,k)}function f(y,b,k){this.that=y,this.args=b,this.state=y.__brush,this.active=0,this.clean=k}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,b){return this.starting?(this.starting=!1,this.emit("start",y,b)):this.emit("brush",y),this},brush:function(y,b){return this.emit("brush",y,b),this},end:function(y,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,b)),this},emit:function(y,b,k){var T=Lt(this.that).datum();a.call(y,this.that,new qI(y,{sourceEvent:b,target:l,selection:t.output(this.state.selection),mode:k,dispatch:a}),T)}};function d(y){if(s&&!y.touches||!n.apply(this,arguments))return;var b=this,k=y.target.__data__.type,T=(i&&y.metaKey?k="overlay":k)==="selection"?J5:i&&y.altKey?cs:ss,x=t===yh?null:ZI[k],A=t===gh?null:QI[k],C=qd(b),L=C.extent,S=C.selection,N=L[0][0],v,M,w=L[0][1],R,B,$=L[1][0],F,Q,nt=L[1][1],z,Y,rt=0,lt=0,J,Z=x&&A&&i&&y.shiftKey,q,it,ut=Array.from(y.touches||[y],ot=>{const Nt=ot.identifier;return ot=Er(ot,b),ot.point0=ot.slice(),ot.identifier=Nt,ot});wo(b);var G=h(b,arguments,!0).beforestart();if(k==="overlay"){S&&(J=!0);const ot=[ut[0],ut[1]||ut[0]];C.selection=S=[[v=t===yh?N:Pn(ot[0][0],ot[1][0]),R=t===gh?w:Pn(ot[0][1],ot[1][1])],[F=t===yh?$:$n(ot[0][0],ot[1][0]),z=t===gh?nt:$n(ot[0][1],ot[1][1])]],ut.length>1&&V(y)}else v=S[0][0],R=S[0][1],F=S[1][0],z=S[1][1];M=v,B=R,Q=F,Y=z;var j=Lt(b).attr("pointer-events","none"),P=j.selectAll(".overlay").attr("cursor",Zi[k]);if(y.touches)G.moved=O,G.ended=U;else{var X=Lt(y.view).on("mousemove.brush",O,!0).on("mouseup.brush",U,!0);i&&X.on("keydown.brush",H,!0).on("keyup.brush",xt,!0),h0(y.view)}u.call(b),G.start(y,T.name);function O(ot){for(const Nt of ot.changedTouches||[ot])for(const Mt of ut)Mt.identifier===Nt.identifier&&(Mt.cur=Er(Nt,b));if(Z&&!q&&!it&&ut.length===1){const Nt=ut[0];t_(Nt.cur[0]-Nt[0])>t_(Nt.cur[1]-Nt[1])?it=!0:q=!0}for(const Nt of ut)Nt.cur&&(Nt[0]=Nt.cur[0],Nt[1]=Nt.cur[1]);J=!0,Gd(ot),V(ot)}function V(ot){const Nt=ut[0],Mt=Nt.point0;var wt;switch(rt=Nt[0]-Mt[0],lt=Nt[1]-Mt[1],T){case Vd:case J5:{x&&(rt=$n(N-v,Pn($-F,rt)),M=v+rt,Q=F+rt),A&&(lt=$n(w-R,Pn(nt-z,lt)),B=R+lt,Y=z+lt);break}case ss:{ut[1]?(x&&(M=$n(N,Pn($,ut[0][0])),Q=$n(N,Pn($,ut[1][0])),x=1),A&&(B=$n(w,Pn(nt,ut[0][1])),Y=$n(w,Pn(nt,ut[1][1])),A=1)):(x<0?(rt=$n(N-v,Pn($-v,rt)),M=v+rt,Q=F):x>0&&(rt=$n(N-F,Pn($-F,rt)),M=v,Q=F+rt),A<0?(lt=$n(w-R,Pn(nt-R,lt)),B=R+lt,Y=z):A>0&&(lt=$n(w-z,Pn(nt-z,lt)),B=R,Y=z+lt));break}case cs:{x&&(M=$n(N,Pn($,v-rt*x)),Q=$n(N,Pn($,F+rt*x))),A&&(B=$n(w,Pn(nt,R-lt*A)),Y=$n(w,Pn(nt,z+lt*A)));break}}Q<M&&(x*=-1,wt=v,v=F,F=wt,wt=M,M=Q,Q=wt,k in n_&&P.attr("cursor",Zi[k=n_[k]])),Y<B&&(A*=-1,wt=R,R=z,z=wt,wt=B,B=Y,Y=wt,k in r_&&P.attr("cursor",Zi[k=r_[k]])),C.selection&&(S=C.selection),q&&(M=S[0][0],Q=S[1][0]),it&&(B=S[0][1],Y=S[1][1]),(S[0][0]!==M||S[0][1]!==B||S[1][0]!==Q||S[1][1]!==Y)&&(C.selection=[[M,B],[Q,Y]],u.call(b),G.brush(ot,T.name))}function U(ot){if(XI(ot),ot.touches){if(ot.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else d0(ot.view,J),X.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);j.attr("pointer-events","all"),P.attr("cursor",Zi.overlay),C.selection&&(S=C.selection),nF(S)&&(C.selection=null,u.call(b)),G.end(ot,T.name)}function H(ot){switch(ot.keyCode){case 16:{Z=x&&A;break}case 18:{T===ss&&(x&&(F=Q-rt*x,v=M+rt*x),A&&(z=Y-lt*A,R=B+lt*A),T=cs,V(ot));break}case 32:{(T===ss||T===cs)&&(x<0?F=Q-rt:x>0&&(v=M-rt),A<0?z=Y-lt:A>0&&(R=B-lt),T=Vd,P.attr("cursor",Zi.selection),V(ot));break}default:return}Gd(ot)}function xt(ot){switch(ot.keyCode){case 16:{Z&&(q=it=Z=!1,V(ot));break}case 18:{T===cs&&(x<0?F=Q:x>0&&(v=M),A<0?z=Y:A>0&&(R=B),T=ss,V(ot));break}case 32:{T===Vd&&(ot.altKey?(x&&(F=Q-rt*x,v=M+rt*x),A&&(z=Y-lt*A,R=B+lt*A),T=cs):(x<0?F=Q:x>0&&(v=M),A<0?z=Y:A>0&&(R=B),T=ss),P.attr("cursor",Zi[k]),V(ot));break}default:return}Gd(ot)}}function p(y){h(this,arguments).moved(y)}function m(y){h(this,arguments).ended(y)}function _(){var y=this.__brush||{selection:null};return y.extent=km(e.apply(this,arguments)),y.dim=t,y}return l.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Wd(km(y)),l):e},l.filter=function(y){return arguments.length?(n=typeof y=="function"?y:Wd(!!y),l):n},l.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Wd(!!y),l):r},l.handleSize=function(y){return arguments.length?(o=+y,l):o},l.keyModifiers=function(y){return arguments.length?(i=!!y,l):i},l.on=function(){var y=a.on.apply(a,arguments);return y===a?l:y},l}var i_=Math.abs,ls=Math.cos,us=Math.sin,tT=Math.PI,Ru=tT/2,a_=tT*2,o_=Math.max,Xd=1e-12;function Kd(t,e){return Array.from({length:e-t},(n,r)=>t+r)}function sF(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function cF(){return o4(!1,!1)}function lF(){return o4(!1,!0)}function uF(){return o4(!0,!1)}function o4(t,e){var n=0,r=null,i=null,a=null;function o(s){var l=s.length,u=new Array(l),h=Kd(0,l),f=new Array(l*l),d=new Array(l),p=0,m;s=Float64Array.from({length:l*l},e?(_,y)=>s[y%l][y/l|0]:(_,y)=>s[y/l|0][y%l]);for(let _=0;_<l;++_){let y=0;for(let b=0;b<l;++b)y+=s[_*l+b]+t*s[b*l+_];p+=u[_]=y}p=o_(0,a_-n*l)/p,m=p?n:a_/l;{let _=0;r&&h.sort((y,b)=>r(u[y],u[b]));for(const y of h){const b=_;if(t){const k=Kd(~l+1,l).filter(T=>T<0?s[~T*l+y]:s[y*l+T]);i&&k.sort((T,x)=>i(T<0?-s[~T*l+y]:s[y*l+T],x<0?-s[~x*l+y]:s[y*l+x]));for(const T of k)if(T<0){const x=f[~T*l+y]||(f[~T*l+y]={source:null,target:null});x.target={index:y,startAngle:_,endAngle:_+=s[~T*l+y]*p,value:s[~T*l+y]}}else{const x=f[y*l+T]||(f[y*l+T]={source:null,target:null});x.source={index:y,startAngle:_,endAngle:_+=s[y*l+T]*p,value:s[y*l+T]}}d[y]={index:y,startAngle:b,endAngle:_,value:u[y]}}else{const k=Kd(0,l).filter(T=>s[y*l+T]||s[T*l+y]);i&&k.sort((T,x)=>i(s[y*l+T],s[y*l+x]));for(const T of k){let x;if(y<T?(x=f[y*l+T]||(f[y*l+T]={source:null,target:null}),x.source={index:y,startAngle:_,endAngle:_+=s[y*l+T]*p,value:s[y*l+T]}):(x=f[T*l+y]||(f[T*l+y]={source:null,target:null}),x.target={index:y,startAngle:_,endAngle:_+=s[y*l+T]*p,value:s[y*l+T]},y===T&&(x.source=x.target)),x.source&&x.target&&x.source.value<x.target.value){const A=x.source;x.source=x.target,x.target=A}}d[y]={index:y,startAngle:b,endAngle:_,value:u[y]}}_+=m}}return f=Object.values(f),f.groups=d,a?f.sort(a):f}return o.padAngle=function(s){return arguments.length?(n=o_(0,s),o):n},o.sortGroups=function(s){return arguments.length?(r=s,o):r},o.sortSubgroups=function(s){return arguments.length?(i=s,o):i},o.sortChords=function(s){return arguments.length?(s==null?a=null:(a=sF(s))._=s,o):a&&a._},o}const wm=Math.PI,Tm=2*wm,po=1e-6,hF=Tm-po;function Em(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ja(){return new Em}Em.prototype=Ja.prototype={constructor:Em,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,u=a-t,h=o-e,f=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>po)if(!(Math.abs(h*s-l*u)>po)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var d=n-a,p=r-o,m=s*s+l*l,_=d*d+p*p,y=Math.sqrt(m),b=Math.sqrt(f),k=i*Math.tan((wm-Math.acos((m+f-_)/(2*y*b)))/2),T=k/b,x=k/y;Math.abs(T-1)>po&&(this._+="L"+(t+T*u)+","+(e+T*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>u*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,u=e+s,h=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>po||Math.abs(this._y1-u)>po)&&(this._+="L"+l+","+u),n&&(f<0&&(f=f%Tm+Tm),f>hF?this._+="A"+n+","+n+",0,1,"+h+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u):f>po&&(this._+="A"+n+","+n+",0,"+ +(f>=wm)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var dF=Array.prototype.slice;function uo(t){return function(){return t}}function fF(t){return t.source}function pF(t){return t.target}function s_(t){return t.radius}function gF(t){return t.startAngle}function yF(t){return t.endAngle}function mF(){return 0}function bF(){return 10}function eT(t){var e=fF,n=pF,r=s_,i=s_,a=gF,o=yF,s=mF,l=null;function u(){var h,f=e.apply(this,arguments),d=n.apply(this,arguments),p=s.apply(this,arguments)/2,m=dF.call(arguments),_=+r.apply(this,(m[0]=f,m)),y=a.apply(this,m)-Ru,b=o.apply(this,m)-Ru,k=+i.apply(this,(m[0]=d,m)),T=a.apply(this,m)-Ru,x=o.apply(this,m)-Ru;if(l||(l=h=Ja()),p>Xd&&(i_(b-y)>p*2+Xd?b>y?(y+=p,b-=p):(y-=p,b+=p):y=b=(y+b)/2,i_(x-T)>p*2+Xd?x>T?(T+=p,x-=p):(T-=p,x+=p):T=x=(T+x)/2),l.moveTo(_*ls(y),_*us(y)),l.arc(0,0,_,y,b),y!==T||b!==x)if(t){var A=+t.apply(this,arguments),C=k-A,L=(T+x)/2;l.quadraticCurveTo(0,0,C*ls(T),C*us(T)),l.lineTo(k*ls(L),k*us(L)),l.lineTo(C*ls(x),C*us(x))}else l.quadraticCurveTo(0,0,k*ls(T),k*us(T)),l.arc(0,0,k,T,x);if(l.quadraticCurveTo(0,0,_*ls(y),_*us(y)),l.closePath(),h)return l=null,h+""||null}return t&&(u.headRadius=function(h){return arguments.length?(t=typeof h=="function"?h:uo(+h),u):t}),u.radius=function(h){return arguments.length?(r=i=typeof h=="function"?h:uo(+h),u):r},u.sourceRadius=function(h){return arguments.length?(r=typeof h=="function"?h:uo(+h),u):r},u.targetRadius=function(h){return arguments.length?(i=typeof h=="function"?h:uo(+h),u):i},u.startAngle=function(h){return arguments.length?(a=typeof h=="function"?h:uo(+h),u):a},u.endAngle=function(h){return arguments.length?(o=typeof h=="function"?h:uo(+h),u):o},u.padAngle=function(h){return arguments.length?(s=typeof h=="function"?h:uo(+h),u):s},u.source=function(h){return arguments.length?(e=h,u):e},u.target=function(h){return arguments.length?(n=h,u):n},u.context=function(h){return arguments.length?(l=h==null?null:h,u):l},u}function _F(){return eT()}function vF(){return eT(bF)}var xF=Array.prototype,nT=xF.slice;function kF(t,e){return t-e}function wF(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Aa=t=>()=>t;function TF(t,e){for(var n=-1,r=e.length,i;++n<r;)if(i=EF(t,e[n]))return i;return 0}function EF(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],u=l[0],h=l[1],f=t[s],d=f[0],p=f[1];if(CF(l,f,e))return 0;h>r!=p>r&&n<(d-u)*(r-h)/(p-h)+u&&(i=-i)}return i}function CF(t,e,n){var r;return SF(t,e,n)&&AF(t[r=+(t[0]===e[0])],n[r],e[r])}function SF(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function AF(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function MF(){}var Qi=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Cm(){var t=1,e=1,n=P3,r=l;function i(u){var h=n(u);if(Array.isArray(h))h=h.slice().sort(kF);else{const f=tl(u),d=ml(f[0],f[1],h);h=Co(Math.floor(f[0]/d)*d,Math.floor(f[1]/d-1)*d,h)}return h.map(f=>a(u,f))}function a(u,h){var f=[],d=[];return o(u,h,function(p){r(p,u,h),wF(p)>0?f.push([p]):d.push(p)}),d.forEach(function(p){for(var m=0,_=f.length,y;m<_;++m)if(TF((y=f[m])[0],p)!==-1){y.push(p);return}}),{type:"MultiPolygon",value:h,coordinates:f}}function o(u,h,f){var d=new Array,p=new Array,m,_,y,b,k,T;for(m=_=-1,b=u[0]>=h,Qi[b<<1].forEach(x);++m<t-1;)y=b,b=u[m+1]>=h,Qi[y|b<<1].forEach(x);for(Qi[b<<0].forEach(x);++_<e-1;){for(m=-1,b=u[_*t+t]>=h,k=u[_*t]>=h,Qi[b<<1|k<<2].forEach(x);++m<t-1;)y=b,b=u[_*t+t+m+1]>=h,T=k,k=u[_*t+m+1]>=h,Qi[y|b<<1|k<<2|T<<3].forEach(x);Qi[b|k<<3].forEach(x)}for(m=-1,k=u[_*t]>=h,Qi[k<<2].forEach(x);++m<t-1;)T=k,k=u[_*t+m+1]>=h,Qi[k<<2|T<<3].forEach(x);Qi[k<<3].forEach(x);function x(A){var C=[A[0][0]+m,A[0][1]+_],L=[A[1][0]+m,A[1][1]+_],S=s(C),N=s(L),v,M;(v=p[S])?(M=d[N])?(delete p[v.end],delete d[M.start],v===M?(v.ring.push(L),f(v.ring)):d[v.start]=p[M.end]={start:v.start,end:M.end,ring:v.ring.concat(M.ring)}):(delete p[v.end],v.ring.push(L),p[v.end=N]=v):(v=d[N])?(M=p[S])?(delete d[v.start],delete p[M.end],v===M?(v.ring.push(L),f(v.ring)):d[M.start]=p[v.end]={start:M.start,end:v.end,ring:M.ring.concat(v.ring)}):(delete d[v.start],v.ring.unshift(C),d[v.start=S]=v):d[S]=p[N]={start:S,end:N,ring:[C,L]}}}function s(u){return u[0]*2+u[1]*(t+1)*4}function l(u,h,f){u.forEach(function(d){var p=d[0],m=d[1],_=p|0,y=m|0,b,k=h[y*t+_];p>0&&p<t&&_===p&&(b=h[y*t+_-1],d[0]=p+(f-b)/(k-b)-.5),m>0&&m<e&&y===m&&(b=h[(y-1)*t+_],d[1]=m+(f-b)/(k-b)-.5)})}return i.contour=a,i.size=function(u){if(!arguments.length)return[t,e];var h=Math.floor(u[0]),f=Math.floor(u[1]);if(!(h>=0&&f>=0))throw new Error("invalid size");return t=h,e=f,i},i.thresholds=function(u){return arguments.length?(n=typeof u=="function"?u:Array.isArray(u)?Aa(nT.call(u)):Aa(u),i):n},i.smooth=function(u){return arguments.length?(r=u?l:MF,i):r===l},i}function LF(t){return t[0]}function BF(t){return t[1]}function DF(){return 1}function NF(){var t=LF,e=BF,n=DF,r=960,i=500,a=20,o=2,s=a*3,l=r+s*2>>o,u=i+s*2>>o,h=Aa(20);function f(k){var T=new Float32Array(l*u),x=Math.pow(2,-o),A=-1;for(const R of k){var C=(t(R,++A,k)+s)*x,L=(e(R,A,k)+s)*x,S=+n(R,A,k);if(C>=0&&C<l&&L>=0&&L<u){var N=Math.floor(C),v=Math.floor(L),M=C-N-.5,w=L-v-.5;T[N+v*l]+=(1-M)*(1-w)*S,T[N+1+v*l]+=M*(1-w)*S,T[N+1+(v+1)*l]+=M*w*S,T[N+(v+1)*l]+=(1-M)*w*S}}return B9({data:T,width:l,height:u},a*x),T}function d(k){var T=f(k),x=h(T),A=Math.pow(2,2*o);return Array.isArray(x)||(x=Co(Number.MIN_VALUE,Ns(T)/A,x)),Cm().size([l,u]).thresholds(x.map(C=>C*A))(T).map((C,L)=>(C.value=+x[L],p(C)))}d.contours=function(k){var T=f(k),x=Cm().size([l,u]),A=Math.pow(2,2*o),C=L=>{L=+L;var S=p(x.contour(T,L*A));return S.value=L,S};return Object.defineProperty(C,"max",{get:()=>Ns(T)/A}),C};function p(k){return k.coordinates.forEach(m),k}function m(k){k.forEach(_)}function _(k){k.forEach(y)}function y(k){k[0]=k[0]*Math.pow(2,o)-s,k[1]=k[1]*Math.pow(2,o)-s}function b(){return s=a*3,l=r+s*2>>o,u=i+s*2>>o,d}return d.x=function(k){return arguments.length?(t=typeof k=="function"?k:Aa(+k),d):t},d.y=function(k){return arguments.length?(e=typeof k=="function"?k:Aa(+k),d):e},d.weight=function(k){return arguments.length?(n=typeof k=="function"?k:Aa(+k),d):n},d.size=function(k){if(!arguments.length)return[r,i];var T=+k[0],x=+k[1];if(!(T>=0&&x>=0))throw new Error("invalid size");return r=T,i=x,b()},d.cellSize=function(k){if(!arguments.length)return 1<<o;if(!((k=+k)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(k)/Math.LN2),b()},d.thresholds=function(k){return arguments.length?(h=typeof k=="function"?k:Array.isArray(k)?Aa(nT.call(k)):Aa(k),d):h},d.bandwidth=function(k){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((k=+k)>=0))throw new Error("invalid bandwidth");return a=(Math.sqrt(4*k*k+1)-1)/2,b()},d}const da=11102230246251565e-32,Yn=134217729,OF=(3+8*da)*da;function Zd(t,e,n,r,i){let a,o,s,l,u=e[0],h=r[0],f=0,d=0;h>u==h>-u?(a=u,u=e[++f]):(a=h,h=r[++d]);let p=0;if(f<t&&d<n)for(h>u==h>-u?(o=u+a,s=a-(o-u),u=e[++f]):(o=h+a,s=a-(o-h),h=r[++d]),a=o,s!==0&&(i[p++]=s);f<t&&d<n;)h>u==h>-u?(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=e[++f]):(o=a+h,l=o-a,s=a-(o-l)+(h-l),h=r[++d]),a=o,s!==0&&(i[p++]=s);for(;f<t;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=e[++f],a=o,s!==0&&(i[p++]=s);for(;d<n;)o=a+h,l=o-a,s=a-(o-l)+(h-l),h=r[++d],a=o,s!==0&&(i[p++]=s);return(a!==0||p===0)&&(i[p++]=a),p}function RF(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function eu(t){return new Float64Array(t)}const IF=(3+16*da)*da,FF=(2+12*da)*da,$F=(9+64*da)*da*da,hs=eu(4),c_=eu(8),l_=eu(12),u_=eu(16),Xn=eu(4);function PF(t,e,n,r,i,a,o){let s,l,u,h,f,d,p,m,_,y,b,k,T,x,A,C,L,S;const N=t-i,v=n-i,M=e-a,w=r-a;x=N*w,d=Yn*N,p=d-(d-N),m=N-p,d=Yn*w,_=d-(d-w),y=w-_,A=m*y-(x-p*_-m*_-p*y),C=M*v,d=Yn*M,p=d-(d-M),m=M-p,d=Yn*v,_=d-(d-v),y=v-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,hs[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,hs[1]=T-(b+f)+(f-C),S=k+b,f=S-k,hs[2]=k-(S-f)+(b-f),hs[3]=S;let R=RF(4,hs),B=FF*o;if(R>=B||-R>=B||(f=t-N,s=t-(N+f)+(f-i),f=n-v,u=n-(v+f)+(f-i),f=e-M,l=e-(M+f)+(f-a),f=r-w,h=r-(w+f)+(f-a),s===0&&l===0&&u===0&&h===0)||(B=$F*o+OF*Math.abs(R),R+=N*h+w*s-(M*u+v*l),R>=B||-R>=B))return R;x=s*w,d=Yn*s,p=d-(d-s),m=s-p,d=Yn*w,_=d-(d-w),y=w-_,A=m*y-(x-p*_-m*_-p*y),C=l*v,d=Yn*l,p=d-(d-l),m=l-p,d=Yn*v,_=d-(d-v),y=v-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,Xn[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,Xn[1]=T-(b+f)+(f-C),S=k+b,f=S-k,Xn[2]=k-(S-f)+(b-f),Xn[3]=S;const $=Zd(4,hs,4,Xn,c_);x=N*h,d=Yn*N,p=d-(d-N),m=N-p,d=Yn*h,_=d-(d-h),y=h-_,A=m*y-(x-p*_-m*_-p*y),C=M*u,d=Yn*M,p=d-(d-M),m=M-p,d=Yn*u,_=d-(d-u),y=u-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,Xn[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,Xn[1]=T-(b+f)+(f-C),S=k+b,f=S-k,Xn[2]=k-(S-f)+(b-f),Xn[3]=S;const F=Zd($,c_,4,Xn,l_);x=s*h,d=Yn*s,p=d-(d-s),m=s-p,d=Yn*h,_=d-(d-h),y=h-_,A=m*y-(x-p*_-m*_-p*y),C=l*u,d=Yn*l,p=d-(d-l),m=l-p,d=Yn*u,_=d-(d-u),y=u-_,L=m*y-(C-p*_-m*_-p*y),b=A-L,f=A-b,Xn[0]=A-(b+f)+(f-L),k=x+b,f=k-x,T=x-(k-f)+(b-f),b=T-C,f=T-b,Xn[1]=T-(b+f)+(f-C),S=k+b,f=S-k,Xn[2]=k-(S-f)+(b-f),Xn[3]=S;const Q=Zd(F,l_,4,Xn,u_);return u_[Q-1]}function Iu(t,e,n,r,i,a){const o=(e-a)*(n-i),s=(t-i)*(r-a),l=o-s;if(o===0||s===0||o>0!=s>0)return l;const u=Math.abs(o+s);return Math.abs(l)>=IF*u?l:-PF(t,e,n,r,i,a,u)}const h_=Math.pow(2,-52),Fu=new Uint32Array(512);class Gh{static from(e,n=HF,r=WF){const i=e.length,a=new Float64Array(i*2);for(let o=0;o<i;o++){const s=e[o];a[2*o]=n(s),a[2*o+1]=r(s)}return new Gh(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:a}=this,o=e.length>>1;let s=1/0,l=1/0,u=-1/0,h=-1/0;for(let v=0;v<o;v++){const M=e[2*v],w=e[2*v+1];M<s&&(s=M),w<l&&(l=w),M>u&&(u=M),w>h&&(h=w),this._ids[v]=v}const f=(s+u)/2,d=(l+h)/2;let p=1/0,m,_,y;for(let v=0;v<o;v++){const M=Qd(f,d,e[2*v],e[2*v+1]);M<p&&(m=v,p=M)}const b=e[2*m],k=e[2*m+1];p=1/0;for(let v=0;v<o;v++){if(v===m)continue;const M=Qd(b,k,e[2*v],e[2*v+1]);M<p&&M>0&&(_=v,p=M)}let T=e[2*_],x=e[2*_+1],A=1/0;for(let v=0;v<o;v++){if(v===m||v===_)continue;const M=jF(b,k,T,x,e[2*v],e[2*v+1]);M<A&&(y=v,A=M)}let C=e[2*y],L=e[2*y+1];if(A===1/0){for(let w=0;w<o;w++)this._dists[w]=e[2*w]-e[0]||e[2*w+1]-e[1];ms(this._ids,this._dists,0,o-1);const v=new Uint32Array(o);let M=0;for(let w=0,R=-1/0;w<o;w++){const B=this._ids[w];this._dists[B]>R&&(v[M++]=B,R=this._dists[B])}this.hull=v.subarray(0,M),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Iu(b,k,T,x,C,L)<0){const v=_,M=T,w=x;_=y,T=C,x=L,y=v,C=M,L=w}const S=UF(b,k,T,x,C,L);this._cx=S.x,this._cy=S.y;for(let v=0;v<o;v++)this._dists[v]=Qd(e[2*v],e[2*v+1],S.x,S.y);ms(this._ids,this._dists,0,o-1),this._hullStart=m;let N=3;r[m]=n[y]=_,r[_]=n[m]=y,r[y]=n[_]=m,i[m]=0,i[_]=1,i[y]=2,a.fill(-1),a[this._hashKey(b,k)]=m,a[this._hashKey(T,x)]=_,a[this._hashKey(C,L)]=y,this.trianglesLen=0,this._addTriangle(m,_,y,-1,-1,-1);for(let v=0,M,w;v<this._ids.length;v++){const R=this._ids[v],B=e[2*R],$=e[2*R+1];if(v>0&&Math.abs(B-M)<=h_&&Math.abs($-w)<=h_||(M=B,w=$,R===m||R===_||R===y))continue;let F=0;for(let rt=0,lt=this._hashKey(B,$);rt<this._hashSize&&(F=a[(lt+rt)%this._hashSize],!(F!==-1&&F!==r[F]));rt++);F=n[F];let Q=F,nt;for(;nt=r[Q],Iu(B,$,e[2*Q],e[2*Q+1],e[2*nt],e[2*nt+1])>=0;)if(Q=nt,Q===F){Q=-1;break}if(Q===-1)continue;let z=this._addTriangle(Q,R,r[Q],-1,-1,i[Q]);i[R]=this._legalize(z+2),i[Q]=z,N++;let Y=r[Q];for(;nt=r[Y],Iu(B,$,e[2*Y],e[2*Y+1],e[2*nt],e[2*nt+1])<0;)z=this._addTriangle(Y,R,nt,i[R],-1,i[Y]),i[R]=this._legalize(z+2),r[Y]=Y,N--,Y=nt;if(Q===F)for(;nt=n[Q],Iu(B,$,e[2*nt],e[2*nt+1],e[2*Q],e[2*Q+1])<0;)z=this._addTriangle(nt,R,Q,-1,i[Q],i[nt]),this._legalize(z+2),i[nt]=z,r[Q]=Q,N--,Q=nt;this._hullStart=n[R]=Q,r[Q]=n[Y]=R,r[R]=Y,a[this._hashKey(B,$)]=R,a[this._hashKey(e[2*Q],e[2*Q+1])]=Q}this.hull=new Uint32Array(N);for(let v=0,M=this._hullStart;v<N;v++)this.hull[v]=M,M=r[M];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(YF(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let a=0,o=0;for(;;){const s=r[e],l=e-e%3;if(o=l+(e+2)%3,s===-1){if(a===0)break;e=Fu[--a];continue}const u=s-s%3,h=l+(e+1)%3,f=u+(s+2)%3,d=n[o],p=n[e],m=n[h],_=n[f];if(zF(i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1],i[2*_],i[2*_+1])){n[e]=_,n[s]=d;const y=r[f];if(y===-1){let k=this._hullStart;do{if(this._hullTri[k]===f){this._hullTri[k]=e;break}k=this._hullPrev[k]}while(k!==this._hullStart)}this._link(e,y),this._link(s,r[o]),this._link(o,f);const b=u+(s+1)%3;a<Fu.length&&(Fu[a++]=b)}else{if(a===0)break;e=Fu[--a]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,a,o){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,a),this._link(s+2,o),this.trianglesLen+=3,s}}function YF(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function Qd(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function zF(t,e,n,r,i,a,o,s){const l=t-o,u=e-s,h=n-o,f=r-s,d=i-o,p=a-s,m=l*l+u*u,_=h*h+f*f,y=d*d+p*p;return l*(f*y-_*p)-u*(h*y-_*d)+m*(h*p-f*d)<0}function jF(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,u=a-e,h=o*o+s*s,f=l*l+u*u,d=.5/(o*u-s*l),p=(u*h-s*f)*d,m=(o*f-l*h)*d;return p*p+m*m}function UF(t,e,n,r,i,a){const o=n-t,s=r-e,l=i-t,u=a-e,h=o*o+s*s,f=l*l+u*u,d=.5/(o*u-s*l),p=t+(u*h-s*f)*d,m=e+(o*f-l*h)*d;return{x:p,y:m}}function ms(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const a=t[i],o=e[a];let s=i-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{const i=n+r>>1;let a=n+1,o=r;Ec(t,i,a),e[t[n]]>e[t[r]]&&Ec(t,n,r),e[t[a]]>e[t[r]]&&Ec(t,a,r),e[t[n]]>e[t[a]]&&Ec(t,n,a);const s=t[a],l=e[s];for(;;){do a++;while(e[t[a]]<l);do o--;while(e[t[o]]>l);if(o<a)break;Ec(t,a,o)}t[n+1]=t[o],t[o]=s,r-a+1>=o-n?(ms(t,e,a,r),ms(t,e,n,o-1)):(ms(t,e,n,o-1),ms(t,e,a,r))}}function Ec(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function HF(t){return t[0]}function WF(t){return t[1]}const d_=1e-6;class vo{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,a=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>d_||Math.abs(this._y1-a)>d_)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Sm{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class rT{constructor(e,[n,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this,a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let p=0,m=0,_=r.length,y,b;p<_;p+=3,m+=2){const k=r[p]*2,T=r[p+1]*2,x=r[p+2]*2,A=e[k],C=e[k+1],L=e[T],S=e[T+1],N=e[x],v=e[x+1],M=L-A,w=S-C,R=N-A,B=v-C,$=(M*B-w*R)*2;if(Math.abs($)<1e-9){let F=1e9;const Q=r[0]*2;F*=Math.sign((e[Q]-A)*B-(e[Q+1]-C)*R),y=(A+N)/2-F*B,b=(C+v)/2+F*R}else{const F=1/$,Q=M*M+w*w,nt=R*R+B*B;y=A+(B*Q-w*nt)*F,b=C+(M*nt-R*Q)*F}a[m]=y,a[m+1]=b}let o=n[n.length-1],s,l=o*4,u,h=e[2*o],f,d=e[2*o+1];i.fill(0);for(let p=0;p<n.length;++p)o=n[p],s=l,u=h,f=d,l=o*4,h=e[2*o],d=e[2*o+1],i[s+2]=i[l]=f-d,i[s+3]=i[l+1]=h-u}render(e){const n=e==null?e=new vo:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:o,vectors:s}=this;if(a.length<=1)return null;for(let h=0,f=r.length;h<f;++h){const d=r[h];if(d<h)continue;const p=Math.floor(h/3)*2,m=Math.floor(d/3)*2,_=o[p],y=o[p+1],b=o[m],k=o[m+1];this._renderSegment(_,y,b,k,e)}let l,u=a[a.length-1];for(let h=0;h<a.length;++h){l=u,u=a[h];const f=Math.floor(i[u]/3)*2,d=o[f],p=o[f+1],m=l*4,_=this._project(d,p,s[m+2],s[m+3]);_&&this._renderSegment(d,p,_[0],_[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new vo:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new vo:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new Sm;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,a){let o;const s=this._regioncode(e,n),l=this._regioncode(r,i);s===0&&l===0?(a.moveTo(e,n),a.lineTo(r,i)):(o=this._clipSegment(e,n,r,i,s,l))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){t:for(let a=0,o=n.length;a<o;a+=2)for(let s=0,l=i.length;s<l;s+=2)if(n[a]==i[s]&&n[a+1]==i[s+1]&&n[(a+2)%o]==i[(s+l-2)%l]&&n[(a+3)%o]==i[(s+l-1)%l]){yield r;break t}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,o=r[e];if(o===-1)return null;const s=[];let l=o;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,a[l]!==e)break;l=i[l]}while(l!==o&&l!==-1);return s}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n)}_clipFinite(e,n){const r=n.length;let i=null,a,o,s=n[r-2],l=n[r-1],u,h=this._regioncode(s,l),f,d=0;for(let p=0;p<r;p+=2)if(a=s,o=l,s=n[p],l=n[p+1],u=h,h=this._regioncode(s,l),u===0&&h===0)f=d,d=0,i?i.push(s,l):i=[s,l];else{let m,_,y,b,k;if(u===0){if((m=this._clipSegment(a,o,s,l,u,h))===null)continue;[_,y,b,k]=m}else{if((m=this._clipSegment(s,l,a,o,h,u))===null)continue;[b,k,_,y]=m,f=d,d=this._edgecode(_,y),f&&d&&this._edge(e,f,d,i,i.length),i?i.push(_,y):i=[_,y]}f=d,d=this._edgecode(b,k),f&&d&&this._edge(e,f,d,i,i.length),i?i.push(b,k):i=[b,k]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(e,f,d,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,a,o){for(;;){if(a===0&&o===0)return[e,n,r,i];if(a&o)return null;let s,l,u=a||o;u&8?(s=e+(r-e)*(this.ymax-n)/(i-n),l=this.ymax):u&4?(s=e+(r-e)*(this.ymin-n)/(i-n),l=this.ymin):u&2?(l=n+(i-n)*(this.xmax-e)/(r-e),s=this.xmax):(l=n+(i-n)*(this.xmin-e)/(r-e),s=this.xmin),a?(e=s,n=l,a=this._regioncode(e,n)):(r=s,i=l,o=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,a,o){let s=Array.from(n),l;if((l=this._project(s[0],s[1],r,i))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],a,o))&&s.push(l[0],l[1]),s=this._clipFinite(e,s))for(let u=0,h=s.length,f,d=this._edgecode(s[h-2],s[h-1]);u<h;u+=2)f=d,d=this._edgecode(s[u],s[u+1]),f&&d&&(u=this._edge(e,f,d,s,u),h=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,n,r,i,a){for(;n!==r;){let o,s;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,s=this.ymin;break}(i[a]!==o||i[a+1]!==s)&&this.contains(e,o,s)&&(i.splice(a,0,o,s),a+=2)}if(i.length>4)for(let o=0;o<i.length;o+=2){const s=(o+2)%i.length,l=(o+4)%i.length;(i[o]===i[s]&&i[s]===i[l]||i[o+1]===i[s+1]&&i[s+1]===i[l+1])&&(i.splice(s,2),o-=2)}return a}_project(e,n,r,i){let a=1/0,o,s,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<a&&(l=this.ymin,s=e+(a=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<a&&(l=this.ymax,s=e+(a=o)*r)}if(r>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/r)<a&&(s=this.xmax,l=n+(a=o)*i)}else if(r<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/r)<a&&(s=this.xmin,l=n+(a=o)*i)}return[s,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const GF=2*Math.PI,ds=Math.pow;function VF(t){return t[0]}function qF(t){return t[1]}function XF(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],o=2*e[r+2];if((n[o]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function KF(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class s4{static from(e,n=VF,r=qF,i){return new s4("length"in e?ZF(e,n,r,i):Float64Array.from(QF(e,n,r,i)))}constructor(e){this._delaunator=new Gh(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&XF(e)){this.collinear=Int32Array.from({length:n.length/2},(d,p)=>p).sort((d,p)=>n[2*d]-n[2*p]||n[2*d+1]-n[2*p+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],h=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(h[3]-h[1],h[2]-h[0]);for(let d=0,p=n.length/2;d<p;++d){const m=KF(n[2*d],n[2*d+1],f);n[2*d]=m[0],n[2*d+1]=m[1]}this._delaunator=new Gh(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const h=a[l%3===2?l-2:l+1];(r[l]===-1||o[h]===-1)&&(o[h]=l)}for(let l=0,u=i.length;l<u;++l)s[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new rT(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:a,triangles:o,collinear:s}=this;if(s){const f=s.indexOf(e);f>0&&(yield s[f-1]),f<s.length-1&&(yield s[f+1]);return}const l=n[e];if(l===-1)return;let u=l,h=-1;do{if(yield h=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=a[u],u===-1){const f=r[(i[e]+1)%r.length];f!==h&&(yield f);return}}while(u!==l)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let a;for(;(a=this._step(r,e,n))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,n,r){const{inedges:i,hull:a,_hullIndex:o,halfedges:s,triangles:l,points:u}=this;if(i[e]===-1||!u.length)return(e+1)%(u.length>>1);let h=e,f=ds(n-u[e*2],2)+ds(r-u[e*2+1],2);const d=i[e];let p=d;do{let m=l[p];const _=ds(n-u[m*2],2)+ds(r-u[m*2+1],2);if(_<f&&(f=_,h=m),p=p%3===2?p-2:p+1,l[p]!==e)break;if(p=s[p],p===-1){if(p=a[(o[e]+1)%a.length],p!==m&&ds(n-u[p*2],2)+ds(r-u[p*2+1],2)<f)return p;break}}while(p!==d);return h}render(e){const n=e==null?e=new vo:void 0,{points:r,halfedges:i,triangles:a}=this;for(let o=0,s=i.length;o<s;++o){const l=i[o];if(l<o)continue;const u=a[o]*2,h=a[l]*2;e.moveTo(r[u],r[u+1]),e.lineTo(r[h],r[h+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const r=e==null?e=new vo:void 0,{points:i}=this;for(let a=0,o=i.length;a<o;a+=2){const s=i[a],l=i[a+1];e.moveTo(s+n,l),e.arc(s,l,n,0,GF)}return r&&r.value()}renderHull(e){const n=e==null?e=new vo:void 0,{hull:r,points:i}=this,a=r[0]*2,o=r.length;e.moveTo(i[a],i[a+1]);for(let s=1;s<o;++s){const l=2*r[s];e.lineTo(i[l],i[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new Sm;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new vo:void 0,{points:i,triangles:a}=this,o=a[e*=3]*2,s=a[e+1]*2,l=a[e+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new Sm;return this.renderTriangle(e,n),n.value()}}function ZF(t,e,n,r){const i=t.length,a=new Float64Array(i*2);for(let o=0;o<i;++o){const s=t[o];a[o*2]=e.call(r,s,o,t),a[o*2+1]=n.call(r,s,o,t)}return a}function*QF(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}var f_={},Jd={},tf=34,Cc=10,ef=13;function iT(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function JF(t,e){var n=iT(t);return function(r,i){return e(n(r),i,t)}}function p_(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function dr(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function t$(t){return t<0?"-"+dr(-t,6):t>9999?"+"+dr(t,6):dr(t,4)}function e$(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":t$(t.getUTCFullYear())+"-"+dr(t.getUTCMonth()+1,2)+"-"+dr(t.getUTCDate(),2)+(i?"T"+dr(e,2)+":"+dr(n,2)+":"+dr(r,2)+"."+dr(i,3)+"Z":r?"T"+dr(e,2)+":"+dr(n,2)+":"+dr(r,2)+"Z":n||e?"T"+dr(e,2)+":"+dr(n,2)+"Z":"")}function x0(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var p,m,_=i(f,function(y,b){if(p)return p(y,b-1);m=y,p=d?JF(y,d):iT(y)});return _.columns=m||[],_}function i(f,d){var p=[],m=f.length,_=0,y=0,b,k=m<=0,T=!1;f.charCodeAt(m-1)===Cc&&--m,f.charCodeAt(m-1)===ef&&--m;function x(){if(k)return Jd;if(T)return T=!1,f_;var C,L=_,S;if(f.charCodeAt(L)===tf){for(;_++<m&&f.charCodeAt(_)!==tf||f.charCodeAt(++_)===tf;);return(C=_)>=m?k=!0:(S=f.charCodeAt(_++))===Cc?T=!0:S===ef&&(T=!0,f.charCodeAt(_)===Cc&&++_),f.slice(L+1,C-1).replace(/""/g,'"')}for(;_<m;){if((S=f.charCodeAt(C=_++))===Cc)T=!0;else if(S===ef)T=!0,f.charCodeAt(_)===Cc&&++_;else if(S!==n)continue;return f.slice(L,C)}return k=!0,f.slice(L,m)}for(;(b=x())!==Jd;){for(var A=[];b!==f_&&b!==Jd;)A.push(b),b=x();d&&(A=d(A,y++))==null||p.push(A)}return p}function a(f,d){return f.map(function(p){return d.map(function(m){return h(p[m])}).join(t)})}function o(f,d){return d==null&&(d=p_(f)),[d.map(h).join(t)].concat(a(f,d)).join(`
`)}function s(f,d){return d==null&&(d=p_(f)),a(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(h).join(t)}function h(f){return f==null?"":f instanceof Date?e$(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:h}}var Ho=x0(","),aT=Ho.parse,n$=Ho.parseRows,r$=Ho.format,i$=Ho.formatBody,a$=Ho.formatRows,o$=Ho.formatRow,s$=Ho.formatValue,Wo=x0("	"),oT=Wo.parse,c$=Wo.parseRows,l$=Wo.format,u$=Wo.formatBody,h$=Wo.formatRows,d$=Wo.formatRow,f$=Wo.formatValue;function p$(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))g$&&!!i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const g$=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function y$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function m$(t,e){return fetch(t,e).then(y$)}function b$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function _$(t,e){return fetch(t,e).then(b$)}function v$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function k0(t,e){return fetch(t,e).then(v$)}function sT(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),k0(e,n).then(function(i){return t(i,r)})}}function x$(t,e,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=x0(t);return k0(e,n).then(function(a){return i.parse(a,r)})}var k$=sT(aT),w$=sT(oT);function T$(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function E$(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function C$(t,e){return fetch(t,e).then(E$)}function c4(t){return(e,n)=>k0(e,n).then(r=>new DOMParser().parseFromString(r,t))}const S$=c4("application/xml");var A$=c4("text/html"),M$=c4("image/svg+xml");function L$(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,o=n.length,s,l=0,u=0;for(a=0;a<o;++a)s=n[a],l+=s.x,u+=s.y;for(l=(l/o-t)*r,u=(u/o-e)*r,a=0;a<o;++a)s=n[a],s.x-=l,s.y-=u}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function B$(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return cT(this.cover(e,n),e,n,t)}function cT(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,o={data:r},s=t._x0,l=t._y0,u=t._x1,h=t._y1,f,d,p,m,_,y,b,k;if(!a)return t._root=o,t;for(;a.length;)if((_=e>=(f=(s+u)/2))?s=f:u=f,(y=n>=(d=(l+h)/2))?l=d:h=d,i=a,!(a=a[b=y<<1|_]))return i[b]=o,t;if(p=+t._x.call(null,a.data),m=+t._y.call(null,a.data),e===p&&n===m)return o.next=a,i?i[b]=o:t._root=o,t;do i=i?i[b]=new Array(4):t._root=new Array(4),(_=e>=(f=(s+u)/2))?s=f:u=f,(y=n>=(d=(l+h)/2))?l=d:h=d;while((b=y<<1|_)===(k=(m>=d)<<1|p>=f));return i[k]=a,i[b]=o,t}function D$(t){var e,n,r=t.length,i,a,o=new Array(r),s=new Array(r),l=1/0,u=1/0,h=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=i,s[n]=a,i<l&&(l=i),i>h&&(h=i),a<u&&(u=a),a>f&&(f=a));if(l>h||u>f)return this;for(this.cover(l,u).cover(h,f),n=0;n<r;++n)cT(this,o[n],s[n],t[n]);return this}function N$(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o=i-n||1,s=this._root,l,u;n>t||t>=i||r>e||e>=a;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=n+o,a=r+o;break;case 1:n=i-o,a=r+o;break;case 2:i=n+o,r=a-o;break;case 3:n=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function O$(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function R$(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function tr(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function I$(t,e,n){var r,i=this._x0,a=this._y0,o,s,l,u,h=this._x1,f=this._y1,d=[],p=this._root,m,_;for(p&&d.push(new tr(p,i,a,h,f)),n==null?n=1/0:(i=t-n,a=e-n,h=t+n,f=e+n,n*=n);m=d.pop();)if(!(!(p=m.node)||(o=m.x0)>h||(s=m.y0)>f||(l=m.x1)<i||(u=m.y1)<a))if(p.length){var y=(o+l)/2,b=(s+u)/2;d.push(new tr(p[3],y,b,l,u),new tr(p[2],o,b,y,u),new tr(p[1],y,s,l,b),new tr(p[0],o,s,y,b)),(_=(e>=b)<<1|t>=y)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-_],d[d.length-1-_]=m)}else{var k=t-+this._x.call(null,p.data),T=e-+this._y.call(null,p.data),x=k*k+T*T;if(x<n){var A=Math.sqrt(n=x);i=t-A,a=e-A,h=t+A,f=e+A,r=p.data}}return r}function F$(t){if(isNaN(h=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,h,f,d,p,m,_,y,b;if(!n)return this;if(n.length)for(;;){if((m=h>=(d=(o+l)/2))?o=d:l=d,(_=f>=(p=(s+u)/2))?s=p:u=p,e=n,!(n=n[y=_<<1|m]))return this;if(!n.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(r=e,b=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[y]=a:delete e[y],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=a,this)}function $$(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function P$(){return this._root}function Y$(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function z$(t){var e=[],n,r=this._root,i,a,o,s,l;for(r&&e.push(new tr(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&r.length){var u=(a+s)/2,h=(o+l)/2;(i=r[3])&&e.push(new tr(i,u,h,s,l)),(i=r[2])&&e.push(new tr(i,a,h,u,l)),(i=r[1])&&e.push(new tr(i,u,o,s,h)),(i=r[0])&&e.push(new tr(i,a,o,u,h))}return this}function j$(t){var e=[],n=[],r;for(this._root&&e.push(new tr(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.x1,u=r.y1,h=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new tr(a,o,s,h,f)),(a=i[1])&&e.push(new tr(a,h,s,l,f)),(a=i[2])&&e.push(new tr(a,o,f,h,u)),(a=i[3])&&e.push(new tr(a,h,f,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function U$(t){return t[0]}function H$(t){return arguments.length?(this._x=t,this):this._x}function W$(t){return t[1]}function G$(t){return arguments.length?(this._y=t,this):this._y}function w0(t,e,n){var r=new l4(e==null?U$:e,n==null?W$:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function l4(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function g_(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ur=w0.prototype=l4.prototype;ur.copy=function(){var t=new l4(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=g_(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=g_(r));return t};ur.add=B$;ur.addAll=D$;ur.cover=N$;ur.data=O$;ur.extent=R$;ur.find=I$;ur.remove=F$;ur.removeAll=$$;ur.root=P$;ur.size=Y$;ur.visit=z$;ur.visitAfter=j$;ur.x=H$;ur.y=G$;function kn(t){return function(){return t}}function Ra(t){return(t()-.5)*1e-6}function V$(t){return t.x+t.vx}function q$(t){return t.y+t.vy}function X$(t){var e,n,r,i=1,a=1;typeof t!="function"&&(t=kn(t==null?1:+t));function o(){for(var u,h=e.length,f,d,p,m,_,y,b=0;b<a;++b)for(f=w0(e,V$,q$).visitAfter(s),u=0;u<h;++u)d=e[u],_=n[d.index],y=_*_,p=d.x+d.vx,m=d.y+d.vy,f.visit(k);function k(T,x,A,C,L){var S=T.data,N=T.r,v=_+N;if(S){if(S.index>d.index){var M=p-S.x-S.vx,w=m-S.y-S.vy,R=M*M+w*w;R<v*v&&(M===0&&(M=Ra(r),R+=M*M),w===0&&(w=Ra(r),R+=w*w),R=(v-(R=Math.sqrt(R)))/R*i,d.vx+=(M*=R)*(v=(N*=N)/(y+N)),d.vy+=(w*=R)*v,S.vx-=M*(v=1-v),S.vy-=w*v)}return}return x>p+v||C<p-v||A>m+v||L<m-v}}function s(u){if(u.data)return u.r=n[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function l(){if(e){var u,h=e.length,f;for(n=new Array(h),u=0;u<h;++u)f=e[u],n[f.index]=+t(f,u,e)}}return o.initialize=function(u,h){e=u,r=h,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:kn(+u),l(),o):t},o}function K$(t){return t.index}function y_(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Z$(t){var e=K$,n=f,r,i=kn(30),a,o,s,l,u,h=1;t==null&&(t=[]);function f(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function d(y){for(var b=0,k=t.length;b<h;++b)for(var T=0,x,A,C,L,S,N,v;T<k;++T)x=t[T],A=x.source,C=x.target,L=C.x+C.vx-A.x-A.vx||Ra(u),S=C.y+C.vy-A.y-A.vy||Ra(u),N=Math.sqrt(L*L+S*S),N=(N-a[T])/N*y*r[T],L*=N,S*=N,C.vx-=L*(v=l[T]),C.vy-=S*v,A.vx+=L*(v=1-v),A.vy+=S*v}function p(){if(o){var y,b=o.length,k=t.length,T=new Map(o.map((A,C)=>[e(A,C,o),A])),x;for(y=0,s=new Array(b);y<k;++y)x=t[y],x.index=y,typeof x.source!="object"&&(x.source=y_(T,x.source)),typeof x.target!="object"&&(x.target=y_(T,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(y=0,l=new Array(k);y<k;++y)x=t[y],l[y]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);r=new Array(k),m(),a=new Array(k),_()}}function m(){if(o)for(var y=0,b=t.length;y<b;++y)r[y]=+n(t[y],y,t)}function _(){if(o)for(var y=0,b=t.length;y<b;++y)a[y]=+i(t[y],y,t)}return d.initialize=function(y,b){o=y,u=b,p()},d.links=function(y){return arguments.length?(t=y,p(),d):t},d.id=function(y){return arguments.length?(e=y,d):e},d.iterations=function(y){return arguments.length?(h=+y,d):h},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:kn(+y),m(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:kn(+y),_(),d):i},d}const Q$=1664525,J$=1013904223,m_=4294967296;function tP(){let t=1;return()=>(t=(Q$*t+J$)%m_)/m_}function eP(t){return t.x}function nP(t){return t.y}var rP=10,iP=Math.PI*(3-Math.sqrt(5));function aP(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=_0(f),u=jo("tick","end"),h=tP();t==null&&(t=[]);function f(){d(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function d(_){var y,b=t.length,k;_===void 0&&(_=1);for(var T=0;T<_;++T)for(n+=(a-n)*i,s.forEach(function(x){x(n)}),y=0;y<b;++y)k=t[y],k.fx==null?k.x+=k.vx*=o:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=o:(k.y=k.fy,k.vy=0);return e}function p(){for(var _=0,y=t.length,b;_<y;++_){if(b=t[_],b.index=_,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var k=rP*Math.sqrt(.5+_),T=_*iP;b.x=k*Math.cos(T),b.y=k*Math.sin(T)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function m(_){return _.initialize&&_.initialize(t,h),_}return p(),e={tick:d,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(_){return arguments.length?(t=_,p(),s.forEach(m),e):t},alpha:function(_){return arguments.length?(n=+_,e):n},alphaMin:function(_){return arguments.length?(r=+_,e):r},alphaDecay:function(_){return arguments.length?(i=+_,e):+i},alphaTarget:function(_){return arguments.length?(a=+_,e):a},velocityDecay:function(_){return arguments.length?(o=1-_,e):1-o},randomSource:function(_){return arguments.length?(h=_,s.forEach(m),e):h},force:function(_,y){return arguments.length>1?(y==null?s.delete(_):s.set(_,m(y)),e):s.get(_)},find:function(_,y,b){var k=0,T=t.length,x,A,C,L,S;for(b==null?b=1/0:b*=b,k=0;k<T;++k)L=t[k],x=_-L.x,A=y-L.y,C=x*x+A*A,C<b&&(S=L,b=C);return S},on:function(_,y){return arguments.length>1?(u.on(_,y),e):u.on(_)}}}function oP(){var t,e,n,r,i=kn(-30),a,o=1,s=1/0,l=.81;function u(p){var m,_=t.length,y=w0(t,eP,nP).visitAfter(f);for(r=p,m=0;m<_;++m)e=t[m],y.visit(d)}function h(){if(t){var p,m=t.length,_;for(a=new Array(m),p=0;p<m;++p)_=t[p],a[_.index]=+i(_,p,t)}}function f(p){var m=0,_,y,b=0,k,T,x;if(p.length){for(k=T=x=0;x<4;++x)(_=p[x])&&(y=Math.abs(_.value))&&(m+=_.value,b+=y,k+=y*_.x,T+=y*_.y);p.x=k/b,p.y=T/b}else{_=p,_.x=_.data.x,_.y=_.data.y;do m+=a[_.data.index];while(_=_.next)}p.value=m}function d(p,m,_,y){if(!p.value)return!0;var b=p.x-e.x,k=p.y-e.y,T=y-m,x=b*b+k*k;if(T*T/l<x)return x<s&&(b===0&&(b=Ra(n),x+=b*b),k===0&&(k=Ra(n),x+=k*k),x<o&&(x=Math.sqrt(o*x)),e.vx+=b*p.value*r/x,e.vy+=k*p.value*r/x),!0;if(!(p.length||x>=s)){(p.data!==e||p.next)&&(b===0&&(b=Ra(n),x+=b*b),k===0&&(k=Ra(n),x+=k*k),x<o&&(x=Math.sqrt(o*x)));do p.data!==e&&(T=a[p.data.index]*r/x,e.vx+=b*T,e.vy+=k*T);while(p=p.next)}}return u.initialize=function(p,m){t=p,n=m,h()},u.strength=function(p){return arguments.length?(i=typeof p=="function"?p:kn(+p),h(),u):i},u.distanceMin=function(p){return arguments.length?(o=p*p,u):Math.sqrt(o)},u.distanceMax=function(p){return arguments.length?(s=p*p,u):Math.sqrt(s)},u.theta=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u}function sP(t,e,n){var r,i=kn(.1),a,o;typeof t!="function"&&(t=kn(+t)),e==null&&(e=0),n==null&&(n=0);function s(u){for(var h=0,f=r.length;h<f;++h){var d=r[h],p=d.x-e||1e-6,m=d.y-n||1e-6,_=Math.sqrt(p*p+m*m),y=(o[h]-_)*a[h]*u/_;d.vx+=p*y,d.vy+=m*y}}function l(){if(r){var u,h=r.length;for(a=new Array(h),o=new Array(h),u=0;u<h;++u)o[u]=+t(r[u],u,r),a[u]=isNaN(o[u])?0:+i(r[u],u,r)}}return s.initialize=function(u){r=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:kn(+u),l(),s):i},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:kn(+u),l(),s):t},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(n=+u,s):n},s}function cP(t){var e=kn(.1),n,r,i;typeof t!="function"&&(t=kn(t==null?0:+t));function a(s){for(var l=0,u=n.length,h;l<u;++l)h=n[l],h.vx+=(i[l]-h.x)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:kn(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:kn(+s),o(),a):t},a}function lP(t){var e=kn(.1),n,r,i;typeof t!="function"&&(t=kn(t==null?0:+t));function a(s){for(var l=0,u=n.length,h;l<u;++l)h=n[l],h.vy+=(i[l]-h.y)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:kn(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:kn(+s),o(),a):t},a}function uP(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vh(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function $s(t){return t=Vh(Math.abs(t)),t?t[1]:NaN}function hP(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function dP(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var fP=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ps(t){if(!(e=fP.exec(t)))throw new Error("invalid format: "+t);var e;return new T0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ps.prototype=T0.prototype;function T0(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}T0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pP(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var lT;function gP(t,e){var n=Vh(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(lT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Vh(t,Math.max(0,e+a-1))[0]}function b_(t,e){var n=Vh(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const __={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uP,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>b_(t*100,e),r:b_,s:gP,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function v_(t){return t}var x_=Array.prototype.map,k_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function uT(t){var e=t.grouping===void 0||t.thousands===void 0?v_:hP(x_.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?v_:dP(x_.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Ps(f);var d=f.fill,p=f.align,m=f.sign,_=f.symbol,y=f.zero,b=f.width,k=f.comma,T=f.precision,x=f.trim,A=f.type;A==="n"?(k=!0,A="g"):__[A]||(T===void 0&&(T=12),x=!0,A="g"),(y||d==="0"&&p==="=")&&(y=!0,d="0",p="=");var C=_==="$"?n:_==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",L=_==="$"?r:/[%p]/.test(A)?o:"",S=__[A],N=/[defgprs%]/.test(A);T=T===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function v(M){var w=C,R=L,B,$,F;if(A==="c")R=S(M)+R,M="";else{M=+M;var Q=M<0||1/M<0;if(M=isNaN(M)?l:S(Math.abs(M),T),x&&(M=pP(M)),Q&&+M==0&&m!=="+"&&(Q=!1),w=(Q?m==="("?m:s:m==="-"||m==="("?"":m)+w,R=(A==="s"?k_[8+lT/3]:"")+R+(Q&&m==="("?")":""),N){for(B=-1,$=M.length;++B<$;)if(F=M.charCodeAt(B),48>F||F>57){R=(F===46?i+M.slice(B+1):M.slice(B))+R,M=M.slice(0,B);break}}}k&&!y&&(M=e(M,1/0));var nt=w.length+M.length+R.length,z=nt<b?new Array(b-nt+1).join(d):"";switch(k&&y&&(M=e(z+M,z.length?b-R.length:1/0),z=""),p){case"<":M=w+M+R+z;break;case"=":M=w+z+M+R;break;case"^":M=z.slice(0,nt=z.length>>1)+w+M+R+z.slice(nt);break;default:M=z+w+M+R;break}return a(M)}return v.toString=function(){return f+""},v}function h(f,d){var p=u((f=Ps(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor($s(d)/3)))*3,_=Math.pow(10,-m),y=k_[8+m/3];return function(b){return p(_*b)+y}}return{format:u,formatPrefix:h}}var $u,E0,u4;hT({thousands:",",grouping:[3],currency:["$",""]});function hT(t){return $u=uT(t),E0=$u.format,u4=$u.formatPrefix,$u}function dT(t){return Math.max(0,-$s(Math.abs(t)))}function fT(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($s(e)/3)))*3-$s(Math.abs(t)))}function pT(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$s(e)-$s(t))+1}var ee=1e-6,Al=1e-12,Te=Math.PI,sn=Te/2,qh=Te/4,or=Te*2,He=180/Te,re=Te/180,Ne=Math.abs,ac=Math.atan,sr=Math.atan2,Gt=Math.cos,Pu=Math.ceil,gT=Math.exp,Am=Math.hypot,Xh=Math.log,nf=Math.pow,Ut=Math.sin,Ir=Math.sign||function(t){return t>0?1:t<0?-1:0},Ln=Math.sqrt,h4=Math.tan;function yT(t){return t>1?0:t<-1?Te:Math.acos(t)}function cr(t){return t>1?sn:t<-1?-sn:Math.asin(t)}function w_(t){return(t=Ut(t/2))*t}function Je(){}function Kh(t,e){t&&E_.hasOwnProperty(t.type)&&E_[t.type](t,e)}var T_={Feature:function(t,e){Kh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Kh(n[r].geometry,e)}},E_={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Mm(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Mm(n[r],e,0)},Polygon:function(t,e){C_(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)C_(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Kh(n[r],e)}};function Mm(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function C_(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Mm(t[n],e,1);e.polygonEnd()}function Xr(t,e){t&&T_.hasOwnProperty(t.type)?T_[t.type](t,e):Kh(t,e)}var Zh=new wn,Qh=new wn,mT,bT,Lm,Bm,Dm,Oi={point:Je,lineStart:Je,lineEnd:Je,polygonStart:function(){Zh=new wn,Oi.lineStart=yP,Oi.lineEnd=mP},polygonEnd:function(){var t=+Zh;Qh.add(t<0?or+t:t),this.lineStart=this.lineEnd=this.point=Je},sphere:function(){Qh.add(or)}};function yP(){Oi.point=bP}function mP(){_T(mT,bT)}function bP(t,e){Oi.point=_T,mT=t,bT=e,t*=re,e*=re,Lm=t,Bm=Gt(e=e/2+qh),Dm=Ut(e)}function _T(t,e){t*=re,e*=re,e=e/2+qh;var n=t-Lm,r=n>=0?1:-1,i=r*n,a=Gt(e),o=Ut(e),s=Dm*o,l=Bm*a+s*Gt(i),u=s*r*Ut(i);Zh.add(sr(u,l)),Lm=t,Bm=a,Dm=o}function _P(t){return Qh=new wn,Xr(t,Oi),Qh*2}function Jh(t){return[sr(t[1],t[0]),cr(t[2])]}function Lo(t){var e=t[0],n=t[1],r=Gt(n);return[r*Gt(e),r*Ut(e),Ut(n)]}function Yu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ys(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function zu(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function t1(t){var e=Ln(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Qe,pr,rn,Sr,go,vT,xT,Ts,el,Ma,pa,aa={point:Nm,lineStart:S_,lineEnd:A_,polygonStart:function(){aa.point=wT,aa.lineStart=vP,aa.lineEnd=xP,el=new wn,Oi.polygonStart()},polygonEnd:function(){Oi.polygonEnd(),aa.point=Nm,aa.lineStart=S_,aa.lineEnd=A_,Zh<0?(Qe=-(rn=180),pr=-(Sr=90)):el>ee?Sr=90:el<-ee&&(pr=-90),pa[0]=Qe,pa[1]=rn},sphere:function(){Qe=-(rn=180),pr=-(Sr=90)}};function Nm(t,e){Ma.push(pa=[Qe=t,rn=t]),e<pr&&(pr=e),e>Sr&&(Sr=e)}function kT(t,e){var n=Lo([t*re,e*re]);if(Ts){var r=Ys(Ts,n),i=[r[1],-r[0],0],a=Ys(i,r);t1(a),a=Jh(a);var o=t-go,s=o>0?1:-1,l=a[0]*He*s,u,h=Ne(o)>180;h^(s*go<l&&l<s*t)?(u=a[1]*He,u>Sr&&(Sr=u)):(l=(l+360)%360-180,h^(s*go<l&&l<s*t)?(u=-a[1]*He,u<pr&&(pr=u)):(e<pr&&(pr=e),e>Sr&&(Sr=e))),h?t<go?Tr(Qe,t)>Tr(Qe,rn)&&(rn=t):Tr(t,rn)>Tr(Qe,rn)&&(Qe=t):rn>=Qe?(t<Qe&&(Qe=t),t>rn&&(rn=t)):t>go?Tr(Qe,t)>Tr(Qe,rn)&&(rn=t):Tr(t,rn)>Tr(Qe,rn)&&(Qe=t)}else Ma.push(pa=[Qe=t,rn=t]);e<pr&&(pr=e),e>Sr&&(Sr=e),Ts=n,go=t}function S_(){aa.point=kT}function A_(){pa[0]=Qe,pa[1]=rn,aa.point=Nm,Ts=null}function wT(t,e){if(Ts){var n=t-go;el.add(Ne(n)>180?n+(n>0?360:-360):n)}else vT=t,xT=e;Oi.point(t,e),kT(t,e)}function vP(){Oi.lineStart()}function xP(){wT(vT,xT),Oi.lineEnd(),Ne(el)>ee&&(Qe=-(rn=180)),pa[0]=Qe,pa[1]=rn,Ts=null}function Tr(t,e){return(e-=t)<0?e+360:e}function kP(t,e){return t[0]-e[0]}function M_(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function wP(t){var e,n,r,i,a,o,s;if(Sr=rn=-(Qe=pr=1/0),Ma=[],Xr(t,aa),n=Ma.length){for(Ma.sort(kP),e=1,r=Ma[0],a=[r];e<n;++e)i=Ma[e],M_(r,i[0])||M_(r,i[1])?(Tr(r[0],i[1])>Tr(r[0],r[1])&&(r[1]=i[1]),Tr(i[0],r[1])>Tr(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,n=a.length-1,e=0,r=a[n];e<=n;r=i,++e)i=a[e],(s=Tr(r[1],i[0]))>o&&(o=s,Qe=i[0],rn=r[1])}return Ma=pa=null,Qe===1/0||pr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Qe,pr],[rn,Sr]]}var jc,e1,n1,r1,i1,a1,o1,s1,Om,Rm,Im,TT,ET,Zn,Qn,Jn,Qr={sphere:Je,point:d4,lineStart:L_,lineEnd:B_,polygonStart:function(){Qr.lineStart=CP,Qr.lineEnd=SP},polygonEnd:function(){Qr.lineStart=L_,Qr.lineEnd=B_}};function d4(t,e){t*=re,e*=re;var n=Gt(e);nu(n*Gt(t),n*Ut(t),Ut(e))}function nu(t,e,n){++jc,n1+=(t-n1)/jc,r1+=(e-r1)/jc,i1+=(n-i1)/jc}function L_(){Qr.point=TP}function TP(t,e){t*=re,e*=re;var n=Gt(e);Zn=n*Gt(t),Qn=n*Ut(t),Jn=Ut(e),Qr.point=EP,nu(Zn,Qn,Jn)}function EP(t,e){t*=re,e*=re;var n=Gt(e),r=n*Gt(t),i=n*Ut(t),a=Ut(e),o=sr(Ln((o=Qn*a-Jn*i)*o+(o=Jn*r-Zn*a)*o+(o=Zn*i-Qn*r)*o),Zn*r+Qn*i+Jn*a);e1+=o,a1+=o*(Zn+(Zn=r)),o1+=o*(Qn+(Qn=i)),s1+=o*(Jn+(Jn=a)),nu(Zn,Qn,Jn)}function B_(){Qr.point=d4}function CP(){Qr.point=AP}function SP(){CT(TT,ET),Qr.point=d4}function AP(t,e){TT=t,ET=e,t*=re,e*=re,Qr.point=CT;var n=Gt(e);Zn=n*Gt(t),Qn=n*Ut(t),Jn=Ut(e),nu(Zn,Qn,Jn)}function CT(t,e){t*=re,e*=re;var n=Gt(e),r=n*Gt(t),i=n*Ut(t),a=Ut(e),o=Qn*a-Jn*i,s=Jn*r-Zn*a,l=Zn*i-Qn*r,u=Am(o,s,l),h=cr(u),f=u&&-h/u;Om.add(f*o),Rm.add(f*s),Im.add(f*l),e1+=h,a1+=h*(Zn+(Zn=r)),o1+=h*(Qn+(Qn=i)),s1+=h*(Jn+(Jn=a)),nu(Zn,Qn,Jn)}function MP(t){jc=e1=n1=r1=i1=a1=o1=s1=0,Om=new wn,Rm=new wn,Im=new wn,Xr(t,Qr);var e=+Om,n=+Rm,r=+Im,i=Am(e,n,r);return i<Al&&(e=a1,n=o1,r=s1,e1<ee&&(e=n1,n=r1,r=i1),i=Am(e,n,r),i<Al)?[NaN,NaN]:[sr(n,e)*He,cr(r/i)*He]}function fs(t){return function(){return t}}function Fm(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function $m(t,e){return[Ne(t)>Te?t+Math.round(-t/or)*or:t,e]}$m.invert=$m;function f4(t,e,n){return(t%=or)?e||n?Fm(N_(t),O_(e,n)):N_(t):e||n?O_(e,n):$m}function D_(t){return function(e,n){return e+=t,[e>Te?e-or:e<-Te?e+or:e,n]}}function N_(t){var e=D_(t);return e.invert=D_(-t),e}function O_(t,e){var n=Gt(t),r=Ut(t),i=Gt(e),a=Ut(e);function o(s,l){var u=Gt(l),h=Gt(s)*u,f=Ut(s)*u,d=Ut(l),p=d*n+h*r;return[sr(f*i-p*a,h*n-d*r),cr(p*i+f*a)]}return o.invert=function(s,l){var u=Gt(l),h=Gt(s)*u,f=Ut(s)*u,d=Ut(l),p=d*i-f*a;return[sr(f*i+d*a,h*n+p*r),cr(p*n-h*r)]},o}function ST(t){t=f4(t[0]*re,t[1]*re,t.length>2?t[2]*re:0);function e(n){return n=t(n[0]*re,n[1]*re),n[0]*=He,n[1]*=He,n}return e.invert=function(n){return n=t.invert(n[0]*re,n[1]*re),n[0]*=He,n[1]*=He,n},e}function AT(t,e,n,r,i,a){if(n){var o=Gt(e),s=Ut(e),l=r*n;i==null?(i=e+r*or,a=e-l/2):(i=R_(o,i),a=R_(o,a),(r>0?i<a:i>a)&&(i+=r*or));for(var u,h=i;r>0?h>a:h<a;h-=l)u=Jh([o,-s*Gt(h),-s*Ut(h)]),t.point(u[0],u[1])}}function R_(t,e){e=Lo(e),e[0]-=t,t1(e);var n=yT(-e[1]);return((-e[2]<0?-n:n)+or-ee)%or}function LP(){var t=fs([0,0]),e=fs(90),n=fs(6),r,i,a={point:o};function o(l,u){r.push(l=i(l,u)),l[0]*=He,l[1]*=He}function s(){var l=t.apply(this,arguments),u=e.apply(this,arguments)*re,h=n.apply(this,arguments)*re;return r=[],i=f4(-l[0]*re,-l[1]*re,0).invert,AT(a,u,h,1),l={type:"Polygon",coordinates:[r]},r=i=null,l}return s.center=function(l){return arguments.length?(t=typeof l=="function"?l:fs([+l[0],+l[1]]),s):t},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:fs(+l),s):e},s.precision=function(l){return arguments.length?(n=typeof l=="function"?l:fs(+l),s):n},s}function MT(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Je,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function mh(t,e){return Ne(t[0]-e[0])<ee&&Ne(t[1]-e[1])<ee}function ju(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function LT(t,e,n,r,i){var a=[],o=[],s,l;if(t.forEach(function(m){if(!((_=m.length-1)<=0)){var _,y=m[0],b=m[_],k;if(mh(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),s=0;s<_;++s)i.point((y=m[s])[0],y[1]);i.lineEnd();return}b[0]+=2*ee}a.push(k=new ju(y,m,null,!0)),o.push(k.o=new ju(y,null,k,!1)),a.push(k=new ju(b,m,null,!1)),o.push(k.o=new ju(b,null,k,!0))}}),!!a.length){for(o.sort(e),I_(a),I_(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var u=a[0],h,f;;){for(var d=u,p=!0;d.v;)if((d=d.n)===u)return;h=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,l=h.length;s<l;++s)i.point((f=h[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(h=d.p.z,s=h.length-1;s>=0;--s)i.point((f=h[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,h=d.z,p=!p}while(!d.v);i.lineEnd()}}}function I_(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function af(t){return Ne(t[0])<=Te?t[0]:Ir(t[0])*((Ne(t[0])+Te)%or-Te)}function BT(t,e){var n=af(e),r=e[1],i=Ut(r),a=[Ut(n),-Gt(n),0],o=0,s=0,l=new wn;i===1?r=sn+ee:i===-1&&(r=-sn-ee);for(var u=0,h=t.length;u<h;++u)if(d=(f=t[u]).length)for(var f,d,p=f[d-1],m=af(p),_=p[1]/2+qh,y=Ut(_),b=Gt(_),k=0;k<d;++k,m=x,y=C,b=L,p=T){var T=f[k],x=af(T),A=T[1]/2+qh,C=Ut(A),L=Gt(A),S=x-m,N=S>=0?1:-1,v=N*S,M=v>Te,w=y*C;if(l.add(sr(w*N*Ut(v),b*L+w*Gt(v))),o+=M?S+N*or:S,M^m>=n^x>=n){var R=Ys(Lo(p),Lo(T));t1(R);var B=Ys(a,R);t1(B);var $=(M^S>=0?-1:1)*cr(B[2]);(r>$||r===$&&(R[0]||R[1]))&&(s+=M^S>=0?1:-1)}}return(o<-ee||o<ee&&l<-Al)^s&1}function DT(t,e,n,r){return function(i){var a=e(i),o=MT(),s=e(o),l=!1,u,h,f,d={point:p,lineStart:_,lineEnd:y,polygonStart:function(){d.point=b,d.lineStart=k,d.lineEnd=T,h=[],u=[]},polygonEnd:function(){d.point=p,d.lineStart=_,d.lineEnd=y,h=j3(h);var x=BT(u,r);h.length?(l||(i.polygonStart(),l=!0),LT(h,DP,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),h=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(x,A){t(x,A)&&i.point(x,A)}function m(x,A){a.point(x,A)}function _(){d.point=m,a.lineStart()}function y(){d.point=p,a.lineEnd()}function b(x,A){f.push([x,A]),s.point(x,A)}function k(){s.lineStart(),f=[]}function T(){b(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),A=o.result(),C,L=A.length,S,N,v;if(f.pop(),u.push(f),f=null,!!L){if(x&1){if(N=A[0],(S=N.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<S;++C)i.point((v=N[C])[0],v[1]);i.lineEnd()}return}L>1&&x&2&&A.push(A.pop().concat(A.shift())),h.push(A.filter(BP))}}return d}}function BP(t){return t.length>1}function DP(t,e){return((t=t.x)[0]<0?t[1]-sn-ee:sn-t[1])-((e=e.x)[0]<0?e[1]-sn-ee:sn-e[1])}const Pm=DT(function(){return!0},NP,RP,[-Te,-sn]);function NP(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var s=a>0?Te:-Te,l=Ne(a-e);Ne(l-Te)<ee?(t.point(e,n=(n+o)/2>0?sn:-sn),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(a,n),i=0):r!==s&&l>=Te&&(Ne(e-r)<ee&&(e-=r*ee),Ne(a-s)<ee&&(a-=s*ee),n=OP(e,n,a,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=a,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function OP(t,e,n,r){var i,a,o=Ut(t-n);return Ne(o)>ee?ac((Ut(e)*(a=Gt(r))*Ut(n)-Ut(r)*(i=Gt(e))*Ut(t))/(i*a*o)):(e+r)/2}function RP(t,e,n,r){var i;if(t==null)i=n*sn,r.point(-Te,i),r.point(0,i),r.point(Te,i),r.point(Te,0),r.point(Te,-i),r.point(0,-i),r.point(-Te,-i),r.point(-Te,0),r.point(-Te,i);else if(Ne(t[0]-e[0])>ee){var a=t[0]<e[0]?Te:-Te;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function NT(t){var e=Gt(t),n=6*re,r=e>0,i=Ne(e)>ee;function a(h,f,d,p){AT(p,t,n,d,h,f)}function o(h,f){return Gt(h)*Gt(f)>e}function s(h){var f,d,p,m,_;return{lineStart:function(){m=p=!1,_=1},point:function(y,b){var k=[y,b],T,x=o(y,b),A=r?x?0:u(y,b):x?u(y+(y<0?Te:-Te),b):0;if(!f&&(m=p=x)&&h.lineStart(),x!==p&&(T=l(f,k),(!T||mh(f,T)||mh(k,T))&&(k[2]=1)),x!==p)_=0,x?(h.lineStart(),T=l(k,f),h.point(T[0],T[1])):(T=l(f,k),h.point(T[0],T[1],2),h.lineEnd()),f=T;else if(i&&f&&r^x){var C;!(A&d)&&(C=l(k,f,!0))&&(_=0,r?(h.lineStart(),h.point(C[0][0],C[0][1]),h.point(C[1][0],C[1][1]),h.lineEnd()):(h.point(C[1][0],C[1][1]),h.lineEnd(),h.lineStart(),h.point(C[0][0],C[0][1],3)))}x&&(!f||!mh(f,k))&&h.point(k[0],k[1]),f=k,p=x,d=A},lineEnd:function(){p&&h.lineEnd(),f=null},clean:function(){return _|(m&&p)<<1}}}function l(h,f,d){var p=Lo(h),m=Lo(f),_=[1,0,0],y=Ys(p,m),b=Yu(y,y),k=y[0],T=b-k*k;if(!T)return!d&&h;var x=e*b/T,A=-e*k/T,C=Ys(_,y),L=zu(_,x),S=zu(y,A);rf(L,S);var N=C,v=Yu(L,N),M=Yu(N,N),w=v*v-M*(Yu(L,L)-1);if(!(w<0)){var R=Ln(w),B=zu(N,(-v-R)/M);if(rf(B,L),B=Jh(B),!d)return B;var $=h[0],F=f[0],Q=h[1],nt=f[1],z;F<$&&(z=$,$=F,F=z);var Y=F-$,rt=Ne(Y-Te)<ee,lt=rt||Y<ee;if(!rt&&nt<Q&&(z=Q,Q=nt,nt=z),lt?rt?Q+nt>0^B[1]<(Ne(B[0]-$)<ee?Q:nt):Q<=B[1]&&B[1]<=nt:Y>Te^($<=B[0]&&B[0]<=F)){var J=zu(N,(-v+R)/M);return rf(J,L),[B,Jh(J)]}}}function u(h,f){var d=r?t:Te-t,p=0;return h<-d?p|=1:h>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return DT(o,s,a,r?[0,-t]:[-Te,t-Te])}function IP(t,e,n,r,i,a){var o=t[0],s=t[1],l=e[0],u=e[1],h=0,f=1,d=l-o,p=u-s,m;if(m=n-o,!(!d&&m>0)){if(m/=d,d<0){if(m<h)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>h&&(h=m)}if(m=i-o,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>h&&(h=m)}else if(d>0){if(m<h)return;m<f&&(f=m)}if(m=r-s,!(!p&&m>0)){if(m/=p,p<0){if(m<h)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>h&&(h=m)}if(m=a-s,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>h&&(h=m)}else if(p>0){if(m<h)return;m<f&&(f=m)}return h>0&&(t[0]=o+h*d,t[1]=s+h*p),f<1&&(e[0]=o+f*d,e[1]=s+f*p),!0}}}}}var Uc=1e9,Uu=-Uc;function C0(t,e,n,r){function i(u,h){return t<=u&&u<=n&&e<=h&&h<=r}function a(u,h,f,d){var p=0,m=0;if(u==null||(p=o(u,f))!==(m=o(h,f))||l(u,h)<0^f>0)do d.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+f+4)%4)!==m);else d.point(h[0],h[1])}function o(u,h){return Ne(u[0]-t)<ee?h>0?0:3:Ne(u[0]-n)<ee?h>0?2:1:Ne(u[1]-e)<ee?h>0?1:0:h>0?3:2}function s(u,h){return l(u.x,h.x)}function l(u,h){var f=o(u,1),d=o(h,1);return f!==d?f-d:f===0?h[1]-u[1]:f===1?u[0]-h[0]:f===2?u[1]-h[1]:h[0]-u[0]}return function(u){var h=u,f=MT(),d,p,m,_,y,b,k,T,x,A,C,L={point:S,lineStart:w,lineEnd:R,polygonStart:v,polygonEnd:M};function S($,F){i($,F)&&h.point($,F)}function N(){for(var $=0,F=0,Q=p.length;F<Q;++F)for(var nt=p[F],z=1,Y=nt.length,rt=nt[0],lt,J,Z=rt[0],q=rt[1];z<Y;++z)lt=Z,J=q,rt=nt[z],Z=rt[0],q=rt[1],J<=r?q>r&&(Z-lt)*(r-J)>(q-J)*(t-lt)&&++$:q<=r&&(Z-lt)*(r-J)<(q-J)*(t-lt)&&--$;return $}function v(){h=f,d=[],p=[],C=!0}function M(){var $=N(),F=C&&$,Q=(d=j3(d)).length;(F||Q)&&(u.polygonStart(),F&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),Q&&LT(d,s,$,a,u),u.polygonEnd()),h=u,d=p=m=null}function w(){L.point=B,p&&p.push(m=[]),A=!0,x=!1,k=T=NaN}function R(){d&&(B(_,y),b&&x&&f.rejoin(),d.push(f.result())),L.point=S,x&&h.lineEnd()}function B($,F){var Q=i($,F);if(p&&m.push([$,F]),A)_=$,y=F,b=Q,A=!1,Q&&(h.lineStart(),h.point($,F));else if(Q&&x)h.point($,F);else{var nt=[k=Math.max(Uu,Math.min(Uc,k)),T=Math.max(Uu,Math.min(Uc,T))],z=[$=Math.max(Uu,Math.min(Uc,$)),F=Math.max(Uu,Math.min(Uc,F))];IP(nt,z,t,e,n,r)?(x||(h.lineStart(),h.point(nt[0],nt[1])),h.point(z[0],z[1]),Q||h.lineEnd(),C=!1):Q&&(h.lineStart(),h.point($,F),C=!1)}k=$,T=F,x=Q}return L}}function FP(){var t=0,e=0,n=960,r=500,i,a,o;return o={stream:function(s){return i&&a===s?i:i=C0(t,e,n,r)(a=s)},extent:function(s){return arguments.length?(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1],i=a=null,o):[[t,e],[n,r]]}}}var Ym,zm,bh,_h,zs={sphere:Je,point:Je,lineStart:$P,lineEnd:Je,polygonStart:Je,polygonEnd:Je};function $P(){zs.point=YP,zs.lineEnd=PP}function PP(){zs.point=zs.lineEnd=Je}function YP(t,e){t*=re,e*=re,zm=t,bh=Ut(e),_h=Gt(e),zs.point=zP}function zP(t,e){t*=re,e*=re;var n=Ut(e),r=Gt(e),i=Ne(t-zm),a=Gt(i),o=Ut(i),s=r*o,l=_h*n-bh*r*a,u=bh*n+_h*r*a;Ym.add(sr(Ln(s*s+l*l),u)),zm=t,bh=n,_h=r}function OT(t){return Ym=new wn,Xr(t,zs),+Ym}var jm=[null,null],jP={type:"LineString",coordinates:jm};function c1(t,e){return jm[0]=t,jm[1]=e,OT(jP)}var F_={Feature:function(t,e){return l1(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(l1(n[r].geometry,e))return!0;return!1}},$_={Sphere:function(){return!0},Point:function(t,e){return P_(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(P_(n[r],e))return!0;return!1},LineString:function(t,e){return Y_(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Y_(n[r],e))return!0;return!1},Polygon:function(t,e){return z_(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(z_(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(l1(n[r],e))return!0;return!1}};function l1(t,e){return t&&$_.hasOwnProperty(t.type)?$_[t.type](t,e):!1}function P_(t,e){return c1(t,e)===0}function Y_(t,e){for(var n,r,i,a=0,o=t.length;a<o;a++){if(r=c1(t[a],e),r===0||a>0&&(i=c1(t[a],t[a-1]),i>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Al*i))return!0;n=r}return!1}function z_(t,e){return!!BT(t.map(UP),RT(e))}function UP(t){return t=t.map(RT),t.pop(),t}function RT(t){return[t[0]*re,t[1]*re]}function HP(t,e){return(t&&F_.hasOwnProperty(t.type)?F_[t.type]:l1)(t,e)}function j_(t,e,n){var r=Oa(t,e-ee,n).concat(e);return function(i){return r.map(function(a){return[i,a]})}}function U_(t,e,n){var r=Oa(t,e-ee,n).concat(e);return function(i){return r.map(function(a){return[a,i]})}}function IT(){var t,e,n,r,i,a,o,s,l=10,u=l,h=90,f=360,d,p,m,_,y=2.5;function b(){return{type:"MultiLineString",coordinates:k()}}function k(){return Oa(Pu(r/h)*h,n,h).map(m).concat(Oa(Pu(s/f)*f,o,f).map(_)).concat(Oa(Pu(e/l)*l,t,l).filter(function(T){return Ne(T%h)>ee}).map(d)).concat(Oa(Pu(a/u)*u,i,u).filter(function(T){return Ne(T%f)>ee}).map(p))}return b.lines=function(){return k().map(function(T){return{type:"LineString",coordinates:T}})},b.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(_(o).slice(1),m(n).reverse().slice(1),_(s).reverse().slice(1))]}},b.extent=function(T){return arguments.length?b.extentMajor(T).extentMinor(T):b.extentMinor()},b.extentMajor=function(T){return arguments.length?(r=+T[0][0],n=+T[1][0],s=+T[0][1],o=+T[1][1],r>n&&(T=r,r=n,n=T),s>o&&(T=s,s=o,o=T),b.precision(y)):[[r,s],[n,o]]},b.extentMinor=function(T){return arguments.length?(e=+T[0][0],t=+T[1][0],a=+T[0][1],i=+T[1][1],e>t&&(T=e,e=t,t=T),a>i&&(T=a,a=i,i=T),b.precision(y)):[[e,a],[t,i]]},b.step=function(T){return arguments.length?b.stepMajor(T).stepMinor(T):b.stepMinor()},b.stepMajor=function(T){return arguments.length?(h=+T[0],f=+T[1],b):[h,f]},b.stepMinor=function(T){return arguments.length?(l=+T[0],u=+T[1],b):[l,u]},b.precision=function(T){return arguments.length?(y=+T,d=j_(a,i,90),p=U_(e,t,y),m=j_(s,o,90),_=U_(r,n,y),b):y},b.extentMajor([[-180,-90+ee],[180,90-ee]]).extentMinor([[-180,-80-ee],[180,80+ee]])}function WP(){return IT()()}function GP(t,e){var n=t[0]*re,r=t[1]*re,i=e[0]*re,a=e[1]*re,o=Gt(r),s=Ut(r),l=Gt(a),u=Ut(a),h=o*Gt(n),f=o*Ut(n),d=l*Gt(i),p=l*Ut(i),m=2*cr(Ln(w_(a-r)+o*l*w_(i-n))),_=Ut(m),y=m?function(b){var k=Ut(b*=m)/_,T=Ut(m-b)/_,x=T*h+k*d,A=T*f+k*p,C=T*s+k*u;return[sr(A,x)*He,sr(C,Ln(x*x+A*A))*He]}:function(){return[n*He,r*He]};return y.distance=m,y}const Ml=t=>t;var of=new wn,Um=new wn,FT,$T,Hm,Wm,Ba={point:Je,lineStart:Je,lineEnd:Je,polygonStart:function(){Ba.lineStart=VP,Ba.lineEnd=XP},polygonEnd:function(){Ba.lineStart=Ba.lineEnd=Ba.point=Je,of.add(Ne(Um)),Um=new wn},result:function(){var t=of/2;return of=new wn,t}};function VP(){Ba.point=qP}function qP(t,e){Ba.point=PT,FT=Hm=t,$T=Wm=e}function PT(t,e){Um.add(Wm*t-Hm*e),Hm=t,Wm=e}function XP(){PT(FT,$T)}const H_=Ba;var js=1/0,u1=js,Ll=-js,h1=Ll,KP={point:ZP,lineStart:Je,lineEnd:Je,polygonStart:Je,polygonEnd:Je,result:function(){var t=[[js,u1],[Ll,h1]];return Ll=h1=-(u1=js=1/0),t}};function ZP(t,e){t<js&&(js=t),t>Ll&&(Ll=t),e<u1&&(u1=e),e>h1&&(h1=e)}const d1=KP;var Gm=0,Vm=0,Hc=0,f1=0,p1=0,bs=0,qm=0,Xm=0,Wc=0,YT,zT,Ti,Ei,Kr={point:Bo,lineStart:W_,lineEnd:G_,polygonStart:function(){Kr.lineStart=tY,Kr.lineEnd=eY},polygonEnd:function(){Kr.point=Bo,Kr.lineStart=W_,Kr.lineEnd=G_},result:function(){var t=Wc?[qm/Wc,Xm/Wc]:bs?[f1/bs,p1/bs]:Hc?[Gm/Hc,Vm/Hc]:[NaN,NaN];return Gm=Vm=Hc=f1=p1=bs=qm=Xm=Wc=0,t}};function Bo(t,e){Gm+=t,Vm+=e,++Hc}function W_(){Kr.point=QP}function QP(t,e){Kr.point=JP,Bo(Ti=t,Ei=e)}function JP(t,e){var n=t-Ti,r=e-Ei,i=Ln(n*n+r*r);f1+=i*(Ti+t)/2,p1+=i*(Ei+e)/2,bs+=i,Bo(Ti=t,Ei=e)}function G_(){Kr.point=Bo}function tY(){Kr.point=nY}function eY(){jT(YT,zT)}function nY(t,e){Kr.point=jT,Bo(YT=Ti=t,zT=Ei=e)}function jT(t,e){var n=t-Ti,r=e-Ei,i=Ln(n*n+r*r);f1+=i*(Ti+t)/2,p1+=i*(Ei+e)/2,bs+=i,i=Ei*t-Ti*e,qm+=i*(Ti+t),Xm+=i*(Ei+e),Wc+=i*3,Bo(Ti=t,Ei=e)}const V_=Kr;function UT(t){this._context=t}UT.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,or);break}}},result:Je};var Km=new wn,sf,HT,WT,Gc,Vc,g1={point:Je,lineStart:function(){g1.point=rY},lineEnd:function(){sf&&GT(HT,WT),g1.point=Je},polygonStart:function(){sf=!0},polygonEnd:function(){sf=null},result:function(){var t=+Km;return Km=new wn,t}};function rY(t,e){g1.point=GT,HT=Gc=t,WT=Vc=e}function GT(t,e){Gc-=t,Vc-=e,Km.add(Ln(Gc*Gc+Vc*Vc)),Gc=t,Vc=e}const q_=g1;function VT(){this._string=[]}VT.prototype={_radius:4.5,_circle:X_(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=X_(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function X_(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function iY(t,e){var n=4.5,r,i;function a(o){return o&&(typeof n=="function"&&i.pointRadius(+n.apply(this,arguments)),Xr(o,r(i))),i.result()}return a.area=function(o){return Xr(o,r(H_)),H_.result()},a.measure=function(o){return Xr(o,r(q_)),q_.result()},a.bounds=function(o){return Xr(o,r(d1)),d1.result()},a.centroid=function(o){return Xr(o,r(V_)),V_.result()},a.projection=function(o){return arguments.length?(r=o==null?(t=null,Ml):(t=o).stream,a):t},a.context=function(o){return arguments.length?(i=o==null?(e=null,new VT):new UT(e=o),typeof n!="function"&&i.pointRadius(n),a):e},a.pointRadius=function(o){return arguments.length?(n=typeof o=="function"?o:(i.pointRadius(+o),+o),a):n},a.projection(t).context(e)}function aY(t){return{stream:ru(t)}}function ru(t){return function(e){var n=new Zm;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Zm(){}Zm.prototype={constructor:Zm,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function p4(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Xr(n,t.stream(d1)),e(d1.result()),r!=null&&t.clipExtent(r),t}function S0(t,e,n){return p4(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(a-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,l])},n)}function g4(t,e,n){return S0(t,[[0,0],e],n)}function y4(t,e,n){return p4(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];t.scale(150*a).translate([o,s])},n)}function m4(t,e,n){return p4(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,s])},n)}var K_=16,oY=Gt(30*re);function Z_(t,e){return+e?cY(t,e):sY(t)}function sY(t){return ru({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function cY(t,e){function n(r,i,a,o,s,l,u,h,f,d,p,m,_,y){var b=u-r,k=h-i,T=b*b+k*k;if(T>4*e&&_--){var x=o+d,A=s+p,C=l+m,L=Ln(x*x+A*A+C*C),S=cr(C/=L),N=Ne(Ne(C)-1)<ee||Ne(a-f)<ee?(a+f)/2:sr(A,x),v=t(N,S),M=v[0],w=v[1],R=M-r,B=w-i,$=k*R-b*B;($*$/T>e||Ne((b*R+k*B)/T-.5)>.3||o*d+s*p+l*m<oY)&&(n(r,i,a,o,s,l,M,w,N,x/=L,A/=L,C,_,y),y.point(M,w),n(M,w,N,x,A,C,u,h,f,d,p,m,_,y))}}return function(r){var i,a,o,s,l,u,h,f,d,p,m,_,y={point:b,lineStart:k,lineEnd:x,polygonStart:function(){r.polygonStart(),y.lineStart=A},polygonEnd:function(){r.polygonEnd(),y.lineStart=k}};function b(S,N){S=t(S,N),r.point(S[0],S[1])}function k(){f=NaN,y.point=T,r.lineStart()}function T(S,N){var v=Lo([S,N]),M=t(S,N);n(f,d,h,p,m,_,f=M[0],d=M[1],h=S,p=v[0],m=v[1],_=v[2],K_,r),r.point(f,d)}function x(){y.point=b,r.lineEnd()}function A(){k(),y.point=C,y.lineEnd=L}function C(S,N){T(i=S,N),a=f,o=d,s=p,l=m,u=_,y.point=T}function L(){n(f,d,h,p,m,_,a,o,i,s,l,u,K_,r),y.lineEnd=x,x()}return y}}var lY=ru({point:function(t,e){this.stream.point(t*re,e*re)}});function uY(t){return ru({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function hY(t,e,n,r,i){function a(o,s){return o*=r,s*=i,[e+t*o,n-t*s]}return a.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},a}function Q_(t,e,n,r,i,a){if(!a)return hY(t,e,n,r,i);var o=Gt(a),s=Ut(a),l=o*t,u=s*t,h=o/t,f=s/t,d=(s*n-o*e)/t,p=(s*e+o*n)/t;function m(_,y){return _*=r,y*=i,[l*_-u*y+e,n-u*_-l*y]}return m.invert=function(_,y){return[r*(h*_-f*y+d),i*(p-f*_-h*y)]},m}function Yi(t){return b4(function(){return t})()}function b4(t){var e,n=150,r=480,i=250,a=0,o=0,s=0,l=0,u=0,h,f=0,d=1,p=1,m=null,_=Pm,y=null,b,k,T,x=Ml,A=.5,C,L,S,N,v;function M($){return S($[0]*re,$[1]*re)}function w($){return $=S.invert($[0],$[1]),$&&[$[0]*He,$[1]*He]}M.stream=function($){return N&&v===$?N:N=lY(uY(h)(_(C(x(v=$)))))},M.preclip=function($){return arguments.length?(_=$,m=void 0,B()):_},M.postclip=function($){return arguments.length?(x=$,y=b=k=T=null,B()):x},M.clipAngle=function($){return arguments.length?(_=+$?NT(m=$*re):(m=null,Pm),B()):m*He},M.clipExtent=function($){return arguments.length?(x=$==null?(y=b=k=T=null,Ml):C0(y=+$[0][0],b=+$[0][1],k=+$[1][0],T=+$[1][1]),B()):y==null?null:[[y,b],[k,T]]},M.scale=function($){return arguments.length?(n=+$,R()):n},M.translate=function($){return arguments.length?(r=+$[0],i=+$[1],R()):[r,i]},M.center=function($){return arguments.length?(a=$[0]%360*re,o=$[1]%360*re,R()):[a*He,o*He]},M.rotate=function($){return arguments.length?(s=$[0]%360*re,l=$[1]%360*re,u=$.length>2?$[2]%360*re:0,R()):[s*He,l*He,u*He]},M.angle=function($){return arguments.length?(f=$%360*re,R()):f*He},M.reflectX=function($){return arguments.length?(d=$?-1:1,R()):d<0},M.reflectY=function($){return arguments.length?(p=$?-1:1,R()):p<0},M.precision=function($){return arguments.length?(C=Z_(L,A=$*$),B()):Ln(A)},M.fitExtent=function($,F){return S0(M,$,F)},M.fitSize=function($,F){return g4(M,$,F)},M.fitWidth=function($,F){return y4(M,$,F)},M.fitHeight=function($,F){return m4(M,$,F)};function R(){var $=Q_(n,0,0,d,p,f).apply(null,e(a,o)),F=Q_(n,r-$[0],i-$[1],d,p,f);return h=f4(s,l,u),L=Fm(e,F),S=Fm(h,L),C=Z_(L,A),B()}function B(){return N=v=null,M}return function(){return e=t.apply(this,arguments),M.invert=e.invert&&w,R()}}function _4(t){var e=0,n=Te/3,r=b4(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*re,n=a[1]*re):[e*He,n*He]},i}function dY(t){var e=Gt(t);function n(r,i){return[r*e,Ut(i)/e]}return n.invert=function(r,i){return[r/e,cr(i*e)]},n}function qT(t,e){var n=Ut(t),r=(n+Ut(e))/2;if(Ne(r)<ee)return dY(t);var i=1+n*(2*r-n),a=Ln(i)/r;function o(s,l){var u=Ln(i-2*r*Ut(l))/r;return[u*Ut(s*=r),a-u*Gt(s)]}return o.invert=function(s,l){var u=a-l,h=sr(s,Ne(u))*Ir(u);return u*r<0&&(h-=Te*Ir(s)*Ir(u)),[h/r,cr((i-(s*s+u*u)*r*r)/(2*r))]},o}function y1(){return _4(qT).scale(155.424).center([0,33.6442])}function XT(){return y1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fY(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function pY(){var t,e,n=XT(),r,i=y1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=y1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(d,p){l=[d,p]}};function h(d){var p=d[0],m=d[1];return l=null,r.point(p,m),l||(a.point(p,m),l)||(s.point(p,m),l)}h.invert=function(d){var p=n.scale(),m=n.translate(),_=(d[0]-m[0])/p,y=(d[1]-m[1])/p;return(y>=.12&&y<.234&&_>=-.425&&_<-.214?i:y>=.166&&y<.234&&_>=-.214&&_<-.115?o:n).invert(d)},h.stream=function(d){return t&&e===d?t:t=fY([n.stream(e=d),i.stream(d),o.stream(d)])},h.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},h.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),h.translate(n.translate())):n.scale()},h.translate=function(d){if(!arguments.length)return n.translate();var p=n.scale(),m=+d[0],_=+d[1];return r=n.translate(d).clipExtent([[m-.455*p,_-.238*p],[m+.455*p,_+.238*p]]).stream(u),a=i.translate([m-.307*p,_+.201*p]).clipExtent([[m-.425*p+ee,_+.12*p+ee],[m-.214*p-ee,_+.234*p-ee]]).stream(u),s=o.translate([m-.205*p,_+.212*p]).clipExtent([[m-.214*p+ee,_+.166*p+ee],[m-.115*p-ee,_+.234*p-ee]]).stream(u),f()},h.fitExtent=function(d,p){return S0(h,d,p)},h.fitSize=function(d,p){return g4(h,d,p)},h.fitWidth=function(d,p){return y4(h,d,p)},h.fitHeight=function(d,p){return m4(h,d,p)};function f(){return t=e=null,h}return h.scale(1070)}function KT(t){return function(e,n){var r=Gt(e),i=Gt(n),a=t(r*i);return a===1/0?[2,0]:[a*i*Ut(e),a*Ut(n)]}}function iu(t){return function(e,n){var r=Ln(e*e+n*n),i=t(r),a=Ut(i),o=Gt(i);return[sr(e*a,r*o),cr(r&&n*a/r)]}}var v4=KT(function(t){return Ln(2/(1+t))});v4.invert=iu(function(t){return 2*cr(t/2)});function gY(){return Yi(v4).scale(124.75).clipAngle(180-.001)}var x4=KT(function(t){return(t=yT(t))&&t/Ut(t)});x4.invert=iu(function(t){return t});function yY(){return Yi(x4).scale(79.4188).clipAngle(180-.001)}function au(t,e){return[t,Xh(h4((sn+e)/2))]}au.invert=function(t,e){return[t,2*ac(gT(e))-sn]};function mY(){return ZT(au).scale(961/or)}function ZT(t){var e=Yi(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,o=null,s,l,u;e.scale=function(f){return arguments.length?(r(f),h()):r()},e.translate=function(f){return arguments.length?(i(f),h()):i()},e.center=function(f){return arguments.length?(n(f),h()):n()},e.clipExtent=function(f){return arguments.length?(f==null?o=s=l=u=null:(o=+f[0][0],s=+f[0][1],l=+f[1][0],u=+f[1][1]),h()):o==null?null:[[o,s],[l,u]]};function h(){var f=Te*r(),d=e(ST(e.rotate()).invert([0,0]));return a(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:t===au?[[Math.max(d[0]-f,o),s],[Math.min(d[0]+f,l),u]]:[[o,Math.max(d[1]-f,s)],[l,Math.min(d[1]+f,u)]])}return h()}function Hu(t){return h4((sn+t)/2)}function QT(t,e){var n=Gt(t),r=t===e?Ut(t):Xh(n/Gt(e))/Xh(Hu(e)/Hu(t)),i=n*nf(Hu(t),r)/r;if(!r)return au;function a(o,s){i>0?s<-sn+ee&&(s=-sn+ee):s>sn-ee&&(s=sn-ee);var l=i/nf(Hu(s),r);return[l*Ut(r*o),i-l*Gt(r*o)]}return a.invert=function(o,s){var l=i-s,u=Ir(r)*Ln(o*o+l*l),h=sr(o,Ne(l))*Ir(l);return l*r<0&&(h-=Te*Ir(o)*Ir(l)),[h/r,2*ac(nf(i/u,1/r))-sn]},a}function bY(){return _4(QT).scale(109.5).parallels([30,30])}function Bl(t,e){return[t,e]}Bl.invert=Bl;function _Y(){return Yi(Bl).scale(152.63)}function JT(t,e){var n=Gt(t),r=t===e?Ut(t):(n-Gt(e))/(e-t),i=n/r+t;if(Ne(r)<ee)return Bl;function a(o,s){var l=i-s,u=r*o;return[l*Ut(u),i-l*Gt(u)]}return a.invert=function(o,s){var l=i-s,u=sr(o,Ne(l))*Ir(l);return l*r<0&&(u-=Te*Ir(o)*Ir(l)),[u/r,i-Ir(r)*Ln(o*o+l*l)]},a}function vY(){return _4(JT).scale(131.154).center([0,13.9389])}var nl=1.340264,rl=-.081106,il=893e-6,al=.003796,m1=Ln(3)/2,xY=12;function k4(t,e){var n=cr(m1*Ut(e)),r=n*n,i=r*r*r;return[t*Gt(n)/(m1*(nl+3*rl*r+i*(7*il+9*al*r))),n*(nl+rl*r+i*(il+al*r))]}k4.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,o,s,l;a<xY&&(s=n*(nl+rl*r+i*(il+al*r))-e,l=nl+3*rl*r+i*(7*il+9*al*r),n-=o=s/l,r=n*n,i=r*r*r,!(Ne(o)<Al));++a);return[m1*t*(nl+3*rl*r+i*(7*il+9*al*r))/Gt(n),cr(Ut(n)/m1)]};function kY(){return Yi(k4).scale(177.158)}function w4(t,e){var n=Gt(e),r=Gt(t)*n;return[n*Ut(t)/r,Ut(e)/r]}w4.invert=iu(ac);function wY(){return Yi(w4).scale(144.049).clipAngle(60)}function TY(){var t=1,e=0,n=0,r=1,i=1,a=0,o,s,l=null,u,h,f,d=1,p=1,m=ru({point:function(x,A){var C=T([x,A]);this.stream.point(C[0],C[1])}}),_=Ml,y,b;function k(){return d=t*r,p=t*i,y=b=null,T}function T(x){var A=x[0]*d,C=x[1]*p;if(a){var L=C*o-A*s;A=A*o+C*s,C=L}return[A+e,C+n]}return T.invert=function(x){var A=x[0]-e,C=x[1]-n;if(a){var L=C*o+A*s;A=A*o-C*s,C=L}return[A/d,C/p]},T.stream=function(x){return y&&b===x?y:y=m(_(b=x))},T.postclip=function(x){return arguments.length?(_=x,l=u=h=f=null,k()):_},T.clipExtent=function(x){return arguments.length?(_=x==null?(l=u=h=f=null,Ml):C0(l=+x[0][0],u=+x[0][1],h=+x[1][0],f=+x[1][1]),k()):l==null?null:[[l,u],[h,f]]},T.scale=function(x){return arguments.length?(t=+x,k()):t},T.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],k()):[e,n]},T.angle=function(x){return arguments.length?(a=x%360*re,s=Ut(a),o=Gt(a),k()):a*He},T.reflectX=function(x){return arguments.length?(r=x?-1:1,k()):r<0},T.reflectY=function(x){return arguments.length?(i=x?-1:1,k()):i<0},T.fitExtent=function(x,A){return S0(T,x,A)},T.fitSize=function(x,A){return g4(T,x,A)},T.fitWidth=function(x,A){return y4(T,x,A)},T.fitHeight=function(x,A){return m4(T,x,A)},T}function T4(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}T4.invert=function(t,e){var n=e,r=25,i;do{var a=n*n,o=a*a;n-=i=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-e)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(Ne(i)>ee&&--r>0);return[t/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function EY(){return Yi(T4).scale(175.295)}function E4(t,e){return[Gt(e)*Ut(t),Ut(e)]}E4.invert=iu(cr);function CY(){return Yi(E4).scale(249.5).clipAngle(90+ee)}function C4(t,e){var n=Gt(e),r=1+Gt(t)*n;return[n*Ut(t)/r,Ut(e)/r]}C4.invert=iu(function(t){return 2*ac(t)});function SY(){return Yi(C4).scale(250).clipAngle(142)}function S4(t,e){return[Xh(h4((sn+e)/2)),-t]}S4.invert=function(t,e){return[-e,2*ac(gT(t))-sn]};function AY(){var t=ZT(S4),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function MY(t,e){return t.parent===e.parent?1:2}function LY(t){return t.reduce(BY,0)/t.length}function BY(t,e){return t+e.x}function DY(t){return 1+t.reduce(NY,0)}function NY(t,e){return Math.max(t,e.y)}function OY(t){for(var e;e=t.children;)t=e[0];return t}function RY(t){for(var e;e=t.children;)t=e[e.length-1];return t}function IY(){var t=MY,e=1,n=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(d){var p=d.children;p?(d.x=LY(p),d.y=DY(p)):(d.x=o?s+=t(d,o):0,d.y=0,o=d)});var l=OY(a),u=RY(a),h=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return a.eachAfter(r?function(d){d.x=(d.x-a.x)*e,d.y=(a.y-d.y)*n}:function(d){d.x=(d.x-h)/(f-h)*e,d.y=(1-(a.y?d.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}function FY(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function $Y(){return this.eachAfter(FY)}function PY(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function YY(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function zY(t,e){for(var n=this,r=[n],i=[],a,o,s,l=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function jY(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function UY(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function HY(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function WY(t){for(var e=this,n=GY(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function GY(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function VY(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function qY(){return Array.from(this)}function XY(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function KY(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*ZY(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function A4(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=tz)):e===void 0&&(e=JY);for(var n=new Do(t),r,i=[n],a,o,s,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new Do(o[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(tE)}function QY(){return A4(this).eachBefore(ez)}function JY(t){return t.children}function tz(t){return Array.isArray(t)?t[1]:null}function ez(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function tE(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Do(t){this.data=t,this.depth=this.height=0,this.parent=null}Do.prototype=A4.prototype={constructor:Do,count:$Y,each:PY,eachAfter:zY,eachBefore:YY,find:jY,sum:UY,sort:HY,path:WY,ancestors:VY,descendants:qY,leaves:XY,links:KY,copy:QY,[Symbol.iterator]:ZY};function vh(t){return t==null?null:eE(t)}function eE(t){if(typeof t!="function")throw new Error;return t}function yo(){return 0}function gs(t){return function(){return t}}const nz=1664525,rz=1013904223,J_=4294967296;function M4(){let t=1;return()=>(t=(nz*t+rz)%J_)/J_}function iz(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function az(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function oz(t){return nE(t,M4())}function nE(t,e){for(var n=0,r=(t=az(Array.from(t),e)).length,i=[],a,o;n<r;)a=t[n],o&&rE(o,a)?++n:(o=cz(i=sz(i,a)),n=0);return o}function sz(t,e){var n,r;if(cf(e,t))return[e];for(n=0;n<t.length;++n)if(Wu(e,t[n])&&cf(qc(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Wu(qc(t[n],t[r]),e)&&Wu(qc(t[n],e),t[r])&&Wu(qc(t[r],e),t[n])&&cf(iE(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Wu(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function rE(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function cf(t,e){for(var n=0;n<e.length;++n)if(!rE(t,e[n]))return!1;return!0}function cz(t){switch(t.length){case 1:return lz(t[0]);case 2:return qc(t[0],t[1]);case 3:return iE(t[0],t[1],t[2])}}function lz(t){return{x:t.x,y:t.y,r:t.r}}function qc(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-r,h=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+a+l/f*h)/2,y:(r+o+u/f*h)/2,r:(f+i+s)/2}}function iE(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,h=n.y,f=n.r,d=r-o,p=r-u,m=i-s,_=i-h,y=l-a,b=f-a,k=r*r+i*i-a*a,T=k-o*o-s*s+l*l,x=k-u*u-h*h+f*f,A=p*m-d*_,C=(m*x-_*T)/(A*2)-r,L=(_*y-m*b)/A,S=(p*T-d*x)/(A*2)-i,N=(d*b-p*y)/A,v=L*L+N*N-1,M=2*(a+C*L+S*N),w=C*C+S*S-a*a,R=-(Math.abs(v)>1e-6?(M+Math.sqrt(M*M-4*v*w))/(2*v):w/M);return{x:r+C+L*R,y:i+S+N*R,r:R}}function t6(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,s,l,u=r*r+o*o;u?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-s*o,n.y=t.y-i*o+s*r):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),n.x=e.x+i*r-s*o,n.y=e.y+i*o+s*r)):(n.x=e.x+n.r,n.y=e.y)}function e6(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function n6(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Gu(t){this._=t,this.next=null,this.previous=null}function aE(t,e){if(!(a=(t=iz(t)).length))return 0;var n,r,i,a,o,s,l,u,h,f,d;if(n=t[0],n.x=0,n.y=0,!(a>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;t6(r,n,i=t[2]),n=new Gu(n),r=new Gu(r),i=new Gu(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<a;++l){t6(n._,r._,i=t[l]),i=new Gu(i),u=r.next,h=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(e6(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue t}f+=u._.r,u=u.next}else{if(e6(h._,i._)){n=h,n.next=r,r.previous=n,--l;continue t}d+=h._.r,h=h.previous}while(u!==h.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=n6(n);(i=i.next)!==r;)(s=n6(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=nE(n,e),l=0;l<a;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function uz(t){return aE(t,M4()),t}function hz(t){return Math.sqrt(t.value)}function dz(){var t=null,e=1,n=1,r=yo;function i(a){const o=M4();return a.x=e/2,a.y=n/2,t?a.eachBefore(r6(t)).eachAfter(lf(r,.5,o)).eachBefore(i6(1)):a.eachBefore(r6(hz)).eachAfter(lf(yo,1,o)).eachAfter(lf(r,a.r/Math.min(e,n),o)).eachBefore(i6(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=vh(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:gs(+a),i):r},i}function r6(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function lf(t,e,n){return function(r){if(i=r.children){var i,a,o=i.length,s=t(r)*e||0,l;if(s)for(a=0;a<o;++a)i[a].r+=s;if(l=aE(i,n),s)for(a=0;a<o;++a)i[a].r-=s;r.r=l+s}}}function i6(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function oE(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ou(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(r-e)/t.value;++s<l;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function fz(){var t=1,e=1,n=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(a(e,s)),r&&o.eachBefore(oE),o}function a(o,s){return function(l){l.children&&ou(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var u=l.x0,h=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<h&&(h=d=(h+d)/2),l.x0=u,l.y0=h,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var pz={depth:-1},a6={},uf={};function gz(t){return t.id}function yz(t){return t.parentId}function mz(){var t=gz,e=yz,n;function r(i){var a=Array.from(i),o=t,s=e,l,u,h,f,d,p,m,_,y=new Map;if(n!=null){const b=a.map((x,A)=>bz(n(x,A,i))),k=b.map(o6),T=new Set(b).add("");for(const x of k)T.has(x)||(T.add(x),b.push(x),k.push(o6(x)),a.push(uf));o=(x,A)=>b[A],s=(x,A)=>k[A]}for(h=0,l=a.length;h<l;++h)u=a[h],p=a[h]=new Do(u),(m=o(u,h,i))!=null&&(m+="")&&(_=p.id=m,y.set(_,y.has(_)?a6:p)),(m=s(u,h,i))!=null&&(m+="")&&(p.parent=m);for(h=0;h<l;++h)if(p=a[h],m=p.parent){if(d=y.get(m),!d)throw new Error("missing: "+m);if(d===a6)throw new Error("ambiguous: "+m);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(f)throw new Error("multiple roots");f=p}if(!f)throw new Error("no root");if(n!=null){for(;f.data===uf&&f.children.length===1;)f=f.children[0],--l;for(let b=a.length-1;b>=0&&(p=a[b],p.data===uf);--b)p.data=null}if(f.parent=pz,f.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(tE),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=vh(i),r):t},r.parentId=function(i){return arguments.length?(e=vh(i),r):e},r.path=function(i){return arguments.length?(n=vh(i),r):n},r}function bz(t){t=`${t}`;let e=t.length;return Qm(t,e-1)&&!Qm(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function o6(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Qm(t,e););return t.slice(0,e)}function Qm(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function _z(t,e){return t.parent===e.parent?1:2}function hf(t){var e=t.children;return e?e[0]:t.t}function df(t){var e=t.children;return e?e[e.length-1]:t.t}function vz(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function xz(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function kz(t,e,n){return t.a.parent===e.parent?t.a:n}function xh(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}xh.prototype=Object.create(Do.prototype);function wz(t){for(var e=new xh(t,0),n,r=[e],i,a,o,s;n=r.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=n.children[o]=new xh(a[o],o)),i.parent=n;return(e.parent=new xh(null,0)).children=[e],e}function Tz(){var t=_z,e=1,n=1,r=null;function i(u){var h=wz(u);if(h.eachAfter(a),h.parent.m=-h.z,h.eachBefore(o),r)u.eachBefore(l);else{var f=u,d=u,p=u;u.eachBefore(function(k){k.x<f.x&&(f=k),k.x>d.x&&(d=k),k.depth>p.depth&&(p=k)});var m=f===d?1:t(f,d)/2,_=m-f.x,y=e/(d.x+m+_),b=n/(p.depth||1);u.eachBefore(function(k){k.x=(k.x+_)*y,k.y=k.depth*b})}return u}function a(u){var h=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(h){xz(u);var p=(h[0].z+h[h.length-1].z)/2;d?(u.z=d.z+t(u._,d._),u.m=u.z-p):u.z=p}else d&&(u.z=d.z+t(u._,d._));u.parent.A=s(u,d,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,h,f){if(h){for(var d=u,p=u,m=h,_=d.parent.children[0],y=d.m,b=p.m,k=m.m,T=_.m,x;m=df(m),d=hf(d),m&&d;)_=hf(_),p=df(p),p.a=u,x=m.z+k-d.z-y+t(m._,d._),x>0&&(vz(kz(m,u,f),u,x),y+=x,b+=x),k+=m.m,y+=d.m,T+=_.m,b+=p.m;m&&!df(p)&&(p.t=m,p.m+=k-b),d&&!hf(_)&&(_.t=d,_.m+=y-T,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function A0(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(i-n)/t.value;++s<l;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var sE=(1+Math.sqrt(5))/2;function cE(t,e,n,r,i,a){for(var o=[],s=e.children,l,u,h=0,f=0,d=s.length,p,m,_=e.value,y,b,k,T,x,A,C;h<d;){p=i-n,m=a-r;do y=s[f++].value;while(!y&&f<d);for(b=k=y,A=Math.max(m/p,p/m)/(_*t),C=y*y*A,x=Math.max(k/C,C/b);f<d;++f){if(y+=u=s[f].value,u<b&&(b=u),u>k&&(k=u),C=y*y*A,T=Math.max(k/C,C/b),T>x){y-=u;break}x=T}o.push(l={value:y,dice:p<m,children:s.slice(h,f)}),l.dice?ou(l,n,r,i,_?r+=m*y/_:a):A0(l,n,r,_?n+=p*y/_:i,a),_-=y,h=f}return o}const lE=function t(e){function n(r,i,a,o,s){cE(e,r,i,a,o,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(sE);function Ez(){var t=lE,e=!1,n=1,r=1,i=[0],a=yo,o=yo,s=yo,l=yo,u=yo;function h(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(oE),d}function f(d){var p=i[d.depth],m=d.x0+p,_=d.y0+p,y=d.x1-p,b=d.y1-p;y<m&&(m=y=(m+y)/2),b<_&&(_=b=(_+b)/2),d.x0=m,d.y0=_,d.x1=y,d.y1=b,d.children&&(p=i[d.depth+1]=a(d)/2,m+=u(d)-p,_+=o(d)-p,y-=s(d)-p,b-=l(d)-p,y<m&&(m=y=(m+y)/2),b<_&&(_=b=(_+b)/2),t(d,m,_,y,b))}return h.round=function(d){return arguments.length?(e=!!d,h):e},h.size=function(d){return arguments.length?(n=+d[0],r=+d[1],h):[n,r]},h.tile=function(d){return arguments.length?(t=eE(d),h):t},h.padding=function(d){return arguments.length?h.paddingInner(d).paddingOuter(d):h.paddingInner()},h.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:gs(+d),h):a},h.paddingOuter=function(d){return arguments.length?h.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):h.paddingTop()},h.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:gs(+d),h):o},h.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:gs(+d),h):s},h.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:gs(+d),h):l},h.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:gs(+d),h):u},h}function Cz(t,e,n,r,i){var a=t.children,o,s=a.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=a[o].value;h(0,s,t.value,e,n,r,i);function h(f,d,p,m,_,y,b){if(f>=d-1){var k=a[f];k.x0=m,k.y0=_,k.x1=y,k.y1=b;return}for(var T=u[f],x=p/2+T,A=f+1,C=d-1;A<C;){var L=A+C>>>1;u[L]<x?A=L+1:C=L}x-u[A-1]<u[A]-x&&f+1<A&&--A;var S=u[A]-T,N=p-S;if(y-m>b-_){var v=p?(m*N+y*S)/p:y;h(f,A,S,m,_,v,b),h(A,d,N,v,_,y,b)}else{var M=p?(_*N+b*S)/p:b;h(f,A,S,m,_,y,M),h(A,d,N,m,M,y,b)}}}function Sz(t,e,n,r,i){(t.depth&1?A0:ou)(t,e,n,r,i)}const Az=function t(e){function n(r,i,a,o,s){if((l=r._squarify)&&l.ratio===e)for(var l,u,h,f,d=-1,p,m=l.length,_=r.value;++d<m;){for(u=l[d],h=u.children,f=u.value=0,p=h.length;f<p;++f)u.value+=h[f].value;u.dice?ou(u,i,a,o,_?a+=(s-a)*u.value/_:s):A0(u,i,a,_?i+=(o-i)*u.value/_:o,s),_-=u.value}else r._squarify=l=cE(e,r,i,a,o,s),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(sE);function Mz(t){for(var e=-1,n=t.length,r,i=t[n-1],a=0;++e<n;)r=i,i=t[e],a+=r[1]*i[0]-r[0]*i[1];return a/2}function Lz(t){for(var e=-1,n=t.length,r=0,i=0,a,o=t[n-1],s,l=0;++e<n;)a=o,o=t[e],l+=s=a[0]*o[1]-o[0]*a[1],r+=(a[0]+o[0])*s,i+=(a[1]+o[1])*s;return l*=3,[r/l,i/l]}function Bz(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Dz(t,e){return t[0]-e[0]||t[1]-e[1]}function s6(t){const e=t.length,n=[0,1];let r=2,i;for(i=2;i<e;++i){for(;r>1&&Bz(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Nz(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Dz),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=s6(r),o=s6(i),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(t[r[a[e]][2]]);for(e=+s;e<o.length-l;++e)u.push(t[r[o[e]][2]]);return u}function Oz(t,e){for(var n=t.length,r=t[n-1],i=e[0],a=e[1],o=r[0],s=r[1],l,u,h=!1,f=0;f<n;++f)r=t[f],l=r[0],u=r[1],u>a!=s>a&&i<(o-l)*(a-u)/(s-u)+l&&(h=!h),o=l,s=u;return h}function Rz(t){for(var e=-1,n=t.length,r=t[n-1],i,a,o=r[0],s=r[1],l=0;++e<n;)i=o,a=s,r=t[e],o=r[0],s=r[1],i-=o,a-=s,l+=Math.hypot(i,a);return l}const In=Math.random,Iz=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n}(In),Fz=function t(e){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return n.source=t,n}(In),L4=function t(e){function n(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(a!=null)s=a,a=null;else do a=e()*2-1,s=e()*2-1,o=a*a+s*s;while(!o||o>1);return r+i*s*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(In),$z=function t(e){var n=L4.source(e);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=t,r}(In),uE=function t(e){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return n.source=t,n}(In),Pz=function t(e){var n=uE.source(e);function r(i){if((i=+i)==0)return e;var a=n(i);return function(){return a()/i}}return r.source=t,r}(In),Yz=function t(e){function n(r){return function(){return-Math.log1p(-e())/r}}return n.source=t,n}(In),zz=function t(e){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return n.source=t,n}(In),jz=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return n.source=t,n}(In),hE=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return n.source=t,n}(In),B4=function t(e){var n=L4.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,s=1/(3*Math.sqrt(o)),l=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var u=n(),h=1+s*u;while(h<=0);h*=h*h;var f=1-e()}while(f>=1-.0331*u*u*u*u&&Math.log(f)>=.5*u*u+o*(1-h+Math.log(h)));return o*h*l()*a}}return r.source=t,r}(In),dE=function t(e){var n=B4.source(e);function r(i,a){var o=n(i),s=n(a);return function(){var l=o();return l===0?0:l/(l+s())}}return r.source=t,r}(In),fE=function t(e){var n=hE.source(e),r=dE.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var s=0,l=a,u=o;l*u>16&&l*(1-u)>16;){var h=Math.floor((l+1)*u),f=r(h,l-h+1)();f<=u?(s+=h,l-=h,u=(u-f)/(1-f)):(l=h-1,u/=f)}for(var d=u<.5,p=d?u:1-u,m=n(p),_=m(),y=0;_<=l;++y)_+=m();return s+(d?y:l-y)}}return i.source=t,i}(In),Uz=function t(e){function n(r,i,a){var o;return(r=+r)==0?o=s=>-Math.log(s):(r=1/r,o=s=>Math.pow(s,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return n.source=t,n}(In),Hz=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return n.source=t,n}(In),Wz=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return n.source=t,n}(In),Gz=function t(e){var n=B4.source(e),r=fE.source(e);function i(a){return function(){for(var o=0,s=a;s>16;){var l=Math.floor(.875*s),u=n(l)();if(u>s)return o+r(l-1,s/u)();o+=l,s-=u}for(var h=-Math.log1p(-e()),f=0;h<=s;++f)h-=Math.log1p(-e());return o+f}}return i.source=t,i}(In),Vz=1664525,qz=1013904223,c6=1/4294967296;function Xz(t=Math.random()){let e=(0<=t&&t<1?t/c6:Math.abs(t))|0;return()=>(e=Vz*e+qz|0,c6*(e>>>0))}function Pr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ya(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Jm=Symbol("implicit");function M0(){var t=new yl,e=[],n=[],r=Jm;function i(a){let o=t.get(a);if(o===void 0){if(r!==Jm)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new yl;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return M0(e,n).unknown(r)},Pr.apply(i,arguments),i}function D4(){var t=M0().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,h=.5;delete t.unknown;function f(){var d=e().length,p=i<r,m=p?i:r,_=p?r:i;a=(_-m)/Math.max(1,d-l+u*2),s&&(a=Math.floor(a)),m+=(_-m-a*(d-l))*h,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var y=Oa(d).map(function(b){return m+a*b});return n(p?y.reverse():y)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(s=!!d,f()):s},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},t.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),f()):h},t.copy=function(){return D4(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(h)},Pr.apply(f(),arguments)}function pE(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pE(e())},t}function Kz(){return pE(D4.apply(null,arguments).paddingInner(1))}function Zz(t){return function(){return t}}function b1(t){return+t}var l6=[0,1];function er(t){return t}function t3(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Zz(isNaN(e)?NaN:.5)}function Qz(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Jz(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=t3(i,r),a=n(o,a)):(r=t3(r,i),a=n(a,o)),function(s){return a(r(s))}}function tj(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=t3(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=zo(t,s,1,r)-1;return a[l](i[l](s))}}function su(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function L0(){var t=l6,e=l6,n=Qa,r,i,a,o=er,s,l,u;function h(){var d=Math.min(t.length,e.length);return o!==er&&(o=Qz(t[0],t[d-1])),s=d>2?tj:Jz,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=s(t.map(r),e,n)))(r(o(d)))}return f.invert=function(d){return o(i((u||(u=s(e,t.map(r),Rr)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,b1),h()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=y0,h()},f.clamp=function(d){return arguments.length?(o=d?!0:er,h()):o!==er},f.interpolate=function(d){return arguments.length?(n=d,h()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,p){return r=d,i=p,h()}}function N4(){return L0()(er,er)}function gE(t,e,n,r){var i=ml(t,e,n),a;switch(r=Ps(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=fT(i,o))&&(r.precision=a),u4(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=pT(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=dT(i))&&(r.precision=a-(r.type==="%")*2);break}}return E0(r)}function to(t){var e=t.domain;return t.ticks=function(n){var r=e();return Co(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return gE(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,h=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);h-- >0;){if(u=Ds(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function O4(){var t=N4();return t.copy=function(){return su(t,O4())},Pr.apply(t,arguments),to(t)}function yE(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,b1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return yE(t).unknown(e)},t=arguments.length?Array.from(t,b1):[0,1],to(n)}function mE(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function u6(t){return Math.log(t)}function h6(t){return Math.exp(t)}function ej(t){return-Math.log(-t)}function nj(t){return-Math.exp(-t)}function rj(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ij(t){return t===10?rj:t===Math.E?Math.exp:e=>Math.pow(t,e)}function aj(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function d6(t){return(e,n)=>-t(-e,n)}function R4(t){const e=t(u6,h6),n=e.domain;let r=10,i,a;function o(){return i=aj(r),a=ij(r),n()[0]<0?(i=d6(i),a=d6(a),t(ej,nj)):t(u6,h6),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let u=l[0],h=l[l.length-1];const f=h<u;f&&([u,h]=[h,u]);let d=i(u),p=i(h),m,_;const y=s==null?10:+s;let b=[];if(!(r%1)&&p-d<y){if(d=Math.floor(d),p=Math.ceil(p),u>0){for(;d<=p;++d)for(m=1;m<r;++m)if(_=d<0?m/a(-d):m*a(d),!(_<u)){if(_>h)break;b.push(_)}}else for(;d<=p;++d)for(m=r-1;m>=1;--m)if(_=d>0?m/a(-d):m*a(d),!(_<u)){if(_>h)break;b.push(_)}b.length*2<y&&(b=Co(u,h,y))}else b=Co(d,p,Math.min(p-d,y)).map(a);return f?b.reverse():b},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Ps(l)).precision==null&&(l.trim=!0),l=E0(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return h=>{let f=h/a(Math.round(i(h)));return f*r<r-.5&&(f*=r),f<=u?l(h):""}},e.nice=()=>n(mE(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function bE(){const t=R4(L0()).domain([1,10]);return t.copy=()=>su(t,bE()).base(t.base()),Pr.apply(t,arguments),t}function f6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function p6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function I4(t){var e=1,n=t(f6(e),p6(e));return n.constant=function(r){return arguments.length?t(f6(e=+r),p6(e)):e},to(n)}function _E(){var t=I4(L0());return t.copy=function(){return su(t,_E()).constant(t.constant())},Pr.apply(t,arguments)}function g6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function oj(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function sj(t){return t<0?-t*t:t*t}function F4(t){var e=t(er,er),n=1;function r(){return n===1?t(er,er):n===.5?t(oj,sj):t(g6(n),g6(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},to(e)}function $4(){var t=F4(L0());return t.copy=function(){return su(t,$4()).exponent(t.exponent())},Pr.apply(t,arguments),t}function cj(){return $4.apply(null,arguments).exponent(.5)}function y6(t){return Math.sign(t)*t*t}function lj(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function vE(){var t=N4(),e=[0,1],n=!1,r;function i(a){var o=lj(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(y6(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,b1)).map(y6)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return vE(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Pr.apply(i,arguments),to(i)}function xE(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=V9(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[zo(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(tn),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return xE().domain(t).range(e).unknown(r)},Pr.apply(a,arguments)}function kE(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[zo(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return kE().domain([t,e]).range(i).unknown(a)},Pr.apply(to(o),arguments)}function wE(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[zo(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return wE().domain(t).range(e).unknown(n)},Pr.apply(i,arguments)}var ff=new Date,pf=new Date;function Tn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return t(a=new Date(+a)),a},i.ceil=function(a){return t(a=new Date(a-1)),e(a,1),t(a),a},i.round=function(a){var o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=function(a,o){return e(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,s){var l=[],u;if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=function(a){return Tn(function(o){if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););})},n&&(i.count=function(a,o){return ff.setTime(+a),pf.setTime(+o),t(ff),t(pf),Math.floor(n(ff,pf))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?function(o){return r(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var _1=Tn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});_1.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Tn(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):_1};const e3=_1;var m6=_1.range;const ca=1e3,Fr=ca*60,la=Fr*60,No=la*24,P4=No*7,b6=No*30,gf=No*365;var TE=Tn(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*ca)},function(t,e){return(e-t)/ca},function(t){return t.getUTCSeconds()});const Ia=TE;var _6=TE.range,EE=Tn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ca)},function(t,e){t.setTime(+t+e*Fr)},function(t,e){return(e-t)/Fr},function(t){return t.getMinutes()});const Y4=EE;var uj=EE.range,CE=Tn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ca-t.getMinutes()*Fr)},function(t,e){t.setTime(+t+e*la)},function(t,e){return(e-t)/la},function(t){return t.getHours()});const z4=CE;var hj=CE.range,SE=Tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fr)/No,t=>t.getDate()-1);const cu=SE;var dj=SE.range;function Go(t){return Tn(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Fr)/P4})}var Us=Go(0),Dl=Go(1),AE=Go(2),ME=Go(3),Oo=Go(4),LE=Go(5),BE=Go(6),v6=Us.range,fj=Dl.range,pj=AE.range,gj=ME.range,yj=Oo.range,mj=LE.range,bj=BE.range,DE=Tn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const j4=DE;var _j=DE.range,U4=Tn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});U4.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Tn(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const Wa=U4;var vj=U4.range,NE=Tn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Fr)},function(t,e){return(e-t)/Fr},function(t){return t.getUTCMinutes()});const H4=NE;var xj=NE.range,OE=Tn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*la)},function(t,e){return(e-t)/la},function(t){return t.getUTCHours()});const W4=OE;var kj=OE.range,RE=Tn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/No},function(t){return t.getUTCDate()-1});const lu=RE;var wj=RE.range;function Vo(t){return Tn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/P4})}var Hs=Vo(0),Nl=Vo(1),IE=Vo(2),FE=Vo(3),Ro=Vo(4),$E=Vo(5),PE=Vo(6),x6=Hs.range,Tj=Nl.range,Ej=IE.range,Cj=FE.range,Sj=Ro.range,Aj=$E.range,Mj=PE.range,YE=Tn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const G4=YE;var Lj=YE.range,V4=Tn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});V4.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Tn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Ga=V4;var Bj=V4.range;function zE(t,e,n,r,i,a){const o=[[Ia,1,ca],[Ia,5,5*ca],[Ia,15,15*ca],[Ia,30,30*ca],[a,1,Fr],[a,5,5*Fr],[a,15,15*Fr],[a,30,30*Fr],[i,1,la],[i,3,3*la],[i,6,6*la],[i,12,12*la],[r,1,No],[r,2,2*No],[n,1,P4],[e,1,b6],[e,3,3*b6],[t,1,gf]];function s(u,h,f){const d=h<u;d&&([u,h]=[h,u]);const p=f&&typeof f.range=="function"?f:l(u,h,f),m=p?p.range(u,+h+1):[];return d?m.reverse():m}function l(u,h,f){const d=Math.abs(h-u)/f,p=i0(([,,y])=>y).right(o,d);if(p===o.length)return t.every(ml(u/gf,h/gf,f));if(p===0)return e3.every(Math.max(ml(u,h,f),1));const[m,_]=o[d/o[p-1][2]<o[p][2]/d?p-1:p];return m.every(_)}return[s,l]}const[jE,UE]=zE(Ga,G4,Hs,lu,W4,H4),[HE,WE]=zE(Wa,j4,Us,cu,z4,Y4);function yf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function mf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function GE(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Ac(i),h=Mc(i),f=Ac(a),d=Mc(a),p=Ac(o),m=Mc(o),_=Ac(s),y=Mc(s),b=Ac(l),k=Mc(l),T={a:Q,A:nt,b:z,B:Y,c:null,d:S6,e:S6,f:tU,g:uU,G:dU,H:Zj,I:Qj,j:Jj,L:VE,m:eU,M:nU,p:rt,q:lt,Q:L6,s:B6,S:rU,u:iU,U:aU,V:oU,w:sU,W:cU,x:null,X:null,y:lU,Y:hU,Z:fU,"%":M6},x={a:J,A:Z,b:q,B:it,c:null,d:A6,e:A6,f:mU,g:SU,G:MU,H:pU,I:gU,j:yU,L:XE,m:bU,M:_U,p:ut,q:G,Q:L6,s:B6,S:vU,u:xU,U:kU,V:wU,w:TU,W:EU,x:null,X:null,y:CU,Y:AU,Z:LU,"%":M6},A={a:v,A:M,b:w,B:R,c:B,d:E6,e:E6,f:Vj,g:T6,G:w6,H:C6,I:C6,j:Uj,L:Gj,m:jj,M:Hj,p:N,q:zj,Q:Xj,s:Kj,S:Wj,u:Ij,U:Fj,V:$j,w:Rj,W:Pj,x:$,X:F,y:T6,Y:w6,Z:Yj,"%":qj};T.x=C(n,T),T.X=C(r,T),T.c=C(e,T),x.x=C(n,x),x.X=C(r,x),x.c=C(e,x);function C(j,P){return function(X){var O=[],V=-1,U=0,H=j.length,xt,ot,Nt;for(X instanceof Date||(X=new Date(+X));++V<H;)j.charCodeAt(V)===37&&(O.push(j.slice(U,V)),(ot=k6[xt=j.charAt(++V)])!=null?xt=j.charAt(++V):ot=xt==="e"?" ":"0",(Nt=P[xt])&&(xt=Nt(X,ot)),O.push(xt),U=V+1);return O.push(j.slice(U,V)),O.join("")}}function L(j,P){return function(X){var O=Sc(1900,void 0,1),V=S(O,j,X+="",0),U,H;if(V!=X.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(P&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(U=mf(Sc(O.y,0,1)),H=U.getUTCDay(),U=H>4||H===0?Nl.ceil(U):Nl(U),U=lu.offset(U,(O.V-1)*7),O.y=U.getUTCFullYear(),O.m=U.getUTCMonth(),O.d=U.getUTCDate()+(O.w+6)%7):(U=yf(Sc(O.y,0,1)),H=U.getDay(),U=H>4||H===0?Dl.ceil(U):Dl(U),U=cu.offset(U,(O.V-1)*7),O.y=U.getFullYear(),O.m=U.getMonth(),O.d=U.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),H="Z"in O?mf(Sc(O.y,0,1)).getUTCDay():yf(Sc(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(H+5)%7:O.w+O.U*7-(H+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,mf(O)):yf(O)}}function S(j,P,X,O){for(var V=0,U=P.length,H=X.length,xt,ot;V<U;){if(O>=H)return-1;if(xt=P.charCodeAt(V++),xt===37){if(xt=P.charAt(V++),ot=A[xt in k6?P.charAt(V++):xt],!ot||(O=ot(j,X,O))<0)return-1}else if(xt!=X.charCodeAt(O++))return-1}return O}function N(j,P,X){var O=u.exec(P.slice(X));return O?(j.p=h.get(O[0].toLowerCase()),X+O[0].length):-1}function v(j,P,X){var O=p.exec(P.slice(X));return O?(j.w=m.get(O[0].toLowerCase()),X+O[0].length):-1}function M(j,P,X){var O=f.exec(P.slice(X));return O?(j.w=d.get(O[0].toLowerCase()),X+O[0].length):-1}function w(j,P,X){var O=b.exec(P.slice(X));return O?(j.m=k.get(O[0].toLowerCase()),X+O[0].length):-1}function R(j,P,X){var O=_.exec(P.slice(X));return O?(j.m=y.get(O[0].toLowerCase()),X+O[0].length):-1}function B(j,P,X){return S(j,e,P,X)}function $(j,P,X){return S(j,n,P,X)}function F(j,P,X){return S(j,r,P,X)}function Q(j){return o[j.getDay()]}function nt(j){return a[j.getDay()]}function z(j){return l[j.getMonth()]}function Y(j){return s[j.getMonth()]}function rt(j){return i[+(j.getHours()>=12)]}function lt(j){return 1+~~(j.getMonth()/3)}function J(j){return o[j.getUTCDay()]}function Z(j){return a[j.getUTCDay()]}function q(j){return l[j.getUTCMonth()]}function it(j){return s[j.getUTCMonth()]}function ut(j){return i[+(j.getUTCHours()>=12)]}function G(j){return 1+~~(j.getUTCMonth()/3)}return{format:function(j){var P=C(j+="",T);return P.toString=function(){return j},P},parse:function(j){var P=L(j+="",!1);return P.toString=function(){return j},P},utcFormat:function(j){var P=C(j+="",x);return P.toString=function(){return j},P},utcParse:function(j){var P=L(j+="",!0);return P.toString=function(){return j},P}}}var k6={"-":"",_:" ",0:"0"},Bn=/^\s*\d+/,Dj=/^%/,Nj=/[\\^$*+?|[\]().{}]/g;function Ie(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Oj(t){return t.replace(Nj,"\\$&")}function Ac(t){return new RegExp("^(?:"+t.map(Oj).join("|")+")","i")}function Mc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Rj(t,e,n){var r=Bn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ij(t,e,n){var r=Bn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Fj(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function $j(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Pj(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function w6(t,e,n){var r=Bn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function T6(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Yj(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zj(t,e,n){var r=Bn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function jj(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function E6(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Uj(t,e,n){var r=Bn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function C6(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Hj(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wj(t,e,n){var r=Bn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Gj(t,e,n){var r=Bn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Vj(t,e,n){var r=Bn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qj(t,e,n){var r=Dj.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Xj(t,e,n){var r=Bn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Kj(t,e,n){var r=Bn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function S6(t,e){return Ie(t.getDate(),e,2)}function Zj(t,e){return Ie(t.getHours(),e,2)}function Qj(t,e){return Ie(t.getHours()%12||12,e,2)}function Jj(t,e){return Ie(1+cu.count(Wa(t),t),e,3)}function VE(t,e){return Ie(t.getMilliseconds(),e,3)}function tU(t,e){return VE(t,e)+"000"}function eU(t,e){return Ie(t.getMonth()+1,e,2)}function nU(t,e){return Ie(t.getMinutes(),e,2)}function rU(t,e){return Ie(t.getSeconds(),e,2)}function iU(t){var e=t.getDay();return e===0?7:e}function aU(t,e){return Ie(Us.count(Wa(t)-1,t),e,2)}function qE(t){var e=t.getDay();return e>=4||e===0?Oo(t):Oo.ceil(t)}function oU(t,e){return t=qE(t),Ie(Oo.count(Wa(t),t)+(Wa(t).getDay()===4),e,2)}function sU(t){return t.getDay()}function cU(t,e){return Ie(Dl.count(Wa(t)-1,t),e,2)}function lU(t,e){return Ie(t.getFullYear()%100,e,2)}function uU(t,e){return t=qE(t),Ie(t.getFullYear()%100,e,2)}function hU(t,e){return Ie(t.getFullYear()%1e4,e,4)}function dU(t,e){var n=t.getDay();return t=n>=4||n===0?Oo(t):Oo.ceil(t),Ie(t.getFullYear()%1e4,e,4)}function fU(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ie(e/60|0,"0",2)+Ie(e%60,"0",2)}function A6(t,e){return Ie(t.getUTCDate(),e,2)}function pU(t,e){return Ie(t.getUTCHours(),e,2)}function gU(t,e){return Ie(t.getUTCHours()%12||12,e,2)}function yU(t,e){return Ie(1+lu.count(Ga(t),t),e,3)}function XE(t,e){return Ie(t.getUTCMilliseconds(),e,3)}function mU(t,e){return XE(t,e)+"000"}function bU(t,e){return Ie(t.getUTCMonth()+1,e,2)}function _U(t,e){return Ie(t.getUTCMinutes(),e,2)}function vU(t,e){return Ie(t.getUTCSeconds(),e,2)}function xU(t){var e=t.getUTCDay();return e===0?7:e}function kU(t,e){return Ie(Hs.count(Ga(t)-1,t),e,2)}function KE(t){var e=t.getUTCDay();return e>=4||e===0?Ro(t):Ro.ceil(t)}function wU(t,e){return t=KE(t),Ie(Ro.count(Ga(t),t)+(Ga(t).getUTCDay()===4),e,2)}function TU(t){return t.getUTCDay()}function EU(t,e){return Ie(Nl.count(Ga(t)-1,t),e,2)}function CU(t,e){return Ie(t.getUTCFullYear()%100,e,2)}function SU(t,e){return t=KE(t),Ie(t.getUTCFullYear()%100,e,2)}function AU(t,e){return Ie(t.getUTCFullYear()%1e4,e,4)}function MU(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ro(t):Ro.ceil(t),Ie(t.getUTCFullYear()%1e4,e,4)}function LU(){return"+0000"}function M6(){return"%"}function L6(t){return+t}function B6(t){return Math.floor(+t/1e3)}var ps,Ol,ZE,B0,q4;QE({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QE(t){return ps=GE(t),Ol=ps.format,ZE=ps.parse,B0=ps.utcFormat,q4=ps.utcParse,ps}var JE="%Y-%m-%dT%H:%M:%S.%LZ";function BU(t){return t.toISOString()}var DU=Date.prototype.toISOString?BU:B0(JE);const NU=DU;function OU(t){var e=new Date(t);return isNaN(e)?null:e}var RU=+new Date("2000-01-01T00:00:00.000Z")?OU:q4(JE);const IU=RU;function FU(t){return new Date(t)}function $U(t){return t instanceof Date?+t:+new Date(+t)}function X4(t,e,n,r,i,a,o,s,l,u){var h=N4(),f=h.invert,d=h.domain,p=u(".%L"),m=u(":%S"),_=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),k=u("%b %d"),T=u("%B"),x=u("%Y");function A(C){return(l(C)<C?p:s(C)<C?m:o(C)<C?_:a(C)<C?y:r(C)<C?i(C)<C?b:k:n(C)<C?T:x)(C)}return h.invert=function(C){return new Date(f(C))},h.domain=function(C){return arguments.length?d(Array.from(C,$U)):d().map(FU)},h.ticks=function(C){var L=d();return t(L[0],L[L.length-1],C==null?10:C)},h.tickFormat=function(C,L){return L==null?A:u(L)},h.nice=function(C){var L=d();return(!C||typeof C.range!="function")&&(C=e(L[0],L[L.length-1],C==null?10:C)),C?d(mE(L,C)):h},h.copy=function(){return su(h,X4(t,e,n,r,i,a,o,s,l,u))},h}function tC(){return Pr.apply(X4(HE,WE,Wa,j4,Us,cu,z4,Y4,Ia,Ol).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PU(){return Pr.apply(X4(jE,UE,Ga,G4,Hs,lu,W4,H4,Ia,B0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function D0(){var t=0,e=1,n,r,i,a,o=er,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function h(f){return function(d){var p,m;return arguments.length?([p,m]=d,o=f(p,m),u):[o(0),o(1)]}}return u.range=h(Qa),u.rangeRound=h(y0),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function eo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function eC(){var t=to(D0()(er));return t.copy=function(){return eo(t,eC())},ya.apply(t,arguments)}function nC(){var t=R4(D0()).domain([1,10]);return t.copy=function(){return eo(t,nC()).base(t.base())},ya.apply(t,arguments)}function rC(){var t=I4(D0());return t.copy=function(){return eo(t,rC()).constant(t.constant())},ya.apply(t,arguments)}function K4(){var t=F4(D0());return t.copy=function(){return eo(t,K4()).exponent(t.exponent())},ya.apply(t,arguments)}function YU(){return K4.apply(null,arguments).exponent(.5)}function iC(){var t=[],e=er;function n(r){if(r!=null&&!isNaN(r=+r))return e((zo(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(tn),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>_l(t,a/r))},n.copy=function(){return iC(e).domain(t)},ya.apply(n,arguments)}function N0(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,u=er,h,f=!1,d;function p(_){return isNaN(_=+_)?d:(_=.5+((_=+h(_))-a)*(r*_<r*a?s:l),u(f?Math.max(0,Math.min(1,_)):_))}p.domain=function(_){return arguments.length?([t,e,n]=_,i=h(t=+t),a=h(e=+e),o=h(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,p):[t,e,n]},p.clamp=function(_){return arguments.length?(f=!!_,p):f},p.interpolator=function(_){return arguments.length?(u=_,p):u};function m(_){return function(y){var b,k,T;return arguments.length?([b,k,T]=y,u=Uw(_,[b,k,T]),p):[u(0),u(.5),u(1)]}}return p.range=m(Qa),p.rangeRound=m(y0),p.unknown=function(_){return arguments.length?(d=_,p):d},function(_){return h=_,i=_(t),a=_(e),o=_(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,p}}function aC(){var t=to(N0()(er));return t.copy=function(){return eo(t,aC())},ya.apply(t,arguments)}function oC(){var t=R4(N0()).domain([.1,1,10]);return t.copy=function(){return eo(t,oC()).base(t.base())},ya.apply(t,arguments)}function sC(){var t=I4(N0());return t.copy=function(){return eo(t,sC()).constant(t.constant())},ya.apply(t,arguments)}function Z4(){var t=F4(N0());return t.copy=function(){return eo(t,Z4()).exponent(t.exponent())},ya.apply(t,arguments)}function zU(){return Z4.apply(null,arguments).exponent(.5)}function ke(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const jU=ke("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),UU=ke("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),HU=ke("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),WU=ke("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),GU=ke("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),VU=ke("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qU=ke("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),XU=ke("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),KU=ke("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ZU=ke("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),We=t=>Aw(t[t.length-1]);var cC=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ke);const QU=We(cC);var lC=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ke);const JU=We(lC);var uC=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ke);const tH=We(uC);var hC=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ke);const eH=We(hC);var dC=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ke);const nH=We(dC);var fC=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ke);const rH=We(fC);var pC=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ke);const iH=We(pC);var gC=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ke);const aH=We(gC);var yC=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ke);const oH=We(yC);var mC=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ke);const sH=We(mC);var bC=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ke);const cH=We(bC);var _C=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ke);const lH=We(_C);var vC=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ke);const uH=We(vC);var xC=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ke);const hH=We(xC);var kC=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ke);const dH=We(kC);var wC=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ke);const fH=We(wC);var TC=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ke);const pH=We(TC);var EC=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ke);const gH=We(EC);var CC=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ke);const yH=We(CC);var SC=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ke);const mH=We(SC);var AC=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ke);const bH=We(AC);var MC=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ke);const _H=We(MC);var LC=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ke);const vH=We(LC);var BC=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ke);const xH=We(BC);var DC=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ke);const kH=We(DC);var NC=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ke);const wH=We(NC);var OC=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ke);const TH=We(OC);function EH(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const CH=m0(ai(300,.5,0),ai(-240,.5,1));var SH=m0(ai(-100,.75,.35),ai(80,1.5,.8)),AH=m0(ai(260,.75,.35),ai(80,1.5,.8)),Vu=ai();function MH(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Vu.h=360*t-100,Vu.s=1.5-1.5*e,Vu.l=.8-.9*e,Vu+""}var qu=Rs(),LH=Math.PI/3,BH=Math.PI*2/3;function DH(t){var e;return t=(.5-t)*Math.PI,qu.r=255*(e=Math.sin(t))*e,qu.g=255*(e=Math.sin(t+LH))*e,qu.b=255*(e=Math.sin(t+BH))*e,qu+""}function NH(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function O0(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const OH=O0(ke("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var RH=O0(ke("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),IH=O0(ke("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),FH=O0(ke("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function xe(t){return function(){return t}}const D6=Math.abs,zn=Math.atan2,ia=Math.cos,$H=Math.max,Es=Math.min,fr=Math.sin,Ge=Math.sqrt,jn=1e-12,Va=Math.PI,v1=Va/2,$a=2*Va;function PH(t){return t>1?0:t<-1?Va:Math.acos(t)}function N6(t){return t>=1?v1:t<=-1?-v1:Math.asin(t)}function YH(t){return t.innerRadius}function zH(t){return t.outerRadius}function jH(t){return t.startAngle}function UH(t){return t.endAngle}function HH(t){return t&&t.padAngle}function WH(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,h=o-i,f=s-a,d=f*l-h*u;if(!(d*d<jn))return d=(h*(e-a)-f*(t-i))/d,[t+d*l,e+d*u]}function Xu(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/Ge(s*s+l*l),h=u*l,f=-u*s,d=t+h,p=e+f,m=n+h,_=r+f,y=(d+m)/2,b=(p+_)/2,k=m-d,T=_-p,x=k*k+T*T,A=i-a,C=d*_-m*p,L=(T<0?-1:1)*Ge($H(0,A*A*x-C*C)),S=(C*T-k*L)/x,N=(-C*k-T*L)/x,v=(C*T+k*L)/x,M=(-C*k+T*L)/x,w=S-y,R=N-b,B=v-y,$=M-b;return w*w+R*R>B*B+$*$&&(S=v,N=M),{cx:S,cy:N,x01:-h,y01:-f,x11:S*(i/A-1),y11:N*(i/A-1)}}function x1(){var t=YH,e=zH,n=xe(0),r=null,i=jH,a=UH,o=HH,s=null;function l(){var u,h,f=+t.apply(this,arguments),d=+e.apply(this,arguments),p=i.apply(this,arguments)-v1,m=a.apply(this,arguments)-v1,_=D6(m-p),y=m>p;if(s||(s=u=Ja()),d<f&&(h=d,d=f,f=h),!(d>jn))s.moveTo(0,0);else if(_>$a-jn)s.moveTo(d*ia(p),d*fr(p)),s.arc(0,0,d,p,m,!y),f>jn&&(s.moveTo(f*ia(m),f*fr(m)),s.arc(0,0,f,m,p,y));else{var b=p,k=m,T=p,x=m,A=_,C=_,L=o.apply(this,arguments)/2,S=L>jn&&(r?+r.apply(this,arguments):Ge(f*f+d*d)),N=Es(D6(d-f)/2,+n.apply(this,arguments)),v=N,M=N,w,R;if(S>jn){var B=N6(S/f*fr(L)),$=N6(S/d*fr(L));(A-=B*2)>jn?(B*=y?1:-1,T+=B,x-=B):(A=0,T=x=(p+m)/2),(C-=$*2)>jn?($*=y?1:-1,b+=$,k-=$):(C=0,b=k=(p+m)/2)}var F=d*ia(b),Q=d*fr(b),nt=f*ia(x),z=f*fr(x);if(N>jn){var Y=d*ia(k),rt=d*fr(k),lt=f*ia(T),J=f*fr(T),Z;if(_<Va&&(Z=WH(F,Q,lt,J,Y,rt,nt,z))){var q=F-Z[0],it=Q-Z[1],ut=Y-Z[0],G=rt-Z[1],j=1/fr(PH((q*ut+it*G)/(Ge(q*q+it*it)*Ge(ut*ut+G*G)))/2),P=Ge(Z[0]*Z[0]+Z[1]*Z[1]);v=Es(N,(f-P)/(j-1)),M=Es(N,(d-P)/(j+1))}}C>jn?M>jn?(w=Xu(lt,J,F,Q,d,M,y),R=Xu(Y,rt,nt,z,d,M,y),s.moveTo(w.cx+w.x01,w.cy+w.y01),M<N?s.arc(w.cx,w.cy,M,zn(w.y01,w.x01),zn(R.y01,R.x01),!y):(s.arc(w.cx,w.cy,M,zn(w.y01,w.x01),zn(w.y11,w.x11),!y),s.arc(0,0,d,zn(w.cy+w.y11,w.cx+w.x11),zn(R.cy+R.y11,R.cx+R.x11),!y),s.arc(R.cx,R.cy,M,zn(R.y11,R.x11),zn(R.y01,R.x01),!y))):(s.moveTo(F,Q),s.arc(0,0,d,b,k,!y)):s.moveTo(F,Q),!(f>jn)||!(A>jn)?s.lineTo(nt,z):v>jn?(w=Xu(nt,z,Y,rt,f,-v,y),R=Xu(F,Q,lt,J,f,-v,y),s.lineTo(w.cx+w.x01,w.cy+w.y01),v<N?s.arc(w.cx,w.cy,v,zn(w.y01,w.x01),zn(R.y01,R.x01),!y):(s.arc(w.cx,w.cy,v,zn(w.y01,w.x01),zn(w.y11,w.x11),!y),s.arc(0,0,f,zn(w.cy+w.y11,w.cx+w.x11),zn(R.cy+R.y11,R.cx+R.x11),y),s.arc(R.cx,R.cy,v,zn(R.y11,R.x11),zn(R.y01,R.x01),!y))):s.arc(0,0,f,x,T,y)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Va/2;return[ia(h)*u,fr(h)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:xe(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:xe(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:xe(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:xe(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:xe(+u),l):i},l.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:xe(+u),l):a},l.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:xe(+u),l):o},l.context=function(u){return arguments.length?(s=u==null?null:u,l):s},l}var GH=Array.prototype.slice;function R0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function RC(t){this._context=t}RC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function _r(t){return new RC(t)}function Q4(t){return t[0]}function J4(t){return t[1]}function no(t,e){var n=xe(!0),r=null,i=_r,a=null;t=typeof t=="function"?t:t===void 0?Q4:xe(t),e=typeof e=="function"?e:e===void 0?J4:xe(e);function o(s){var l,u=(s=R0(s)).length,h,f=!1,d;for(r==null&&(a=i(d=Ja())),l=0;l<=u;++l)!(l<u&&n(h=s[l],l,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,l,s),+e(h,l,s));if(d)return a=null,d+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:xe(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:xe(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:xe(!!s),o):n},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function IC(t,e,n){var r=null,i=xe(!0),a=null,o=_r,s=null;t=typeof t=="function"?t:t===void 0?Q4:xe(+t),e=typeof e=="function"?e:xe(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?J4:xe(+n);function l(h){var f,d,p,m=(h=R0(h)).length,_,y=!1,b,k=new Array(m),T=new Array(m);for(a==null&&(s=o(b=Ja())),f=0;f<=m;++f){if(!(f<m&&i(_=h[f],f,h))===y)if(y=!y)d=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=f-1;p>=d;--p)s.point(k[p],T[p]);s.lineEnd(),s.areaEnd()}y&&(k[f]=+t(_,f,h),T[f]=+e(_,f,h),s.point(r?+r(_,f,h):k[f],n?+n(_,f,h):T[f]))}if(b)return s=null,b+""||null}function u(){return no().defined(i).curve(o).context(a)}return l.x=function(h){return arguments.length?(t=typeof h=="function"?h:xe(+h),r=null,l):t},l.x0=function(h){return arguments.length?(t=typeof h=="function"?h:xe(+h),l):t},l.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:xe(+h),l):r},l.y=function(h){return arguments.length?(e=typeof h=="function"?h:xe(+h),n=null,l):e},l.y0=function(h){return arguments.length?(e=typeof h=="function"?h:xe(+h),l):e},l.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:xe(+h),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(h){return arguments.length?(i=typeof h=="function"?h:xe(!!h),l):i},l.curve=function(h){return arguments.length?(o=h,a!=null&&(s=o(a)),l):o},l.context=function(h){return arguments.length?(h==null?a=s=null:s=o(a=h),l):a},l}function VH(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function qH(t){return t}function FC(){var t=qH,e=VH,n=null,r=xe(0),i=xe($a),a=xe(0);function o(s){var l,u=(s=R0(s)).length,h,f,d=0,p=new Array(u),m=new Array(u),_=+r.apply(this,arguments),y=Math.min($a,Math.max(-$a,i.apply(this,arguments)-_)),b,k=Math.min(Math.abs(y)/u,a.apply(this,arguments)),T=k*(y<0?-1:1),x;for(l=0;l<u;++l)(x=m[p[l]=l]=+t(s[l],l,s))>0&&(d+=x);for(e!=null?p.sort(function(A,C){return e(m[A],m[C])}):n!=null&&p.sort(function(A,C){return n(s[A],s[C])}),l=0,f=d?(y-u*T)/d:0;l<u;++l,_=b)h=p[l],x=m[h],b=_+(x>0?x*f:0)+T,m[h]={data:s[h],index:l,value:x,startAngle:_,endAngle:b,padAngle:k};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:xe(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:xe(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:xe(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:xe(+s),o):a},o}var $C=tb(_r);function PC(t){this._curve=t}PC.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function tb(t){function e(n){return new PC(t(n))}return e._curve=t,e}function Xc(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(tb(n)):e()._curve},t}function O6(){return Xc(no().curve($C))}function R6(){var t=IC().curve($C),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Xc(n())},delete t.lineX0,t.lineEndAngle=function(){return Xc(r())},delete t.lineX1,t.lineInnerRadius=function(){return Xc(i())},delete t.lineY0,t.lineOuterRadius=function(){return Xc(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(tb(o)):e()._curve},t}function Kc(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}class YC{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}class XH{constructor(e){this._context=e}lineStart(){this._point=0}lineEnd(){}point(e,n){if(e=+e,n=+n,this._point++===0)this._x0=e,this._y0=n;else{const r=Kc(this._x0,this._y0),i=Kc(this._x0,this._y0=(this._y0+n)/2),a=Kc(e,this._y0),o=Kc(e,n);this._context.moveTo(...r),this._context.bezierCurveTo(...i,...a,...o)}}}function zC(t){return new YC(t,!0)}function jC(t){return new YC(t,!1)}function KH(t){return new XH(t)}function ZH(t){return t.source}function QH(t){return t.target}function I0(t){let e=ZH,n=QH,r=Q4,i=J4,a=null,o=null;function s(){let l;const u=GH.call(arguments),h=e.apply(this,u),f=n.apply(this,u);if(a==null&&(o=t(l=Ja())),o.lineStart(),u[0]=h,o.point(+r.apply(this,u),+i.apply(this,u)),u[0]=f,o.point(+r.apply(this,u),+i.apply(this,u)),o.lineEnd(),l)return o=null,l+""||null}return s.source=function(l){return arguments.length?(e=l,s):e},s.target=function(l){return arguments.length?(n=l,s):n},s.x=function(l){return arguments.length?(r=typeof l=="function"?l:xe(+l),s):r},s.y=function(l){return arguments.length?(i=typeof l=="function"?l:xe(+l),s):i},s.context=function(l){return arguments.length?(l==null?a=o=null:o=t(a=l),s):a},s}function JH(){return I0(zC)}function tW(){return I0(jC)}function eW(){const t=I0(KH);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const nW=Ge(3),UC={draw(t,e){const n=Ge(e+Es(e/28,.75))*.59436,r=n/2,i=r*nW;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},F0={draw(t,e){const n=Ge(e/Va);t.moveTo(n,0),t.arc(0,0,n,0,$a)}},HC={draw(t,e){const n=Ge(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},WC=Ge(1/3),rW=WC*2,GC={draw(t,e){const n=Ge(e/rW),r=n*WC;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},VC={draw(t,e){const n=Ge(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},qC={draw(t,e){const n=Ge(e-Es(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},XC={draw(t,e){const n=Ge(e),r=-n/2;t.rect(r,r,n,n)}},KC={draw(t,e){const n=Ge(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},iW=.8908130915292852,ZC=fr(Va/10)/fr(7*Va/10),aW=fr($a/10)*ZC,oW=-ia($a/10)*ZC,QC={draw(t,e){const n=Ge(e*iW),r=aW*n,i=oW*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=$a*a/5,s=ia(o),l=fr(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},bf=Ge(3),JC={draw(t,e){const n=-Ge(e/(bf*3));t.moveTo(0,n*2),t.lineTo(-bf*n,-n),t.lineTo(bf*n,-n),t.closePath()}},sW=Ge(3),tS={draw(t,e){const n=Ge(e)*.6824,r=n/2,i=n*sW/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},Br=-.5,Dr=Ge(3)/2,n3=1/Ge(12),cW=(n3/2+1)*3,eS={draw(t,e){const n=Ge(e/cW),r=n/2,i=n*n3,a=r,o=n*n3+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Br*r-Dr*i,Dr*r+Br*i),t.lineTo(Br*a-Dr*o,Dr*a+Br*o),t.lineTo(Br*s-Dr*l,Dr*s+Br*l),t.lineTo(Br*r+Dr*i,Br*i-Dr*r),t.lineTo(Br*a+Dr*o,Br*o-Dr*a),t.lineTo(Br*s+Dr*l,Br*l-Dr*s),t.closePath()}},nS={draw(t,e){const n=Ge(e-Es(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},I6=[F0,HC,GC,XC,QC,JC,eS],lW=[F0,qC,nS,tS,UC,KC,VC];function uW(t,e){let n=null;t=typeof t=="function"?t:xe(t||F0),e=typeof e=="function"?e:xe(e===void 0?64:+e);function r(){let i;if(n||(n=i=Ja()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:xe(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:xe(+i),r):e},r.context=function(i){return arguments.length?(n=i==null?null:i,r):n},r}function qa(){}function k1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $0(t){this._context=t}$0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:k1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:k1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Io(t){return new $0(t)}function rS(t){this._context=t}rS.prototype={areaStart:qa,areaEnd:qa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:k1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function iS(t){return new rS(t)}function aS(t){this._context=t}aS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:k1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oS(t){return new aS(t)}function sS(t,e){this._basis=new $0(t),this._beta=e}sS.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*a),this._beta*e[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const hW=function t(e){function n(r){return e===1?new $0(r):new sS(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function w1(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function eb(t,e){this._context=t,this._k=(1-e)/6}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:w1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:w1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const dW=function t(e){function n(r){return new eb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function nb(t,e){this._context=t,this._k=(1-e)/6}nb.prototype={areaStart:qa,areaEnd:qa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:w1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const fW=function t(e){function n(r){return new nb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function rb(t,e){this._context=t,this._k=(1-e)/6}rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:w1(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const pW=function t(e){function n(r){return new rb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ib(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>jn){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>jn){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function cS(t,e){this._context=t,this._alpha=e}cS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ib(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gW=function t(e){function n(r){return e?new cS(r,e):new eb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function lS(t,e){this._context=t,this._alpha=e}lS.prototype={areaStart:qa,areaEnd:qa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ib(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const yW=function t(e){function n(r){return e?new lS(r,e):new nb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function uS(t,e){this._context=t,this._alpha=e}uS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ib(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const mW=function t(e){function n(r){return e?new uS(r,e):new rb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function hS(t){this._context=t}hS.prototype={areaStart:qa,areaEnd:qa,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function dS(t){return new hS(t)}function F6(t){return t<0?-1:1}function $6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(F6(a)+F6(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function P6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _f(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function T1(t){this._context=t}T1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_f(this,this._t0,P6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_f(this,P6(this,n=$6(this,t,e)),n);break;default:_f(this,this._t0,n=$6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function fS(t){this._context=new pS(t)}(fS.prototype=Object.create(T1.prototype)).point=function(t,e){T1.prototype.point.call(this,e,t)};function pS(t){this._context=t}pS.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function gS(t){return new T1(t)}function yS(t){return new fS(t)}function mS(t){this._context=t}mS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Y6(t),i=Y6(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Y6(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function bS(t){return new mS(t)}function P0(t,e){this._context=t,this._t=e}P0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _S(t){return new P0(t,.5)}function vS(t){return new P0(t,0)}function xS(t){return new P0(t,1)}function Ws(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Gs(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function bW(t,e){return t[e]}function _W(t){const e=[];return e.key=t,e}function vW(){var t=xe([]),e=Gs,n=Ws,r=bW;function i(a){var o=Array.from(t.apply(this,arguments),_W),s,l=o.length,u=-1,h;for(const f of a)for(s=0,++u;s<l;++s)(o[s][u]=[0,+r(f,o[s].key,u,a)]).data=f;for(s=0,h=R0(e(o));s<l;++s)o[h[s]].index=s;return n(o,h),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:xe(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:xe(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Gs:typeof a=="function"?a:xe(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a==null?Ws:a,i):n},i}function xW(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Ws(t,e)}}function kW(t,e){if((l=t.length)>0)for(var n,r=0,i,a,o,s,l,u=t[e[0]].length;r<u;++r)for(o=s=0,n=0;n<l;++n)(a=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=s,i[0]=s+=a):(i[0]=0,i[1]=a)}function wW(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}Ws(t,e)}}function TW(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,u=0;s<o;++s){for(var h=t[e[s]],f=h[r][1]||0,d=h[r-1][1]||0,p=(f-d)/2,m=0;m<s;++m){var _=t[e[m]],y=_[r][1]||0,b=_[r-1][1]||0;p+=y-b}l+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Ws(t,e)}}function kS(t){var e=t.map(EW);return Gs(t).sort(function(n,r){return e[n]-e[r]})}function EW(t){for(var e=-1,n=0,r=t.length,i,a=-1/0;++e<r;)(i=+t[e][1])>a&&(a=i,n=e);return n}function wS(t){var e=t.map(TS);return Gs(t).sort(function(n,r){return e[n]-e[r]})}function TS(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function CW(t){return wS(t).reverse()}function SW(t){var e=t.length,n,r,i=t.map(TS),a=kS(t),o=0,s=0,l=[],u=[];for(n=0;n<e;++n)r=a[n],o<s?(o+=i[r],l.push(r)):(s+=i[r],u.push(r));return u.reverse().concat(l)}function AW(t){return Gs(t).reverse()}const Ku=t=>()=>t;function MW(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Si(t,e,n){this.k=t,this.x=e,this.y=n}Si.prototype={constructor:Si,scale:function(t){return t===1?this:new Si(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Si(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Y0=new Si(1,0,0);ES.prototype=Si.prototype;function ES(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Y0;return t.__zoom}function vf(t){t.stopImmediatePropagation()}function Lc(t){t.preventDefault(),t.stopImmediatePropagation()}function LW(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function BW(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function z6(){return this.__zoom||Y0}function DW(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function NW(){return navigator.maxTouchPoints||"ontouchstart"in this}function OW(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function RW(){var t=LW,e=BW,n=OW,r=DW,i=NW,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=$w,u=jo("start","zoom","end"),h,f,d,p=500,m=150,_=0,y=10;function b(B){B.property("__zoom",z6).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",v).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",w).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(B,$,F,Q){var nt=B.selection?B.selection():B;nt.property("__zoom",z6),B!==nt?A(B,$,F,Q):nt.interrupt().each(function(){C(this,arguments).event(Q).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},b.scaleBy=function(B,$,F,Q){b.scaleTo(B,function(){var nt=this.__zoom.k,z=typeof $=="function"?$.apply(this,arguments):$;return nt*z},F,Q)},b.scaleTo=function(B,$,F,Q){b.transform(B,function(){var nt=e.apply(this,arguments),z=this.__zoom,Y=F==null?x(nt):typeof F=="function"?F.apply(this,arguments):F,rt=z.invert(Y),lt=typeof $=="function"?$.apply(this,arguments):$;return n(T(k(z,lt),Y,rt),nt,o)},F,Q)},b.translateBy=function(B,$,F,Q){b.transform(B,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof F=="function"?F.apply(this,arguments):F),e.apply(this,arguments),o)},null,Q)},b.translateTo=function(B,$,F,Q,nt){b.transform(B,function(){var z=e.apply(this,arguments),Y=this.__zoom,rt=Q==null?x(z):typeof Q=="function"?Q.apply(this,arguments):Q;return n(Y0.translate(rt[0],rt[1]).scale(Y.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof F=="function"?-F.apply(this,arguments):-F),z,o)},Q,nt)};function k(B,$){return $=Math.max(a[0],Math.min(a[1],$)),$===B.k?B:new Si($,B.x,B.y)}function T(B,$,F){var Q=$[0]-F[0]*B.k,nt=$[1]-F[1]*B.k;return Q===B.x&&nt===B.y?B:new Si(B.k,Q,nt)}function x(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function A(B,$,F,Q){B.on("start.zoom",function(){C(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(Q).end()}).tween("zoom",function(){var nt=this,z=arguments,Y=C(nt,z).event(Q),rt=e.apply(nt,z),lt=F==null?x(rt):typeof F=="function"?F.apply(nt,z):F,J=Math.max(rt[1][0]-rt[0][0],rt[1][1]-rt[0][1]),Z=nt.__zoom,q=typeof $=="function"?$.apply(nt,z):$,it=l(Z.invert(lt).concat(J/Z.k),q.invert(lt).concat(J/q.k));return function(ut){if(ut===1)ut=q;else{var G=it(ut),j=J/G[2];ut=new Si(j,lt[0]-G[0]*j,lt[1]-G[1]*j)}Y.zoom(null,ut)}})}function C(B,$,F){return!F&&B.__zooming||new L(B,$)}function L(B,$){this.that=B,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,$),this.taps=0}L.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,$){return this.mouse&&B!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var $=Lt(this.that).datum();u.call(B,this.that,new MW(B,{sourceEvent:this.sourceEvent,target:b,type:B,transform:this.that.__zoom,dispatch:u}),$)}};function S(B,...$){if(!t.apply(this,arguments))return;var F=C(this,$).event(B),Q=this.__zoom,nt=Math.max(a[0],Math.min(a[1],Q.k*Math.pow(2,r.apply(this,arguments)))),z=Er(B);if(F.wheel)(F.mouse[0][0]!==z[0]||F.mouse[0][1]!==z[1])&&(F.mouse[1]=Q.invert(F.mouse[0]=z)),clearTimeout(F.wheel);else{if(Q.k===nt)return;F.mouse=[z,Q.invert(z)],wo(this),F.start()}Lc(B),F.wheel=setTimeout(Y,m),F.zoom("mouse",n(T(k(Q,nt),F.mouse[0],F.mouse[1]),F.extent,o));function Y(){F.wheel=null,F.end()}}function N(B,...$){if(d||!t.apply(this,arguments))return;var F=B.currentTarget,Q=C(this,$,!0).event(B),nt=Lt(B.view).on("mousemove.zoom",lt,!0).on("mouseup.zoom",J,!0),z=Er(B,F),Y=B.clientX,rt=B.clientY;h0(B.view),vf(B),Q.mouse=[z,this.__zoom.invert(z)],wo(this),Q.start();function lt(Z){if(Lc(Z),!Q.moved){var q=Z.clientX-Y,it=Z.clientY-rt;Q.moved=q*q+it*it>_}Q.event(Z).zoom("mouse",n(T(Q.that.__zoom,Q.mouse[0]=Er(Z,F),Q.mouse[1]),Q.extent,o))}function J(Z){nt.on("mousemove.zoom mouseup.zoom",null),d0(Z.view,Q.moved),Lc(Z),Q.event(Z).end()}}function v(B,...$){if(t.apply(this,arguments)){var F=this.__zoom,Q=Er(B.changedTouches?B.changedTouches[0]:B,this),nt=F.invert(Q),z=F.k*(B.shiftKey?.5:2),Y=n(T(k(F,z),Q,nt),e.apply(this,$),o);Lc(B),s>0?Lt(this).transition().duration(s).call(A,Y,Q,B):Lt(this).call(b.transform,Y,Q,B)}}function M(B,...$){if(t.apply(this,arguments)){var F=B.touches,Q=F.length,nt=C(this,$,B.changedTouches.length===Q).event(B),z,Y,rt,lt;for(vf(B),Y=0;Y<Q;++Y)rt=F[Y],lt=Er(rt,this),lt=[lt,this.__zoom.invert(lt),rt.identifier],nt.touch0?!nt.touch1&&nt.touch0[2]!==lt[2]&&(nt.touch1=lt,nt.taps=0):(nt.touch0=lt,z=!0,nt.taps=1+!!h);h&&(h=clearTimeout(h)),z&&(nt.taps<2&&(f=lt[0],h=setTimeout(function(){h=null},p)),wo(this),nt.start())}}function w(B,...$){if(this.__zooming){var F=C(this,$).event(B),Q=B.changedTouches,nt=Q.length,z,Y,rt,lt;for(Lc(B),z=0;z<nt;++z)Y=Q[z],rt=Er(Y,this),F.touch0&&F.touch0[2]===Y.identifier?F.touch0[0]=rt:F.touch1&&F.touch1[2]===Y.identifier&&(F.touch1[0]=rt);if(Y=F.that.__zoom,F.touch1){var J=F.touch0[0],Z=F.touch0[1],q=F.touch1[0],it=F.touch1[1],ut=(ut=q[0]-J[0])*ut+(ut=q[1]-J[1])*ut,G=(G=it[0]-Z[0])*G+(G=it[1]-Z[1])*G;Y=k(Y,Math.sqrt(ut/G)),rt=[(J[0]+q[0])/2,(J[1]+q[1])/2],lt=[(Z[0]+it[0])/2,(Z[1]+it[1])/2]}else if(F.touch0)rt=F.touch0[0],lt=F.touch0[1];else return;F.zoom("touch",n(T(Y,rt,lt),F.extent,o))}}function R(B,...$){if(this.__zooming){var F=C(this,$).event(B),Q=B.changedTouches,nt=Q.length,z,Y;for(vf(B),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),z=0;z<nt;++z)Y=Q[z],F.touch0&&F.touch0[2]===Y.identifier?delete F.touch0:F.touch1&&F.touch1[2]===Y.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(Y=Er(Y,this),Math.hypot(f[0]-Y[0],f[1]-Y[1])<y)){var rt=Lt(this).on("dblclick.zoom");rt&&rt.apply(this,arguments)}}}return b.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:Ku(+B),b):r},b.filter=function(B){return arguments.length?(t=typeof B=="function"?B:Ku(!!B),b):t},b.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:Ku(!!B),b):i},b.extent=function(B){return arguments.length?(e=typeof B=="function"?B:Ku([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),b):e},b.scaleExtent=function(B){return arguments.length?(a[0]=+B[0],a[1]=+B[1],b):[a[0],a[1]]},b.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(B){return arguments.length?(n=B,b):n},b.duration=function(B){return arguments.length?(s=+B,b):s},b.interpolate=function(B){return arguments.length?(l=B,b):l},b.on=function(){var B=u.on.apply(u,arguments);return B===u?b:B},b.clickDistance=function(B){return arguments.length?(_=(B=+B)*B,b):Math.sqrt(_)},b.tapDistance=function(B){return arguments.length?(y=+B,b):y},b}const IW=Object.freeze(Object.defineProperty({__proto__:null,bisect:zo,bisectRight:L9,bisectLeft:FB,bisectCenter:$B,ascending:tn,bisector:i0,blur:PB,blur2:B9,blurImage:YB,count:a0,cross:VB,cumsum:qB,descending:C9,deviation:O9,extent:tl,Adder:wn,fsum:XB,fcumsum:KB,group:$9,flatGroup:ZB,flatRollup:QB,groups:P9,index:JB,indexes:tD,rollup:z9,rollups:j9,groupSort:eD,bin:S5,histogram:S5,thresholdFreedmanDiaconis:iD,thresholdScott:aD,thresholdSturges:P3,max:Ns,maxIndex:Y3,mean:oD,median:sD,medianIndex:cD,merge:j3,min:bl,minIndex:z3,mode:uD,nice:W9,pairs:hD,permute:H9,quantile:_l,quantileIndex:q9,quantileSorted:V9,quickselect:o0,range:Oa,rank:fD,least:pD,leastIndex:X9,greatest:G9,greatestIndex:gD,scan:yD,shuffle:mD,shuffler:K9,sum:bD,ticks:Co,tickIncrement:Ds,tickStep:ml,transpose:Z9,variance:N9,zip:vD,every:xD,some:kD,filter:wD,map:TD,reduce:ED,reverse:CD,sort:am,difference:SD,disjoint:AD,intersection:MD,subset:BD,superset:Q9,union:DD,InternMap:yl,InternSet:Eo,axisTop:J9,axisRight:PD,axisBottom:tw,axisLeft:YD,brush:oF,brushX:iF,brushY:aF,brushSelection:rF,chord:cF,chordTranspose:lF,chordDirected:uF,ribbon:_F,ribbonArrow:vF,color:Ua,rgb:Rs,hsl:Yh,lab:jh,hcl:Uh,lch:jO,gray:zO,cubehelix:ai,contours:Cm,contourDensity:NF,Delaunay:s4,Voronoi:rT,dispatch:jo,drag:MO,dragDisable:h0,dragEnable:d0,dsvFormat:x0,csvParse:aT,csvParseRows:n$,csvFormat:r$,csvFormatBody:i$,csvFormatRows:a$,csvFormatRow:o$,csvFormatValue:s$,tsvParse:oT,tsvParseRows:c$,tsvFormat:l$,tsvFormatBody:u$,tsvFormatRows:h$,tsvFormatRow:d$,tsvFormatValue:f$,autoType:p$,easeLinear:yI,easeQuad:G5,easeQuadIn:mI,easeQuadOut:bI,easeQuadInOut:G5,easeCubic:vm,easeCubicIn:_I,easeCubicOut:vI,easeCubicInOut:vm,easePoly:V5,easePolyIn:xI,easePolyOut:kI,easePolyInOut:V5,easeSin:q5,easeSinIn:wI,easeSinOut:TI,easeSinInOut:q5,easeExp:X5,easeExpIn:EI,easeExpOut:CI,easeExpInOut:X5,easeCircle:K5,easeCircleIn:SI,easeCircleOut:AI,easeCircleInOut:K5,easeBounce:Cl,easeBounceIn:FI,easeBounceOut:Cl,easeBounceInOut:$I,easeBack:Z5,easeBackIn:PI,easeBackOut:YI,easeBackInOut:Z5,easeElastic:Q5,easeElasticIn:zI,easeElasticOut:Q5,easeElasticInOut:jI,blob:m$,buffer:_$,dsv:x$,csv:k$,tsv:w$,image:T$,json:C$,text:k0,xml:S$,html:A$,svg:M$,forceCenter:L$,forceCollide:X$,forceLink:Z$,forceManyBody:oP,forceRadial:sP,forceSimulation:aP,forceX:cP,forceY:lP,formatDefaultLocale:hT,get format(){return E0},get formatPrefix(){return u4},formatLocale:uT,formatSpecifier:Ps,FormatSpecifier:T0,precisionFixed:dT,precisionPrefix:fT,precisionRound:pT,geoArea:_P,geoBounds:wP,geoCentroid:MP,geoCircle:LP,geoClipAntimeridian:Pm,geoClipCircle:NT,geoClipExtent:FP,geoClipRectangle:C0,geoContains:HP,geoDistance:c1,geoGraticule:IT,geoGraticule10:WP,geoInterpolate:GP,geoLength:OT,geoPath:iY,geoAlbers:XT,geoAlbersUsa:pY,geoAzimuthalEqualArea:gY,geoAzimuthalEqualAreaRaw:v4,geoAzimuthalEquidistant:yY,geoAzimuthalEquidistantRaw:x4,geoConicConformal:bY,geoConicConformalRaw:QT,geoConicEqualArea:y1,geoConicEqualAreaRaw:qT,geoConicEquidistant:vY,geoConicEquidistantRaw:JT,geoEqualEarth:kY,geoEqualEarthRaw:k4,geoEquirectangular:_Y,geoEquirectangularRaw:Bl,geoGnomonic:wY,geoGnomonicRaw:w4,geoIdentity:TY,geoProjection:Yi,geoProjectionMutator:b4,geoMercator:mY,geoMercatorRaw:au,geoNaturalEarth1:EY,geoNaturalEarth1Raw:T4,geoOrthographic:CY,geoOrthographicRaw:E4,geoStereographic:SY,geoStereographicRaw:C4,geoTransverseMercator:AY,geoTransverseMercatorRaw:S4,geoRotation:ST,geoStream:Xr,geoTransform:aY,cluster:IY,hierarchy:A4,Node:Do,pack:dz,packSiblings:uz,packEnclose:oz,partition:fz,stratify:mz,tree:Tz,treemap:Ez,treemapBinary:Cz,treemapDice:ou,treemapSlice:A0,treemapSliceDice:Sz,treemapSquarify:lE,treemapResquarify:Az,interpolate:Qa,interpolateArray:VO,interpolateBasis:Tw,interpolateBasisClosed:Ew,interpolateDate:Bw,interpolateDiscrete:KO,interpolateHue:ZO,interpolateNumber:Rr,interpolateNumberArray:Z3,interpolateObject:Dw,interpolateRound:y0,interpolateString:Q3,interpolateTransformCss:Iw,interpolateTransformSvg:Fw,interpolateZoom:$w,interpolateRgb:wl,interpolateRgbBasis:Aw,interpolateRgbBasisClosed:GO,interpolateHsl:rR,interpolateHslLong:iR,interpolateLab:aR,interpolateHcl:zw,interpolateHclLong:oR,interpolateCubehelix:sR,interpolateCubehelixLong:m0,piecewise:Uw,quantize:cR,path:Ja,polygonArea:Mz,polygonCentroid:Lz,polygonHull:Nz,polygonContains:Oz,polygonLength:Rz,quadtree:w0,randomUniform:Iz,randomInt:Fz,randomNormal:L4,randomLogNormal:$z,randomBates:Pz,randomIrwinHall:uE,randomExponential:Yz,randomPareto:zz,randomBernoulli:jz,randomGeometric:hE,randomBinomial:fE,randomGamma:B4,randomBeta:dE,randomWeibull:Uz,randomCauchy:Hz,randomLogistic:Wz,randomPoisson:Gz,randomLcg:Xz,scaleBand:D4,scalePoint:Kz,scaleIdentity:yE,scaleLinear:O4,scaleLog:bE,scaleSymlog:_E,scaleOrdinal:M0,scaleImplicit:Jm,scalePow:$4,scaleSqrt:cj,scaleRadial:vE,scaleQuantile:xE,scaleQuantize:kE,scaleThreshold:wE,scaleTime:tC,scaleUtc:PU,scaleSequential:eC,scaleSequentialLog:nC,scaleSequentialPow:K4,scaleSequentialSqrt:YU,scaleSequentialSymlog:rC,scaleSequentialQuantile:iC,scaleDiverging:aC,scaleDivergingLog:oC,scaleDivergingPow:Z4,scaleDivergingSqrt:zU,scaleDivergingSymlog:sC,tickFormat:gE,schemeCategory10:jU,schemeAccent:UU,schemeDark2:HU,schemePaired:WU,schemePastel1:GU,schemePastel2:VU,schemeSet1:qU,schemeSet2:XU,schemeSet3:KU,schemeTableau10:ZU,interpolateBrBG:QU,schemeBrBG:cC,interpolatePRGn:JU,schemePRGn:lC,interpolatePiYG:tH,schemePiYG:uC,interpolatePuOr:eH,schemePuOr:hC,interpolateRdBu:nH,schemeRdBu:dC,interpolateRdGy:rH,schemeRdGy:fC,interpolateRdYlBu:iH,schemeRdYlBu:pC,interpolateRdYlGn:aH,schemeRdYlGn:gC,interpolateSpectral:oH,schemeSpectral:yC,interpolateBuGn:sH,schemeBuGn:mC,interpolateBuPu:cH,schemeBuPu:bC,interpolateGnBu:lH,schemeGnBu:_C,interpolateOrRd:uH,schemeOrRd:vC,interpolatePuBuGn:hH,schemePuBuGn:xC,interpolatePuBu:dH,schemePuBu:kC,interpolatePuRd:fH,schemePuRd:wC,interpolateRdPu:pH,schemeRdPu:TC,interpolateYlGnBu:gH,schemeYlGnBu:EC,interpolateYlGn:yH,schemeYlGn:CC,interpolateYlOrBr:mH,schemeYlOrBr:SC,interpolateYlOrRd:bH,schemeYlOrRd:AC,interpolateBlues:_H,schemeBlues:MC,interpolateGreens:vH,schemeGreens:LC,interpolateGreys:xH,schemeGreys:BC,interpolatePurples:kH,schemePurples:DC,interpolateReds:wH,schemeReds:NC,interpolateOranges:TH,schemeOranges:OC,interpolateCividis:EH,interpolateCubehelixDefault:CH,interpolateRainbow:MH,interpolateWarm:SH,interpolateCool:AH,interpolateSinebow:DH,interpolateTurbo:NH,interpolateViridis:OH,interpolateMagma:RH,interpolateInferno:IH,interpolatePlasma:FH,create:xO,creator:c0,local:lw,matcher:H3,namespace:Ql,namespaces:hm,pointer:Er,pointers:wO,select:Lt,selectAll:u0,selection:Uo,selector:l0,selectorAll:U3,style:So,window:W3,arc:x1,area:IC,line:no,pie:FC,areaRadial:R6,radialArea:R6,lineRadial:O6,radialLine:O6,pointRadial:Kc,link:I0,linkHorizontal:JH,linkVertical:tW,linkRadial:eW,symbol:uW,symbolsStroke:lW,symbolsFill:I6,symbols:I6,symbolAsterisk:UC,symbolCircle:F0,symbolCross:HC,symbolDiamond:GC,symbolDiamond2:VC,symbolPlus:qC,symbolSquare:XC,symbolSquare2:KC,symbolStar:QC,symbolTriangle:JC,symbolTriangle2:tS,symbolWye:eS,symbolX:nS,curveBasisClosed:iS,curveBasisOpen:oS,curveBasis:Io,curveBumpX:zC,curveBumpY:jC,curveBundle:hW,curveCardinalClosed:fW,curveCardinalOpen:pW,curveCardinal:dW,curveCatmullRomClosed:yW,curveCatmullRomOpen:mW,curveCatmullRom:gW,curveLinearClosed:dS,curveLinear:_r,curveMonotoneX:gS,curveMonotoneY:yS,curveNatural:bS,curveStep:_S,curveStepAfter:xS,curveStepBefore:vS,stack:vW,stackOffsetExpand:xW,stackOffsetDiverging:kW,stackOffsetNone:Ws,stackOffsetSilhouette:wW,stackOffsetWiggle:TW,stackOrderAppearance:kS,stackOrderAscending:wS,stackOrderDescending:CW,stackOrderInsideOut:SW,stackOrderNone:Gs,stackOrderReverse:AW,timeInterval:Tn,timeMillisecond:e3,timeMilliseconds:m6,utcMillisecond:e3,utcMilliseconds:m6,timeSecond:Ia,timeSeconds:_6,utcSecond:Ia,utcSeconds:_6,timeMinute:Y4,timeMinutes:uj,timeHour:z4,timeHours:hj,timeDay:cu,timeDays:dj,timeWeek:Us,timeWeeks:v6,timeSunday:Us,timeSundays:v6,timeMonday:Dl,timeMondays:fj,timeTuesday:AE,timeTuesdays:pj,timeWednesday:ME,timeWednesdays:gj,timeThursday:Oo,timeThursdays:yj,timeFriday:LE,timeFridays:mj,timeSaturday:BE,timeSaturdays:bj,timeMonth:j4,timeMonths:_j,timeYear:Wa,timeYears:vj,utcMinute:H4,utcMinutes:xj,utcHour:W4,utcHours:kj,utcDay:lu,utcDays:wj,utcWeek:Hs,utcWeeks:x6,utcSunday:Hs,utcSundays:x6,utcMonday:Nl,utcMondays:Tj,utcTuesday:IE,utcTuesdays:Ej,utcWednesday:FE,utcWednesdays:Cj,utcThursday:Ro,utcThursdays:Sj,utcFriday:$E,utcFridays:Aj,utcSaturday:PE,utcSaturdays:Mj,utcMonth:G4,utcMonths:Lj,utcYear:Ga,utcYears:Bj,utcTicks:jE,utcTickInterval:UE,timeTicks:HE,timeTickInterval:WE,timeFormatDefaultLocale:QE,get timeFormat(){return Ol},get timeParse(){return ZE},get utcFormat(){return B0},get utcParse(){return q4},timeFormatLocale:GE,isoFormat:NU,isoParse:IU,now:tu,timer:_0,timerFlush:Gw,timeout:ym,interval:dR,transition:Kw,active:VI,interrupt:wo,zoom:RW,zoomTransform:ES,zoomIdentity:Y0,ZoomTransform:Si},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */function Da(t){return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(t)}function r3(t,e){return r3=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},r3(t,e)}function FW(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kh(t,e,n){return FW()?kh=Reflect.construct:kh=function(r,i,a){var o=[null];o.push.apply(o,i);var s=Function.bind.apply(r,o),l=new s;return a&&r3(l,a.prototype),l},kh.apply(null,arguments)}function Vr(t){return $W(t)||PW(t)||YW(t)||zW()}function $W(t){if(Array.isArray(t))return i3(t)}function PW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YW(t,e){if(t){if(typeof t=="string")return i3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i3(t,e)}}function i3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var jW=Object.hasOwnProperty,j6=Object.setPrototypeOf,UW=Object.isFrozen,HW=Object.getPrototypeOf,WW=Object.getOwnPropertyDescriptor,lr=Object.freeze,Ri=Object.seal,GW=Object.create,CS=typeof Reflect<"u"&&Reflect,E1=CS.apply,a3=CS.construct;E1||(E1=function(t,e,n){return t.apply(e,n)});lr||(lr=function(t){return t});Ri||(Ri=function(t){return t});a3||(a3=function(t,e){return kh(t,Vr(e))});var VW=oi(Array.prototype.forEach),U6=oi(Array.prototype.pop),Bc=oi(Array.prototype.push),wh=oi(String.prototype.toLowerCase),qW=oi(String.prototype.match),Ca=oi(String.prototype.replace),XW=oi(String.prototype.indexOf),KW=oi(String.prototype.trim),Kn=oi(RegExp.prototype.test),xf=ZW(TypeError);function oi(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return E1(t,e,r)}}function ZW(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return a3(t,n)}}function Ae(t,e,n){n=n||wh,j6&&j6(t,null);for(var r=e.length;r--;){var i=e[r];if(typeof i=="string"){var a=n(i);a!==i&&(UW(e)||(e[r]=a),i=a)}t[i]=!0}return t}function ho(t){var e=GW(null),n;for(n in t)E1(jW,t,[n])&&(e[n]=t[n]);return e}function Zu(t,e){for(;t!==null;){var n=WW(t,e);if(n){if(n.get)return oi(n.get);if(typeof n.value=="function")return oi(n.value)}t=HW(t)}function r(i){return console.warn("fallback value for",i),null}return r}var H6=lr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),kf=lr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wf=lr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QW=lr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Tf=lr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),JW=lr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),W6=lr(["#text"]),G6=lr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ef=lr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V6=lr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qu=lr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tG=Ri(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eG=Ri(/<%[\w\W]*|[\w\W]*%>/gm),nG=Ri(/^data-[\-\w.\u00B7-\uFFFF]/),rG=Ri(/^aria-[\-\w]+$/),iG=Ri(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),aG=Ri(/^(?:\w+script|data):/i),oG=Ri(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sG=Ri(/^html$/i),cG=function(){return typeof window>"u"?null:window},lG=function(t,e){if(Da(t)!=="object"||typeof t.createPolicy!="function")return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function SS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cG(),e=function(tt){return SS(tt)};if(e.version="2.4.0",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var n=t.document,r=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,o=t.Node,s=t.Element,l=t.NodeFilter,u=t.NamedNodeMap,h=u===void 0?t.NamedNodeMap||t.MozNamedAttrMap:u,f=t.HTMLFormElement,d=t.DOMParser,p=t.trustedTypes,m=s.prototype,_=Zu(m,"cloneNode"),y=Zu(m,"nextSibling"),b=Zu(m,"childNodes"),k=Zu(m,"parentNode");if(typeof a=="function"){var T=r.createElement("template");T.content&&T.content.ownerDocument&&(r=T.content.ownerDocument)}var x=lG(p,n),A=x?x.createHTML(""):"",C=r,L=C.implementation,S=C.createNodeIterator,N=C.createDocumentFragment,v=C.getElementsByTagName,M=n.importNode,w={};try{w=ho(r).documentMode?r.documentMode:{}}catch{}var R={};e.isSupported=typeof k=="function"&&L&&typeof L.createHTMLDocument<"u"&&w!==9;var B=tG,$=eG,F=nG,Q=rG,nt=aG,z=oG,Y=iG,rt=null,lt=Ae({},[].concat(Vr(H6),Vr(kf),Vr(wf),Vr(Tf),Vr(W6))),J=null,Z=Ae({},[].concat(Vr(G6),Vr(Ef),Vr(V6),Vr(Qu))),q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,ut=null,G=!0,j=!0,P=!1,X=!1,O=!1,V=!1,U=!1,H=!1,xt=!1,ot=!1,Nt=!0,Mt=!1,wt="user-content-",Et=!0,bt=!1,mt={},Tt=null,kt=Ae({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),st=null,Zt=Ae({},["audio","video","img","source","image","track"]),$t=null,Jt=Ae({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ht="http://www.w3.org/1998/Math/MathML",qt="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml",Xt=oe,It=!1,Pt,yt=["application/xhtml+xml","text/html"],Ct="text/html",pt,Ft=null,dt=r.createElement("form"),Ee=function(tt){return tt instanceof RegExp||tt instanceof Function},gt=function(tt){Ft&&Ft===tt||((!tt||Da(tt)!=="object")&&(tt={}),tt=ho(tt),Pt=yt.indexOf(tt.PARSER_MEDIA_TYPE)===-1?Pt=Ct:Pt=tt.PARSER_MEDIA_TYPE,pt=Pt==="application/xhtml+xml"?function(Dt){return Dt}:wh,rt="ALLOWED_TAGS"in tt?Ae({},tt.ALLOWED_TAGS,pt):lt,J="ALLOWED_ATTR"in tt?Ae({},tt.ALLOWED_ATTR,pt):Z,$t="ADD_URI_SAFE_ATTR"in tt?Ae(ho(Jt),tt.ADD_URI_SAFE_ATTR,pt):Jt,st="ADD_DATA_URI_TAGS"in tt?Ae(ho(Zt),tt.ADD_DATA_URI_TAGS,pt):Zt,Tt="FORBID_CONTENTS"in tt?Ae({},tt.FORBID_CONTENTS,pt):kt,it="FORBID_TAGS"in tt?Ae({},tt.FORBID_TAGS,pt):{},ut="FORBID_ATTR"in tt?Ae({},tt.FORBID_ATTR,pt):{},mt="USE_PROFILES"in tt?tt.USE_PROFILES:!1,G=tt.ALLOW_ARIA_ATTR!==!1,j=tt.ALLOW_DATA_ATTR!==!1,P=tt.ALLOW_UNKNOWN_PROTOCOLS||!1,X=tt.SAFE_FOR_TEMPLATES||!1,O=tt.WHOLE_DOCUMENT||!1,H=tt.RETURN_DOM||!1,xt=tt.RETURN_DOM_FRAGMENT||!1,ot=tt.RETURN_TRUSTED_TYPE||!1,U=tt.FORCE_BODY||!1,Nt=tt.SANITIZE_DOM!==!1,Mt=tt.SANITIZE_NAMED_PROPS||!1,Et=tt.KEEP_CONTENT!==!1,bt=tt.IN_PLACE||!1,Y=tt.ALLOWED_URI_REGEXP||Y,Xt=tt.NAMESPACE||oe,tt.CUSTOM_ELEMENT_HANDLING&&Ee(tt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=tt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),tt.CUSTOM_ELEMENT_HANDLING&&Ee(tt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=tt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),tt.CUSTOM_ELEMENT_HANDLING&&typeof tt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=tt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(j=!1),xt&&(H=!0),mt&&(rt=Ae({},Vr(W6)),J=[],mt.html===!0&&(Ae(rt,H6),Ae(J,G6)),mt.svg===!0&&(Ae(rt,kf),Ae(J,Ef),Ae(J,Qu)),mt.svgFilters===!0&&(Ae(rt,wf),Ae(J,Ef),Ae(J,Qu)),mt.mathMl===!0&&(Ae(rt,Tf),Ae(J,V6),Ae(J,Qu))),tt.ADD_TAGS&&(rt===lt&&(rt=ho(rt)),Ae(rt,tt.ADD_TAGS,pt)),tt.ADD_ATTR&&(J===Z&&(J=ho(J)),Ae(J,tt.ADD_ATTR,pt)),tt.ADD_URI_SAFE_ATTR&&Ae($t,tt.ADD_URI_SAFE_ATTR,pt),tt.FORBID_CONTENTS&&(Tt===kt&&(Tt=ho(Tt)),Ae(Tt,tt.FORBID_CONTENTS,pt)),Et&&(rt["#text"]=!0),O&&Ae(rt,["html","head","body"]),rt.table&&(Ae(rt,["tbody"]),delete it.tbody),lr&&lr(tt),Ft=tt)},ie=Ae({},["mi","mo","mn","ms","mtext"]),se=Ae({},["foreignobject","desc","title","annotation-xml"]),_e=Ae({},["title","style","font","a","script"]),he=Ae({},kf);Ae(he,wf),Ae(he,QW);var me=Ae({},Tf);Ae(me,JW);var Vt=function(tt){var Dt=k(tt);(!Dt||!Dt.tagName)&&(Dt={namespaceURI:oe,tagName:"template"});var At=wh(tt.tagName),Qt=wh(Dt.tagName);return tt.namespaceURI===qt?Dt.namespaceURI===oe?At==="svg":Dt.namespaceURI===Ht?At==="svg"&&(Qt==="annotation-xml"||ie[Qt]):Boolean(he[At]):tt.namespaceURI===Ht?Dt.namespaceURI===oe?At==="math":Dt.namespaceURI===qt?At==="math"&&se[Qt]:Boolean(me[At]):tt.namespaceURI===oe?Dt.namespaceURI===qt&&!se[Qt]||Dt.namespaceURI===Ht&&!ie[Qt]?!1:!me[At]&&(_e[At]||!he[At]):!1},te=function(tt){Bc(e.removed,{element:tt});try{tt.parentNode.removeChild(tt)}catch{try{tt.outerHTML=A}catch{tt.remove()}}},de=function(tt,Dt){try{Bc(e.removed,{attribute:Dt.getAttributeNode(tt),from:Dt})}catch{Bc(e.removed,{attribute:null,from:Dt})}if(Dt.removeAttribute(tt),tt==="is"&&!J[tt])if(H||xt)try{te(Dt)}catch{}else try{Dt.setAttribute(tt,"")}catch{}},ge=function(tt){var Dt,At;if(U)tt="<remove></remove>"+tt;else{var Qt=qW(tt,/^[\r\n\t ]+/);At=Qt&&Qt[0]}Pt==="application/xhtml+xml"&&(tt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+tt+"</body></html>");var Be=x?x.createHTML(tt):tt;if(Xt===oe)try{Dt=new d().parseFromString(Be,Pt)}catch{}if(!Dt||!Dt.documentElement){Dt=L.createDocument(Xt,"template",null);try{Dt.documentElement.innerHTML=It?"":Be}catch{}}var ze=Dt.body||Dt.documentElement;return tt&&At&&ze.insertBefore(r.createTextNode(At),ze.childNodes[0]||null),Xt===oe?v.call(Dt,O?"html":"body")[0]:O?Dt.documentElement:ze},fe=function(tt){return S.call(tt.ownerDocument||tt,tt,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},ji=function(tt){return tt instanceof f&&(typeof tt.nodeName!="string"||typeof tt.textContent!="string"||typeof tt.removeChild!="function"||!(tt.attributes instanceof h)||typeof tt.removeAttribute!="function"||typeof tt.setAttribute!="function"||typeof tt.namespaceURI!="string"||typeof tt.insertBefore!="function")},$e=function(tt){return Da(o)==="object"?tt instanceof o:tt&&Da(tt)==="object"&&typeof tt.nodeType=="number"&&typeof tt.nodeName=="string"},Pe=function(tt,Dt,At){!R[tt]||VW(R[tt],function(Qt){Qt.call(e,Dt,At,Ft)})},Kt=function(tt){var Dt;if(Pe("beforeSanitizeElements",tt,null),ji(tt)||Kn(/[\u0080-\uFFFF]/,tt.nodeName))return te(tt),!0;var At=pt(tt.nodeName);if(Pe("uponSanitizeElement",tt,{tagName:At,allowedTags:rt}),tt.hasChildNodes()&&!$e(tt.firstElementChild)&&(!$e(tt.content)||!$e(tt.content.firstElementChild))&&Kn(/<[/\w]/g,tt.innerHTML)&&Kn(/<[/\w]/g,tt.textContent)||At==="select"&&Kn(/<template/i,tt.innerHTML))return te(tt),!0;if(!rt[At]||it[At]){if(!it[At]&&en(At)&&(q.tagNameCheck instanceof RegExp&&Kn(q.tagNameCheck,At)||q.tagNameCheck instanceof Function&&q.tagNameCheck(At)))return!1;if(Et&&!Tt[At]){var Qt=k(tt)||tt.parentNode,Be=b(tt)||tt.childNodes;if(Be&&Qt)for(var ze=Be.length,De=ze-1;De>=0;--De)Qt.insertBefore(_(Be[De],!0),y(tt))}return te(tt),!0}return tt instanceof s&&!Vt(tt)||(At==="noscript"||At==="noembed")&&Kn(/<\/no(script|embed)/i,tt.innerHTML)?(te(tt),!0):(X&&tt.nodeType===3&&(Dt=tt.textContent,Dt=Ca(Dt,B," "),Dt=Ca(Dt,$," "),tt.textContent!==Dt&&(Bc(e.removed,{element:tt.cloneNode()}),tt.textContent=Dt)),Pe("afterSanitizeElements",tt,null),!1)},Vn=function(tt,Dt,At){if(Nt&&(Dt==="id"||Dt==="name")&&(At in r||At in dt))return!1;if(!(j&&!ut[Dt]&&Kn(F,Dt))&&!(G&&Kn(Q,Dt))){if(!J[Dt]||ut[Dt]){if(!(en(tt)&&(q.tagNameCheck instanceof RegExp&&Kn(q.tagNameCheck,tt)||q.tagNameCheck instanceof Function&&q.tagNameCheck(tt))&&(q.attributeNameCheck instanceof RegExp&&Kn(q.attributeNameCheck,Dt)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(Dt))||Dt==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Kn(q.tagNameCheck,At)||q.tagNameCheck instanceof Function&&q.tagNameCheck(At))))return!1}else if(!$t[Dt]&&!Kn(Y,Ca(At,z,""))&&!((Dt==="src"||Dt==="xlink:href"||Dt==="href")&&tt!=="script"&&XW(At,"data:")===0&&st[tt])&&!(P&&!Kn(nt,Ca(At,z,"")))&&At)return!1}return!0},en=function(tt){return tt.indexOf("-")>0},Ke=function(tt){var Dt,At,Qt,Be;Pe("beforeSanitizeAttributes",tt,null);var ze=tt.attributes;if(ze){var De={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:J};for(Be=ze.length;Be--;){Dt=ze[Be];var pn=Dt,Ve=pn.name,Ue=pn.namespaceURI;if(At=Ve==="value"?Dt.value:KW(Dt.value),Qt=pt(Ve),De.attrName=Qt,De.attrValue=At,De.keepAttr=!0,De.forceKeepAttr=void 0,Pe("uponSanitizeAttribute",tt,De),At=De.attrValue,!De.forceKeepAttr&&(de(Ve,tt),!!De.keepAttr)){if(Kn(/\/>/i,At)){de(Ve,tt);continue}X&&(At=Ca(At,B," "),At=Ca(At,$," "));var xa=pt(tt.nodeName);if(Vn(xa,Qt,At)){if(Mt&&(Qt==="id"||Qt==="name")&&(de(Ve,tt),At=wt+At),x&&Da(p)==="object"&&typeof p.getAttributeType=="function"&&!Ue)switch(p.getAttributeType(xa,Qt)){case"TrustedHTML":At=x.createHTML(At);break;case"TrustedScriptURL":At=x.createScriptURL(At);break}try{Ue?tt.setAttributeNS(Ue,Ve,At):tt.setAttribute(Ve,At),U6(e.removed)}catch{}}}}Pe("afterSanitizeAttributes",tt,null)}},Ye=function tt(Dt){var At,Qt=fe(Dt);for(Pe("beforeSanitizeShadowDOM",Dt,null);At=Qt.nextNode();)Pe("uponSanitizeShadowNode",At,null),!Kt(At)&&(At.content instanceof i&&tt(At.content),Ke(At));Pe("afterSanitizeShadowDOM",Dt,null)};return e.sanitize=function(tt){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},At,Qt,Be,ze,De;if(It=!tt,It&&(tt="<!-->"),typeof tt!="string"&&!$e(tt)){if(typeof tt.toString!="function")throw xf("toString is not a function");if(tt=tt.toString(),typeof tt!="string")throw xf("dirty is not a string, aborting")}if(!e.isSupported){if(Da(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof tt=="string")return t.toStaticHTML(tt);if($e(tt))return t.toStaticHTML(tt.outerHTML)}return tt}if(V||gt(Dt),e.removed=[],typeof tt=="string"&&(bt=!1),bt){if(tt.nodeName){var pn=pt(tt.nodeName);if(!rt[pn]||it[pn])throw xf("root node is forbidden and cannot be sanitized in-place")}}else if(tt instanceof o)At=ge("<!---->"),Qt=At.ownerDocument.importNode(tt,!0),Qt.nodeType===1&&Qt.nodeName==="BODY"||Qt.nodeName==="HTML"?At=Qt:At.appendChild(Qt);else{if(!H&&!X&&!O&&tt.indexOf("<")===-1)return x&&ot?x.createHTML(tt):tt;if(At=ge(tt),!At)return H?null:ot?A:""}At&&U&&te(At.firstChild);for(var Ve=fe(bt?tt:At);Be=Ve.nextNode();)Be.nodeType===3&&Be===ze||Kt(Be)||(Be.content instanceof i&&Ye(Be.content),Ke(Be),ze=Be);if(ze=null,bt)return tt;if(H){if(xt)for(De=N.call(At.ownerDocument);At.firstChild;)De.appendChild(At.firstChild);else De=At;return J.shadowroot&&(De=M.call(n,De,!0)),De}var Ue=O?At.outerHTML:At.innerHTML;return O&&rt["!doctype"]&&At.ownerDocument&&At.ownerDocument.doctype&&At.ownerDocument.doctype.name&&Kn(sG,At.ownerDocument.doctype.name)&&(Ue="<!DOCTYPE "+At.ownerDocument.doctype.name+`>
`+Ue),X&&(Ue=Ca(Ue,B," "),Ue=Ca(Ue,$," ")),x&&ot?x.createHTML(Ue):Ue},e.setConfig=function(tt){gt(tt),V=!0},e.clearConfig=function(){Ft=null,V=!1},e.isValidAttribute=function(tt,Dt,At){Ft||gt({});var Qt=pt(tt),Be=pt(Dt);return Vn(Qt,Be,At)},e.addHook=function(tt,Dt){typeof Dt=="function"&&(R[tt]=R[tt]||[],Bc(R[tt],Dt))},e.removeHook=function(tt){if(R[tt])return U6(R[tt])},e.removeHooks=function(tt){R[tt]&&(R[tt]=[])},e.removeAllHooks=function(){R={}},e}var Rl=SS();const uG=t=>t?MS(t).replace(/\\n/g,"#br#").split("#br#"):[""],AS=t=>Rl.sanitize(t),q6=(t,e)=>{var n;if(((n=e.flowchart)==null?void 0:n.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=AS(t):r!=="loose"&&(t=MS(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=pG(t))}return t},si=(t,e)=>t&&(e.dompurifyConfig?t=Rl.sanitize(q6(t,e),e.dompurifyConfig).toString():t=Rl.sanitize(q6(t,e)),t),hG=(t,e)=>typeof t=="string"?si(t,e):t.flat().map(n=>si(n,e)),z0=/<br\s*\/?>/gi,dG=t=>z0.test(t),fG=t=>t.split(z0),pG=t=>t.replace(/#br#/g,"<br/>"),MS=t=>t.replace(z0,"#br#"),gG=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},Mn=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),Pa=function(t){let e=t;return t.indexOf("~")!==-1?(e=e.replace(/~([^~].*)/,"<$1"),e=e.replace(/~([^~]*)$/,">$1"),Pa(e)):e},pe={getRows:uG,sanitizeText:si,sanitizeTextOrArray:hG,hasBreaks:dG,splitBreaks:fG,lineBreakRegex:z0,removeScript:AS,getUrl:gG,evaluate:Mn},Th={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const i=n<.5?n*(1+e):n+e-n*e,a=2*n-i;switch(r){case"r":return Th.hue2rgb(a,i,t+1/3)*255;case"g":return Th.hue2rgb(a,i,t)*255;case"b":return Th.hue2rgb(a,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),a=Math.min(t,e,n),o=(i+a)/2;if(r==="l")return o*100;if(i===a)return 0;const s=i-a,l=o>.5?s/(2-i-a):s/(i+a);if(r==="s")return l*100;switch(i){case t:return((e-n)/s+(e<n?6:0))*60;case e:return((n-t)/s+2)*60;case n:return((t-e)/s+4)*60;default:return-1}}},yG=Th,mG={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},bG=mG,_G={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},vG=_G,xG={channel:yG,lang:bG,unit:vG},ve=xG,Sa={};for(let t=0;t<=255;t++)Sa[t]=ve.unit.dec2hex(t);const Un={ALL:0,RGB:1,HSL:2};class kG{constructor(){this.type=Un.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Un.ALL}is(e){return this.type===e}}const wG=kG;class TG{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new wG}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=Un.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:r,l:i}=e;n===void 0&&(e.h=ve.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=ve.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=ve.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:r,b:i}=e;n===void 0&&(e.r=ve.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=ve.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=ve.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(Un.HSL)&&n!==void 0?n:(this._ensureHSL(),ve.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(Un.HSL)&&n!==void 0?n:(this._ensureHSL(),ve.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(Un.HSL)&&n!==void 0?n:(this._ensureHSL(),ve.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(Un.RGB)&&n!==void 0?n:(this._ensureRGB(),ve.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(Un.RGB)&&n!==void 0?n:(this._ensureRGB(),ve.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(Un.RGB)&&n!==void 0?n:(this._ensureRGB(),ve.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(Un.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(Un.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(Un.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(Un.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(Un.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(Un.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const EG=TG,CG=new EG({r:0,g:0,b:0,a:0},"transparent"),j0=CG,LS={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(LS.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,a=i%4===0,o=i>4,s=o?1:17,l=o?8:4,u=a?0:-1,h=o?255:15;return j0.set({r:(r>>l*(u+3)&h)*s,g:(r>>l*(u+2)&h)*s,b:(r>>l*(u+1)&h)*s,a:a?(r&h)*s/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${Sa[Math.round(e)]}${Sa[Math.round(n)]}${Sa[Math.round(r)]}${Sa[Math.round(i*255)]}`:`#${Sa[Math.round(e)]}${Sa[Math.round(n)]}${Sa[Math.round(r)]}`}},ol=LS,Eh={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Eh.hueRe);if(e){const[,n,r]=e;switch(r){case"grad":return ve.channel.clamp.h(parseFloat(n)*.9);case"rad":return ve.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return ve.channel.clamp.h(parseFloat(n)*360)}}return ve.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(Eh.re);if(!n)return;const[,r,i,a,o,s]=n;return j0.set({h:Eh._hue2deg(r),s:ve.channel.clamp.s(parseFloat(i)),l:ve.channel.clamp.l(parseFloat(a)),a:o?ve.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${ve.lang.round(e)}, ${ve.lang.round(n)}%, ${ve.lang.round(r)}%, ${i})`:`hsl(${ve.lang.round(e)}, ${ve.lang.round(n)}%, ${ve.lang.round(r)}%)`}},Ju=Eh,Ch={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Ch.colors[t];if(e)return ol.parse(e)},stringify:t=>{const e=ol.stringify(t);for(const n in Ch.colors)if(Ch.colors[n]===e)return n}},X6=Ch,BS={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match(BS.re);if(!n)return;const[,r,i,a,o,s,l,u,h]=n;return j0.set({r:ve.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:ve.channel.clamp.g(o?parseFloat(a)*2.55:parseFloat(a)),b:ve.channel.clamp.b(l?parseFloat(s)*2.55:parseFloat(s)),a:u?ve.channel.clamp.a(h?parseFloat(u)/100:parseFloat(u)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${ve.lang.round(e)}, ${ve.lang.round(n)}, ${ve.lang.round(r)}, ${ve.lang.round(i)})`:`rgb(${ve.lang.round(e)}, ${ve.lang.round(n)}, ${ve.lang.round(r)})`}},th=BS,SG={format:{keyword:X6,hex:ol,rgb:th,rgba:th,hsl:Ju,hsla:Ju},parse:t=>{if(typeof t!="string")return t;const e=ol.parse(t)||th.parse(t)||Ju.parse(t)||X6.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Un.HSL)||t.data.r===void 0?Ju.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?th.stringify(t):ol.stringify(t)},ga=SG,AG=(t,e)=>{const n=ga.parse(t);for(const r in e)n[r]=ve.channel.clamp[r](e[r]);return ga.stringify(n)},DS=AG,MG=(t,e,n=0,r=1)=>{if(typeof t!="number")return DS(t,{a:e});const i=j0.set({r:ve.channel.clamp.r(t),g:ve.channel.clamp.g(e),b:ve.channel.clamp.b(n),a:ve.channel.clamp.a(r)});return ga.stringify(i)},sl=MG,LG=(t,e,n)=>{const r=ga.parse(t),i=r[e],a=ve.channel.clamp[e](i+n);return i!==a&&(r[e]=a),ga.stringify(r)},NS=LG,BG=(t,e)=>NS(t,"l",e),ae=BG,DG=(t,e)=>NS(t,"l",-e),ye=DG,NG=(t,e)=>{const n=ga.parse(t),r={};for(const i in e)!e[i]||(r[i]=n[i]+e[i]);return DS(t,r)},vt=NG,OG=(t,e,n=50)=>{const{r,g:i,b:a,a:o}=ga.parse(t),{r:s,g:l,b:u,a:h}=ga.parse(e),f=n/100,d=f*2-1,p=o-h,m=((d*p===-1?d:(d+p)/(1+d*p))+1)/2,_=1-m,y=r*m+s*_,b=i*m+l*_,k=a*m+u*_,T=o*f+h*(1-f);return sl(y,b,k,T)},RG=OG,IG=(t,e=100)=>{const n=ga.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,RG(n,t,e)},jt=IG,nr=(t,e)=>e?vt(t,{s:-40,l:10}):vt(t,{s:-40,l:-10}),U0="#ffffff",H0="#f2f2f2";class FG{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||vt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||vt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||nr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||nr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||nr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||nr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||jt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||jt(this.tertiaryColor),this.lineColor=this.lineColor||jt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ye(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ye(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||jt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||ae(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||vt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||vt(this.primaryColor,{h:330}),this.darkMode)for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ye(this["cScale"+e],75);else for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ye(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||jt(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||ae(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ye(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||vt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||vt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||vt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||vt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||vt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||vt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||vt(this.primaryColor,{l:-10}),this.pie5=this.pie5||vt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||vt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||vt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||vt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||vt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||vt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||vt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||vt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ye(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||vt(this.primaryColor,{h:-30}),this.git4=this.git4||vt(this.primaryColor,{h:-60}),this.git5=this.git5||vt(this.primaryColor,{h:-90}),this.git6=this.git6||vt(this.primaryColor,{h:60}),this.git7=this.git7||vt(this.primaryColor,{h:120}),this.darkMode?(this.git0=ae(this.git0,25),this.git1=ae(this.git1,25),this.git2=ae(this.git2,25),this.git3=ae(this.git3,25),this.git4=ae(this.git4,25),this.git5=ae(this.git5,25),this.git6=ae(this.git6,25),this.git7=ae(this.git7,25)):(this.git0=ye(this.git0,25),this.git1=ye(this.git1,25),this.git2=ye(this.git2,25),this.git3=ye(this.git3,25),this.git4=ye(this.git4,25),this.git5=ye(this.git5,25),this.git6=ye(this.git6,25),this.git7=ye(this.git7,25)),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||H0}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const $G=t=>{const e=new FG;return e.calculate(t),e};class PG{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=ae(this.primaryColor,16),this.tertiaryColor=vt(this.primaryColor,{h:-160}),this.primaryBorderColor=jt(this.background),this.secondaryBorderColor=nr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=nr(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.tertiaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=ae(jt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=sl(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ye("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=sl(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=sl(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=ae(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=ae(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=ae(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=vt(this.primaryColor,{h:64}),this.fillType3=vt(this.secondaryColor,{h:64}),this.fillType4=vt(this.primaryColor,{h:-64}),this.fillType5=vt(this.secondaryColor,{h:-64}),this.fillType6=vt(this.primaryColor,{h:128}),this.fillType7=vt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||vt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||vt(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||jt(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||ae(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ye(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ae(this.secondaryColor,20),this.git1=ae(this.pie2||this.secondaryColor,20),this.git2=ae(this.pie3||this.tertiaryColor,20),this.git3=ae(this.pie4||vt(this.primaryColor,{h:-30}),20),this.git4=ae(this.pie5||vt(this.primaryColor,{h:-60}),20),this.git5=ae(this.pie6||vt(this.primaryColor,{h:-90}),10),this.git6=ae(this.pie7||vt(this.primaryColor,{h:60}),10),this.git7=ae(this.pie8||vt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ae(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ae(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const YG=t=>{const e=new PG;return e.calculate(t),e};class zG{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=vt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=vt(this.primaryColor,{h:-160}),this.primaryBorderColor=nr(this.primaryColor,this.darkMode),this.secondaryBorderColor=nr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=nr(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.tertiaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=sl(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||vt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||vt(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||ye(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||ye(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ye(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ye(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||vt(this["cScale"+e],{h:180});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||jt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||jt(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=ae(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=vt(this.primaryColor,{h:64}),this.fillType3=vt(this.secondaryColor,{h:64}),this.fillType4=vt(this.primaryColor,{h:-64}),this.fillType5=vt(this.secondaryColor,{h:-64}),this.fillType6=vt(this.primaryColor,{h:128}),this.fillType7=vt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||vt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||vt(this.primaryColor,{l:-10}),this.pie5=this.pie5||vt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||vt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||vt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||vt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||vt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||vt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||vt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||vt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||vt(this.primaryColor,{h:-30}),this.git4=this.git4||vt(this.primaryColor,{h:-60}),this.git5=this.git5||vt(this.primaryColor,{h:-90}),this.git6=this.git6||vt(this.primaryColor,{h:60}),this.git7=this.git7||vt(this.primaryColor,{h:120}),this.darkMode?(this.git0=ae(this.git0,25),this.git1=ae(this.git1,25),this.git2=ae(this.git2,25),this.git3=ae(this.git3,25),this.git4=ae(this.git4,25),this.git5=ae(this.git5,25),this.git6=ae(this.git6,25),this.git7=ae(this.git7,25)):(this.git0=ye(this.git0,25),this.git1=ye(this.git1,25),this.git2=ye(this.git2,25),this.git3=ye(this.git3,25),this.git4=ye(this.git4,25),this.git5=ye(this.git5,25),this.git6=ye(this.git6,25),this.git7=ye(this.git7,25)),this.gitInv0=this.gitInv0||ye(jt(this.git0),25),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||jt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||jt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||H0}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const jG=t=>{const e=new zG;return e.calculate(t),e};class UG{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=ae("#cde498",10),this.primaryBorderColor=nr(this.primaryColor,this.darkMode),this.secondaryBorderColor=nr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=nr(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.primaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||vt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||vt(this.primaryColor,{h:330}),this["cScalePeer"+1]=this["cScalePeer"+1]||ye(this.secondaryColor,45),this["cScalePeer"+2]=this["cScalePeer"+2]||ye(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ye(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ye(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||vt(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=ye(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=vt(this.primaryColor,{h:64}),this.fillType3=vt(this.secondaryColor,{h:64}),this.fillType4=vt(this.primaryColor,{h:-64}),this.fillType5=vt(this.secondaryColor,{h:-64}),this.fillType6=vt(this.primaryColor,{h:128}),this.fillType7=vt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||vt(this.primaryColor,{l:-30}),this.pie5=this.pie5||vt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||vt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||vt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||vt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||vt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||vt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||vt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||vt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||vt(this.primaryColor,{h:-30}),this.git4=this.git4||vt(this.primaryColor,{h:-60}),this.git5=this.git5||vt(this.primaryColor,{h:-90}),this.git6=this.git6||vt(this.primaryColor,{h:60}),this.git7=this.git7||vt(this.primaryColor,{h:120}),this.darkMode?(this.git0=ae(this.git0,25),this.git1=ae(this.git1,25),this.git2=ae(this.git2,25),this.git3=ae(this.git3,25),this.git4=ae(this.git4,25),this.git5=ae(this.git5,25),this.git6=ae(this.git6,25),this.git7=ae(this.git7,25)):(this.git0=ye(this.git0,25),this.git1=ye(this.git1,25),this.git2=ye(this.git2,25),this.git3=ye(this.git3,25),this.git4=ye(this.git4,25),this.git5=ye(this.git5,25),this.git6=ye(this.git6,25),this.git7=ye(this.git7,25)),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||H0}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const HG=t=>{const e=new UG;return e.calculate(t),e};class WG{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=ae(this.contrast,55),this.background="#ffffff",this.tertiaryColor=vt(this.primaryColor,{h:-160}),this.primaryBorderColor=nr(this.primaryColor,this.darkMode),this.secondaryBorderColor=nr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=nr(this.tertiaryColor,this.darkMode),this.primaryTextColor=jt(this.primaryColor),this.secondaryTextColor=jt(this.secondaryColor),this.tertiaryTextColor=jt(this.tertiaryColor),this.lineColor=jt(this.background),this.textColor=jt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=ae(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||jt(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||ae(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ye(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=ae(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=ae(this.contrast,30),this.sectionBkgColor2=ae(this.contrast,30),this.taskBorderColor=ye(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=ae(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ye(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=vt(this.primaryColor,{h:64}),this.fillType3=vt(this.secondaryColor,{h:64}),this.fillType4=vt(this.primaryColor,{h:-64}),this.fillType5=vt(this.secondaryColor,{h:-64}),this.fillType6=vt(this.primaryColor,{h:128}),this.fillType7=vt(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ye(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||vt(this.primaryColor,{h:-30}),this.git4=this.pie5||vt(this.primaryColor,{h:-60}),this.git5=this.pie6||vt(this.primaryColor,{h:-90}),this.git6=this.pie7||vt(this.primaryColor,{h:60}),this.git7=this.pie8||vt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||jt(this.git0),this.gitInv1=this.gitInv1||jt(this.git1),this.gitInv2=this.gitInv2||jt(this.git2),this.gitInv3=this.gitInv3||jt(this.git3),this.gitInv4=this.gitInv4||jt(this.git4),this.gitInv5=this.gitInv5||jt(this.git5),this.gitInv6=this.gitInv6||jt(this.git6),this.gitInv7=this.gitInv7||jt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||U0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||H0}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}}const GG=t=>{const e=new WG;return e.calculate(t),e},fa={base:{getThemeVariables:$G},dark:{getThemeVariables:YG},default:{getThemeVariables:jG},forest:{getThemeVariables:HG},neutral:{getThemeVariables:GG}},Ya={theme:"default",themeVariables:fa.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};Ya.class&&(Ya.class.arrowMarkerAbsolute=Ya.arrowMarkerAbsolute);Ya.gitGraph&&(Ya.gitGraph.arrowMarkerAbsolute=Ya.arrowMarkerAbsolute);const OS=(t,e="")=>Object.keys(t).reduce((n,r)=>Array.isArray(t[r])?n:typeof t[r]=="object"&&t[r]!==null?[...n,e+r,...OS(t[r],"")]:[...n,e+r],[]),VG=OS(Ya,""),qG=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,XG=/\s*%%.*\n/gm,C1={},ab=function(t,e){t=t.replace(qG,"").replace(XG,`
`);for(const[n,{detector:r}]of Object.entries(C1))if(r(t,e))return n;throw new Error(`No diagram type detected for text: ${t}`)},RS=(t,e,n)=>{if(C1[t])throw new Error(`Detector with key ${t} already exists`);C1[t]={detector:e,loader:n},W.debug(`Detector with key ${t} added${n?" with loader":""}`)},KG=t=>C1[t].loader,_n=function(t,e,n){const{depth:r,clobber:i}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(a=>_n(t,a,n)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(a=>{t.indexOf(a)===-1&&t.push(a)}),t):typeof t>"u"||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(typeof e<"u"&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(a=>{typeof e[a]=="object"&&(t[a]===void 0||typeof t[a]=="object")?(t[a]===void 0&&(t[a]=Array.isArray(e[a])?[]:{}),t[a]=_n(t[a],e[a],{depth:r-1,clobber:i})):(i||typeof t[a]!="object"&&typeof e[a]!="object")&&(t[a]=e[a])}),t)};var ZG=typeof $c=="object"&&$c&&$c.Object===Object&&$c,IS=ZG,QG=IS,JG=typeof self=="object"&&self&&self.Object===Object&&self,tV=QG||JG||Function("return this")(),di=tV,eV=di,nV=eV.Symbol,oc=nV,K6=oc,FS=Object.prototype,rV=FS.hasOwnProperty,iV=FS.toString,Dc=K6?K6.toStringTag:void 0;function aV(t){var e=rV.call(t,Dc),n=t[Dc];try{t[Dc]=void 0;var r=!0}catch{}var i=iV.call(t);return r&&(e?t[Dc]=n:delete t[Dc]),i}var oV=aV,sV=Object.prototype,cV=sV.toString;function lV(t){return cV.call(t)}var uV=lV,Z6=oc,hV=oV,dV=uV,fV="[object Null]",pV="[object Undefined]",Q6=Z6?Z6.toStringTag:void 0;function gV(t){return t==null?t===void 0?pV:fV:Q6&&Q6 in Object(t)?hV(t):dV(t)}var qo=gV;function yV(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Yr=yV,mV=qo,bV=Yr,_V="[object AsyncFunction]",vV="[object Function]",xV="[object GeneratorFunction]",kV="[object Proxy]";function wV(t){if(!bV(t))return!1;var e=mV(t);return e==vV||e==xV||e==_V||e==kV}var sc=wV,TV=di,EV=TV["__core-js_shared__"],CV=EV,Cf=CV,J6=function(){var t=/[^.]+$/.exec(Cf&&Cf.keys&&Cf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function SV(t){return!!J6&&J6 in t}var AV=SV,MV=Function.prototype,LV=MV.toString;function BV(t){if(t!=null){try{return LV.call(t)}catch{}try{return t+""}catch{}}return""}var $S=BV,DV=sc,NV=AV,OV=Yr,RV=$S,IV=/[\\^$.*+?()[\]{}|]/g,FV=/^\[object .+?Constructor\]$/,$V=Function.prototype,PV=Object.prototype,YV=$V.toString,zV=PV.hasOwnProperty,jV=RegExp("^"+YV.call(zV).replace(IV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UV(t){if(!OV(t)||NV(t))return!1;var e=DV(t)?jV:FV;return e.test(RV(t))}var HV=UV;function WV(t,e){return t==null?void 0:t[e]}var GV=WV,VV=HV,qV=GV;function XV(t,e){var n=qV(t,e);return VV(n)?n:void 0}var Xo=XV,KV=Xo,ZV=KV(Object,"create"),W0=ZV,tv=W0;function QV(){this.__data__=tv?tv(null):{},this.size=0}var JV=QV;function tq(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eq=tq,nq=W0,rq="__lodash_hash_undefined__",iq=Object.prototype,aq=iq.hasOwnProperty;function oq(t){var e=this.__data__;if(nq){var n=e[t];return n===rq?void 0:n}return aq.call(e,t)?e[t]:void 0}var sq=oq,cq=W0,lq=Object.prototype,uq=lq.hasOwnProperty;function hq(t){var e=this.__data__;return cq?e[t]!==void 0:uq.call(e,t)}var dq=hq,fq=W0,pq="__lodash_hash_undefined__";function gq(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=fq&&e===void 0?pq:e,this}var yq=gq,mq=JV,bq=eq,_q=sq,vq=dq,xq=yq;function cc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}cc.prototype.clear=mq;cc.prototype.delete=bq;cc.prototype.get=_q;cc.prototype.has=vq;cc.prototype.set=xq;var kq=cc;function wq(){this.__data__=[],this.size=0}var Tq=wq;function Eq(t,e){return t===e||t!==t&&e!==e}var lc=Eq,Cq=lc;function Sq(t,e){for(var n=t.length;n--;)if(Cq(t[n][0],e))return n;return-1}var G0=Sq,Aq=G0,Mq=Array.prototype,Lq=Mq.splice;function Bq(t){var e=this.__data__,n=Aq(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Lq.call(e,n,1),--this.size,!0}var Dq=Bq,Nq=G0;function Oq(t){var e=this.__data__,n=Nq(e,t);return n<0?void 0:e[n][1]}var Rq=Oq,Iq=G0;function Fq(t){return Iq(this.__data__,t)>-1}var $q=Fq,Pq=G0;function Yq(t,e){var n=this.__data__,r=Pq(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var zq=Yq,jq=Tq,Uq=Dq,Hq=Rq,Wq=$q,Gq=zq;function uc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}uc.prototype.clear=jq;uc.prototype.delete=Uq;uc.prototype.get=Hq;uc.prototype.has=Wq;uc.prototype.set=Gq;var V0=uc,Vq=Xo,qq=di,Xq=Vq(qq,"Map"),ob=Xq,ev=kq,Kq=V0,Zq=ob;function Qq(){this.size=0,this.__data__={hash:new ev,map:new(Zq||Kq),string:new ev}}var Jq=Qq;function tX(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var eX=tX,nX=eX;function rX(t,e){var n=t.__data__;return nX(e)?n[typeof e=="string"?"string":"hash"]:n.map}var q0=rX,iX=q0;function aX(t){var e=iX(this,t).delete(t);return this.size-=e?1:0,e}var oX=aX,sX=q0;function cX(t){return sX(this,t).get(t)}var lX=cX,uX=q0;function hX(t){return uX(this,t).has(t)}var dX=hX,fX=q0;function pX(t,e){var n=fX(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var gX=pX,yX=Jq,mX=oX,bX=lX,_X=dX,vX=gX;function hc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hc.prototype.clear=yX;hc.prototype.delete=mX;hc.prototype.get=bX;hc.prototype.has=_X;hc.prototype.set=vX;var sb=hc,PS=sb,xX="Expected a function";function cb(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(xX);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(cb.Cache||PS),n}cb.Cache=PS;var X0=cb;const kX={curveBasis:Io,curveBasisClosed:iS,curveBasisOpen:oS,curveLinear:_r,curveLinearClosed:dS,curveMonotoneX:gS,curveMonotoneY:yS,curveNatural:bS,curveStep:_S,curveStepAfter:xS,curveStepBefore:vS},Sf=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,wX=/\s*(?:(?:(\w+)(?=:):|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,TX=function(t,e){const n=YS(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const i=n.map(a=>a.args);Fo(i),r=_n(r,[...i])}else r=n.args;if(r){let i=ab(t,e);["config"].forEach(a=>{typeof r[a]<"u"&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[a],delete r[a])})}return r},YS=function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${wX.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(n,"").replace(/'/gm,'"'),W.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const i=[];for(;(r=Sf.exec(t))!==null;)if(r.index===Sf.lastIndex&&Sf.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const a=r[1]?r[1]:r[2],o=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:a,args:o})}return i.length===0&&i.push({type:t,args:null}),i.length===1?i[0]:i}catch(n){return W.error(`ERROR: ${n.message} - Unable to parse directive
      ${e!==null?" type:"+e:""} based on the text:${t}`),{type:null,args:null}}},EX=function(t,e){for(let n=0;n<e.length;n++)if(e[n].match(t))return n;return-1},Li=(t,e)=>{if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return kX[n]||e},CX=(t,e)=>{const n=t.trim();if(n)return e.securityLevel!=="loose"?$i(n):n},SX=(t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let a=window;for(let o=0;o<r;o++)if(a=a[n[o]],!a)return;a[i](...e)},Il=(t,e)=>t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0,AX=t=>{let e,n=0;t.forEach(a=>{n+=Il(a,e),e=a});let r=n/2,i;return e=void 0,t.forEach(a=>{if(e&&!i){const o=Il(a,e);if(o<r)r-=o;else{const s=r/o;s<=0&&(i=e),s>=1&&(i={x:a.x,y:a.y}),s>0&&s<1&&(i={x:(1-s)*e.x+s*a.x,y:(1-s)*e.y+s*a.y})}}e=a}),i},MX=t=>t.length===1?t[0]:AX(t),LX=(t,e,n)=>{let r;W.info("our points",e),e[0]!==n&&(e=e.reverse()),e.forEach(u=>{totalDistance+=Il(u,r),r=u});let i=25,a;r=void 0,e.forEach(u=>{if(r&&!a){const h=Il(u,r);if(h<i)i-=h;else{const f=i/h;f<=0&&(a=r),f>=1&&(a={x:u.x,y:u.y}),f>0&&f<1&&(a={x:(1-f)*r.x+f*u.x,y:(1-f)*r.y+f*u.y})}}r=u});const o=t?10:5,s=Math.atan2(e[0].y-a.y,e[0].x-a.x),l={x:0,y:0};return l.x=Math.sin(s)*o+(e[0].x+a.x)/2,l.y=-Math.cos(s)*o+(e[0].y+a.y)/2,l},BX=(t,e,n)=>{let r=JSON.parse(JSON.stringify(n)),i;W.info("our points",r),e!=="start_left"&&e!=="start_right"&&(r=r.reverse()),r.forEach(h=>{i=h});let a=25+t,o;i=void 0,r.forEach(h=>{if(i&&!o){const f=Il(h,i);if(f<a)a-=f;else{const d=a/f;d<=0&&(o=i),d>=1&&(o={x:h.x,y:h.y}),d>0&&d<1&&(o={x:(1-d)*i.x+d*h.x,y:(1-d)*i.y+d*h.y})}}i=h});const s=10+t*.5,l=Math.atan2(r[0].y-o.y,r[0].x-o.x),u={x:0,y:0};return u.x=Math.sin(l)*s+(r[0].x+o.x)/2,u.y=-Math.cos(l)*s+(r[0].y+o.y)/2,e==="start_left"&&(u.x=Math.sin(l+Math.PI)*s+(r[0].x+o.x)/2,u.y=-Math.cos(l+Math.PI)*s+(r[0].y+o.y)/2),e==="end_right"&&(u.x=Math.sin(l-Math.PI)*s+(r[0].x+o.x)/2-5,u.y=-Math.cos(l-Math.PI)*s+(r[0].y+o.y)/2-5),e==="end_left"&&(u.x=Math.sin(l)*s+(r[0].x+o.x)/2-5,u.y=-Math.cos(l)*s+(r[0].y+o.y)/2-5),u},Xa=t=>{let e="",n="";for(let r=0;r<t.length;r++)typeof t[r]<"u"&&(t[r].startsWith("color:")||t[r].startsWith("text-align:")?n=n+t[r]+";":e=e+t[r]+";");return{style:e,labelStyle:n}};let nv=0;const zS=()=>(nv++,"id-"+Math.random().toString(36).substr(2,12)+"-"+nv);function DX(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}const jS=t=>DX(t.length),NX=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},OX=function(t,e){const n=e.text.replace(pe.lineBreakRegex," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.style("text-anchor",e.anchor),r.style("font-family",e.fontFamily),r.style("font-size",e.fontSize),r.style("font-weight",e.fontWeight),r.attr("fill",e.fill),typeof e.class<"u"&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.attr("fill",e.fill),i.text(n),r},US=X0((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),pe.lineBreakRegex.test(t)))return t;const r=t.split(" "),i=[];let a="";return r.forEach((o,s)=>{const l=Bi(`${o} `,n),u=Bi(a,n);if(l>e){const{hyphenatedStrings:h,remainingWord:f}=RX(o,e,"-",n);i.push(a,...h),a=f}else u+l>=e?(i.push(a),a=o):a=[a,o].filter(Boolean).join(" ");s+1===r.length&&i.push(a)}),i.filter(o=>o!=="").join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),RX=X0((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=t.split(""),a=[];let o="";return i.forEach((s,l)=>{const u=`${o}${s}`;if(Bi(u,r)>=e){const h=l+1,f=i.length===h,d=`${u}${n}`;a.push(f?u:d),o=""}else o=u}),{hyphenatedStrings:a,remainingWord:o}},(t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`),o3=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),lb(t,e).height},Bi=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),lb(t,e).width},lb=X0(function(t,e){e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);const{fontSize:n,fontFamily:r,fontWeight:i}=e;if(!t)return{width:0,height:0};const a=["sans-serif",r],o=t.split(pe.lineBreakRegex),s=[],l=Lt("body");if(!l.remove)return{width:0,height:0,lineHeight:0};const u=l.append("svg");for(const f of a){let d=0;const p={width:0,height:0,lineHeight:0};for(const m of o){const _=NX();_.text=m;const y=OX(u,_).style("font-size",n).style("font-weight",i).style("font-family",f),b=(y._groups||y)[0][0].getBBox();p.width=Math.round(Math.max(p.width,b.width)),d=Math.round(b.height),p.height+=d,p.lineHeight=Math.round(Math.max(p.lineHeight,d))}s.push(p)}u.remove();const h=isNaN(s[1].height)||isNaN(s[1].width)||isNaN(s[1].lineHeight)||s[0].height>s[1].height&&s[0].width>s[1].width&&s[0].lineHeight>s[1].lineHeight?0:1;return s[h]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),IX=class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}};let eh;const FX=function(t){return eh=eh||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),eh.innerHTML=t,unescape(eh.textContent)},Fo=t=>{if(W.debug("directiveSanitizer called with",t),typeof t=="object"&&(t.length?t.forEach(e=>Fo(e)):Object.keys(t).forEach(e=>{W.debug("Checking key",e),e.indexOf("__")===0&&(W.debug("sanitize deleting __ option",e),delete t[e]),e.indexOf("proto")>=0&&(W.debug("sanitize deleting proto option",e),delete t[e]),e.indexOf("constr")>=0&&(W.debug("sanitize deleting constr option",e),delete t[e]),e.indexOf("themeCSS")>=0&&(W.debug("sanitizing themeCss option"),t[e]=Sh(t[e])),e.indexOf("fontFamily")>=0&&(W.debug("sanitizing fontFamily option"),t[e]=Sh(t[e])),e.indexOf("altFontFamily")>=0&&(W.debug("sanitizing altFontFamily option"),t[e]=Sh(t[e])),VG.indexOf(e)<0?(W.debug("sanitize deleting option",e),delete t[e]):typeof t[e]=="object"&&(W.debug("sanitize deleting object",e),Fo(t[e]))})),t.themeVariables){const e=Object.keys(t.themeVariables);for(let n=0;n<e.length;n++){const r=e[n],i=t.themeVariables[r];i&&i.match&&!i.match(/^[a-zA-Z0-9#,";()%. ]+$/)&&(t.themeVariables[r]="")}}W.debug("After sanitization",t)},Sh=t=>{let e=0,n=0;for(let r=0;r<t.length;r++){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";t[r]==="{"?e++:t[r]==="}"&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t};function ub(t){return"str"in t}function $X(t){return t instanceof Error?t.message:String(t)}const we={assignWithDepth:_n,wrapLabel:US,calculateTextHeight:o3,calculateTextWidth:Bi,calculateTextDimensions:lb,detectInit:TX,detectDirective:YS,isSubstringInArray:EX,interpolateToCurve:Li,calcLabelPosition:MX,calcCardinalityPosition:LX,calcTerminalLabelPosition:BX,formatUrl:CX,getStylesFromArray:Xa,generateId:zS,random:jS,runFunc:SX,entityDecode:FX,initIdGenerator:IX,directiveSanitizer:Fo,sanitizeCss:Sh};var HS="comm",WS="rule",GS="decl",PX="@import",YX="@keyframes",zX=Math.abs,hb=String.fromCharCode;function VS(t){return t.trim()}function s3(t,e,n){return t.replace(e,n)}function jX(t,e){return t.indexOf(e)}function K0(t,e){return t.charCodeAt(e)|0}function Fl(t,e,n){return t.slice(e,n)}function La(t){return t.length}function qS(t){return t.length}function nh(t,e){return e.push(t),t}var Z0=1,Vs=1,XS=0,$r=0,mn=0,dc="";function db(t,e,n,r,i,a,o){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:Z0,column:Vs,length:o,return:""}}function UX(){return mn}function HX(){return mn=$r>0?K0(dc,--$r):0,Vs--,mn===10&&(Vs=1,Z0--),mn}function ni(){return mn=$r<XS?K0(dc,$r++):0,Vs++,mn===10&&(Vs=1,Z0++),mn}function To(){return K0(dc,$r)}function Ah(){return $r}function Q0(t,e){return Fl(dc,t,e)}function c3(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function WX(t){return Z0=Vs=1,XS=La(dc=t),$r=0,[]}function GX(t){return dc="",t}function Af(t){return VS(Q0($r-1,l3(t===91?t+2:t===40?t+1:t)))}function VX(t){for(;(mn=To())&&mn<33;)ni();return c3(t)>2||c3(mn)>3?"":" "}function qX(t,e){for(;--e&&ni()&&!(mn<48||mn>102||mn>57&&mn<65||mn>70&&mn<97););return Q0(t,Ah()+(e<6&&To()==32&&ni()==32))}function l3(t){for(;ni();)switch(mn){case t:return $r;case 34:case 39:t!==34&&t!==39&&l3(mn);break;case 40:t===41&&l3(t);break;case 92:ni();break}return $r}function XX(t,e){for(;ni()&&t+mn!==47+10&&!(t+mn===42+42&&To()===47););return"/*"+Q0(e,$r-1)+"*"+hb(t===47?t:ni())}function KX(t){for(;!c3(To());)ni();return Q0(t,$r)}function KS(t){return GX(Mh("",null,null,null,[""],t=WX(t),0,[0],t))}function Mh(t,e,n,r,i,a,o,s,l){for(var u=0,h=0,f=o,d=0,p=0,m=0,_=1,y=1,b=1,k=0,T="",x=i,A=a,C=r,L=T;y;)switch(m=k,k=ni()){case 40:if(m!=108&&K0(L,f-1)==58){jX(L+=s3(Af(k),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:L+=Af(k);break;case 9:case 10:case 13:case 32:L+=VX(m);break;case 92:L+=qX(Ah()-1,7);continue;case 47:switch(To()){case 42:case 47:nh(ZX(XX(ni(),Ah()),e,n),l);break;default:L+="/"}break;case 123*_:s[u++]=La(L)*b;case 125*_:case 59:case 0:switch(k){case 0:case 125:y=0;case 59+h:p>0&&La(L)-f&&nh(p>32?iv(L+";",r,n,f-1):iv(s3(L," ","")+";",r,n,f-2),l);break;case 59:L+=";";default:if(nh(C=rv(L,e,n,u,h,i,s,T,x=[],A=[],f),a),k===123)if(h===0)Mh(L,e,C,C,x,a,f,s,A);else switch(d){case 100:case 109:case 115:Mh(t,C,C,r&&nh(rv(t,C,C,0,0,i,s,T,i,x=[],f),A),i,A,f,s,r?x:A);break;default:Mh(L,C,C,C,[""],A,0,s,A)}}u=h=p=0,_=b=1,T=L="",f=o;break;case 58:f=1+La(L),p=m;default:if(_<1){if(k==123)--_;else if(k==125&&_++==0&&HX()==125)continue}switch(L+=hb(k),k*_){case 38:b=h>0?1:(L+="\f",-1);break;case 44:s[u++]=(La(L)-1)*b,b=1;break;case 64:To()===45&&(L+=Af(ni())),d=To(),h=f=La(T=L+=KX(Ah())),k++;break;case 45:m===45&&La(L)==2&&(_=0)}}return a}function rv(t,e,n,r,i,a,o,s,l,u,h){for(var f=i-1,d=i===0?a:[""],p=qS(d),m=0,_=0,y=0;m<r;++m)for(var b=0,k=Fl(t,f+1,f=zX(_=o[m])),T=t;b<p;++b)(T=VS(_>0?d[b]+" "+k:s3(k,/&\f/g,d[b])))&&(l[y++]=T);return db(t,e,n,i===0?WS:s,l,u,h)}function ZX(t,e,n){return db(t,e,n,HS,hb(UX()),Fl(t,2,-2),0)}function iv(t,e,n,r){return db(t,e,n,GS,Fl(t,0,r),Fl(t,r+1,-1),r)}function S1(t,e){for(var n="",r=qS(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function ZS(t,e,n,r){switch(t.type){case PX:case GS:return t.return=t.return||t.value;case HS:return"";case YX:return t.return=t.value+"{"+S1(t.children,r)+"}";case WS:t.value=t.props.join(",")}return La(n=S1(t.children,r))?t.return=t.value+"{"+n+"}":""}const QX="mermaid",JX="9.2.2",tK="Markdownish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",eK="./dist/mermaid.min.js",nK="./dist/mermaid.core.mjs",rK="./dist/mermaid.d.ts",iK="commonjs",aK={".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},oK=["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],sK={clean:"rimraf dist","build:code":"node .esbuild/esbuild.cjs","build:types":"tsc -p ./tsconfig.json --emitDeclarationOnly","build:watch":"yarn build:code --watch","build:esbuild":'concurrently "yarn build:code" "yarn build:types"',build:"yarn clean; yarn build:esbuild",dev:"node .esbuild/serve.cjs","docs:build":"ts-node-esm src/docs.mts","docs:verify":"yarn docs:build --verify","todo-postbuild":"documentation build src/mermaidAPI.ts src/config.ts src/defaultConfig.ts --shallow -f md --markdown-toc false > src/docs/Setup.md && prettier --write src/docs/Setup.md",release:"yarn build",lint:"eslint --cache --ignore-path .gitignore . && yarn lint:jison && prettier --check .","lint:fix":"eslint --fix --ignore-path .gitignore . && prettier --write .","lint:jison":"ts-node-esm src/jison/lint.mts",cypress:"cypress run","cypress:open":"cypress open",e2e:"start-server-and-test dev http://localhost:9000/ cypress","todo-prepare":'concurrently "husky install" "yarn build"',"pre-commit":"lint-staged"},cK={type:"git",url:"https://github.com/mermaid-js/mermaid"},lK="Knut Sveidqvist",uK="MIT",hK={ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dK={"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0",dagre:"^0.8.5","dagre-d3":"^0.6.4",dompurify:"2.4.0","fast-clone":"^1.5.13",graphlib:"^2.1.8",khroma:"^2.0.0",lodash:"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},fK={"@applitools/eyes-cypress":"^3.25.7","@commitlint/cli":"^17.1.2","@commitlint/config-conventional":"^17.0.0","@types/d3":"^7.4.0","@types/dompurify":"^2.3.4","@types/eslint":"^8.4.6","@types/express":"^4.17.13","@types/jsdom":"^20.0.0","@types/lodash":"^4.14.185","@types/prettier":"^2.7.0","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.37.0","@typescript-eslint/parser":"^5.37.0",concurrently:"^7.4.0",coveralls:"^3.1.1",cypress:"^10.0.0","cypress-image-snapshot":"^4.0.1",documentation:"13.2.0",esbuild:"^0.15.8",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-cypress":"^2.12.1","eslint-plugin-html":"^7.1.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-jsdoc":"^39.3.6","eslint-plugin-json":"^3.1.0","eslint-plugin-markdown":"^3.0.0",express:"^4.18.1",globby:"^13.1.2",husky:"^8.0.0","identity-obj-proxy":"^3.0.0",jison:"^0.4.18","js-base64":"3.7.2",jsdom:"^20.0.0","lint-staged":"^13.0.0",moment:"^2.23.0","path-browserify":"^1.0.1",prettier:"^2.7.1","prettier-plugin-jsdoc":"^0.4.2",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.12.6","ts-node":"^10.9.1",typescript:"^4.8.3","unist-util-flatmap":"^1.0.0"},pK={d3:"^7.0.0"},gK=["dist","README.md"],yK=["**/*.css","**/*.scss"],A1={name:QX,version:JX,description:tK,main:eK,module:nK,types:rK,type:iK,exports:aK,keywords:oK,scripts:sK,repository:cK,author:lK,license:uK,standard:hK,dependencies:dK,devDependencies:fK,resolutions:pK,files:gK,sideEffects:yK},qs=Object.freeze(Ya);let gr=_n({},qs),QS,Xs=[],cl=_n({},qs);const J0=(t,e)=>{let n=_n({},t),r={};for(let i=0;i<e.length;i++){const a=e[i];eA(a),r=_n(r,a)}if(n=_n(n,r),r.theme&&r.theme in fa){const i=_n({},QS),a=_n(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in fa&&(n.themeVariables=fa[n.theme].getThemeVariables(a))}return cl=n,rA(cl),cl},mK=t=>(gr=_n({},qs),gr=_n(gr,t),t.theme&&fa[t.theme]&&(gr.themeVariables=fa[t.theme].getThemeVariables(t.themeVariables)),J0(gr,Xs),gr),bK=t=>{QS=_n({},t)},_K=t=>(gr=_n(gr,t),J0(gr,Xs),gr),JS=()=>_n({},gr),tA=t=>(rA(t),_n(cl,t),at()),at=()=>_n({},cl),eA=t=>{var e;["secure",...(e=gr.secure)!=null?e:[]].forEach(n=>{typeof t[n]<"u"&&(W.debug(`Denied attempt to modify a secure key ${n}`,t[n]),delete t[n])}),Object.keys(t).forEach(n=>{n.indexOf("__")===0&&delete t[n]}),Object.keys(t).forEach(n=>{typeof t[n]=="string"&&(t[n].indexOf("<")>-1||t[n].indexOf(">")>-1||t[n].indexOf("url(data:")>-1)&&delete t[n],typeof t[n]=="object"&&eA(t[n])})},fb=t=>{t.fontFamily&&(t.themeVariables?t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}):t.themeVariables={fontFamily:t.fontFamily}),Xs.push(t),J0(gr,Xs)},$l=(t=gr)=>{Xs=[],J0(t,Xs)};var nA=(t=>(t.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",t))(nA||{});const av={},vK=t=>{av[t]||(W.warn(nA[t]),av[t]=!0)},rA=t=>{!t||(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&vK("LAZY_LOAD_DEPRECATED")},xK=function(t,e){for(let n of e)t.attr(n[0],n[1])},kK=function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):r.set("width",e),r},fi=function(t,e,n,r){const i=kK(e,n,r);xK(t,i)},td=function(t,e,n,r){const i=e.node().getBBox(),a=i.width,o=i.height;W.info(`SVG bounds: ${a}x${o}`,i);let s=0,l=0;W.info(`Graph bounds: ${s}x${l}`,t),s=a+n*2,l=o+n*2,W.info(`Calculated bounds: ${s}x${l}`),fi(e,l,s,r);const u=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",u)},ll=t=>`g.classGroup text {
  fill: ${t.nodeBorder};
  fill: ${t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

`,iA=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }
`,aA=()=>"",M1=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }
`,oA=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,sA=()=>"",cA=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,lA=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 100%;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,uA=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,L1=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}
`,hA=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,dA=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,Lh={flowchart:M1,"flowchart-v2":M1,sequence:uA,gantt:oA,classDiagram:ll,"classDiagram-v2":ll,class:ll,stateDiagram:L1,state:L1,info:sA,pie:cA,er:iA,error:aA,journey:hA,requirement:lA,c4:dA},fA=(t,e,n)=>{let r="";return t in Lh&&Lh[t]?r=Lh[t](n):W.warn(`No theme found for ${t}`),` {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }

  /* Classes common for multiple diagrams */

  .error-icon {
    fill: ${n.errorBkgColor};
  }
  .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  .edge-thickness-normal {
    stroke-width: 2px;
  }
  .edge-thickness-thick {
    stroke-width: 3.5px
  }
  .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  .marker.cross {
    stroke: ${n.lineColor};
  }

  svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }

  ${r}

  ${e}
`},wK=(t,e)=>{Lh[t]=e},Zc=W,TK=R3,Ks=at,EK=t=>si(t,Ks()),pA=td,Cs={},En=(t,e,n)=>{Zc.debug(`Registering diagram ${t}`),Cs[t]&&Zc.warn(`Diagram ${t} already registered.`),Cs[t]=e,n&&RS(t,n),wK(t,e.styles),e.injectUtils&&e.injectUtils(Zc,TK,Ks,EK,pA),Zc.debug(`Registered diagram ${t}. ${Object.keys(Cs).join(", ")} diagrams registered.`)},gA=t=>{if(Zc.debug(`Getting diagram ${t}. ${Object.keys(Cs).join(", ")} diagrams registered.`),t in Cs)return Cs[t];throw new yA(t)};class yA extends Error{constructor(e){super(`Diagram ${e} not found.`)}}var u3=function(){var t=function(A,C,L,S){for(L=L||{},S=A.length;S--;L[A[S]]=C);return L},e=[1,4],n=[1,7],r=[1,5],i=[1,9],a=[1,6],o=[2,6],s=[1,16],l=[6,8,14,20,22,24,25,27,29,32,37,40,50,54],u=[8,14,20,22,24,25,27,29,32,37,40],h=[8,13,14,20,22,24,25,27,29,32,37,40],f=[1,26],d=[6,8,14,50,54],p=[8,14,54],m=[1,65],_=[1,66],y=[1,67],b=[8,14,33,35,42,54],k={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ID:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,";":54,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",28:"ID",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[4,1],[4,1],[4,1]],performAction:function(A,C,L,S,N,v,M){var w=v.length-1;switch(N){case 3:return v[w];case 4:return v[w-1];case 5:return S.setDirection(v[w-3]),v[w-1];case 7:S.setOptions(v[w-1]),this.$=v[w];break;case 8:v[w-1]+=v[w],this.$=v[w-1];break;case 10:this.$=[];break;case 11:v[w-1].push(v[w]),this.$=v[w-1];break;case 12:this.$=v[w-1];break;case 17:this.$=v[w].trim(),S.setAccTitle(this.$);break;case 18:case 19:this.$=v[w].trim(),S.setAccDescription(this.$);break;case 20:S.addSection(v[w].substr(8)),this.$=v[w].substr(8);break;case 22:S.checkout(v[w]);break;case 23:S.branch(v[w]);break;case 24:S.branch(v[w-2],v[w]);break;case 25:S.cherryPick(v[w],"",void 0);break;case 26:S.cherryPick(v[w-2],"",v[w]);break;case 27:case 29:S.cherryPick(v[w-2],"","");break;case 28:S.cherryPick(v[w],"",v[w-2]);break;case 30:S.merge(v[w],"","","");break;case 31:S.merge(v[w-2],v[w],"","");break;case 32:S.merge(v[w-2],"",v[w],"");break;case 33:S.merge(v[w-2],"","",v[w]);break;case 34:S.merge(v[w-4],v[w],"",v[w-2]);break;case 35:S.merge(v[w-4],"",v[w],v[w-2]);break;case 36:S.merge(v[w-4],"",v[w-2],v[w]);break;case 37:S.merge(v[w-4],v[w-2],v[w],"");break;case 38:S.merge(v[w-4],v[w-2],"",v[w]);break;case 39:S.merge(v[w-4],v[w],v[w-2],"");break;case 40:S.merge(v[w-6],v[w-4],v[w-2],v[w]);break;case 41:S.merge(v[w-6],v[w],v[w-4],v[w-2]);break;case 42:S.merge(v[w-6],v[w-4],v[w],v[w-2]);break;case 43:S.merge(v[w-6],v[w-2],v[w-4],v[w]);break;case 44:S.merge(v[w-6],v[w],v[w-2],v[w-4]);break;case 45:S.merge(v[w-6],v[w-2],v[w],v[w-4]);break;case 46:S.commit(v[w]);break;case 47:S.commit("","",S.commitType.NORMAL,v[w]);break;case 48:S.commit("","",v[w],"");break;case 49:S.commit("","",v[w],v[w-2]);break;case 50:S.commit("","",v[w-2],v[w]);break;case 51:S.commit("",v[w],S.commitType.NORMAL,"");break;case 52:S.commit("",v[w-2],S.commitType.NORMAL,v[w]);break;case 53:S.commit("",v[w],S.commitType.NORMAL,v[w-2]);break;case 54:S.commit("",v[w-2],v[w],"");break;case 55:S.commit("",v[w],v[w-2],"");break;case 56:S.commit("",v[w-4],v[w-2],v[w]);break;case 57:S.commit("",v[w-4],v[w],v[w-2]);break;case 58:S.commit("",v[w-2],v[w-4],v[w]);break;case 59:S.commit("",v[w],v[w-4],v[w-2]);break;case 60:S.commit("",v[w],v[w-2],v[w-4]);break;case 61:S.commit("",v[w-2],v[w],v[w-4]);break;case 62:S.commit(v[w],"",S.commitType.NORMAL,"");break;case 63:S.commit(v[w],"",S.commitType.NORMAL,v[w-2]);break;case 64:S.commit(v[w-2],"",S.commitType.NORMAL,v[w]);break;case 65:S.commit(v[w-2],"",v[w],"");break;case 66:S.commit(v[w],"",v[w-2],"");break;case 67:S.commit(v[w],v[w-2],S.commitType.NORMAL,"");break;case 68:S.commit(v[w-2],v[w],S.commitType.NORMAL,"");break;case 69:S.commit(v[w-4],"",v[w-2],v[w]);break;case 70:S.commit(v[w-4],"",v[w],v[w-2]);break;case 71:S.commit(v[w-2],"",v[w-4],v[w]);break;case 72:S.commit(v[w],"",v[w-4],v[w-2]);break;case 73:S.commit(v[w],"",v[w-2],v[w-4]);break;case 74:S.commit(v[w-2],"",v[w],v[w-4]);break;case 75:S.commit(v[w-4],v[w],v[w-2],"");break;case 76:S.commit(v[w-4],v[w-2],v[w],"");break;case 77:S.commit(v[w-2],v[w],v[w-4],"");break;case 78:S.commit(v[w],v[w-2],v[w-4],"");break;case 79:S.commit(v[w],v[w-4],v[w-2],"");break;case 80:S.commit(v[w-2],v[w-4],v[w],"");break;case 81:S.commit(v[w-4],v[w],S.commitType.NORMAL,v[w-2]);break;case 82:S.commit(v[w-4],v[w-2],S.commitType.NORMAL,v[w]);break;case 83:S.commit(v[w-2],v[w],S.commitType.NORMAL,v[w-4]);break;case 84:S.commit(v[w],v[w-2],S.commitType.NORMAL,v[w-4]);break;case 85:S.commit(v[w],v[w-4],S.commitType.NORMAL,v[w-2]);break;case 86:S.commit(v[w-2],v[w-4],S.commitType.NORMAL,v[w]);break;case 87:S.commit(v[w-6],v[w-4],v[w-2],v[w]);break;case 88:S.commit(v[w-6],v[w-4],v[w],v[w-2]);break;case 89:S.commit(v[w-6],v[w-2],v[w-4],v[w]);break;case 90:S.commit(v[w-6],v[w],v[w-4],v[w-2]);break;case 91:S.commit(v[w-6],v[w-2],v[w],v[w-4]);break;case 92:S.commit(v[w-6],v[w],v[w-2],v[w-4]);break;case 93:S.commit(v[w-4],v[w-6],v[w-2],v[w]);break;case 94:S.commit(v[w-4],v[w-6],v[w],v[w-2]);break;case 95:S.commit(v[w-2],v[w-6],v[w-4],v[w]);break;case 96:S.commit(v[w],v[w-6],v[w-4],v[w-2]);break;case 97:S.commit(v[w-2],v[w-6],v[w],v[w-4]);break;case 98:S.commit(v[w],v[w-6],v[w-2],v[w-4]);break;case 99:S.commit(v[w],v[w-4],v[w-2],v[w-6]);break;case 100:S.commit(v[w-2],v[w-4],v[w],v[w-6]);break;case 101:S.commit(v[w],v[w-2],v[w-4],v[w-6]);break;case 102:S.commit(v[w-2],v[w],v[w-4],v[w-6]);break;case 103:S.commit(v[w-4],v[w-2],v[w],v[w-6]);break;case 104:S.commit(v[w-4],v[w],v[w-2],v[w-6]);break;case 105:S.commit(v[w-2],v[w-4],v[w-6],v[w]);break;case 106:S.commit(v[w],v[w-4],v[w-6],v[w-2]);break;case 107:S.commit(v[w-2],v[w],v[w-6],v[w-4]);break;case 108:S.commit(v[w],v[w-2],v[w-6],v[w-4]);break;case 109:S.commit(v[w-4],v[w-2],v[w-6],v[w]);break;case 110:S.commit(v[w-4],v[w],v[w-6],v[w-2]);break;case 111:this.$="";break;case 112:this.$=v[w];break;case 113:this.$=S.commitType.NORMAL;break;case 114:this.$=S.commitType.REVERSE;break;case 115:this.$=S.commitType.HIGHLIGHT;break;case 118:S.parseDirective("%%{","open_directive");break;case 119:S.parseDirective(v[w],"type_directive");break;case 120:v[w]=v[w].trim().replace(/'/g,'"'),S.parseDirective(v[w],"arg_directive");break;case 121:S.parseDirective("}%%","close_directive","gitGraph");break}},table:[{3:1,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:a},{1:[3]},{3:10,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:a},{3:11,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:a},{7:12,8:o,9:[1,13],10:[1,14],11:15,14:s},t(l,[2,122]),t(l,[2,123]),t(l,[2,124]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:o,11:15,14:s},{9:[1,21]},t(u,[2,10],{12:22,13:[1,23]}),t(h,[2,9]),{9:[1,25],48:24,53:f},t([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:o,11:15,14:s},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},t(h,[2,8]),t(d,[2,116]),{49:45,52:[1,46]},t(d,[2,121]),{1:[2,4]},{8:[1,47]},t(u,[2,11]),{4:48,8:n,14:r,54:a},t(u,[2,13]),t(p,[2,14]),t(p,[2,15]),t(p,[2,16]),{21:[1,49]},{23:[1,50]},t(p,[2,19]),t(p,[2,20]),t(p,[2,21]),{28:[1,51]},t(p,[2,111],{41:52,33:[1,55],34:[1,57],35:[1,53],38:[1,54],42:[1,56]}),{28:[1,58]},{33:[1,59],35:[1,60]},{28:[1,61]},{48:62,53:f},{53:[2,120]},{1:[2,5]},t(u,[2,12]),t(p,[2,17]),t(p,[2,18]),t(p,[2,22]),t(p,[2,46]),{34:[1,63]},{39:64,43:m,44:_,45:y},{34:[1,68]},{34:[1,69]},t(p,[2,112]),t(p,[2,30],{33:[1,70],35:[1,72],38:[1,71]}),{34:[1,73]},{34:[1,74],36:[1,75]},t(p,[2,23],{30:[1,76]}),t(d,[2,117]),t(p,[2,47],{33:[1,78],38:[1,77],42:[1,79]}),t(p,[2,48],{33:[1,81],35:[1,80],42:[1,82]}),t(b,[2,113]),t(b,[2,114]),t(b,[2,115]),t(p,[2,51],{35:[1,83],38:[1,84],42:[1,85]}),t(p,[2,62],{33:[1,88],35:[1,86],38:[1,87]}),{34:[1,89]},{39:90,43:m,44:_,45:y},{34:[1,91]},t(p,[2,25],{35:[1,92]}),{33:[1,93]},{33:[1,94]},{31:[1,95]},{39:96,43:m,44:_,45:y},{34:[1,97]},{34:[1,98]},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{39:103,43:m,44:_,45:y},{34:[1,104]},{34:[1,105]},{39:106,43:m,44:_,45:y},{34:[1,107]},t(p,[2,31],{35:[1,109],38:[1,108]}),t(p,[2,32],{33:[1,111],35:[1,110]}),t(p,[2,33],{33:[1,112],38:[1,113]}),{34:[1,114],36:[1,115]},{34:[1,116]},{34:[1,117]},t(p,[2,24]),t(p,[2,49],{33:[1,118],42:[1,119]}),t(p,[2,53],{38:[1,120],42:[1,121]}),t(p,[2,63],{33:[1,123],38:[1,122]}),t(p,[2,50],{33:[1,124],42:[1,125]}),t(p,[2,55],{35:[1,126],42:[1,127]}),t(p,[2,66],{33:[1,129],35:[1,128]}),t(p,[2,52],{38:[1,130],42:[1,131]}),t(p,[2,54],{35:[1,132],42:[1,133]}),t(p,[2,67],{35:[1,135],38:[1,134]}),t(p,[2,64],{33:[1,137],38:[1,136]}),t(p,[2,65],{33:[1,139],35:[1,138]}),t(p,[2,68],{35:[1,141],38:[1,140]}),{39:142,43:m,44:_,45:y},{34:[1,143]},{34:[1,144]},{34:[1,145]},{34:[1,146]},{39:147,43:m,44:_,45:y},t(p,[2,26]),t(p,[2,27]),t(p,[2,28]),t(p,[2,29]),{34:[1,148]},{34:[1,149]},{39:150,43:m,44:_,45:y},{34:[1,151]},{39:152,43:m,44:_,45:y},{34:[1,153]},{34:[1,154]},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{39:160,43:m,44:_,45:y},{34:[1,161]},{34:[1,162]},{34:[1,163]},{39:164,43:m,44:_,45:y},{34:[1,165]},{39:166,43:m,44:_,45:y},{34:[1,167]},{34:[1,168]},{34:[1,169]},{39:170,43:m,44:_,45:y},{34:[1,171]},t(p,[2,37],{35:[1,172]}),t(p,[2,38],{38:[1,173]}),t(p,[2,36],{33:[1,174]}),t(p,[2,39],{35:[1,175]}),t(p,[2,34],{38:[1,176]}),t(p,[2,35],{33:[1,177]}),t(p,[2,60],{42:[1,178]}),t(p,[2,73],{33:[1,179]}),t(p,[2,61],{42:[1,180]}),t(p,[2,84],{38:[1,181]}),t(p,[2,74],{33:[1,182]}),t(p,[2,83],{38:[1,183]}),t(p,[2,59],{42:[1,184]}),t(p,[2,72],{33:[1,185]}),t(p,[2,58],{42:[1,186]}),t(p,[2,78],{35:[1,187]}),t(p,[2,71],{33:[1,188]}),t(p,[2,77],{35:[1,189]}),t(p,[2,57],{42:[1,190]}),t(p,[2,85],{38:[1,191]}),t(p,[2,56],{42:[1,192]}),t(p,[2,79],{35:[1,193]}),t(p,[2,80],{35:[1,194]}),t(p,[2,86],{38:[1,195]}),t(p,[2,70],{33:[1,196]}),t(p,[2,81],{38:[1,197]}),t(p,[2,69],{33:[1,198]}),t(p,[2,75],{35:[1,199]}),t(p,[2,76],{35:[1,200]}),t(p,[2,82],{38:[1,201]}),{34:[1,202]},{39:203,43:m,44:_,45:y},{34:[1,204]},{34:[1,205]},{39:206,43:m,44:_,45:y},{34:[1,207]},{34:[1,208]},{34:[1,209]},{34:[1,210]},{39:211,43:m,44:_,45:y},{34:[1,212]},{39:213,43:m,44:_,45:y},{34:[1,214]},{34:[1,215]},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{39:221,43:m,44:_,45:y},{34:[1,222]},{34:[1,223]},{34:[1,224]},{39:225,43:m,44:_,45:y},{34:[1,226]},{39:227,43:m,44:_,45:y},{34:[1,228]},{34:[1,229]},{34:[1,230]},{39:231,43:m,44:_,45:y},t(p,[2,40]),t(p,[2,42]),t(p,[2,41]),t(p,[2,43]),t(p,[2,45]),t(p,[2,44]),t(p,[2,101]),t(p,[2,102]),t(p,[2,99]),t(p,[2,100]),t(p,[2,104]),t(p,[2,103]),t(p,[2,108]),t(p,[2,107]),t(p,[2,106]),t(p,[2,105]),t(p,[2,110]),t(p,[2,109]),t(p,[2,98]),t(p,[2,97]),t(p,[2,96]),t(p,[2,95]),t(p,[2,93]),t(p,[2,94]),t(p,[2,92]),t(p,[2,91]),t(p,[2,90]),t(p,[2,89]),t(p,[2,87]),t(p,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(A,C){if(C.recoverable)this.trace(A);else{var L=new Error(A);throw L.hash=C,L}},parse:function(A){var C=this,L=[0],S=[],N=[null],v=[],M=this.table,w="",R=0,B=0,$=2,F=1,Q=v.slice.call(arguments,1),nt=Object.create(this.lexer),z={yy:{}};for(var Y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Y)&&(z.yy[Y]=this.yy[Y]);nt.setInput(A,z.yy),z.yy.lexer=nt,z.yy.parser=this,typeof nt.yylloc>"u"&&(nt.yylloc={});var rt=nt.yylloc;v.push(rt);var lt=nt.options&&nt.options.ranges;typeof z.yy.parseError=="function"?this.parseError=z.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function J(){var U;return U=S.pop()||nt.lex()||F,typeof U!="number"&&(U instanceof Array&&(S=U,U=S.pop()),U=C.symbols_[U]||U),U}for(var Z,q,it,ut,G={},j,P,X,O;;){if(q=L[L.length-1],this.defaultActions[q]?it=this.defaultActions[q]:((Z===null||typeof Z>"u")&&(Z=J()),it=M[q]&&M[q][Z]),typeof it>"u"||!it.length||!it[0]){var V="";O=[];for(j in M[q])this.terminals_[j]&&j>$&&O.push("'"+this.terminals_[j]+"'");nt.showPosition?V="Parse error on line "+(R+1)+`:
`+nt.showPosition()+`
Expecting `+O.join(", ")+", got '"+(this.terminals_[Z]||Z)+"'":V="Parse error on line "+(R+1)+": Unexpected "+(Z==F?"end of input":"'"+(this.terminals_[Z]||Z)+"'"),this.parseError(V,{text:nt.match,token:this.terminals_[Z]||Z,line:nt.yylineno,loc:rt,expected:O})}if(it[0]instanceof Array&&it.length>1)throw new Error("Parse Error: multiple actions possible at state: "+q+", token: "+Z);switch(it[0]){case 1:L.push(Z),N.push(nt.yytext),v.push(nt.yylloc),L.push(it[1]),Z=null,B=nt.yyleng,w=nt.yytext,R=nt.yylineno,rt=nt.yylloc;break;case 2:if(P=this.productions_[it[1]][1],G.$=N[N.length-P],G._$={first_line:v[v.length-(P||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(P||1)].first_column,last_column:v[v.length-1].last_column},lt&&(G._$.range=[v[v.length-(P||1)].range[0],v[v.length-1].range[1]]),ut=this.performAction.apply(G,[w,B,R,z.yy,it[1],N,v].concat(Q)),typeof ut<"u")return ut;P&&(L=L.slice(0,-1*P*2),N=N.slice(0,-1*P),v=v.slice(0,-1*P)),L.push(this.productions_[it[1]][0]),N.push(G.$),v.push(G._$),X=M[L[L.length-2]][L[L.length-1]],L.push(X);break;case 3:return!0}}return!0}},T=function(){var A={EOF:1,parseError:function(C,L){if(this.yy.parser)this.yy.parser.parseError(C,L);else throw new Error(C)},setInput:function(C,L){return this.yy=L||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var L=C.match(/(?:\r\n?|\n).*/g);return L?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},unput:function(C){var L=C.length,S=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-L),this.offset-=L;var N=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),S.length-1&&(this.yylineno-=S.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:S?(S.length===N.length?this.yylloc.first_column:0)+N[N.length-S.length].length-S[0].length:this.yylloc.first_column-L},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-L]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(C){this.unput(this.match.slice(C))},pastInput:function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var C=this.pastInput(),L=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+L+"^"},test_match:function(C,L){var S,N,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),N=C[0].match(/(?:\r\n?|\n).*/g),N&&(this.yylineno+=N.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:N?N[N.length-1].length-N[N.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],S=this.performAction.call(this,this.yy,this,L,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),S)return S;if(this._backtrack){for(var M in v)this[M]=v[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,L,S,N;this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),M=0;M<v.length;M++)if(S=this._input.match(this.rules[v[M]]),S&&(!L||S[0].length>L[0].length)){if(L=S,N=M,this.options.backtrack_lexer){if(C=this.test_match(S,v[M]),C!==!1)return C;if(this._backtrack){L=!1;continue}else return!1}else if(!this.options.flex)break}return L?(C=this.test_match(L,v[N]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var C=this.next();return C||this.lex()},begin:function(C){this.conditionStack.push(C)},popState:function(){var C=this.conditionStack.length-1;return C>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(C){return C=this.conditionStack.length-1-Math.abs(C||0),C>=0?this.conditionStack[C]:"INITIAL"},pushState:function(C){this.begin(C)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(C,L,S,N){switch(S){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:break;case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:return 10;case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 28;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};return A}();k.lexer=T;function x(){this.yy={}}return x.prototype=k,k.Parser=x,new x}();u3.parser=u3;const CK=t=>t.match(/^\s*gitGraph/)!==null;let pb="",ed="",gb="";const yb=t=>si(t,at()),pi=function(){pb="",gb="",ed=""},zr=function(t){pb=yb(t).replace(/^\s+/g,"")},gi=function(){return pb||ed},yi=function(t){gb=yb(t).replace(/\n\s+/g,`
`)},mi=function(){return gb},nd=function(t){ed=yb(t)},rd=function(){return ed};let B1=at().gitGraph.mainBranchName,SK=at().gitGraph.mainBranchOrder,xn={},rr=null,Pl={};Pl[B1]={name:B1,order:SK};let bn={};bn[B1]=rr;let Cn=B1,mA="LR",$o=0;function mb(){return jS({length:7})}const AK=function(t,e,n){qe.parseDirective(this,t,e,n)};function MK(t,e){const n=Object.create(null);return t.reduce((r,i)=>{const a=e(i);return n[a]||(n[a]=!0,r.push(i)),r},[])}const LK=function(t){mA=t};let bA={};const BK=function(t){W.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{bA=JSON.parse(t)}catch(e){W.error("error while parsing gitGraph options",e.message)}},DK=function(){return bA},NK=function(t,e,n,r){W.debug("Entering commit:",t,e,n,r),e=pe.sanitizeText(e,at()),t=pe.sanitizeText(t,at()),r=pe.sanitizeText(r,at());const i={id:e||$o+"-"+mb(),message:t,seq:$o++,type:n||Yl.NORMAL,tag:r||"",parents:rr==null?[]:[rr.id],branch:Cn};rr=i,xn[i.id]=i,bn[Cn]=i.id,W.debug("in pushCommit "+i.id)},OK=function(t,e){if(t=pe.sanitizeText(t,at()),typeof bn[t]>"u")bn[t]=rr!=null?rr.id:null,Pl[t]={name:t,order:e?parseInt(e,10):null},_A(t),W.debug("in createBranch");else{let n=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw n.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},n}},RK=function(t,e,n,r){t=pe.sanitizeText(t,at()),e=pe.sanitizeText(e,at());const i=xn[bn[Cn]],a=xn[bn[t]];if(Cn===t){let s=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},s}else if(typeof i>"u"||!i){let s=new Error('Incorrect usage of "merge". Current branch ('+Cn+")has no commits");throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},s}else if(typeof bn[t]>"u"){let s=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},s}else if(typeof a>"u"||!a){let s=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},s}else if(i===a){let s=new Error('Incorrect usage of "merge". Both branches have same head');throw s.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},s}else if(e&&typeof xn[e]<"u"){let s=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw s.hash={text:"merge "+t+e+n+r,token:"merge "+t+e+n+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+n+" "+r]},s}const o={id:e||$o+"-"+mb(),message:"merged branch "+t+" into "+Cn,seq:$o++,parents:[rr==null?null:rr.id,bn[t]],branch:Cn,type:Yl.MERGE,customType:n,customId:!!e,tag:r||""};rr=o,xn[o.id]=o,bn[Cn]=o.id,W.debug(bn),W.debug("in mergeBranch")},IK=function(t,e,n){if(W.debug("Entering cherryPick:",t,e,n),t=pe.sanitizeText(t,at()),e=pe.sanitizeText(e,at()),n=pe.sanitizeText(n,at()),!t||typeof xn[t]>"u"){let a=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}let r=xn[t],i=r.branch;if(r.type===Yl.MERGE){let a=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw a.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a}if(!e||typeof xn[e]>"u"){if(i===Cn){let s=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw s.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s}const a=xn[bn[Cn]];if(typeof a>"u"||!a){let s=new Error('Incorrect usage of "cherry-pick". Current branch ('+Cn+")has no commits");throw s.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s}const o={id:$o+"-"+mb(),message:"cherry-picked "+r+" into "+Cn,seq:$o++,parents:[rr==null?null:rr.id,r.id],branch:Cn,type:Yl.CHERRY_PICK,tag:n!=null?n:"cherry-pick:"+r.id};rr=o,xn[o.id]=o,bn[Cn]=o.id,W.debug(bn),W.debug("in cherryPick")}},_A=function(t){if(t=pe.sanitizeText(t,at()),typeof bn[t]>"u"){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{Cn=t;const e=bn[Cn];rr=xn[e]}};function ov(t,e,n){const r=t.indexOf(e);r===-1?t.push(n):t.splice(r,1,n)}function vA(t){const e=t.reduce((i,a)=>i.seq>a.seq?i:a,t[0]);let n="";t.forEach(function(i){i===e?n+="	*":n+="	|"});const r=[n,e.id,e.seq];for(let i in bn)bn[i]===e.id&&r.push(i);if(W.debug(r.join(" ")),e.parents&&e.parents.length==2){const i=xn[e.parents[0]];ov(t,e,i),t.push(xn[e.parents[1]])}else{if(e.parents.length==0)return;{const i=xn[e.parents];ov(t,e,i)}}t=MK(t,i=>i.id),vA(t)}const FK=function(){W.debug(xn);const t=xA()[0];vA([t])},$K=function(){xn={},rr=null;let t=at().gitGraph.mainBranchName,e=at().gitGraph.mainBranchOrder;bn={},bn[t]=null,Pl={},Pl[t]={name:t,order:e},Cn=t,$o=0,pi()},PK=function(){return Object.values(Pl).map((t,e)=>t.order!==null?t:{...t,order:parseFloat(`0.${e}`,10)}).sort((t,e)=>t.order-e.order).map(({name:t})=>({name:t}))},YK=function(){return bn},zK=function(){return xn},xA=function(){const t=Object.keys(xn).map(function(e){return xn[e]});return t.forEach(function(e){W.debug(e.id)}),t.sort((e,n)=>e.seq-n.seq),t},jK=function(){return Cn},UK=function(){return mA},HK=function(){return rr},Yl={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},WK={parseDirective:AK,getConfig:()=>at().gitGraph,setDirection:LK,setOptions:BK,getOptions:DK,commit:NK,branch:OK,merge:RK,cherryPick:IK,checkout:_A,prettyPrint:FK,clear:$K,getBranchesAsObjArray:PK,getBranches:YK,getCommits:zK,getCommitsArray:xA,getCurrentBranch:jK,getDirection:UK,getHead:HK,setAccTitle:zr,getAccTitle:gi,getAccDescription:mi,setAccDescription:yi,commitType:Yl};function xr(t,e,n){if(typeof e.insert>"u")return;let r=t.getAccTitle(),i=t.getAccDescription();e.attr("role","img").attr("aria-labelledby","chart-title-"+n+" chart-desc-"+n),e.insert("desc",":first-child").attr("id","chart-desc-"+n).text(i),e.insert("title",":first-child").attr("id","chart-title-"+n).text(r)}let Qc={};const wr={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},mo=8;let yr={},D1={},ul=[],N1=0;const GK=()=>{yr={},D1={},Qc={},N1=0,ul=[]},VK=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let n=[];typeof t=="string"?n=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?n=t:n=[];for(let r=0;r<n.length;r++){const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=n[r].trim(),e.appendChild(i)}return e},sv=(t,e,n)=>{const r=Ks().gitGraph,i=t.append("g").attr("class","commit-bullets"),a=t.append("g").attr("class","commit-labels");let o=0;Object.keys(e).sort((s,l)=>e[s].seq-e[l].seq).forEach(s=>{const l=e[s],u=yr[l.branch].pos,h=o+10;if(n){let f,d=typeof l.customType<"u"&&l.customType!==""?l.customType:l.type;switch(d){case wr.NORMAL:f="commit-normal";break;case wr.REVERSE:f="commit-reverse";break;case wr.HIGHLIGHT:f="commit-highlight";break;case wr.MERGE:f="commit-merge";break;case wr.CHERRY_PICK:f="commit-cherry-pick";break;default:f="commit-normal"}if(d===wr.HIGHLIGHT){const p=i.append("rect");p.attr("x",h-10),p.attr("y",u-10),p.attr("height",20),p.attr("width",20),p.attr("class",`commit ${l.id} commit-highlight${yr[l.branch].index%mo} ${f}-outer`),i.append("rect").attr("x",h-6).attr("y",u-6).attr("height",12).attr("width",12).attr("class",`commit ${l.id} commit${yr[l.branch].index%mo} ${f}-inner`)}else if(d===wr.CHERRY_PICK)i.append("circle").attr("cx",h).attr("cy",u).attr("r",10).attr("class",`commit ${l.id} ${f}`),i.append("circle").attr("cx",h-3).attr("cy",u+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${l.id} ${f}`),i.append("circle").attr("cx",h+3).attr("cy",u+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${l.id} ${f}`),i.append("line").attr("x1",h+3).attr("y1",u+1).attr("x2",h).attr("y2",u-5).attr("stroke","#fff").attr("class",`commit ${l.id} ${f}`),i.append("line").attr("x1",h-3).attr("y1",u+1).attr("x2",h).attr("y2",u-5).attr("stroke","#fff").attr("class",`commit ${l.id} ${f}`);else{const p=i.append("circle");if(p.attr("cx",h),p.attr("cy",u),p.attr("r",l.type===wr.MERGE?9:10),p.attr("class",`commit ${l.id} commit${yr[l.branch].index%mo}`),d===wr.MERGE){const m=i.append("circle");m.attr("cx",h),m.attr("cy",u),m.attr("r",6),m.attr("class",`commit ${f} ${l.id} commit${yr[l.branch].index%mo}`)}d===wr.REVERSE&&i.append("path").attr("d",`M ${h-5},${u-5}L${h+5},${u+5}M${h-5},${u+5}L${h+5},${u-5}`).attr("class",`commit ${f} ${l.id} commit${yr[l.branch].index%mo}`)}}if(D1[l.id]={x:o+10,y:u},n){if(l.type!==wr.CHERRY_PICK&&(l.customId&&l.type===wr.MERGE||l.type!==wr.MERGE)&&r.showCommitLabel){const f=a.append("g"),d=f.insert("rect").attr("class","commit-label-bkg"),p=f.append("text").attr("x",o).attr("y",u+25).attr("class","commit-label").text(l.id);let m=p.node().getBBox();if(d.attr("x",o+10-m.width/2-2).attr("y",u+13.5).attr("width",m.width+2*2).attr("height",m.height+2*2),p.attr("x",o+10-m.width/2),r.rotateCommitLabel){let _=-7.5-(m.width+10)/25*9.5,y=10+m.width/25*8.5;f.attr("transform","translate("+_+", "+y+") rotate("+-45+", "+o+", "+u+")")}}if(l.tag){const f=a.insert("polygon"),d=a.append("circle"),p=a.append("text").attr("y",u-16).attr("class","tag-label").text(l.tag);let m=p.node().getBBox();p.attr("x",o+10-m.width/2);const _=m.height/2,y=u-19.2;f.attr("class","tag-label-bkg").attr("points",`
          ${o-m.width/2-4/2},${y+2}
          ${o-m.width/2-4/2},${y-2}
          ${o+10-m.width/2-4},${y-_-2}
          ${o+10+m.width/2+4},${y-_-2}
          ${o+10+m.width/2+4},${y+_+2}
          ${o+10-m.width/2-4},${y+_+2}`),d.attr("cx",o-m.width/2+4/2).attr("cy",y).attr("r",1.5).attr("class","tag-hole")}}o+=50,o>N1&&(N1=o)})},qK=(t,e,n)=>Object.keys(n).filter(r=>n[r].branch===e.branch&&n[r].seq>t.seq&&n[r].seq<e.seq).length>0,h3=(t,e,n)=>{const r=n||0,i=t+Math.abs(t-e)/2;if(r>5)return i;let a=!0;for(let s=0;s<ul.length;s++)Math.abs(ul[s]-i)<10&&(a=!1);if(a)return ul.push(i),i;const o=Math.abs(t-e);return h3(t,e-o/5,r+1)},XK=(t,e,n,r)=>{const i=D1[e.id],a=D1[n.id],o=qK(e,n,r);let s="",l="",u=0,h=0,f=yr[n.branch].index,d;if(o){s="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",u=10,h=10,f=yr[n.branch].index;const p=i.y<a.y?h3(i.y,a.y):h3(a.y,i.y);i.y<a.y?d=`M ${i.x} ${i.y} L ${i.x} ${p-u} ${s} ${i.x+h} ${p} L ${a.x-u} ${p} ${l} ${a.x} ${p+h} L ${a.x} ${a.y}`:d=`M ${i.x} ${i.y} L ${i.x} ${p+u} ${l} ${i.x+h} ${p} L ${a.x-u} ${p} ${s} ${a.x} ${p-h} L ${a.x} ${a.y}`}else i.y<a.y&&(s="A 20 20, 0, 0, 0,",u=20,h=20,f=yr[n.branch].index,d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${s} ${i.x+h} ${a.y} L ${a.x} ${a.y}`),i.y>a.y&&(s="A 20 20, 0, 0, 0,",u=20,h=20,f=yr[e.branch].index,d=`M ${i.x} ${i.y} L ${a.x-u} ${i.y} ${s} ${a.x} ${i.y-h} L ${a.x} ${a.y}`),i.y===a.y&&(f=yr[e.branch].index,d=`M ${i.x} ${i.y} L ${i.x} ${a.y-u} ${s} ${i.x+h} ${a.y} L ${a.x} ${a.y}`);t.append("path").attr("d",d).attr("class","arrow arrow"+f%mo)},KK=(t,e)=>{const n=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const i=e[r];i.parents&&i.parents.length>0&&i.parents.forEach(a=>{XK(n,e[a],i,e)})})},ZK=(t,e)=>{const n=Ks().gitGraph,r=t.append("g");e.forEach((i,a)=>{const o=a%mo,s=yr[i.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",s),l.attr("x2",N1),l.attr("y2",s),l.attr("class","branch branch"+o),ul.push(s);let u=i.name;const h=VK(u),f=r.insert("rect"),d=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+o);d.node().appendChild(h);let p=h.getBBox();f.attr("class","branchLabelBkg label"+o).attr("rx",4).attr("ry",4).attr("x",-p.width-4-(n.rotateCommitLabel===!0?30:0)).attr("y",-p.height/2+8).attr("width",p.width+18).attr("height",p.height+4),d.attr("transform","translate("+(-p.width-14-(n.rotateCommitLabel===!0?30:0))+", "+(s-p.height/2-1)+")"),f.attr("transform","translate("+-19+", "+(s-p.height/2)+")")})},QK=function(t,e,n,r){GK();const i=Ks(),a=Ks().gitGraph;W.debug("in gitgraph renderer",t+`
`,"id:",e,n),Qc=r.db.getCommits();const o=r.db.getBranchesAsObjArray();let s=0;o.forEach((u,h)=>{yr[u.name]={pos:s,index:h},s+=50+(a.rotateCommitLabel?40:0)});const l=Lt(`[id="${e}"]`);xr(r.db,l,e),sv(l,Qc,!1),a.showBranches&&ZK(l,o),KK(l,Qc),sv(l,Qc,!0),pA(void 0,l,a.diagramPadding,i.useMaxWidth)},JK={draw:QK},tZ=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  }
`;var zl=function(){var t=function(Pt,yt,Ct,pt){for(Ct=Ct||{},pt=Pt.length;pt--;Ct[Pt[pt]]=yt);return Ct},e=[1,6],n=[1,7],r=[1,8],i=[1,9],a=[1,16],o=[1,11],s=[1,12],l=[1,13],u=[1,14],h=[1,15],f=[1,27],d=[1,33],p=[1,34],m=[1,35],_=[1,36],y=[1,37],b=[1,72],k=[1,73],T=[1,74],x=[1,75],A=[1,76],C=[1,77],L=[1,78],S=[1,38],N=[1,39],v=[1,40],M=[1,41],w=[1,42],R=[1,43],B=[1,44],$=[1,45],F=[1,46],Q=[1,47],nt=[1,48],z=[1,49],Y=[1,50],rt=[1,51],lt=[1,52],J=[1,53],Z=[1,54],q=[1,55],it=[1,56],ut=[1,57],G=[1,59],j=[1,60],P=[1,61],X=[1,62],O=[1,63],V=[1,64],U=[1,65],H=[1,66],xt=[1,67],ot=[1,68],Nt=[1,69],Mt=[24,52],wt=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Et=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],bt=[1,94],mt=[1,95],Tt=[1,96],kt=[1,97],st=[15,24,52],Zt=[7,8,9,10,18,22,25,26,27,28],$t=[15,24,43,52],Jt=[15,24,43,52,86,87,89,90],Ht=[15,43],qt=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],oe={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(Pt,yt,Ct,pt,Ft,dt,Ee){var gt=dt.length-1;switch(Ft){case 4:pt.setDirection("TB");break;case 5:pt.setDirection("BT");break;case 6:pt.setDirection("RL");break;case 7:pt.setDirection("LR");break;case 11:pt.parseDirective("%%{","open_directive");break;case 12:break;case 13:dt[gt]=dt[gt].trim().replace(/'/g,'"'),pt.parseDirective(dt[gt],"arg_directive");break;case 14:pt.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:pt.setC4Type(dt[gt-3]);break;case 26:pt.setTitle(dt[gt].substring(6)),this.$=dt[gt].substring(6);break;case 27:pt.setAccDescription(dt[gt].substring(15)),this.$=dt[gt].substring(15);break;case 28:this.$=dt[gt].trim(),pt.setTitle(this.$);break;case 29:case 30:this.$=dt[gt].trim(),pt.setAccDescription(this.$);break;case 35:case 36:dt[gt].splice(2,0,"ENTERPRISE"),pt.addPersonOrSystemBoundary(...dt[gt]),this.$=dt[gt];break;case 37:pt.addPersonOrSystemBoundary(...dt[gt]),this.$=dt[gt];break;case 38:dt[gt].splice(2,0,"CONTAINER"),pt.addContainerBoundary(...dt[gt]),this.$=dt[gt];break;case 39:pt.addDeploymentNode("node",...dt[gt]),this.$=dt[gt];break;case 40:pt.addDeploymentNode("nodeL",...dt[gt]),this.$=dt[gt];break;case 41:pt.addDeploymentNode("nodeR",...dt[gt]),this.$=dt[gt];break;case 42:pt.popBoundaryParseStack();break;case 46:pt.addPersonOrSystem("person",...dt[gt]),this.$=dt[gt];break;case 47:pt.addPersonOrSystem("external_person",...dt[gt]),this.$=dt[gt];break;case 48:pt.addPersonOrSystem("system",...dt[gt]),this.$=dt[gt];break;case 49:pt.addPersonOrSystem("system_db",...dt[gt]),this.$=dt[gt];break;case 50:pt.addPersonOrSystem("system_queue",...dt[gt]),this.$=dt[gt];break;case 51:pt.addPersonOrSystem("external_system",...dt[gt]),this.$=dt[gt];break;case 52:pt.addPersonOrSystem("external_system_db",...dt[gt]),this.$=dt[gt];break;case 53:pt.addPersonOrSystem("external_system_queue",...dt[gt]),this.$=dt[gt];break;case 54:pt.addContainer("container",...dt[gt]),this.$=dt[gt];break;case 55:pt.addContainer("container_db",...dt[gt]),this.$=dt[gt];break;case 56:pt.addContainer("container_queue",...dt[gt]),this.$=dt[gt];break;case 57:pt.addContainer("external_container",...dt[gt]),this.$=dt[gt];break;case 58:pt.addContainer("external_container_db",...dt[gt]),this.$=dt[gt];break;case 59:pt.addContainer("external_container_queue",...dt[gt]),this.$=dt[gt];break;case 60:pt.addComponent("component",...dt[gt]),this.$=dt[gt];break;case 61:pt.addComponent("component_db",...dt[gt]),this.$=dt[gt];break;case 62:pt.addComponent("component_queue",...dt[gt]),this.$=dt[gt];break;case 63:pt.addComponent("external_component",...dt[gt]),this.$=dt[gt];break;case 64:pt.addComponent("external_component_db",...dt[gt]),this.$=dt[gt];break;case 65:pt.addComponent("external_component_queue",...dt[gt]),this.$=dt[gt];break;case 67:pt.addRel("rel",...dt[gt]),this.$=dt[gt];break;case 68:pt.addRel("birel",...dt[gt]),this.$=dt[gt];break;case 69:pt.addRel("rel_u",...dt[gt]),this.$=dt[gt];break;case 70:pt.addRel("rel_d",...dt[gt]),this.$=dt[gt];break;case 71:pt.addRel("rel_l",...dt[gt]),this.$=dt[gt];break;case 72:pt.addRel("rel_r",...dt[gt]),this.$=dt[gt];break;case 73:pt.addRel("rel_b",...dt[gt]),this.$=dt[gt];break;case 74:dt[gt].splice(0,1),pt.addRel("rel",...dt[gt]),this.$=dt[gt];break;case 75:pt.updateElStyle("update_el_style",...dt[gt]),this.$=dt[gt];break;case 76:pt.updateRelStyle("update_rel_style",...dt[gt]),this.$=dt[gt];break;case 77:pt.updateLayoutConfig("update_layout_config",...dt[gt]),this.$=dt[gt];break;case 78:this.$=[dt[gt]];break;case 79:dt[gt].unshift(dt[gt-1]),this.$=dt[gt];break;case 80:case 82:this.$=dt[gt].trim();break;case 81:let ie={};ie[dt[gt-1].trim()]=dt[gt].trim(),this.$=ie;break;case 83:this.$="";break}},table:[{3:1,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:a,22:o,25:s,26:l,27:u,28:h},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:a,22:o,25:s,26:l,27:u,28:h},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:f},t([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt},{23:79,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt},{23:80,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt},{23:81,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt},{23:82,29:29,30:30,31:31,32:d,33:p,34:m,36:_,38:y,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},t(Mt,[2,20],{53:32,39:58,40:70,42:71,30:87,44:b,46:k,47:T,48:x,49:A,50:C,51:L,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt}),t(Mt,[2,21]),t(wt,[2,23],{15:[1,88]}),t(Mt,[2,43],{15:[1,89]}),t(Et,[2,26]),t(Et,[2,27]),{35:[1,90]},{37:[1,91]},t(Et,[2,30]),{45:92,85:93,86:bt,87:mt,89:Tt,90:kt},{45:98,85:93,86:bt,87:mt,89:Tt,90:kt},{45:99,85:93,86:bt,87:mt,89:Tt,90:kt},{45:100,85:93,86:bt,87:mt,89:Tt,90:kt},{45:101,85:93,86:bt,87:mt,89:Tt,90:kt},{45:102,85:93,86:bt,87:mt,89:Tt,90:kt},{45:103,85:93,86:bt,87:mt,89:Tt,90:kt},{45:104,85:93,86:bt,87:mt,89:Tt,90:kt},{45:105,85:93,86:bt,87:mt,89:Tt,90:kt},{45:106,85:93,86:bt,87:mt,89:Tt,90:kt},{45:107,85:93,86:bt,87:mt,89:Tt,90:kt},{45:108,85:93,86:bt,87:mt,89:Tt,90:kt},{45:109,85:93,86:bt,87:mt,89:Tt,90:kt},{45:110,85:93,86:bt,87:mt,89:Tt,90:kt},{45:111,85:93,86:bt,87:mt,89:Tt,90:kt},{45:112,85:93,86:bt,87:mt,89:Tt,90:kt},{45:113,85:93,86:bt,87:mt,89:Tt,90:kt},{45:114,85:93,86:bt,87:mt,89:Tt,90:kt},{45:115,85:93,86:bt,87:mt,89:Tt,90:kt},{45:116,85:93,86:bt,87:mt,89:Tt,90:kt},t(st,[2,66]),{45:117,85:93,86:bt,87:mt,89:Tt,90:kt},{45:118,85:93,86:bt,87:mt,89:Tt,90:kt},{45:119,85:93,86:bt,87:mt,89:Tt,90:kt},{45:120,85:93,86:bt,87:mt,89:Tt,90:kt},{45:121,85:93,86:bt,87:mt,89:Tt,90:kt},{45:122,85:93,86:bt,87:mt,89:Tt,90:kt},{45:123,85:93,86:bt,87:mt,89:Tt,90:kt},{45:124,85:93,86:bt,87:mt,89:Tt,90:kt},{45:125,85:93,86:bt,87:mt,89:Tt,90:kt},{45:126,85:93,86:bt,87:mt,89:Tt,90:kt},{45:127,85:93,86:bt,87:mt,89:Tt,90:kt},{30:128,39:58,40:70,42:71,44:b,46:k,47:T,48:x,49:A,50:C,51:L,53:32,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt},{15:[1,130],43:[1,129]},{45:131,85:93,86:bt,87:mt,89:Tt,90:kt},{45:132,85:93,86:bt,87:mt,89:Tt,90:kt},{45:133,85:93,86:bt,87:mt,89:Tt,90:kt},{45:134,85:93,86:bt,87:mt,89:Tt,90:kt},{45:135,85:93,86:bt,87:mt,89:Tt,90:kt},{45:136,85:93,86:bt,87:mt,89:Tt,90:kt},{45:137,85:93,86:bt,87:mt,89:Tt,90:kt},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},t(Zt,[2,9]),{14:142,21:f},{21:[2,13]},{1:[2,15]},t(Mt,[2,22]),t(wt,[2,24],{31:31,29:143,32:d,33:p,34:m,36:_,38:y}),t(Mt,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:d,33:p,34:m,36:_,38:y,44:b,46:k,47:T,48:x,49:A,50:C,51:L,54:S,55:N,56:v,57:M,58:w,59:R,60:B,61:$,62:F,63:Q,64:nt,65:z,66:Y,67:rt,68:lt,69:J,70:Z,71:q,72:it,73:ut,74:G,75:j,76:P,77:X,78:O,79:V,80:U,81:H,82:xt,83:ot,84:Nt}),t(Et,[2,28]),t(Et,[2,29]),t(st,[2,46]),t($t,[2,78],{85:93,45:145,86:bt,87:mt,89:Tt,90:kt}),t(Jt,[2,80]),{88:[1,146]},t(Jt,[2,82]),t(Jt,[2,83]),t(st,[2,47]),t(st,[2,48]),t(st,[2,49]),t(st,[2,50]),t(st,[2,51]),t(st,[2,52]),t(st,[2,53]),t(st,[2,54]),t(st,[2,55]),t(st,[2,56]),t(st,[2,57]),t(st,[2,58]),t(st,[2,59]),t(st,[2,60]),t(st,[2,61]),t(st,[2,62]),t(st,[2,63]),t(st,[2,64]),t(st,[2,65]),t(st,[2,67]),t(st,[2,68]),t(st,[2,69]),t(st,[2,70]),t(st,[2,71]),t(st,[2,72]),t(st,[2,73]),t(st,[2,74]),t(st,[2,75]),t(st,[2,76]),t(st,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},t(Ht,[2,35]),t(Ht,[2,36]),t(Ht,[2,37]),t(Ht,[2,38]),t(Ht,[2,39]),t(Ht,[2,40]),t(Ht,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},t(wt,[2,25]),t(Mt,[2,45]),t($t,[2,79]),t(Jt,[2,81]),t(st,[2,31]),t(st,[2,42]),t(qt,[2,32]),t(qt,[2,33],{15:[1,152]}),t(Zt,[2,10]),t(qt,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(Pt,yt){if(yt.recoverable)this.trace(Pt);else{var Ct=new Error(Pt);throw Ct.hash=yt,Ct}},parse:function(Pt){var yt=this,Ct=[0],pt=[],Ft=[null],dt=[],Ee=this.table,gt="",ie=0,se=0,_e=2,he=1,me=dt.slice.call(arguments,1),Vt=Object.create(this.lexer),te={yy:{}};for(var de in this.yy)Object.prototype.hasOwnProperty.call(this.yy,de)&&(te.yy[de]=this.yy[de]);Vt.setInput(Pt,te.yy),te.yy.lexer=Vt,te.yy.parser=this,typeof Vt.yylloc>"u"&&(Vt.yylloc={});var ge=Vt.yylloc;dt.push(ge);var fe=Vt.options&&Vt.options.ranges;typeof te.yy.parseError=="function"?this.parseError=te.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ji(){var Qt;return Qt=pt.pop()||Vt.lex()||he,typeof Qt!="number"&&(Qt instanceof Array&&(pt=Qt,Qt=pt.pop()),Qt=yt.symbols_[Qt]||Qt),Qt}for(var $e,Pe,Kt,Vn,en={},Ke,Ye,tt,Dt;;){if(Pe=Ct[Ct.length-1],this.defaultActions[Pe]?Kt=this.defaultActions[Pe]:(($e===null||typeof $e>"u")&&($e=ji()),Kt=Ee[Pe]&&Ee[Pe][$e]),typeof Kt>"u"||!Kt.length||!Kt[0]){var At="";Dt=[];for(Ke in Ee[Pe])this.terminals_[Ke]&&Ke>_e&&Dt.push("'"+this.terminals_[Ke]+"'");Vt.showPosition?At="Parse error on line "+(ie+1)+`:
`+Vt.showPosition()+`
Expecting `+Dt.join(", ")+", got '"+(this.terminals_[$e]||$e)+"'":At="Parse error on line "+(ie+1)+": Unexpected "+($e==he?"end of input":"'"+(this.terminals_[$e]||$e)+"'"),this.parseError(At,{text:Vt.match,token:this.terminals_[$e]||$e,line:Vt.yylineno,loc:ge,expected:Dt})}if(Kt[0]instanceof Array&&Kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Pe+", token: "+$e);switch(Kt[0]){case 1:Ct.push($e),Ft.push(Vt.yytext),dt.push(Vt.yylloc),Ct.push(Kt[1]),$e=null,se=Vt.yyleng,gt=Vt.yytext,ie=Vt.yylineno,ge=Vt.yylloc;break;case 2:if(Ye=this.productions_[Kt[1]][1],en.$=Ft[Ft.length-Ye],en._$={first_line:dt[dt.length-(Ye||1)].first_line,last_line:dt[dt.length-1].last_line,first_column:dt[dt.length-(Ye||1)].first_column,last_column:dt[dt.length-1].last_column},fe&&(en._$.range=[dt[dt.length-(Ye||1)].range[0],dt[dt.length-1].range[1]]),Vn=this.performAction.apply(en,[gt,se,ie,te.yy,Kt[1],Ft,dt].concat(me)),typeof Vn<"u")return Vn;Ye&&(Ct=Ct.slice(0,-1*Ye*2),Ft=Ft.slice(0,-1*Ye),dt=dt.slice(0,-1*Ye)),Ct.push(this.productions_[Kt[1]][0]),Ft.push(en.$),dt.push(en._$),tt=Ee[Ct[Ct.length-2]][Ct[Ct.length-1]],Ct.push(tt);break;case 3:return!0}}return!0}},Xt=function(){var Pt={EOF:1,parseError:function(yt,Ct){if(this.yy.parser)this.yy.parser.parseError(yt,Ct);else throw new Error(yt)},setInput:function(yt,Ct){return this.yy=Ct||this.yy||{},this._input=yt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var yt=this._input[0];this.yytext+=yt,this.yyleng++,this.offset++,this.match+=yt,this.matched+=yt;var Ct=yt.match(/(?:\r\n?|\n).*/g);return Ct?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),yt},unput:function(yt){var Ct=yt.length,pt=yt.split(/(?:\r\n?|\n)/g);this._input=yt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ct),this.offset-=Ct;var Ft=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pt.length-1&&(this.yylineno-=pt.length-1);var dt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pt?(pt.length===Ft.length?this.yylloc.first_column:0)+Ft[Ft.length-pt.length].length-pt[0].length:this.yylloc.first_column-Ct},this.options.ranges&&(this.yylloc.range=[dt[0],dt[0]+this.yyleng-Ct]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(yt){this.unput(this.match.slice(yt))},pastInput:function(){var yt=this.matched.substr(0,this.matched.length-this.match.length);return(yt.length>20?"...":"")+yt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var yt=this.match;return yt.length<20&&(yt+=this._input.substr(0,20-yt.length)),(yt.substr(0,20)+(yt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var yt=this.pastInput(),Ct=new Array(yt.length+1).join("-");return yt+this.upcomingInput()+`
`+Ct+"^"},test_match:function(yt,Ct){var pt,Ft,dt;if(this.options.backtrack_lexer&&(dt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(dt.yylloc.range=this.yylloc.range.slice(0))),Ft=yt[0].match(/(?:\r\n?|\n).*/g),Ft&&(this.yylineno+=Ft.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ft?Ft[Ft.length-1].length-Ft[Ft.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+yt[0].length},this.yytext+=yt[0],this.match+=yt[0],this.matches=yt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(yt[0].length),this.matched+=yt[0],pt=this.performAction.call(this,this.yy,this,Ct,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pt)return pt;if(this._backtrack){for(var Ee in dt)this[Ee]=dt[Ee];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var yt,Ct,pt,Ft;this._more||(this.yytext="",this.match="");for(var dt=this._currentRules(),Ee=0;Ee<dt.length;Ee++)if(pt=this._input.match(this.rules[dt[Ee]]),pt&&(!Ct||pt[0].length>Ct[0].length)){if(Ct=pt,Ft=Ee,this.options.backtrack_lexer){if(yt=this.test_match(pt,dt[Ee]),yt!==!1)return yt;if(this._backtrack){Ct=!1;continue}else return!1}else if(!this.options.flex)break}return Ct?(yt=this.test_match(Ct,dt[Ft]),yt!==!1?yt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var yt=this.next();return yt||this.lex()},begin:function(yt){this.conditionStack.push(yt)},popState:function(){var yt=this.conditionStack.length-1;return yt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(yt){return yt=this.conditionStack.length-1-Math.abs(yt||0),yt>=0?this.conditionStack[yt]:"INITIAL"},pushState:function(yt){this.begin(yt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(yt,Ct,pt,Ft){switch(pt){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:return this.begin("node"),49;case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:return this.begin("rel_u"),76;case 58:return this.begin("rel_u"),76;case 59:return this.begin("rel_d"),77;case 60:return this.begin("rel_d"),77;case 61:return this.begin("rel_l"),78;case 62:return this.begin("rel_l"),78;case 63:return this.begin("rel_r"),79;case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};return Pt}();oe.lexer=Xt;function It(){this.yy={}}return It.prototype=oe,oe.Parser=It,new It}();zl.parser=zl;const eZ=t=>t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/)!==null;let ci=[],za=[""],ir="global",ri="",Ii=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],jl=[],bb="",_b=!1,O1=4,R1=2;var kA;const nZ=function(){return kA},rZ=function(t){kA=si(t,at())},iZ=function(t,e,n){qe.parseDirective(this,t,e,n)},aZ=function(t,e,n,r,i,a,o,s,l){if(t==null||e===void 0||e===null||n===void 0||n===null||r===void 0||r===null)return;let u={};const h=jl.find(f=>f.from===e&&f.to===n);if(h?u=h:jl.push(u),u.type=t,u.from=e,u.to=n,u.label={text:r},i==null)u.techn={text:""};else if(typeof i=="object"){let[f,d]=Object.entries(i)[0];u[f]={text:d}}else u.techn={text:i};if(a==null)u.descr={text:""};else if(typeof a=="object"){let[f,d]=Object.entries(a)[0];u[f]={text:d}}else u.descr={text:a};if(typeof o=="object"){let[f,d]=Object.entries(o)[0];u[f]=d}else u.sprite=o;if(typeof s=="object"){let[f,d]=Object.entries(s)[0];u[f]=d}else u.tags=s;if(typeof l=="object"){let[f,d]=Object.entries(l)[0];u[f]=d}else u.link=l;u.wrap=ro()},oZ=function(t,e,n,r,i,a,o){if(e===null||n===null)return;let s={};const l=ci.find(u=>u.alias===e);if(l&&e===l.alias?s=l:(s.alias=e,ci.push(s)),n==null?s.label={text:""}:s.label={text:n},r==null)s.descr={text:""};else if(typeof r=="object"){let[u,h]=Object.entries(r)[0];s[u]={text:h}}else s.descr={text:r};if(typeof i=="object"){let[u,h]=Object.entries(i)[0];s[u]=h}else s.sprite=i;if(typeof a=="object"){let[u,h]=Object.entries(a)[0];s[u]=h}else s.tags=a;if(typeof o=="object"){let[u,h]=Object.entries(o)[0];s[u]=h}else s.link=o;s.typeC4Shape={text:t},s.parentBoundary=ir,s.wrap=ro()},sZ=function(t,e,n,r,i,a,o,s){if(e===null||n===null)return;let l={};const u=ci.find(h=>h.alias===e);if(u&&e===u.alias?l=u:(l.alias=e,ci.push(l)),n==null?l.label={text:""}:l.label={text:n},r==null)l.techn={text:""};else if(typeof r=="object"){let[h,f]=Object.entries(r)[0];l[h]={text:f}}else l.techn={text:r};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof a=="object"){let[h,f]=Object.entries(a)[0];l[h]=f}else l.sprite=a;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.tags=o;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.link=s;l.wrap=ro(),l.typeC4Shape={text:t},l.parentBoundary=ir},cZ=function(t,e,n,r,i,a,o,s){if(e===null||n===null)return;let l={};const u=ci.find(h=>h.alias===e);if(u&&e===u.alias?l=u:(l.alias=e,ci.push(l)),n==null?l.label={text:""}:l.label={text:n},r==null)l.techn={text:""};else if(typeof r=="object"){let[h,f]=Object.entries(r)[0];l[h]={text:f}}else l.techn={text:r};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof a=="object"){let[h,f]=Object.entries(a)[0];l[h]=f}else l.sprite=a;if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.tags=o;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.link=s;l.wrap=ro(),l.typeC4Shape={text:t},l.parentBoundary=ir},lZ=function(t,e,n,r,i){if(t===null||e===null)return;let a={};const o=Ii.find(s=>s.alias===t);if(o&&t===o.alias?a=o:(a.alias=t,Ii.push(a)),e==null?a.label={text:""}:a.label={text:e},n==null)a.type={text:"system"};else if(typeof n=="object"){let[s,l]=Object.entries(n)[0];a[s]={text:l}}else a.type={text:n};if(typeof r=="object"){let[s,l]=Object.entries(r)[0];a[s]=l}else a.tags=r;if(typeof i=="object"){let[s,l]=Object.entries(i)[0];a[s]=l}else a.link=i;a.parentBoundary=ir,a.wrap=ro(),ri=ir,ir=t,za.push(ri)},uZ=function(t,e,n,r,i){if(t===null||e===null)return;let a={};const o=Ii.find(s=>s.alias===t);if(o&&t===o.alias?a=o:(a.alias=t,Ii.push(a)),e==null?a.label={text:""}:a.label={text:e},n==null)a.type={text:"container"};else if(typeof n=="object"){let[s,l]=Object.entries(n)[0];a[s]={text:l}}else a.type={text:n};if(typeof r=="object"){let[s,l]=Object.entries(r)[0];a[s]=l}else a.tags=r;if(typeof i=="object"){let[s,l]=Object.entries(i)[0];a[s]=l}else a.link=i;a.parentBoundary=ir,a.wrap=ro(),ri=ir,ir=t,za.push(ri)},hZ=function(t,e,n,r,i,a,o,s){if(e===null||n===null)return;let l={};const u=Ii.find(h=>h.alias===e);if(u&&e===u.alias?l=u:(l.alias=e,Ii.push(l)),n==null?l.label={text:""}:l.label={text:n},r==null)l.type={text:"node"};else if(typeof r=="object"){let[h,f]=Object.entries(r)[0];l[h]={text:f}}else l.type={text:r};if(i==null)l.descr={text:""};else if(typeof i=="object"){let[h,f]=Object.entries(i)[0];l[h]={text:f}}else l.descr={text:i};if(typeof o=="object"){let[h,f]=Object.entries(o)[0];l[h]=f}else l.tags=o;if(typeof s=="object"){let[h,f]=Object.entries(s)[0];l[h]=f}else l.link=s;l.nodeType=t,l.parentBoundary=ir,l.wrap=ro(),ri=ir,ir=e,za.push(ri)},dZ=function(){ir=ri,za.pop(),ri=za.pop(),za.push(ri)},fZ=function(t,e,n,r,i,a,o,s,l,u,h){let f=ci.find(d=>d.alias===e);if(!(f===void 0&&(f=Ii.find(d=>d.alias===e),f===void 0))){if(n!=null)if(typeof n=="object"){let[d,p]=Object.entries(n)[0];f[d]=p}else f.bgColor=n;if(r!=null)if(typeof r=="object"){let[d,p]=Object.entries(r)[0];f[d]=p}else f.fontColor=r;if(i!=null)if(typeof i=="object"){let[d,p]=Object.entries(i)[0];f[d]=p}else f.borderColor=i;if(a!=null)if(typeof a=="object"){let[d,p]=Object.entries(a)[0];f[d]=p}else f.shadowing=a;if(o!=null)if(typeof o=="object"){let[d,p]=Object.entries(o)[0];f[d]=p}else f.shape=o;if(s!=null)if(typeof s=="object"){let[d,p]=Object.entries(s)[0];f[d]=p}else f.sprite=s;if(l!=null)if(typeof l=="object"){let[d,p]=Object.entries(l)[0];f[d]=p}else f.techn=l;if(u!=null)if(typeof u=="object"){let[d,p]=Object.entries(u)[0];f[d]=p}else f.legendText=u;if(h!=null)if(typeof h=="object"){let[d,p]=Object.entries(h)[0];f[d]=p}else f.legendSprite=h}},pZ=function(t,e,n,r,i,a,o){const s=jl.find(l=>l.from===e&&l.to===n);if(s!==void 0){if(r!=null)if(typeof r=="object"){let[l,u]=Object.entries(r)[0];s[l]=u}else s.textColor=r;if(i!=null)if(typeof i=="object"){let[l,u]=Object.entries(i)[0];s[l]=u}else s.lineColor=i;if(a!=null)if(typeof a=="object"){let[l,u]=Object.entries(a)[0];s[l]=parseInt(u)}else s.offsetX=parseInt(a);if(o!=null)if(typeof o=="object"){let[l,u]=Object.entries(o)[0];s[l]=parseInt(u)}else s.offsetY=parseInt(o)}},gZ=function(t,e,n){let r=O1,i=R1;if(typeof e=="object"){const a=Object.values(e)[0];r=parseInt(a)}else r=parseInt(e);if(typeof n=="object"){const a=Object.values(n)[0];i=parseInt(a)}else i=parseInt(n);r>=1&&(O1=r),i>=1&&(R1=i)},yZ=function(){return O1},mZ=function(){return R1},bZ=function(){return ir},_Z=function(){return ri},wA=function(t){return t==null?ci:ci.filter(e=>e.parentBoundary===t)},vZ=function(t){return ci.find(e=>e.alias===t)},xZ=function(t){return Object.keys(wA(t))},kZ=function(t){return t==null?Ii:Ii.filter(e=>e.parentBoundary===t)},wZ=function(){return jl},TZ=function(){return bb},EZ=function(t){_b=t},ro=function(){return _b},CZ=function(){ci=[],Ii=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],ri="",ir="global",za=[""],jl=[],za=[""],bb="",_b=!1,O1=4,R1=2},SZ={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},AZ={FILLED:0,OPEN:1},MZ={LEFTOF:0,RIGHTOF:1,OVER:2},LZ=function(t){bb=si(t,at())},TA={addPersonOrSystem:oZ,addPersonOrSystemBoundary:lZ,addContainer:sZ,addContainerBoundary:uZ,addComponent:cZ,addDeploymentNode:hZ,popBoundaryParseStack:dZ,addRel:aZ,updateElStyle:fZ,updateRelStyle:pZ,updateLayoutConfig:gZ,autoWrap:ro,setWrap:EZ,getC4ShapeArray:wA,getC4Shape:vZ,getC4ShapeKeys:xZ,getBoundarys:kZ,getCurrentBoundaryParse:bZ,getParentBoundaryParse:_Z,getRels:wZ,getTitle:TZ,getC4Type:nZ,getC4ShapeInRow:yZ,getC4BoundaryInRow:mZ,setAccTitle:zr,getAccTitle:gi,getAccDescription:mi,setAccDescription:yi,parseDirective:iZ,getConfig:()=>at().c4,clear:CZ,LINETYPE:SZ,ARROWTYPE:AZ,PLACEMENT:MZ,setTitle:LZ,setC4Type:rZ},vb=function(t,e){const n=t.append("rect");if(n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),e.attrs!=="undefined"&&e.attrs!==null)for(let r in e.attrs)n.attr(r,e.attrs[r]);return e.class!=="undefined"&&n.attr("class",e.class),n},EA=function(t,e,n,r,i,a){const o=t.append("image");o.attr("width",e),o.attr("height",n),o.attr("x",r),o.attr("y",i);let s=a.startsWith("data:image/png;base64")?a:$i(a);o.attr("xlink:href",s)},BZ=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var a=$i(r);i.attr("xlink:href","#"+a)},CA=function(t,e){let n=0,r=0;const i=e.text.split(pe.lineBreakRegex);let a=[],o=0,s=()=>e.y;if(typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0)switch(e.valign){case"top":case"start":s=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":s=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":s=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin);break}if(typeof e.anchor<"u"&&typeof e.textMargin<"u"&&typeof e.width<"u")switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="text-after-edge",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="text-before-edge",e.alignmentBaseline="middle";break}for(let l=0;l<i.length;l++){let u=i[l];typeof e.textMargin<"u"&&e.textMargin===0&&typeof e.fontSize<"u"&&(o=l*e.fontSize);const h=t.append("text");if(h.attr("x",e.x),h.attr("y",s()),typeof e.anchor<"u"&&h.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),typeof e.fontFamily<"u"&&h.style("font-family",e.fontFamily),typeof e.fontSize<"u"&&h.style("font-size",e.fontSize),typeof e.fontWeight<"u"&&h.style("font-weight",e.fontWeight),typeof e.fill<"u"&&h.attr("fill",e.fill),typeof e.class<"u"&&h.attr("class",e.class),typeof e.dy<"u"?h.attr("dy",e.dy):o!==0&&h.attr("dy",o),e.tspan){const f=h.append("tspan");f.attr("x",e.x),typeof e.fill<"u"&&f.attr("fill",e.fill),f.text(u)}else h.text(u);typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0&&(r+=(h._groups||h)[0][0].getBBox().height,n=r),a.push(h)}return a},DZ=function(t,e){function n(i,a,o,s,l){return i+","+a+" "+(i+o)+","+a+" "+(i+o)+","+(a+s-l)+" "+(i+o-l*1.2)+","+(a+s)+" "+i+","+(a+s)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,CA(t,e),r},NZ=(t,e,n)=>{const r=t.append("g");let i=0;for(let a of e){let o=a.textColor?a.textColor:"#444444",s=a.lineColor?a.lineColor:"#444444",l=a.offsetX?parseInt(a.offsetX):0,u=a.offsetY?parseInt(a.offsetY):0,h="";if(i===0){let d=r.append("line");d.attr("x1",a.startPoint.x),d.attr("y1",a.startPoint.y),d.attr("x2",a.endPoint.x),d.attr("y2",a.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",s),d.style("fill","none"),a.type!=="rel_b"&&d.attr("marker-end","url("+h+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&d.attr("marker-start","url("+h+"#arrowend)"),i=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",s).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",a.startPoint.x).replaceAll("starty",a.startPoint.y).replaceAll("controlx",a.startPoint.x+(a.endPoint.x-a.startPoint.x)/2-(a.endPoint.x-a.startPoint.x)/4).replaceAll("controly",a.startPoint.y+(a.endPoint.y-a.startPoint.y)/2).replaceAll("stopx",a.endPoint.x).replaceAll("stopy",a.endPoint.y)),a.type!=="rel_b"&&d.attr("marker-end","url("+h+"#arrowhead)"),(a.type==="birel"||a.type==="rel_b")&&d.attr("marker-start","url("+h+"#arrowend)")}let f=n.messageFont();ua(n)(a.label.text,r,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+l,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+u,a.label.width,a.label.height,{fill:o},f),a.techn&&a.techn.text!==""&&(f=n.messageFont(),ua(n)("["+a.techn.text+"]",r,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+l,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+n.messageFontSize+5+u,Math.max(a.label.width,a.techn.width),a.techn.height,{fill:o,"font-style":"italic"},f))}},OZ=function(t,e,n){const r=t.append("g");let i=e.bgColor?e.bgColor:"none",a=e.borderColor?e.borderColor:"#444444",o=e.fontColor?e.fontColor:"black",s={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(s={"stroke-width":1});let l={x:e.x,y:e.y,fill:i,stroke:a,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:s};vb(r,l);let u=n.boundaryFont();u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=o,ua(n)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},u),e.type&&e.type.text!==""&&(u=n.boundaryFont(),u.fontColor=o,ua(n)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},u)),e.descr&&e.descr.text!==""&&(u=n.boundaryFont(),u.fontSize=u.fontSize-2,u.fontColor=o,ua(n)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},u))},RZ=function(t,e,n){let r=e.bgColor?e.bgColor:n[e.typeC4Shape.text+"_bg_color"],i=e.borderColor?e.borderColor:n[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const s=t.append("g");s.attr("class","person-man");const l=SA();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=e.x,l.y=e.y,l.fill=r,l.width=e.width,l.height=e.height,l.style="stroke:"+i+";stroke-width:0.5;",l.rx=2.5,l.ry=2.5,vb(s,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":s.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":s.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=WZ(n,e.typeC4Shape.text);switch(s.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":EA(s,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let h=n[e.typeC4Shape.text+"Font"]();return h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,ua(n)(e.label.text,s,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},h),h=n[e.typeC4Shape.text+"Font"](),h.fontColor=a,e.thchn&&e.thchn.text!==""?ua(n)(e.thchn.text,s,e.x,e.y+e.thchn.Y,e.width,e.height,{fill:a,"font-style":"italic"},h):e.type&&e.type.text!==""&&ua(n)(e.type.text,s,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},h),e.descr&&e.descr.text!==""&&(h=n.personFont(),h.fontColor=a,ua(n)(e.descr.text,s,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},h)),e.height},IZ=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},FZ=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},$Z=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},PZ=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},YZ=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},zZ=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},jZ=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},UZ=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},HZ=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},SA=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},WZ=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),ua=function(){function t(i,a,o,s,l,u,h){const f=a.append("text").attr("x",o+l/2).attr("y",s+u/2+5).style("text-anchor","middle").text(i);r(f,h)}function e(i,a,o,s,l,u,h,f){const{fontSize:d,fontFamily:p,fontWeight:m}=f,_=i.split(pe.lineBreakRegex);for(let y=0;y<_.length;y++){const b=y*d-d*(_.length-1)/2,k=a.append("text").attr("x",o+l/2).attr("y",s).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",m).style("font-family",p);k.append("tspan").attr("dy",b).text(_[y]).attr("alignment-baseline","mathematical"),r(k,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)a.hasOwnProperty(o)&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),ki={drawRect:vb,drawText:CA,drawLabel:DZ,drawBoundary:OZ,drawC4Shape:RZ,drawRels:NZ,drawImage:EA,drawEmbeddedImage:BZ,insertArrowHead:PZ,insertArrowEnd:YZ,insertArrowFilledHead:zZ,insertDynamicNumber:jZ,insertArrowCrossHead:UZ,insertDatabaseIcon:IZ,insertComputerIcon:FZ,insertClockIcon:$Z,getTextObj:HZ,getNoteRect:SA,sanitizeUrl:$i};let I1=0,F1=0,AA=4,d3=2;zl.yy=TA;let Wt={};class MA{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,f3(e.db.getConfig())}setData(e,n,r,i){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=n,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=i}updateVal(e,n,r,i){typeof e[n]>"u"?e[n]=r:e[n]=i(r,e[n])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let n=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=n+e.width,i=this.nextData.starty+e.margin*2,a=i+e.height;(n>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>AA)&&(n=this.nextData.startx+e.margin+Wt.nextLinePaddingX,i=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=n+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=a=i+e.height,this.nextData.cnt=1),e.x=n,e.y=i,this.updateVal(this.data,"startx",n,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",a,Math.max),this.updateVal(this.nextData,"startx",n,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",a,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},f3(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const f3=function(t){_n(Wt,t),t.fontFamily&&(Wt.personFontFamily=Wt.systemFontFamily=Wt.messageFontFamily=t.fontFamily),t.fontSize&&(Wt.personFontSize=Wt.systemFontSize=Wt.messageFontSize=t.fontSize),t.fontWeight&&(Wt.personFontWeight=Wt.systemFontWeight=Wt.messageFontWeight=t.fontWeight)},Nc=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Bh=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),GZ=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function Jr(t,e,n,r,i){if(!e[t].width)if(n)e[t].text=US(e[t].text,i,r),e[t].textLines=e[t].text.split(pe.lineBreakRegex).length,e[t].width=i,e[t].height=o3(e[t].text,r);else{let a=e[t].text.split(pe.lineBreakRegex);e[t].textLines=a.length;let o=0;e[t].height=0,e[t].width=0;for(let s=0;s<a.length;s++)e[t].width=Math.max(Bi(a[s],r),e[t].width),o=o3(a[s],r),e[t].height=e[t].height+o}}const LA=function(t,e,n){e.x=n.data.startx,e.y=n.data.starty,e.width=n.data.stopx-n.data.startx,e.height=n.data.stopy-n.data.starty,e.label.y=Wt.c4ShapeMargin-35;let r=e.wrap&&Wt.wrap,i=Bh(Wt);i.fontSize=i.fontSize+2,i.fontWeight="bold";let a=Bi(e.label.text,i);Jr("label",e,r,i,a),ki.drawBoundary(t,e,Wt)},BA=function(t,e,n,r){let i=0;for(let a=0;a<r.length;a++){i=0;const o=n[r[a]];let s=Nc(Wt,o.typeC4Shape.text);switch(s.fontSize=s.fontSize-2,o.typeC4Shape.width=Bi("<<"+o.typeC4Shape.text+">>",s),o.typeC4Shape.height=s.fontSize+2,o.typeC4Shape.Y=Wt.c4ShapePadding,i=o.typeC4Shape.Y+o.typeC4Shape.height-4,o.image={width:0,height:0,Y:0},o.typeC4Shape.text){case"person":case"external_person":o.image.width=48,o.image.height=48,o.image.Y=i,i=o.image.Y+o.image.height;break}o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=i,i=o.image.Y+o.image.height);let l=o.wrap&&Wt.wrap,u=Wt.width-Wt.c4ShapePadding*2,h=Nc(Wt,o.typeC4Shape.text);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",Jr("label",o,l,h,u),o.label.Y=i+8,i=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let p=Nc(Wt,o.typeC4Shape.text);Jr("type",o,l,p,u),o.type.Y=i+5,i=o.type.Y+o.type.height}else if(o.techn&&o.techn.text!==""){o.techn.text="["+o.techn.text+"]";let p=Nc(Wt,o.techn.text);Jr("techn",o,l,p,u),o.techn.Y=i+5,i=o.techn.Y+o.techn.height}let f=i,d=o.label.width;if(o.descr&&o.descr.text!==""){let p=Nc(Wt,o.typeC4Shape.text);Jr("descr",o,l,p,u),o.descr.Y=i+20,i=o.descr.Y+o.descr.height,d=Math.max(o.label.width,o.descr.width),f=i-o.descr.textLines*5}d=d+Wt.c4ShapePadding,o.width=Math.max(o.width||Wt.width,d,Wt.width),o.height=Math.max(o.height||Wt.height,f,Wt.height),o.margin=o.margin||Wt.c4ShapeMargin,t.insert(o),ki.drawC4Shape(e,o,Wt)}t.bumpLastMargin(Wt.c4ShapeMargin)};class Nr{constructor(e,n){this.x=e,this.y=n}}let cv=function(t,e){let n=t.x,r=t.y,i=e.x,a=e.y,o=n+t.width/2,s=r+t.height/2,l=Math.abs(n-i),u=Math.abs(r-a),h=u/l,f=t.height/t.width,d=null;return r==a&&n<i?d=new Nr(n+t.width,s):r==a&&n>i?d=new Nr(n,s):n==i&&r<a?d=new Nr(o,r+t.height):n==i&&r>a&&(d=new Nr(o,r)),n>i&&r<a?f>=h?d=new Nr(n,s+h*t.width/2):d=new Nr(o-l/u*t.height/2,r+t.height):n<i&&r<a?f>=h?d=new Nr(n+t.width,s+h*t.width/2):d=new Nr(o+l/u*t.height/2,r+t.height):n<i&&r>a?f>=h?d=new Nr(n+t.width,s-h*t.width/2):d=new Nr(o+t.height/2*l/u,r):n>i&&r>a&&(f>=h?d=new Nr(n,s-t.width/2*h):d=new Nr(o-t.height/2*l/u,r)),d},VZ=function(t,e){let n={x:0,y:0};n.x=e.x+e.width/2,n.y=e.y+e.height/2;let r=cv(t,n);n.x=t.x+t.width/2,n.y=t.y+t.height/2;let i=cv(e,n);return{startPoint:r,endPoint:i}};const qZ=function(t,e,n,r){let i=0;for(let a of e){i=i+1;let o=a.wrap&&Wt.wrap,s=GZ(Wt);r.db.getC4Type()==="C4Dynamic"&&(a.label.text=i+": "+a.label.text);let l=Bi(a.label.text,s);Jr("label",a,o,s,l),a.techn&&a.techn.text!==""&&(l=Bi(a.techn.text,s),Jr("techn",a,o,s,l)),a.descr&&a.descr.text!==""&&(l=Bi(a.descr.text,s),Jr("descr",a,o,s,l));let u=n(a.from),h=n(a.to),f=VZ(u,h);a.startPoint=f.startPoint,a.endPoint=f.endPoint}ki.drawRels(t,e,Wt)};function DA(t,e,n,r,i){let a=new MA(i);a.data.widthLimit=n.data.widthLimit/Math.min(d3,r.length);for(let o=0;o<r.length;o++){let s=r[o],l=0;s.image={width:0,height:0,Y:0},s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=l,l=s.image.Y+s.image.height);let u=s.wrap&&Wt.wrap,h=Bh(Wt);if(h.fontSize=h.fontSize+2,h.fontWeight="bold",Jr("label",s,u,h,a.data.widthLimit),s.label.Y=l+8,l=s.label.Y+s.label.height,s.type&&s.type.text!==""){s.type.text="["+s.type.text+"]";let m=Bh(Wt);Jr("type",s,u,m,a.data.widthLimit),s.type.Y=l+5,l=s.type.Y+s.type.height}if(s.descr&&s.descr.text!==""){let m=Bh(Wt);m.fontSize=m.fontSize-2,Jr("descr",s,u,m,a.data.widthLimit),s.descr.Y=l+20,l=s.descr.Y+s.descr.height}if(o==0||o%d3===0){let m=n.data.startx+Wt.diagramMarginX,_=n.data.stopy+Wt.diagramMarginY+l;a.setData(m,m,_,_)}else{let m=a.data.stopx!==a.data.startx?a.data.stopx+Wt.diagramMarginX:a.data.startx,_=a.data.starty;a.setData(m,m,_,_)}a.name=s.alias;let f=i.db.getC4ShapeArray(s.alias),d=i.db.getC4ShapeKeys(s.alias);d.length>0&&BA(a,t,f,d),e=s.alias;let p=i.db.getBoundarys(e);p.length>0&&DA(t,e,a,p,i),s.alias!=="global"&&LA(t,s,a),n.data.stopy=Math.max(a.data.stopy+Wt.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(a.data.stopx+Wt.c4ShapeMargin,n.data.stopx),I1=Math.max(I1,n.data.stopx),F1=Math.max(F1,n.data.stopy)}}const XZ=function(t,e,n,r){Wt=at().c4;const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body");let s=r.db;r.db.setWrap(Wt.wrap),AA=s.getC4ShapeInRow(),d3=s.getC4BoundaryInRow(),W.debug(`C:${JSON.stringify(Wt,null,2)}`);const l=i==="sandbox"?o.select(`[id="${e}"]`):Lt(`[id="${e}"]`);ki.insertComputerIcon(l),ki.insertDatabaseIcon(l),ki.insertClockIcon(l);let u=new MA(r);u.setData(Wt.diagramMarginX,Wt.diagramMarginX,Wt.diagramMarginY,Wt.diagramMarginY),u.data.widthLimit=screen.availWidth,I1=Wt.diagramMarginX,F1=Wt.diagramMarginY;const h=r.db.getTitle();let f=r.db.getBoundarys("");DA(l,"",u,f,r),ki.insertArrowHead(l),ki.insertArrowEnd(l),ki.insertArrowCrossHead(l),ki.insertArrowFilledHead(l),qZ(l,r.db.getRels(),r.db.getC4Shape,r),u.data.stopx=I1,u.data.stopy=F1;const d=u.data;let p=d.stopy-d.starty+2*Wt.diagramMarginY;const m=d.stopx-d.startx+2*Wt.diagramMarginX;h&&l.append("text").text(h).attr("x",(d.stopx-d.startx)/2-4*Wt.diagramMarginX).attr("y",d.starty+Wt.diagramMarginY),fi(l,p,m,Wt.useMaxWidth);const _=h?60:0;l.attr("viewBox",d.startx-Wt.diagramMarginX+" -"+(Wt.diagramMarginY+_)+" "+m+" "+(p+_)),xr(zl.yy,l,e),W.debug("models:",d)},lv={drawPersonOrSystemArray:BA,drawBoundary:LA,setConf:f3,draw:XZ};var $1=function(){var t=function(G,j,P,X){for(P=P||{},X=G.length;X--;P[G[X]]=j);return P},e=[1,3],n=[1,7],r=[1,8],i=[1,9],a=[1,10],o=[1,13],s=[1,12],l=[1,16,25],u=[1,20],h=[1,31],f=[1,32],d=[1,33],p=[1,35],m=[1,38],_=[1,36],y=[1,37],b=[1,39],k=[1,40],T=[1,41],x=[1,42],A=[1,45],C=[1,46],L=[1,47],S=[1,48],N=[16,25],v=[1,62],M=[1,63],w=[1,64],R=[1,65],B=[1,66],$=[1,67],F=[1,68],Q=[16,25,32,44,45,53,56,57,58,59,60,61,62,67,69],nt=[16,25,30,32,44,45,49,53,56,57,58,59,60,61,62,67,69,84,85,86,87],z=[5,8,9,10,11,16,19,23,25],Y=[53,84,85,86,87],rt=[53,61,62,84,85,86,87],lt=[53,56,57,58,59,60,84,85,86,87],J=[16,25,32],Z=[1,100],q={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,acc_title:38,acc_title_value:39,acc_descr:40,acc_descr_value:41,acc_descr_multiline_value:42,CLASS:43,STYLE_SEPARATOR:44,STRUCT_START:45,members:46,STRUCT_STOP:47,ANNOTATION_START:48,ANNOTATION_END:49,MEMBER:50,SEPARATOR:51,relation:52,STR:53,relationType:54,lineType:55,AGGREGATION:56,EXTENSION:57,COMPOSITION:58,DEPENDENCY:59,LOLLIPOP:60,LINE:61,DOTTED_LINE:62,CALLBACK:63,LINK:64,LINK_TARGET:65,CLICK:66,CALLBACK_NAME:67,CALLBACK_ARGS:68,HREF:69,CSSCLASS:70,commentToken:71,textToken:72,graphCodeTokens:73,textNoTagsToken:74,TAGSTART:75,TAGEND:76,"==":77,"--":78,PCT:79,DEFAULT:80,SPACE:81,MINUS:82,keywords:83,UNICODE_TEXT:84,NUM:85,ALPHA:86,BQUOTE_STR:87,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",38:"acc_title",39:"acc_title_value",40:"acc_descr",41:"acc_descr_value",42:"acc_descr_multiline_value",43:"CLASS",44:"STYLE_SEPARATOR",45:"STRUCT_START",47:"STRUCT_STOP",48:"ANNOTATION_START",49:"ANNOTATION_END",50:"MEMBER",51:"SEPARATOR",53:"STR",56:"AGGREGATION",57:"EXTENSION",58:"COMPOSITION",59:"DEPENDENCY",60:"LOLLIPOP",61:"LINE",62:"DOTTED_LINE",63:"CALLBACK",64:"LINK",65:"LINK_TARGET",66:"CLICK",67:"CALLBACK_NAME",68:"CALLBACK_ARGS",69:"HREF",70:"CSSCLASS",73:"graphCodeTokens",75:"TAGSTART",76:"TAGEND",77:"==",78:"--",79:"PCT",80:"DEFAULT",81:"SPACE",82:"MINUS",83:"keywords",84:"UNICODE_TEXT",85:"NUM",86:"ALPHA",87:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[46,1],[46,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[52,3],[52,2],[52,2],[52,1],[54,1],[54,1],[54,1],[54,1],[54,1],[55,1],[55,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[71,1],[71,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[74,1],[74,1],[74,1],[74,1],[28,1],[28,1],[28,1],[29,1]],performAction:function(G,j,P,X,O,V,U){var H=V.length-1;switch(O){case 5:X.setDirection("TB");break;case 6:X.setDirection("BT");break;case 7:X.setDirection("RL");break;case 8:X.setDirection("LR");break;case 12:X.parseDirective("%%{","open_directive");break;case 13:X.parseDirective(V[H],"type_directive");break;case 14:V[H]=V[H].trim().replace(/'/g,'"'),X.parseDirective(V[H],"arg_directive");break;case 15:X.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=V[H];break;case 22:this.$=V[H-1]+V[H];break;case 23:case 24:this.$=V[H-1]+"~"+V[H];break;case 25:X.addRelation(V[H]);break;case 26:V[H-1].title=X.cleanupLabel(V[H]),X.addRelation(V[H-1]);break;case 34:this.$=V[H].trim(),X.setAccTitle(this.$);break;case 35:case 36:this.$=V[H].trim(),X.setAccDescription(this.$);break;case 37:X.addClass(V[H]);break;case 38:X.addClass(V[H-2]),X.setCssClass(V[H-2],V[H]);break;case 39:X.addClass(V[H-3]),X.addMembers(V[H-3],V[H-1]);break;case 40:X.addClass(V[H-5]),X.setCssClass(V[H-5],V[H-3]),X.addMembers(V[H-5],V[H-1]);break;case 41:X.addAnnotation(V[H],V[H-2]);break;case 42:this.$=[V[H]];break;case 43:V[H].push(V[H-1]),this.$=V[H];break;case 44:break;case 45:X.addMember(V[H-1],X.cleanupLabel(V[H]));break;case 46:break;case 47:break;case 48:this.$={id1:V[H-2],id2:V[H],relation:V[H-1],relationTitle1:"none",relationTitle2:"none"};break;case 49:this.$={id1:V[H-3],id2:V[H],relation:V[H-1],relationTitle1:V[H-2],relationTitle2:"none"};break;case 50:this.$={id1:V[H-3],id2:V[H],relation:V[H-2],relationTitle1:"none",relationTitle2:V[H-1]};break;case 51:this.$={id1:V[H-4],id2:V[H],relation:V[H-2],relationTitle1:V[H-3],relationTitle2:V[H-1]};break;case 52:this.$={type1:V[H-2],type2:V[H],lineType:V[H-1]};break;case 53:this.$={type1:"none",type2:V[H],lineType:V[H-1]};break;case 54:this.$={type1:V[H-1],type2:"none",lineType:V[H]};break;case 55:this.$={type1:"none",type2:"none",lineType:V[H]};break;case 56:this.$=X.relationType.AGGREGATION;break;case 57:this.$=X.relationType.EXTENSION;break;case 58:this.$=X.relationType.COMPOSITION;break;case 59:this.$=X.relationType.DEPENDENCY;break;case 60:this.$=X.relationType.LOLLIPOP;break;case 61:this.$=X.lineType.LINE;break;case 62:this.$=X.lineType.DOTTED_LINE;break;case 63:case 69:this.$=V[H-2],X.setClickEvent(V[H-1],V[H]);break;case 64:case 70:this.$=V[H-3],X.setClickEvent(V[H-2],V[H-1]),X.setTooltip(V[H-2],V[H]);break;case 65:case 73:this.$=V[H-2],X.setLink(V[H-1],V[H]);break;case 66:this.$=V[H-3],X.setLink(V[H-2],V[H-1],V[H]);break;case 67:case 75:this.$=V[H-3],X.setLink(V[H-2],V[H-1]),X.setTooltip(V[H-2],V[H]);break;case 68:case 76:this.$=V[H-4],X.setLink(V[H-3],V[H-2],V[H]),X.setTooltip(V[H-3],V[H-1]);break;case 71:this.$=V[H-3],X.setClickEvent(V[H-2],V[H-1],V[H]);break;case 72:this.$=V[H-4],X.setClickEvent(V[H-3],V[H-2],V[H-1]),X.setTooltip(V[H-3],V[H]);break;case 74:this.$=V[H-3],X.setLink(V[H-2],V[H-1],V[H]);break;case 77:X.setCssClass(V[H-1],V[H]);break}},table:[{3:1,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:a,12:6,13:11,19:o,23:s},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:a,12:6,13:11,19:o,23:s},{1:[2,9]},t(l,[2,5]),t(l,[2,6]),t(l,[2,7]),t(l,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:u},t([17,22],[2,13]),{6:30,7:29,8:n,9:r,10:i,11:a,13:11,19:o,24:21,26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:h,40:f,42:d,43:p,48:m,50:_,51:y,63:b,64:k,66:T,70:x,84:A,85:C,86:L,87:S},{16:[1,49]},{18:50,21:[1,51]},{16:[2,15]},{25:[1,52]},{16:[1,53],25:[2,17]},t(N,[2,25],{32:[1,54]}),t(N,[2,27]),t(N,[2,28]),t(N,[2,29]),t(N,[2,30]),t(N,[2,31]),t(N,[2,32]),t(N,[2,33]),{39:[1,55]},{41:[1,56]},t(N,[2,36]),t(N,[2,44],{52:57,54:60,55:61,32:[1,59],53:[1,58],56:v,57:M,58:w,59:R,60:B,61:$,62:F}),{27:69,28:43,29:44,84:A,85:C,86:L,87:S},t(N,[2,46]),t(N,[2,47]),{28:70,84:A,85:C,86:L},{27:71,28:43,29:44,84:A,85:C,86:L,87:S},{27:72,28:43,29:44,84:A,85:C,86:L,87:S},{27:73,28:43,29:44,84:A,85:C,86:L,87:S},{53:[1,74]},t(Q,[2,20],{28:43,29:44,27:75,30:[1,76],84:A,85:C,86:L,87:S}),t(Q,[2,21],{30:[1,77]}),t(nt,[2,91]),t(nt,[2,92]),t(nt,[2,93]),t([16,25,30,32,44,45,53,56,57,58,59,60,61,62,67,69],[2,94]),t(z,[2,10]),{15:78,22:u},{22:[2,14]},{1:[2,16]},{6:30,7:29,8:n,9:r,10:i,11:a,13:11,19:o,24:79,25:[2,18],26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:h,40:f,42:d,43:p,48:m,50:_,51:y,63:b,64:k,66:T,70:x,84:A,85:C,86:L,87:S},t(N,[2,26]),t(N,[2,34]),t(N,[2,35]),{27:80,28:43,29:44,53:[1,81],84:A,85:C,86:L,87:S},{52:82,54:60,55:61,56:v,57:M,58:w,59:R,60:B,61:$,62:F},t(N,[2,45]),{55:83,61:$,62:F},t(Y,[2,55],{54:84,56:v,57:M,58:w,59:R,60:B}),t(rt,[2,56]),t(rt,[2,57]),t(rt,[2,58]),t(rt,[2,59]),t(rt,[2,60]),t(lt,[2,61]),t(lt,[2,62]),t(N,[2,37],{44:[1,85],45:[1,86]}),{49:[1,87]},{53:[1,88]},{53:[1,89]},{67:[1,90],69:[1,91]},{28:92,84:A,85:C,86:L},t(Q,[2,22]),t(Q,[2,23]),t(Q,[2,24]),{16:[1,93]},{25:[2,19]},t(J,[2,48]),{27:94,28:43,29:44,84:A,85:C,86:L,87:S},{27:95,28:43,29:44,53:[1,96],84:A,85:C,86:L,87:S},t(Y,[2,54],{54:97,56:v,57:M,58:w,59:R,60:B}),t(Y,[2,53]),{28:98,84:A,85:C,86:L},{46:99,50:Z},{27:101,28:43,29:44,84:A,85:C,86:L,87:S},t(N,[2,63],{53:[1,102]}),t(N,[2,65],{53:[1,104],65:[1,103]}),t(N,[2,69],{53:[1,105],68:[1,106]}),t(N,[2,73],{53:[1,108],65:[1,107]}),t(N,[2,77]),t(z,[2,11]),t(J,[2,50]),t(J,[2,49]),{27:109,28:43,29:44,84:A,85:C,86:L,87:S},t(Y,[2,52]),t(N,[2,38],{45:[1,110]}),{47:[1,111]},{46:112,47:[2,42],50:Z},t(N,[2,41]),t(N,[2,64]),t(N,[2,66]),t(N,[2,67],{65:[1,113]}),t(N,[2,70]),t(N,[2,71],{53:[1,114]}),t(N,[2,74]),t(N,[2,75],{65:[1,115]}),t(J,[2,51]),{46:116,50:Z},t(N,[2,39]),{47:[2,43]},t(N,[2,68]),t(N,[2,72]),t(N,[2,76]),{47:[1,117]},t(N,[2,40])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],51:[2,14],52:[2,16],79:[2,19],112:[2,43]},parseError:function(G,j){if(j.recoverable)this.trace(G);else{var P=new Error(G);throw P.hash=j,P}},parse:function(G){var j=this,P=[0],X=[],O=[null],V=[],U=this.table,H="",xt=0,ot=0,Nt=2,Mt=1,wt=V.slice.call(arguments,1),Et=Object.create(this.lexer),bt={yy:{}};for(var mt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,mt)&&(bt.yy[mt]=this.yy[mt]);Et.setInput(G,bt.yy),bt.yy.lexer=Et,bt.yy.parser=this,typeof Et.yylloc>"u"&&(Et.yylloc={});var Tt=Et.yylloc;V.push(Tt);var kt=Et.options&&Et.options.ranges;typeof bt.yy.parseError=="function"?this.parseError=bt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function st(){var Ct;return Ct=X.pop()||Et.lex()||Mt,typeof Ct!="number"&&(Ct instanceof Array&&(X=Ct,Ct=X.pop()),Ct=j.symbols_[Ct]||Ct),Ct}for(var Zt,$t,Jt,Ht,qt={},oe,Xt,It,Pt;;){if($t=P[P.length-1],this.defaultActions[$t]?Jt=this.defaultActions[$t]:((Zt===null||typeof Zt>"u")&&(Zt=st()),Jt=U[$t]&&U[$t][Zt]),typeof Jt>"u"||!Jt.length||!Jt[0]){var yt="";Pt=[];for(oe in U[$t])this.terminals_[oe]&&oe>Nt&&Pt.push("'"+this.terminals_[oe]+"'");Et.showPosition?yt="Parse error on line "+(xt+1)+`:
`+Et.showPosition()+`
Expecting `+Pt.join(", ")+", got '"+(this.terminals_[Zt]||Zt)+"'":yt="Parse error on line "+(xt+1)+": Unexpected "+(Zt==Mt?"end of input":"'"+(this.terminals_[Zt]||Zt)+"'"),this.parseError(yt,{text:Et.match,token:this.terminals_[Zt]||Zt,line:Et.yylineno,loc:Tt,expected:Pt})}if(Jt[0]instanceof Array&&Jt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$t+", token: "+Zt);switch(Jt[0]){case 1:P.push(Zt),O.push(Et.yytext),V.push(Et.yylloc),P.push(Jt[1]),Zt=null,ot=Et.yyleng,H=Et.yytext,xt=Et.yylineno,Tt=Et.yylloc;break;case 2:if(Xt=this.productions_[Jt[1]][1],qt.$=O[O.length-Xt],qt._$={first_line:V[V.length-(Xt||1)].first_line,last_line:V[V.length-1].last_line,first_column:V[V.length-(Xt||1)].first_column,last_column:V[V.length-1].last_column},kt&&(qt._$.range=[V[V.length-(Xt||1)].range[0],V[V.length-1].range[1]]),Ht=this.performAction.apply(qt,[H,ot,xt,bt.yy,Jt[1],O,V].concat(wt)),typeof Ht<"u")return Ht;Xt&&(P=P.slice(0,-1*Xt*2),O=O.slice(0,-1*Xt),V=V.slice(0,-1*Xt)),P.push(this.productions_[Jt[1]][0]),O.push(qt.$),V.push(qt._$),It=U[P[P.length-2]][P[P.length-1]],P.push(It);break;case 3:return!0}}return!0}},it=function(){var G={EOF:1,parseError:function(j,P){if(this.yy.parser)this.yy.parser.parseError(j,P);else throw new Error(j)},setInput:function(j,P){return this.yy=P||this.yy||{},this._input=j,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var j=this._input[0];this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j;var P=j.match(/(?:\r\n?|\n).*/g);return P?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),j},unput:function(j){var P=j.length,X=j.split(/(?:\r\n?|\n)/g);this._input=j+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-P),this.offset-=P;var O=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),X.length-1&&(this.yylineno-=X.length-1);var V=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:X?(X.length===O.length?this.yylloc.first_column:0)+O[O.length-X.length].length-X[0].length:this.yylloc.first_column-P},this.options.ranges&&(this.yylloc.range=[V[0],V[0]+this.yyleng-P]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(j){this.unput(this.match.slice(j))},pastInput:function(){var j=this.matched.substr(0,this.matched.length-this.match.length);return(j.length>20?"...":"")+j.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var j=this.match;return j.length<20&&(j+=this._input.substr(0,20-j.length)),(j.substr(0,20)+(j.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var j=this.pastInput(),P=new Array(j.length+1).join("-");return j+this.upcomingInput()+`
`+P+"^"},test_match:function(j,P){var X,O,V;if(this.options.backtrack_lexer&&(V={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(V.yylloc.range=this.yylloc.range.slice(0))),O=j[0].match(/(?:\r\n?|\n).*/g),O&&(this.yylineno+=O.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:O?O[O.length-1].length-O[O.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+j[0].length},this.yytext+=j[0],this.match+=j[0],this.matches=j,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(j[0].length),this.matched+=j[0],X=this.performAction.call(this,this.yy,this,P,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),X)return X;if(this._backtrack){for(var U in V)this[U]=V[U];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var j,P,X,O;this._more||(this.yytext="",this.match="");for(var V=this._currentRules(),U=0;U<V.length;U++)if(X=this._input.match(this.rules[V[U]]),X&&(!P||X[0].length>P[0].length)){if(P=X,O=U,this.options.backtrack_lexer){if(j=this.test_match(X,V[U]),j!==!1)return j;if(this._backtrack){P=!1;continue}else return!1}else if(!this.options.flex)break}return P?(j=this.test_match(P,V[O]),j!==!1?j:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var j=this.next();return j||this.lex()},begin:function(j){this.conditionStack.push(j)},popState:function(){var j=this.conditionStack.length-1;return j>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(j){return j=this.conditionStack.length-1-Math.abs(j||0),j>=0?this.conditionStack[j]:"INITIAL"},pushState:function(j){this.begin(j)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(j,P,X,O){switch(X){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:break;case 10:break;case 11:return this.begin("acc_title"),38;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),40;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:return 23;case 21:return 23;case 22:return this.begin("struct"),45;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),47;case 27:break;case 28:return"MEMBER";case 29:return 43;case 30:return 70;case 31:return 63;case 32:return 64;case 33:return 66;case 34:return 48;case 35:return 49;case 36:this.begin("generic");break;case 37:this.popState();break;case 38:return"GENERICTYPE";case 39:this.begin("string");break;case 40:this.popState();break;case 41:return"STR";case 42:this.begin("bqstring");break;case 43:this.popState();break;case 44:return"BQUOTE_STR";case 45:this.begin("href");break;case 46:this.popState();break;case 47:return 69;case 48:this.begin("callback_name");break;case 49:this.popState();break;case 50:this.popState(),this.begin("callback_args");break;case 51:return 67;case 52:this.popState();break;case 53:return 68;case 54:return 65;case 55:return 65;case 56:return 65;case 57:return 65;case 58:return 57;case 59:return 57;case 60:return 59;case 61:return 59;case 62:return 58;case 63:return 56;case 64:return 60;case 65:return 61;case 66:return 62;case 67:return 32;case 68:return 44;case 69:return 82;case 70:return"DOT";case 71:return"PLUS";case 72:return 79;case 73:return"EQUALS";case 74:return"EQUALS";case 75:return 86;case 76:return"PUNCTUATION";case 77:return 85;case 78:return 84;case 79:return 81;case 80:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[52,53],inclusive:!1},callback_name:{rules:[49,50,51],inclusive:!1},href:{rules:[46,47],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[37,38],inclusive:!1},bqstring:{rules:[43,44],inclusive:!1},string:{rules:[40,41],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,39,42,45,48,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],inclusive:!0}}};return G}();q.lexer=it;function ut(){this.yy={}}return ut.prototype=q,q.Parser=ut,new ut}();$1.parser=$1;const KZ=(t,e)=>{var n;return((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*classDiagram/)!==null},ZZ=(t,e)=>{var n;return t.match(/^\s*classDiagram/)!==null&&((n=e==null?void 0:e.class)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:t.match(/^\s*classDiagram-v2/)!==null},xb="classid-";let kb=[],hn={},uv=0,Ul=[];const hl=t=>pe.sanitizeText(t,at()),QZ=function(t,e,n){qe.parseDirective(this,t,e,n)},Hl=function(t){let e="",n=t;if(t.indexOf("~")>0){let r=t.split("~");n=r[0],e=pe.sanitizeText(r[1],at())}return{className:n,type:e}},p3=function(t){let e=Hl(t);typeof hn[e.className]<"u"||(hn[e.className]={id:e.className,type:e.type,cssClasses:[],methods:[],members:[],annotations:[],domId:xb+e.className+"-"+uv},uv++)},NA=function(t){const e=Object.keys(hn);for(let n=0;n<e.length;n++)if(hn[e[n]].id===t)return hn[e[n]].domId},JZ=function(){kb=[],hn={},Ul=[],Ul.push(RA),pi()},tQ=function(t){return hn[t]},eQ=function(){return hn},nQ=function(){return kb},rQ=function(t){W.debug("Adding relation: "+JSON.stringify(t)),p3(t.id1),p3(t.id2),t.id1=Hl(t.id1).className,t.id2=Hl(t.id2).className,t.relationTitle1=pe.sanitizeText(t.relationTitle1.trim(),at()),t.relationTitle2=pe.sanitizeText(t.relationTitle2.trim(),at()),kb.push(t)},iQ=function(t,e){const n=Hl(t).className;hn[n].annotations.push(e)},OA=function(t,e){const n=Hl(t).className,r=hn[n];if(typeof e=="string"){const i=e.trim();i.startsWith("<<")&&i.endsWith(">>")?r.annotations.push(hl(i.substring(2,i.length-2))):i.indexOf(")")>0?r.methods.push(hl(i)):i&&r.members.push(hl(i))}},aQ=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(n=>OA(t,n)))},oQ=function(t){return t.substring(0,1)===":"?pe.sanitizeText(t.substr(1).trim(),at()):hl(t.trim())},wb=function(t,e){t.split(",").forEach(function(n){let r=n;n[0].match(/\d/)&&(r=xb+r),typeof hn[r]<"u"&&hn[r].cssClasses.push(e)})},sQ=function(t,e){const n=at();t.split(",").forEach(function(r){typeof e<"u"&&(hn[r].tooltip=pe.sanitizeText(e,n))})},cQ=function(t){return hn[t].tooltip},lQ=function(t,e,n){const r=at();t.split(",").forEach(function(i){let a=i;i[0].match(/\d/)&&(a=xb+a),typeof hn[a]<"u"&&(hn[a].link=we.formatUrl(e,r),r.securityLevel==="sandbox"?hn[a].linkTarget="_top":typeof n=="string"?hn[a].linkTarget=hl(n):hn[a].linkTarget="_blank")}),wb(t,"clickable")},uQ=function(t,e,n){t.split(",").forEach(function(r){hQ(r,e,n),hn[r].haveCallback=!0}),wb(t,"clickable")},hQ=function(t,e,n){const r=at();let i=t,a=NA(i);if(r.securityLevel==="loose"&&!(typeof e>"u")&&typeof hn[i]<"u"){let o=[];if(typeof n=="string"){o=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let s=0;s<o.length;s++){let l=o[s].trim();l.charAt(0)==='"'&&l.charAt(l.length-1)==='"'&&(l=l.substr(1,l.length-2)),o[s]=l}}o.length===0&&o.push(a),Ul.push(function(){const s=document.querySelector(`[id="${a}"]`);s!==null&&s.addEventListener("click",function(){we.runFunc(e,...o)},!1)})}},dQ=function(t){Ul.forEach(function(e){e(t)})},fQ={LINE:0,DOTTED_LINE:1},pQ={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},RA=function(t){let e=Lt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=Lt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Lt(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=Lt(this);if(n.attr("title")===null)return;const r=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+r.left+(r.right-r.left)/2+"px").style("top",window.scrollY+r.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),Lt(this).classed("hover",!1)})};Ul.push(RA);let IA="TB";const gQ=()=>IA,yQ=t=>{IA=t},_s={parseDirective:QZ,setAccTitle:zr,getAccTitle:gi,getAccDescription:mi,setAccDescription:yi,getConfig:()=>at().class,addClass:p3,bindFunctions:dQ,clear:JZ,getClass:tQ,getClasses:eQ,addAnnotation:iQ,getRelations:nQ,addRelation:rQ,getDirection:gQ,setDirection:yQ,addMember:OA,addMembers:aQ,cleanupLabel:oQ,lineType:fQ,relationType:pQ,setClickEvent:uQ,setCssClass:wb,setLink:lQ,getTooltip:cQ,setTooltip:sQ,lookUpDomId:NA};var Mf,hv;function mQ(){if(hv)return Mf;hv=1;var t=V0;function e(){this.__data__=new t,this.size=0}return Mf=e,Mf}var Lf,dv;function bQ(){if(dv)return Lf;dv=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Lf=t,Lf}var Bf,fv;function _Q(){if(fv)return Bf;fv=1;function t(e){return this.__data__.get(e)}return Bf=t,Bf}var Df,pv;function vQ(){if(pv)return Df;pv=1;function t(e){return this.__data__.has(e)}return Df=t,Df}var Nf,gv;function xQ(){if(gv)return Nf;gv=1;var t=V0,e=ob,n=sb,r=200;function i(a,o){var s=this.__data__;if(s instanceof t){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(a,o),this.size=s.size,this}return Nf=i,Nf}var Of,yv;function id(){if(yv)return Of;yv=1;var t=V0,e=mQ(),n=bQ(),r=_Q(),i=vQ(),a=xQ();function o(s){var l=this.__data__=new t(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,Of=o,Of}var Rf,mv;function Tb(){if(mv)return Rf;mv=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Rf=t,Rf}var If,bv;function FA(){if(bv)return If;bv=1;var t=Xo,e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return If=e,If}var Ff,_v;function ad(){if(_v)return Ff;_v=1;var t=FA();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Ff=e,Ff}var $f,vv;function od(){if(vv)return $f;vv=1;var t=ad(),e=lc,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s){var l=a[o];(!(r.call(a,o)&&e(l,s))||s===void 0&&!(o in a))&&t(a,o,s)}return $f=i,$f}var Pf,xv;function uu(){if(xv)return Pf;xv=1;var t=od(),e=ad();function n(r,i,a,o){var s=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var h=i[l],f=o?o(a[h],r[h],h,a,r):void 0;f===void 0&&(f=r[h]),s?e(a,h,f):t(a,h,f)}return a}return Pf=n,Pf}var Yf,kv;function kQ(){if(kv)return Yf;kv=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Yf=t,Yf}var zf,wv;function zi(){if(wv)return zf;wv=1;function t(e){return e!=null&&typeof e=="object"}return zf=t,zf}var jf,Tv;function wQ(){if(Tv)return jf;Tv=1;var t=qo,e=zi(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return jf=r,jf}var Uf,Ev;function hu(){if(Ev)return Uf;Ev=1;var t=wQ(),e=zi(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Uf=a,Uf}var Hf,Cv;function vn(){if(Cv)return Hf;Cv=1;var t=Array.isArray;return Hf=t,Hf}var Wf={exports:{}},Gf,Sv;function TQ(){if(Sv)return Gf;Sv=1;function t(){return!1}return Gf=t,Gf}var Av;function fc(){return Av||(Av=1,function(t,e){var n=di,r=TQ(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u}(Wf,Wf.exports)),Wf.exports}var Vf,Mv;function sd(){if(Mv)return Vf;Mv=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i==null?t:i,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Vf=n,Vf}var qf,Lv;function Eb(){if(Lv)return qf;Lv=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return qf=e,qf}var Xf,Bv;function EQ(){if(Bv)return Xf;Bv=1;var t=qo,e=Eb(),n=zi(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",u="[object Map]",h="[object Number]",f="[object Object]",d="[object RegExp]",p="[object Set]",m="[object String]",_="[object WeakMap]",y="[object ArrayBuffer]",b="[object DataView]",k="[object Float32Array]",T="[object Float64Array]",x="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",S="[object Uint8ClampedArray]",N="[object Uint16Array]",v="[object Uint32Array]",M={};M[k]=M[T]=M[x]=M[A]=M[C]=M[L]=M[S]=M[N]=M[v]=!0,M[r]=M[i]=M[y]=M[a]=M[b]=M[o]=M[s]=M[l]=M[u]=M[h]=M[f]=M[d]=M[p]=M[m]=M[_]=!1;function w(R){return n(R)&&e(R.length)&&!!M[t(R)]}return Xf=w,Xf}var Kf,Dv;function cd(){if(Dv)return Kf;Dv=1;function t(e){return function(n){return e(n)}}return Kf=t,Kf}var Zf={exports:{}},Nv;function Cb(){return Nv||(Nv=1,function(t,e){var n=IS,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s}(Zf,Zf.exports)),Zf.exports}var Qf,Ov;function du(){if(Ov)return Qf;Ov=1;var t=EQ(),e=cd(),n=Cb(),r=n&&n.isTypedArray,i=r?e(r):t;return Qf=i,Qf}var Jf,Rv;function $A(){if(Rv)return Jf;Rv=1;var t=kQ(),e=hu(),n=vn(),r=fc(),i=sd(),a=du(),o=Object.prototype,s=o.hasOwnProperty;function l(u,h){var f=n(u),d=!f&&e(u),p=!f&&!d&&r(u),m=!f&&!d&&!p&&a(u),_=f||d||p||m,y=_?t(u.length,String):[],b=y.length;for(var k in u)(h||s.call(u,k))&&!(_&&(k=="length"||p&&(k=="offset"||k=="parent")||m&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,b)))&&y.push(k);return y}return Jf=l,Jf}var t2,Iv;function ld(){if(Iv)return t2;Iv=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return t2=e,t2}var e2,Fv;function PA(){if(Fv)return e2;Fv=1;function t(e,n){return function(r){return e(n(r))}}return e2=t,e2}var n2,$v;function CQ(){if($v)return n2;$v=1;var t=PA(),e=t(Object.keys,Object);return n2=e,n2}var r2,Pv;function Sb(){if(Pv)return r2;Pv=1;var t=ld(),e=CQ(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return r2=i,r2}var i2,Yv;function ma(){if(Yv)return i2;Yv=1;var t=sc,e=Eb();function n(r){return r!=null&&e(r.length)&&!t(r)}return i2=n,i2}var a2,zv;function io(){if(zv)return a2;zv=1;var t=$A(),e=Sb(),n=ma();function r(i){return n(i)?t(i):e(i)}return a2=r,a2}var o2,jv;function SQ(){if(jv)return o2;jv=1;var t=uu(),e=io();function n(r,i){return r&&t(i,e(i),r)}return o2=n,o2}var s2,Uv;function AQ(){if(Uv)return s2;Uv=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return s2=t,s2}var c2,Hv;function MQ(){if(Hv)return c2;Hv=1;var t=Yr,e=ld(),n=AQ(),r=Object.prototype,i=r.hasOwnProperty;function a(o){if(!t(o))return n(o);var s=e(o),l=[];for(var u in o)u=="constructor"&&(s||!i.call(o,u))||l.push(u);return l}return c2=a,c2}var l2,Wv;function Ko(){if(Wv)return l2;Wv=1;var t=$A(),e=MQ(),n=ma();function r(i){return n(i)?t(i,!0):e(i)}return l2=r,l2}var u2,Gv;function LQ(){if(Gv)return u2;Gv=1;var t=uu(),e=Ko();function n(r,i){return r&&t(i,e(i),r)}return u2=n,u2}var h2={exports:{}},Vv;function YA(){return Vv||(Vv=1,function(t,e){var n=di,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(u,h){if(h)return u.slice();var f=u.length,d=s?s(f):new u.constructor(f);return u.copy(d),d}t.exports=l}(h2,h2.exports)),h2.exports}var d2,qv;function zA(){if(qv)return d2;qv=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return d2=t,d2}var f2,Xv;function jA(){if(Xv)return f2;Xv=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];n(s,r,e)&&(o[a++]=s)}return o}return f2=t,f2}var p2,Kv;function UA(){if(Kv)return p2;Kv=1;function t(){return[]}return p2=t,p2}var g2,Zv;function Ab(){if(Zv)return g2;Zv=1;var t=jA(),e=UA(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(s){return r.call(o,s)}))}:e;return g2=a,g2}var y2,Qv;function BQ(){if(Qv)return y2;Qv=1;var t=uu(),e=Ab();function n(r,i){return t(r,e(r),i)}return y2=n,y2}var m2,Jv;function Mb(){if(Jv)return m2;Jv=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return m2=t,m2}var b2,tx;function ud(){if(tx)return b2;tx=1;var t=PA(),e=t(Object.getPrototypeOf,Object);return b2=e,b2}var _2,ex;function HA(){if(ex)return _2;ex=1;var t=Mb(),e=ud(),n=Ab(),r=UA(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)t(s,n(o)),o=e(o);return s}:r;return _2=a,_2}var v2,nx;function DQ(){if(nx)return v2;nx=1;var t=uu(),e=HA();function n(r,i){return t(r,e(r),i)}return v2=n,v2}var x2,rx;function WA(){if(rx)return x2;rx=1;var t=Mb(),e=vn();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return x2=n,x2}var k2,ix;function GA(){if(ix)return k2;ix=1;var t=WA(),e=Ab(),n=io();function r(i){return t(i,n,e)}return k2=r,k2}var w2,ax;function NQ(){if(ax)return w2;ax=1;var t=WA(),e=HA(),n=Ko();function r(i){return t(i,n,e)}return w2=r,w2}var T2,ox;function OQ(){if(ox)return T2;ox=1;var t=Xo,e=di,n=t(e,"DataView");return T2=n,T2}var E2,sx;function RQ(){if(sx)return E2;sx=1;var t=Xo,e=di,n=t(e,"Promise");return E2=n,E2}var C2,cx;function VA(){if(cx)return C2;cx=1;var t=Xo,e=di,n=t(e,"Set");return C2=n,C2}var S2,lx;function IQ(){if(lx)return S2;lx=1;var t=Xo,e=di,n=t(e,"WeakMap");return S2=n,S2}var A2,ux;function pc(){if(ux)return A2;ux=1;var t=OQ(),e=ob,n=RQ(),r=VA(),i=IQ(),a=qo,o=$S,s="[object Map]",l="[object Object]",u="[object Promise]",h="[object Set]",f="[object WeakMap]",d="[object DataView]",p=o(t),m=o(e),_=o(n),y=o(r),b=o(i),k=a;return(t&&k(new t(new ArrayBuffer(1)))!=d||e&&k(new e)!=s||n&&k(n.resolve())!=u||r&&k(new r)!=h||i&&k(new i)!=f)&&(k=function(T){var x=a(T),A=x==l?T.constructor:void 0,C=A?o(A):"";if(C)switch(C){case p:return d;case m:return s;case _:return u;case y:return h;case b:return f}return x}),A2=k,A2}var M2,hx;function FQ(){if(hx)return M2;hx=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return M2=n,M2}var L2,dx;function qA(){if(dx)return L2;dx=1;var t=di,e=t.Uint8Array;return L2=e,L2}var B2,fx;function Lb(){if(fx)return B2;fx=1;var t=qA();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return B2=e,B2}var D2,px;function $Q(){if(px)return D2;px=1;var t=Lb();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return D2=e,D2}var N2,gx;function PQ(){if(gx)return N2;gx=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return N2=e,N2}var O2,yx;function YQ(){if(yx)return O2;yx=1;var t=oc,e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return O2=r,O2}var R2,mx;function XA(){if(mx)return R2;mx=1;var t=Lb();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return R2=e,R2}var I2,bx;function zQ(){if(bx)return I2;bx=1;var t=Lb(),e=$Q(),n=PQ(),r=YQ(),i=XA(),a="[object Boolean]",o="[object Date]",s="[object Map]",l="[object Number]",u="[object RegExp]",h="[object Set]",f="[object String]",d="[object Symbol]",p="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",y="[object Float64Array]",b="[object Int8Array]",k="[object Int16Array]",T="[object Int32Array]",x="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",L="[object Uint32Array]";function S(N,v,M){var w=N.constructor;switch(v){case p:return t(N);case a:case o:return new w(+N);case m:return e(N,M);case _:case y:case b:case k:case T:case x:case A:case C:case L:return i(N,M);case s:return new w;case l:case f:return new w(N);case u:return n(N);case h:return new w;case d:return r(N)}}return I2=S,I2}var F2,_x;function KA(){if(_x)return F2;_x=1;var t=Yr,e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return F2=n,F2}var $2,vx;function ZA(){if(vx)return $2;vx=1;var t=KA(),e=ud(),n=ld();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return $2=r,$2}var P2,xx;function jQ(){if(xx)return P2;xx=1;var t=pc(),e=zi(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return P2=r,P2}var Y2,kx;function UQ(){if(kx)return Y2;kx=1;var t=jQ(),e=cd(),n=Cb(),r=n&&n.isMap,i=r?e(r):t;return Y2=i,Y2}var z2,wx;function HQ(){if(wx)return z2;wx=1;var t=pc(),e=zi(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return z2=r,z2}var j2,Tx;function WQ(){if(Tx)return j2;Tx=1;var t=HQ(),e=cd(),n=Cb(),r=n&&n.isSet,i=r?e(r):t;return j2=i,j2}var U2,Ex;function QA(){if(Ex)return U2;Ex=1;var t=id(),e=Tb(),n=od(),r=SQ(),i=LQ(),a=YA(),o=zA(),s=BQ(),l=DQ(),u=GA(),h=NQ(),f=pc(),d=FQ(),p=zQ(),m=ZA(),_=vn(),y=fc(),b=UQ(),k=Yr,T=WQ(),x=io(),A=Ko(),C=1,L=2,S=4,N="[object Arguments]",v="[object Array]",M="[object Boolean]",w="[object Date]",R="[object Error]",B="[object Function]",$="[object GeneratorFunction]",F="[object Map]",Q="[object Number]",nt="[object Object]",z="[object RegExp]",Y="[object Set]",rt="[object String]",lt="[object Symbol]",J="[object WeakMap]",Z="[object ArrayBuffer]",q="[object DataView]",it="[object Float32Array]",ut="[object Float64Array]",G="[object Int8Array]",j="[object Int16Array]",P="[object Int32Array]",X="[object Uint8Array]",O="[object Uint8ClampedArray]",V="[object Uint16Array]",U="[object Uint32Array]",H={};H[N]=H[v]=H[Z]=H[q]=H[M]=H[w]=H[it]=H[ut]=H[G]=H[j]=H[P]=H[F]=H[Q]=H[nt]=H[z]=H[Y]=H[rt]=H[lt]=H[X]=H[O]=H[V]=H[U]=!0,H[R]=H[B]=H[J]=!1;function xt(ot,Nt,Mt,wt,Et,bt){var mt,Tt=Nt&C,kt=Nt&L,st=Nt&S;if(Mt&&(mt=Et?Mt(ot,wt,Et,bt):Mt(ot)),mt!==void 0)return mt;if(!k(ot))return ot;var Zt=_(ot);if(Zt){if(mt=d(ot),!Tt)return o(ot,mt)}else{var $t=f(ot),Jt=$t==B||$t==$;if(y(ot))return a(ot,Tt);if($t==nt||$t==N||Jt&&!Et){if(mt=kt||Jt?{}:m(ot),!Tt)return kt?l(ot,i(mt,ot)):s(ot,r(mt,ot))}else{if(!H[$t])return Et?ot:{};mt=p(ot,$t,Tt)}}bt||(bt=new t);var Ht=bt.get(ot);if(Ht)return Ht;bt.set(ot,mt),T(ot)?ot.forEach(function(Xt){mt.add(xt(Xt,Nt,Mt,Xt,ot,bt))}):b(ot)&&ot.forEach(function(Xt,It){mt.set(It,xt(Xt,Nt,Mt,It,ot,bt))});var qt=st?kt?h:u:kt?A:x,oe=Zt?void 0:qt(ot);return e(oe||ot,function(Xt,It){oe&&(It=Xt,Xt=ot[It]),n(mt,It,xt(Xt,Nt,Mt,It,ot,bt))}),mt}return U2=xt,U2}var H2,Cx;function GQ(){if(Cx)return H2;Cx=1;var t=QA(),e=4;function n(r){return t(r,e)}return H2=n,H2}var W2,Sx;function Bb(){if(Sx)return W2;Sx=1;function t(e){return function(){return e}}return W2=t,W2}var Ax={exports:{}},G2,Mx;function VQ(){if(Mx)return G2;Mx=1;function t(e){return function(n,r,i){for(var a=-1,o=Object(n),s=i(n),l=s.length;l--;){var u=s[e?l:++a];if(r(o[u],u,o)===!1)break}return n}}return G2=t,G2}var V2,Lx;function Db(){if(Lx)return V2;Lx=1;var t=VQ(),e=t();return V2=e,V2}var q2,Bx;function Nb(){if(Bx)return q2;Bx=1;var t=Db(),e=io();function n(r,i){return r&&t(r,i,e)}return q2=n,q2}var X2,Dx;function qQ(){if(Dx)return X2;Dx=1;var t=ma();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return X2=e,X2}var K2,Nx;function hd(){if(Nx)return K2;Nx=1;var t=Nb(),e=qQ(),n=e(t);return K2=n,K2}var Z2,Ox;function Zo(){if(Ox)return Z2;Ox=1;function t(e){return e}return Z2=t,Z2}var Q2,Rx;function JA(){if(Rx)return Q2;Rx=1;var t=Zo();function e(n){return typeof n=="function"?n:t}return Q2=e,Q2}var J2,Ix;function tM(){if(Ix)return J2;Ix=1;var t=Tb(),e=hd(),n=JA(),r=vn();function i(a,o){var s=r(a)?t:e;return s(a,n(o))}return J2=i,J2}var Fx;function Ob(){return Fx||(Fx=1,function(t){t.exports=tM()}(Ax)),Ax.exports}var tp,$x;function XQ(){if($x)return tp;$x=1;var t=hd();function e(n,r){var i=[];return t(n,function(a,o,s){r(a,o,s)&&i.push(a)}),i}return tp=e,tp}var ep,Px;function KQ(){if(Px)return ep;Px=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return ep=e,ep}var np,Yx;function ZQ(){if(Yx)return np;Yx=1;function t(e){return this.__data__.has(e)}return np=t,np}var rp,zx;function eM(){if(zx)return rp;zx=1;var t=sb,e=KQ(),n=ZQ();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,rp=r,rp}var ip,jx;function QQ(){if(jx)return ip;jx=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return ip=t,ip}var ap,Ux;function nM(){if(Ux)return ap;Ux=1;function t(e,n){return e.has(n)}return ap=t,ap}var op,Hx;function rM(){if(Hx)return op;Hx=1;var t=eM(),e=QQ(),n=nM(),r=1,i=2;function a(o,s,l,u,h,f){var d=l&r,p=o.length,m=s.length;if(p!=m&&!(d&&m>p))return!1;var _=f.get(o),y=f.get(s);if(_&&y)return _==s&&y==o;var b=-1,k=!0,T=l&i?new t:void 0;for(f.set(o,s),f.set(s,o);++b<p;){var x=o[b],A=s[b];if(u)var C=d?u(A,x,b,s,o,f):u(x,A,b,o,s,f);if(C!==void 0){if(C)continue;k=!1;break}if(T){if(!e(s,function(L,S){if(!n(T,S)&&(x===L||h(x,L,l,u,f)))return T.push(S)})){k=!1;break}}else if(!(x===A||h(x,A,l,u,f))){k=!1;break}}return f.delete(o),f.delete(s),k}return op=a,op}var sp,Wx;function JQ(){if(Wx)return sp;Wx=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return sp=t,sp}var cp,Gx;function Rb(){if(Gx)return cp;Gx=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return cp=t,cp}var lp,Vx;function tJ(){if(Vx)return lp;Vx=1;var t=oc,e=qA(),n=lc,r=rM(),i=JQ(),a=Rb(),o=1,s=2,l="[object Boolean]",u="[object Date]",h="[object Error]",f="[object Map]",d="[object Number]",p="[object RegExp]",m="[object Set]",_="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",k="[object DataView]",T=t?t.prototype:void 0,x=T?T.valueOf:void 0;function A(C,L,S,N,v,M,w){switch(S){case k:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case b:return!(C.byteLength!=L.byteLength||!M(new e(C),new e(L)));case l:case u:case d:return n(+C,+L);case h:return C.name==L.name&&C.message==L.message;case p:case _:return C==L+"";case f:var R=i;case m:var B=N&o;if(R||(R=a),C.size!=L.size&&!B)return!1;var $=w.get(C);if($)return $==L;N|=s,w.set(C,L);var F=r(R(C),R(L),N,v,M,w);return w.delete(C),F;case y:if(x)return x.call(C)==x.call(L)}return!1}return lp=A,lp}var up,qx;function eJ(){if(qx)return up;qx=1;var t=GA(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s,l,u,h){var f=s&e,d=t(a),p=d.length,m=t(o),_=m.length;if(p!=_&&!f)return!1;for(var y=p;y--;){var b=d[y];if(!(f?b in o:r.call(o,b)))return!1}var k=h.get(a),T=h.get(o);if(k&&T)return k==o&&T==a;var x=!0;h.set(a,o),h.set(o,a);for(var A=f;++y<p;){b=d[y];var C=a[b],L=o[b];if(l)var S=f?l(L,C,b,o,a,h):l(C,L,b,a,o,h);if(!(S===void 0?C===L||u(C,L,s,l,h):S)){x=!1;break}A||(A=b=="constructor")}if(x&&!A){var N=a.constructor,v=o.constructor;N!=v&&"constructor"in a&&"constructor"in o&&!(typeof N=="function"&&N instanceof N&&typeof v=="function"&&v instanceof v)&&(x=!1)}return h.delete(a),h.delete(o),x}return up=i,up}var hp,Xx;function nJ(){if(Xx)return hp;Xx=1;var t=id(),e=rM(),n=tJ(),r=eJ(),i=pc(),a=vn(),o=fc(),s=du(),l=1,u="[object Arguments]",h="[object Array]",f="[object Object]",d=Object.prototype,p=d.hasOwnProperty;function m(_,y,b,k,T,x){var A=a(_),C=a(y),L=A?h:i(_),S=C?h:i(y);L=L==u?f:L,S=S==u?f:S;var N=L==f,v=S==f,M=L==S;if(M&&o(_)){if(!o(y))return!1;A=!0,N=!1}if(M&&!N)return x||(x=new t),A||s(_)?e(_,y,b,k,T,x):n(_,y,L,b,k,T,x);if(!(b&l)){var w=N&&p.call(_,"__wrapped__"),R=v&&p.call(y,"__wrapped__");if(w||R){var B=w?_.value():_,$=R?y.value():y;return x||(x=new t),T(B,$,b,k,x)}}return M?(x||(x=new t),r(_,y,b,k,T,x)):!1}return hp=m,hp}var dp,Kx;function iM(){if(Kx)return dp;Kx=1;var t=nJ(),e=zi();function n(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,s)}return dp=n,dp}var fp,Zx;function rJ(){if(Zx)return fp;Zx=1;var t=id(),e=iM(),n=1,r=2;function i(a,o,s,l){var u=s.length,h=u,f=!l;if(a==null)return!h;for(a=Object(a);u--;){var d=s[u];if(f&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++u<h;){d=s[u];var p=d[0],m=a[p],_=d[1];if(f&&d[2]){if(m===void 0&&!(p in a))return!1}else{var y=new t;if(l)var b=l(m,_,p,a,o,y);if(!(b===void 0?e(_,m,n|r,l,y):b))return!1}}return!0}return fp=i,fp}var pp,Qx;function aM(){if(Qx)return pp;Qx=1;var t=Yr;function e(n){return n===n&&!t(n)}return pp=e,pp}var gp,Jx;function iJ(){if(Jx)return gp;Jx=1;var t=aM(),e=io();function n(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,t(s)]}return i}return gp=n,gp}var yp,t8;function oM(){if(t8)return yp;t8=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return yp=t,yp}var mp,e8;function aJ(){if(e8)return mp;e8=1;var t=rJ(),e=iJ(),n=oM();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return mp=r,mp}var bp,n8;function gc(){if(n8)return bp;n8=1;var t=qo,e=zi(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return bp=r,bp}var _p,r8;function Ib(){if(r8)return _p;r8=1;var t=vn(),e=gc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(t(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||o!=null&&a in Object(o)}return _p=i,_p}var vp,i8;function oJ(){if(i8)return vp;i8=1;var t=X0,e=500;function n(r){var i=t(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return vp=n,vp}var xp,a8;function sJ(){if(a8)return xp;a8=1;var t=oJ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,u){a.push(l?u.replace(n,"$1"):s||o)}),a});return xp=r,xp}var kp,o8;function dd(){if(o8)return kp;o8=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return kp=t,kp}var wp,s8;function cJ(){if(s8)return wp;s8=1;var t=oc,e=dd(),n=vn(),r=gc(),i=1/0,a=t?t.prototype:void 0,o=a?a.toString:void 0;function s(l){if(typeof l=="string")return l;if(n(l))return e(l,s)+"";if(r(l))return o?o.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return wp=s,wp}var Tp,c8;function sM(){if(c8)return Tp;c8=1;var t=cJ();function e(n){return n==null?"":t(n)}return Tp=e,Tp}var Ep,l8;function fd(){if(l8)return Ep;l8=1;var t=vn(),e=Ib(),n=sJ(),r=sM();function i(a,o){return t(a)?a:e(a,o)?[a]:n(r(a))}return Ep=i,Ep}var Cp,u8;function fu(){if(u8)return Cp;u8=1;var t=gc(),e=1/0;function n(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-e?"-0":i}return Cp=n,Cp}var Sp,h8;function pd(){if(h8)return Sp;h8=1;var t=fd(),e=fu();function n(r,i){i=t(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return Sp=n,Sp}var Ap,d8;function lJ(){if(d8)return Ap;d8=1;var t=pd();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return Ap=e,Ap}var Mp,f8;function uJ(){if(f8)return Mp;f8=1;function t(e,n){return e!=null&&n in Object(e)}return Mp=t,Mp}var Lp,p8;function cM(){if(p8)return Lp;p8=1;var t=fd(),e=hu(),n=vn(),r=sd(),i=Eb(),a=fu();function o(s,l,u){l=t(l,s);for(var h=-1,f=l.length,d=!1;++h<f;){var p=a(l[h]);if(!(d=s!=null&&u(s,p)))break;s=s[p]}return d||++h!=f?d:(f=s==null?0:s.length,!!f&&i(f)&&r(p,f)&&(n(s)||e(s)))}return Lp=o,Lp}var Bp,g8;function lM(){if(g8)return Bp;g8=1;var t=uJ(),e=cM();function n(r,i){return r!=null&&e(r,i,t)}return Bp=n,Bp}var Dp,y8;function hJ(){if(y8)return Dp;y8=1;var t=iM(),e=lJ(),n=lM(),r=Ib(),i=aM(),a=oM(),o=fu(),s=1,l=2;function u(h,f){return r(h)&&i(f)?a(o(h),f):function(d){var p=e(d,h);return p===void 0&&p===f?n(d,h):t(f,p,s|l)}}return Dp=u,Dp}var Np,m8;function uM(){if(m8)return Np;m8=1;function t(e){return function(n){return n==null?void 0:n[e]}}return Np=t,Np}var Op,b8;function dJ(){if(b8)return Op;b8=1;var t=pd();function e(n){return function(r){return t(r,n)}}return Op=e,Op}var Rp,_8;function fJ(){if(_8)return Rp;_8=1;var t=uM(),e=dJ(),n=Ib(),r=fu();function i(a){return n(a)?t(r(a)):e(a)}return Rp=i,Rp}var Ip,v8;function ba(){if(v8)return Ip;v8=1;var t=aJ(),e=hJ(),n=Zo(),r=vn(),i=fJ();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return Ip=a,Ip}var Fp,x8;function hM(){if(x8)return Fp;x8=1;var t=jA(),e=XQ(),n=ba(),r=vn();function i(a,o){var s=r(a)?t:e;return s(a,n(o,3))}return Fp=i,Fp}var $p,k8;function pJ(){if(k8)return $p;k8=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return $p=n,$p}var Pp,w8;function Fb(){if(w8)return Pp;w8=1;var t=pJ(),e=cM();function n(r,i){return r!=null&&e(r,i,t)}return Pp=n,Pp}var Yp,T8;function gJ(){if(T8)return Yp;T8=1;var t=Sb(),e=pc(),n=hu(),r=vn(),i=ma(),a=fc(),o=ld(),s=du(),l="[object Map]",u="[object Set]",h=Object.prototype,f=h.hasOwnProperty;function d(p){if(p==null)return!0;if(i(p)&&(r(p)||typeof p=="string"||typeof p.splice=="function"||a(p)||s(p)||n(p)))return!p.length;var m=e(p);if(m==l||m==u)return!p.size;if(o(p))return!t(p).length;for(var _ in p)if(f.call(p,_))return!1;return!0}return Yp=d,Yp}var zp,E8;function dM(){if(E8)return zp;E8=1;function t(e){return e===void 0}return zp=t,zp}var jp,C8;function fM(){if(C8)return jp;C8=1;var t=hd(),e=ma();function n(r,i){var a=-1,o=e(r)?Array(r.length):[];return t(r,function(s,l,u){o[++a]=i(s,l,u)}),o}return jp=n,jp}var Up,S8;function pM(){if(S8)return Up;S8=1;var t=dd(),e=ba(),n=fM(),r=vn();function i(a,o){var s=r(a)?t:n;return s(a,e(o,3))}return Up=i,Up}var Hp,A8;function yJ(){if(A8)return Hp;A8=1;function t(e,n,r,i){var a=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++a]);++a<o;)r=n(r,e[a],a,e);return r}return Hp=t,Hp}var Wp,M8;function mJ(){if(M8)return Wp;M8=1;function t(e,n,r,i,a){return a(e,function(o,s,l){r=i?(i=!1,o):n(r,o,s,l)}),r}return Wp=t,Wp}var Gp,L8;function gM(){if(L8)return Gp;L8=1;var t=yJ(),e=hd(),n=ba(),r=mJ(),i=vn();function a(o,s,l){var u=i(o)?t:r,h=arguments.length<3;return u(o,n(s,4),l,h,e)}return Gp=a,Gp}var Vp,B8;function bJ(){if(B8)return Vp;B8=1;var t=qo,e=vn(),n=zi(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return Vp=i,Vp}var qp,D8;function _J(){if(D8)return qp;D8=1;var t=uM(),e=t("length");return qp=e,qp}var Xp,N8;function vJ(){if(N8)return Xp;N8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+i+a+"]");function l(u){return s.test(u)}return Xp=l,Xp}var Kp,O8;function xJ(){if(O8)return Kp;O8=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",h="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",m=u+"?",_="["+a+"]?",y="(?:"+p+"(?:"+[h,f,d].join("|")+")"+_+m+")*",b=_+m+y,k="(?:"+[h+s+"?",s,f,d,o].join("|")+")",T=RegExp(l+"(?="+l+")|"+k+b,"g");function x(A){for(var C=T.lastIndex=0;T.test(A);)++C;return C}return Kp=x,Kp}var Zp,R8;function kJ(){if(R8)return Zp;R8=1;var t=_J(),e=vJ(),n=xJ();function r(i){return e(i)?n(i):t(i)}return Zp=r,Zp}var Qp,I8;function wJ(){if(I8)return Qp;I8=1;var t=Sb(),e=pc(),n=ma(),r=bJ(),i=kJ(),a="[object Map]",o="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=e(l);return u==a||u==o?l.size:t(l).length}return Qp=s,Qp}var Jp,F8;function TJ(){if(F8)return Jp;F8=1;var t=Tb(),e=KA(),n=Nb(),r=ba(),i=ud(),a=vn(),o=fc(),s=sc,l=Yr,u=du();function h(f,d,p){var m=a(f),_=m||o(f)||u(f);if(d=r(d,4),p==null){var y=f&&f.constructor;_?p=m?new y:[]:l(f)?p=s(y)?e(i(f)):{}:p={}}return(_?t:n)(f,function(b,k,T){return d(p,b,k,T)}),p}return Jp=h,Jp}var tg,$8;function EJ(){if($8)return tg;$8=1;var t=oc,e=hu(),n=vn(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return tg=i,tg}var eg,P8;function $b(){if(P8)return eg;P8=1;var t=Mb(),e=EJ();function n(r,i,a,o,s){var l=-1,u=r.length;for(a||(a=e),s||(s=[]);++l<u;){var h=r[l];i>0&&a(h)?i>1?n(h,i-1,a,o,s):t(s,h):o||(s[s.length]=h)}return s}return eg=n,eg}var ng,Y8;function CJ(){if(Y8)return ng;Y8=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return ng=t,ng}var rg,z8;function yM(){if(z8)return rg;z8=1;var t=CJ(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),u=Array(l);++s<l;)u[s]=o[i+s];s=-1;for(var h=Array(i+1);++s<i;)h[s]=o[s];return h[i]=a(u),t(r,this,h)}}return rg=n,rg}var ig,j8;function SJ(){if(j8)return ig;j8=1;var t=Bb(),e=FA(),n=Zo(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return ig=r,ig}var ag,U8;function AJ(){if(U8)return ag;U8=1;var t=800,e=16,n=Date.now;function r(i){var a=0,o=0;return function(){var s=n(),l=e-(s-o);if(o=s,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return ag=r,ag}var og,H8;function mM(){if(H8)return og;H8=1;var t=SJ(),e=AJ(),n=e(t);return og=n,og}var sg,W8;function gd(){if(W8)return sg;W8=1;var t=Zo(),e=yM(),n=mM();function r(i,a){return n(e(i,a,t),i+"")}return sg=r,sg}var cg,G8;function bM(){if(G8)return cg;G8=1;function t(e,n,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return cg=t,cg}var lg,V8;function MJ(){if(V8)return lg;V8=1;function t(e){return e!==e}return lg=t,lg}var ug,q8;function LJ(){if(q8)return ug;q8=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return ug=t,ug}var hg,X8;function BJ(){if(X8)return hg;X8=1;var t=bM(),e=MJ(),n=LJ();function r(i,a,o){return a===a?n(i,a,o):t(i,e,o)}return hg=r,hg}var dg,K8;function DJ(){if(K8)return dg;K8=1;var t=BJ();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return dg=e,dg}var fg,Z8;function NJ(){if(Z8)return fg;Z8=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return fg=t,fg}var pg,Q8;function OJ(){if(Q8)return pg;Q8=1;function t(){}return pg=t,pg}var gg,J8;function RJ(){if(J8)return gg;J8=1;var t=VA(),e=OJ(),n=Rb(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return gg=i,gg}var yg,t7;function IJ(){if(t7)return yg;t7=1;var t=eM(),e=DJ(),n=NJ(),r=nM(),i=RJ(),a=Rb(),o=200;function s(l,u,h){var f=-1,d=e,p=l.length,m=!0,_=[],y=_;if(h)m=!1,d=n;else if(p>=o){var b=u?null:i(l);if(b)return a(b);m=!1,d=r,y=new t}else y=u?[]:_;t:for(;++f<p;){var k=l[f],T=u?u(k):k;if(k=h||k!==0?k:0,m&&T===T){for(var x=y.length;x--;)if(y[x]===T)continue t;u&&y.push(T),_.push(k)}else d(y,T,h)||(y!==_&&y.push(T),_.push(k))}return _}return yg=s,yg}var mg,e7;function _M(){if(e7)return mg;e7=1;var t=ma(),e=zi();function n(r){return e(r)&&t(r)}return mg=n,mg}var bg,n7;function FJ(){if(n7)return bg;n7=1;var t=$b(),e=gd(),n=IJ(),r=_M(),i=e(function(a){return n(t(a,1,r,!0))});return bg=i,bg}var _g,r7;function $J(){if(r7)return _g;r7=1;var t=dd();function e(n,r){return t(r,function(i){return n[i]})}return _g=e,_g}var vg,i7;function vM(){if(i7)return vg;i7=1;var t=$J(),e=io();function n(r){return r==null?[]:t(r,e(r))}return vg=n,vg}var P1;if(typeof Ka=="function")try{P1={clone:GQ(),constant:Bb(),each:Ob(),filter:hM(),has:Fb(),isArray:vn(),isEmpty:gJ(),isFunction:sc,isUndefined:dM(),keys:io(),map:pM(),reduce:gM(),size:wJ(),transform:TJ(),union:FJ(),values:vM()}}catch{}P1||(P1=window._);var jr=P1,be=jr,Pb=Me,PJ="\0",Po="\0",a7="";function Me(t){this._isDirected=be.has(t,"directed")?t.directed:!0,this._isMultigraph=be.has(t,"multigraph")?t.multigraph:!1,this._isCompound=be.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=be.constant(void 0),this._defaultEdgeLabelFn=be.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Po]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}Me.prototype._nodeCount=0;Me.prototype._edgeCount=0;Me.prototype.isDirected=function(){return this._isDirected};Me.prototype.isMultigraph=function(){return this._isMultigraph};Me.prototype.isCompound=function(){return this._isCompound};Me.prototype.setGraph=function(t){return this._label=t,this};Me.prototype.graph=function(){return this._label};Me.prototype.setDefaultNodeLabel=function(t){return be.isFunction(t)||(t=be.constant(t)),this._defaultNodeLabelFn=t,this};Me.prototype.nodeCount=function(){return this._nodeCount};Me.prototype.nodes=function(){return be.keys(this._nodes)};Me.prototype.sources=function(){var t=this;return be.filter(this.nodes(),function(e){return be.isEmpty(t._in[e])})};Me.prototype.sinks=function(){var t=this;return be.filter(this.nodes(),function(e){return be.isEmpty(t._out[e])})};Me.prototype.setNodes=function(t,e){var n=arguments,r=this;return be.each(t,function(i){n.length>1?r.setNode(i,e):r.setNode(i)}),this};Me.prototype.setNode=function(t,e){return be.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Po,this._children[t]={},this._children[Po][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)};Me.prototype.node=function(t){return this._nodes[t]};Me.prototype.hasNode=function(t){return be.has(this._nodes,t)};Me.prototype.removeNode=function(t){var e=this;if(be.has(this._nodes,t)){var n=function(r){e.removeEdge(e._edgeObjs[r])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],be.each(this.children(t),function(r){e.setParent(r)}),delete this._children[t]),be.each(be.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],be.each(be.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this};Me.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(be.isUndefined(e))e=Po;else{e+="";for(var n=e;!be.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this};Me.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]};Me.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==Po)return e}};Me.prototype.children=function(t){if(be.isUndefined(t)&&(t=Po),this._isCompound){var e=this._children[t];if(e)return be.keys(e)}else{if(t===Po)return this.nodes();if(this.hasNode(t))return[]}};Me.prototype.predecessors=function(t){var e=this._preds[t];if(e)return be.keys(e)};Me.prototype.successors=function(t){var e=this._sucs[t];if(e)return be.keys(e)};Me.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return be.union(e,this.successors(t))};Me.prototype.isLeaf=function(t){var e;return this.isDirected()?e=this.successors(t):e=this.neighbors(t),e.length===0};Me.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;be.each(this._nodes,function(a,o){t(o)&&e.setNode(o,a)}),be.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,n.edge(a))});var r={};function i(a){var o=n.parent(a);return o===void 0||e.hasNode(o)?(r[a]=o,o):o in r?r[o]:i(o)}return this._isCompound&&be.each(e.nodes(),function(a){e.setParent(a,i(a))}),e};Me.prototype.setDefaultEdgeLabel=function(t){return be.isFunction(t)||(t=be.constant(t)),this._defaultEdgeLabelFn=t,this};Me.prototype.edgeCount=function(){return this._edgeCount};Me.prototype.edges=function(){return be.values(this._edgeObjs)};Me.prototype.setPath=function(t,e){var n=this,r=arguments;return be.reduce(t,function(i,a){return r.length>1?n.setEdge(i,a,e):n.setEdge(i,a),a}),this};Me.prototype.setEdge=function(){var t,e,n,r,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,e=a.w,n=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,be.isUndefined(n)||(n=""+n);var o=pu(this._isDirected,t,e,n);if(be.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=r),this;if(!be.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[o]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=YJ(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,o7(this._preds[e],t),o7(this._sucs[t],e),this._in[e][o]=s,this._out[t][o]=s,this._edgeCount++,this};Me.prototype.edge=function(t,e,n){var r=arguments.length===1?Yb(this._isDirected,arguments[0]):pu(this._isDirected,t,e,n);return this._edgeLabels[r]};Me.prototype.hasEdge=function(t,e,n){var r=arguments.length===1?Yb(this._isDirected,arguments[0]):pu(this._isDirected,t,e,n);return be.has(this._edgeLabels,r)};Me.prototype.removeEdge=function(t,e,n){var r=arguments.length===1?Yb(this._isDirected,arguments[0]):pu(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],s7(this._preds[e],t),s7(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this};Me.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=be.values(n);return e?be.filter(r,function(i){return i.v===e}):r}};Me.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=be.values(n);return e?be.filter(r,function(i){return i.w===e}):r}};Me.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};function o7(t,e){t[e]?t[e]++:t[e]=1}function s7(t,e){--t[e]||delete t[e]}function pu(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}return i+a7+a+a7+(be.isUndefined(r)?PJ:r)}function YJ(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}function Yb(t,e){return pu(t,e.v,e.w,e.name)}var zJ="2.1.8",jJ={Graph:Pb,version:zJ},Di=jr,UJ=Pb,HJ={write:WJ,read:qJ};function WJ(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:GJ(t),edges:VJ(t)};return Di.isUndefined(t.graph())||(e.value=Di.clone(t.graph())),e}function GJ(t){return Di.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return Di.isUndefined(n)||(i.value=n),Di.isUndefined(r)||(i.parent=r),i})}function VJ(t){return Di.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return Di.isUndefined(e.name)||(r.name=e.name),Di.isUndefined(n)||(r.value=n),r})}function qJ(t){var e=new UJ(t.options).setGraph(t.value);return Di.each(t.nodes,function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),Di.each(t.edges,function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var rh=jr,XJ=KJ;function KJ(t){var e={},n=[],r;function i(a){rh.has(e,a)||(e[a]=!0,r.push(a),rh.each(t.successors(a),i),rh.each(t.predecessors(a),i))}return rh.each(t.nodes(),function(a){r=[],i(a),r.length&&n.push(r)}),n}var xM=jr,kM=Ur;function Ur(){this._arr=[],this._keyIndices={}}Ur.prototype.size=function(){return this._arr.length};Ur.prototype.keys=function(){return this._arr.map(function(t){return t.key})};Ur.prototype.has=function(t){return xM.has(this._keyIndices,t)};Ur.prototype.priority=function(t){var e=this._keyIndices[t];if(e!==void 0)return this._arr[e].priority};Ur.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};Ur.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!xM.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1};Ur.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key};Ur.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)};Ur.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))};Ur.prototype._decrease=function(t){for(var e=this._arr,n=e[t].priority,r;t!==0&&(r=t>>1,!(e[r].priority<n));)this._swap(t,r),t=r};Ur.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],a=n[e];n[t]=a,n[e]=i,r[a.key]=t,r[i.key]=e};var ZJ=jr,QJ=kM,wM=ttt,JJ=ZJ.constant(1);function ttt(t,e,n,r){return ett(t,String(e),n||JJ,r||function(i){return t.outEdges(i)})}function ett(t,e,n,r){var i={},a=new QJ,o,s,l=function(u){var h=u.v!==o?u.v:u.w,f=i[h],d=n(u),p=s.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+d);p<f.distance&&(f.distance=p,f.predecessor=o,a.decrease(h,p))};for(t.nodes().forEach(function(u){var h=u===e?0:Number.POSITIVE_INFINITY;i[u]={distance:h},a.add(u,h)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(l);return i}var ntt=wM,rtt=jr,itt=att;function att(t,e,n){return rtt.transform(t.nodes(),function(r,i){r[i]=ntt(t,i,e,n)},{})}var c7=jr,TM=ott;function ott(t){var e=0,n=[],r={},i=[];function a(o){var s=r[o]={onStack:!0,lowlink:e,index:e++};if(n.push(o),t.successors(o).forEach(function(h){c7.has(r,h)?r[h].onStack&&(s.lowlink=Math.min(s.lowlink,r[h].index)):(a(h),s.lowlink=Math.min(s.lowlink,r[h].lowlink))}),s.lowlink===s.index){var l=[],u;do u=n.pop(),r[u].onStack=!1,l.push(u);while(o!==u);i.push(l)}}return t.nodes().forEach(function(o){c7.has(r,o)||a(o)}),i}var stt=jr,ctt=TM,ltt=utt;function utt(t){return stt.filter(ctt(t),function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var htt=jr,dtt=ptt,ftt=htt.constant(1);function ptt(t,e,n){return gtt(t,e||ftt,n||function(r){return t.outEdges(r)})}function gtt(t,e,n){var r={},i=t.nodes();return i.forEach(function(a){r[a]={},r[a][a]={distance:0},i.forEach(function(o){a!==o&&(r[a][o]={distance:Number.POSITIVE_INFINITY})}),n(a).forEach(function(o){var s=o.v===a?o.w:o.v,l=e(o);r[a][s]={distance:l,predecessor:a}})}),i.forEach(function(a){var o=r[a];i.forEach(function(s){var l=r[s];i.forEach(function(u){var h=l[a],f=o[u],d=l[u],p=h.distance+f.distance;p<d.distance&&(d.distance=p,d.predecessor=f.predecessor)})})}),r}var Oc=jr,EM=CM;CM.CycleException=Y1;function CM(t){var e={},n={},r=[];function i(a){if(Oc.has(n,a))throw new Y1;Oc.has(e,a)||(n[a]=!0,e[a]=!0,Oc.each(t.predecessors(a),i),delete n[a],r.push(a))}if(Oc.each(t.sinks(),i),Oc.size(e)!==t.nodeCount())throw new Y1;return r}function Y1(){}Y1.prototype=new Error;var l7=EM,ytt=mtt;function mtt(t){try{l7(t)}catch(e){if(e instanceof l7.CycleException)return!1;throw e}return!0}var z1=jr,SM=btt;function btt(t,e,n){z1.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return z1.each(e,function(o){if(!t.hasNode(o))throw new Error("Graph does not have node: "+o);AM(t,o,n==="post",a,r,i)}),i}function AM(t,e,n,r,i,a){z1.has(r,e)||(r[e]=!0,n||a.push(e),z1.each(i(e),function(o){AM(t,o,n,r,i,a)}),n&&a.push(e))}var _tt=SM,vtt=xtt;function xtt(t,e){return _tt(t,e,"post")}var ktt=SM,wtt=Ttt;function Ttt(t,e){return ktt(t,e,"pre")}var u7=jr,Ett=Pb,Ctt=kM,Stt=Att;function Att(t,e){var n=new Ett,r={},i=new Ctt,a;function o(l){var u=l.v===a?l.w:l.v,h=i.priority(u);if(h!==void 0){var f=e(l);f<h&&(r[u]=a,i.decrease(u,f))}}if(t.nodeCount()===0)return n;u7.each(t.nodes(),function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),u7.has(r,a))n.setEdge(a,r[a]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(a).forEach(o)}return n}var Mtt={components:XJ,dijkstra:wM,dijkstraAll:itt,findCycles:ltt,floydWarshall:dtt,isAcyclic:ytt,postorder:vtt,preorder:wtt,prim:Stt,tarjan:TM,topsort:EM},h7=jJ,dn={Graph:h7.Graph,json:HJ,alg:Mtt,version:h7.version},xg,d7;function li(){if(d7)return xg;d7=1;var t;if(typeof Ka=="function")try{t=dn}catch{}return t||(t=window.graphlib),xg=t,xg}var kg,f7;function Ltt(){if(f7)return kg;f7=1;var t=QA(),e=1,n=4;function r(i){return t(i,e|n)}return kg=r,kg}var wg,p7;function yd(){if(p7)return wg;p7=1;var t=lc,e=ma(),n=sd(),r=Yr;function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&n(o,s.length):l=="string"&&o in s)?t(s[o],a):!1}return wg=i,wg}var Tg,g7;function MM(){if(g7)return Tg;g7=1;var t=gd(),e=lc,n=yd(),r=Ko(),i=Object.prototype,a=i.hasOwnProperty,o=t(function(s,l){s=Object(s);var u=-1,h=l.length,f=h>2?l[2]:void 0;for(f&&n(l[0],l[1],f)&&(h=1);++u<h;)for(var d=l[u],p=r(d),m=-1,_=p.length;++m<_;){var y=p[m],b=s[y];(b===void 0||e(b,i[y])&&!a.call(s,y))&&(s[y]=d[y])}return s});return Tg=o,Tg}var Eg,y7;function Btt(){if(y7)return Eg;y7=1;var t=ba(),e=ma(),n=io();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var u=t(o,3);a=n(a),o=function(f){return u(l[f],f,l)}}var h=i(a,o,s);return h>-1?l[u?a[h]:h]:void 0}}return Eg=r,Eg}var Cg,m7;function Dtt(){if(m7)return Cg;m7=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return Cg=e,Cg}var Sg,b7;function Ntt(){if(b7)return Sg;b7=1;var t=Dtt(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Sg=n,Sg}var Ag,_7;function Ott(){if(_7)return Ag;_7=1;var t=Ntt(),e=Yr,n=gc(),r=0/0,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=a.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):i.test(u)?r:+u}return Ag=l,Ag}var Mg,v7;function LM(){if(v7)return Mg;v7=1;var t=Ott(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return Mg=r,Mg}var Lg,x7;function Rtt(){if(x7)return Lg;x7=1;var t=LM();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return Lg=e,Lg}var Bg,k7;function Itt(){if(k7)return Bg;k7=1;var t=bM(),e=ba(),n=Rtt(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),t(a,e(o,3),u)}return Bg=i,Bg}var Dg,w7;function Ftt(){if(w7)return Dg;w7=1;var t=Btt(),e=Itt(),n=t(e);return Dg=n,Dg}var Ng,T7;function BM(){if(T7)return Ng;T7=1;var t=$b();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return Ng=e,Ng}var Og,E7;function $tt(){if(E7)return Og;E7=1;var t=Db(),e=JA(),n=Ko();function r(i,a){return i==null?i:t(i,e(a),n)}return Og=r,Og}var Rg,C7;function Ptt(){if(C7)return Rg;C7=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return Rg=t,Rg}var Ig,S7;function Ytt(){if(S7)return Ig;S7=1;var t=ad(),e=Nb(),n=ba();function r(i,a){var o={};return a=n(a,3),e(i,function(s,l,u){t(o,l,a(s,l,u))}),o}return Ig=r,Ig}var Fg,A7;function zb(){if(A7)return Fg;A7=1;var t=gc();function e(n,r,i){for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r(s);if(l!=null&&(u===void 0?l===l&&!t(l):i(l,u)))var u=l,h=s}return h}return Fg=e,Fg}var $g,M7;function ztt(){if(M7)return $g;M7=1;function t(e,n){return e>n}return $g=t,$g}var Pg,L7;function jtt(){if(L7)return Pg;L7=1;var t=zb(),e=ztt(),n=Zo();function r(i){return i&&i.length?t(i,n,e):void 0}return Pg=r,Pg}var Yg,B7;function DM(){if(B7)return Yg;B7=1;var t=ad(),e=lc;function n(r,i,a){(a!==void 0&&!e(r[i],a)||a===void 0&&!(i in r))&&t(r,i,a)}return Yg=n,Yg}var zg,D7;function NM(){if(D7)return zg;D7=1;var t=qo,e=ud(),n=zi(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function u(h){if(!n(h)||t(h)!=r)return!1;var f=e(h);if(f===null)return!0;var d=s.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==l}return zg=u,zg}var jg,N7;function OM(){if(N7)return jg;N7=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return jg=t,jg}var Ug,O7;function Utt(){if(O7)return Ug;O7=1;var t=uu(),e=Ko();function n(r){return t(r,e(r))}return Ug=n,Ug}var Hg,R7;function Htt(){if(R7)return Hg;R7=1;var t=DM(),e=YA(),n=XA(),r=zA(),i=ZA(),a=hu(),o=vn(),s=_M(),l=fc(),u=sc,h=Yr,f=NM(),d=du(),p=OM(),m=Utt();function _(y,b,k,T,x,A,C){var L=p(y,k),S=p(b,k),N=C.get(S);if(N){t(y,k,N);return}var v=A?A(L,S,k+"",y,b,C):void 0,M=v===void 0;if(M){var w=o(S),R=!w&&l(S),B=!w&&!R&&d(S);v=S,w||R||B?o(L)?v=L:s(L)?v=r(L):R?(M=!1,v=e(S,!0)):B?(M=!1,v=n(S,!0)):v=[]:f(S)||a(S)?(v=L,a(L)?v=m(L):(!h(L)||u(L))&&(v=i(S))):M=!1}M&&(C.set(S,v),x(v,S,T,A,C),C.delete(S)),t(y,k,v)}return Hg=_,Hg}var Wg,I7;function Wtt(){if(I7)return Wg;I7=1;var t=id(),e=DM(),n=Db(),r=Htt(),i=Yr,a=Ko(),o=OM();function s(l,u,h,f,d){l!==u&&n(u,function(p,m){if(d||(d=new t),i(p))r(l,u,m,h,s,f,d);else{var _=f?f(o(l,m),p,m+"",l,u,d):void 0;_===void 0&&(_=p),e(l,m,_)}},a)}return Wg=s,Wg}var Gg,F7;function Gtt(){if(F7)return Gg;F7=1;var t=gd(),e=yd();function n(r){return t(function(i,a){var o=-1,s=a.length,l=s>1?a[s-1]:void 0,u=s>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(s--,l):void 0,u&&e(a[0],a[1],u)&&(l=s<3?void 0:l,s=1),i=Object(i);++o<s;){var h=a[o];h&&r(i,h,o,l)}return i})}return Gg=n,Gg}var Vg,$7;function Vtt(){if($7)return Vg;$7=1;var t=Wtt(),e=Gtt(),n=e(function(r,i,a){t(r,i,a)});return Vg=n,Vg}var qg,P7;function RM(){if(P7)return qg;P7=1;function t(e,n){return e<n}return qg=t,qg}var Xg,Y7;function qtt(){if(Y7)return Xg;Y7=1;var t=zb(),e=RM(),n=Zo();function r(i){return i&&i.length?t(i,n,e):void 0}return Xg=r,Xg}var Kg,z7;function Xtt(){if(z7)return Kg;z7=1;var t=zb(),e=ba(),n=RM();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return Kg=r,Kg}var Zg,j7;function Ktt(){if(j7)return Zg;j7=1;var t=di,e=function(){return t.Date.now()};return Zg=e,Zg}var Qg,U7;function Ztt(){if(U7)return Qg;U7=1;var t=od(),e=fd(),n=sd(),r=Yr,i=fu();function a(o,s,l,u){if(!r(o))return o;s=e(s,o);for(var h=-1,f=s.length,d=f-1,p=o;p!=null&&++h<f;){var m=i(s[h]),_=l;if(m==="__proto__"||m==="constructor"||m==="prototype")return o;if(h!=d){var y=p[m];_=u?u(y,m,p):void 0,_===void 0&&(_=r(y)?y:n(s[h+1])?[]:{})}t(p,m,_),p=p[m]}return o}return Qg=a,Qg}var Jg,H7;function Qtt(){if(H7)return Jg;H7=1;var t=pd(),e=Ztt(),n=fd();function r(i,a,o){for(var s=-1,l=a.length,u={};++s<l;){var h=a[s],f=t(i,h);o(f,h)&&e(u,n(h,i),f)}return u}return Jg=r,Jg}var ty,W7;function Jtt(){if(W7)return ty;W7=1;var t=Qtt(),e=lM();function n(r,i){return t(r,i,function(a,o){return e(r,o)})}return ty=n,ty}var ey,G7;function tet(){if(G7)return ey;G7=1;var t=BM(),e=yM(),n=mM();function r(i){return n(e(i,void 0,t),i+"")}return ey=r,ey}var ny,V7;function IM(){if(V7)return ny;V7=1;var t=Jtt(),e=tet(),n=e(function(r,i){return r==null?{}:t(r,i)});return ny=n,ny}var ry,q7;function eet(){if(q7)return ry;q7=1;var t=Math.ceil,e=Math.max;function n(r,i,a,o){for(var s=-1,l=e(t((i-r)/(a||1)),0),u=Array(l);l--;)u[o?l:++s]=r,r+=a;return u}return ry=n,ry}var iy,X7;function net(){if(X7)return iy;X7=1;var t=eet(),e=yd(),n=LM();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),s=s===void 0?a<o?1:-1:n(s),t(a,o,s,i)}}return iy=r,iy}var ay,K7;function FM(){if(K7)return ay;K7=1;var t=net(),e=t();return ay=e,ay}var oy,Z7;function ret(){if(Z7)return oy;Z7=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return oy=t,oy}var sy,Q7;function iet(){if(Q7)return sy;Q7=1;var t=gc();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,o=n===n,s=t(n),l=r!==void 0,u=r===null,h=r===r,f=t(r);if(!u&&!f&&!s&&n>r||s&&l&&h&&!u&&!f||a&&l&&h||!i&&h||!o)return 1;if(!a&&!s&&!f&&n<r||f&&i&&o&&!a&&!s||u&&i&&o||!l&&o||!h)return-1}return 0}return sy=e,sy}var cy,J7;function aet(){if(J7)return cy;J7=1;var t=iet();function e(n,r,i){for(var a=-1,o=n.criteria,s=r.criteria,l=o.length,u=i.length;++a<l;){var h=t(o[a],s[a]);if(h){if(a>=u)return h;var f=i[a];return h*(f=="desc"?-1:1)}}return n.index-r.index}return cy=e,cy}var ly,tk;function oet(){if(tk)return ly;tk=1;var t=dd(),e=pd(),n=ba(),r=fM(),i=ret(),a=cd(),o=aet(),s=Zo(),l=vn();function u(h,f,d){f.length?f=t(f,function(_){return l(_)?function(y){return e(y,_.length===1?_[0]:_)}:_}):f=[s];var p=-1;f=t(f,a(n));var m=r(h,function(_,y,b){var k=t(f,function(T){return T(_)});return{criteria:k,index:++p,value:_}});return i(m,function(_,y){return o(_,y,d)})}return ly=u,ly}var uy,ek;function set(){if(ek)return uy;ek=1;var t=$b(),e=oet(),n=gd(),r=yd(),i=n(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return uy=i,uy}var hy,nk;function $M(){if(nk)return hy;nk=1;var t=sM(),e=0;function n(r){var i=++e;return t(r)+i}return hy=n,hy}var dy,rk;function cet(){if(rk)return dy;rk=1;function t(e,n,r){for(var i=-1,a=e.length,o=n.length,s={};++i<a;){var l=i<o?n[i]:void 0;r(s,e[i],l)}return s}return dy=t,dy}var fy,ik;function uet(){if(ik)return fy;ik=1;var t=od(),e=cet();function n(r,i){return e(r||[],i||[],t)}return fy=n,fy}var py,ak;function Xe(){if(ak)return py;ak=1;var t;if(typeof Ka=="function")try{t={cloneDeep:Ltt(),constant:Bb(),defaults:MM(),each:Ob(),filter:hM(),find:Ftt(),flatten:BM(),forEach:tM(),forIn:$tt(),has:Fb(),isUndefined:dM(),last:Ptt(),map:pM(),mapValues:Ytt(),max:jtt(),merge:Vtt(),min:qtt(),minBy:Xtt(),now:Ktt(),pick:IM(),range:FM(),reduce:gM(),sortBy:set(),uniqueId:$M(),values:vM(),zipObject:uet()}}catch{}return t||(t=window._),py=t,py}var gy,ok;function het(){if(ok)return gy;ok=1,gy=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return gy}var yy,sk;function det(){if(sk)return yy;sk=1;var t=Xe(),e=li().Graph,n=het();yy=i;var r=t.constant(1);function i(u,h){if(u.nodeCount()<=1)return[];var f=s(u,h||r),d=a(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(d,function(p){return u.outEdges(p.v,p.w)}),!0)}function a(u,h,f){for(var d=[],p=h[h.length-1],m=h[0],_;u.nodeCount();){for(;_=m.dequeue();)o(u,h,f,_);for(;_=p.dequeue();)o(u,h,f,_);if(u.nodeCount()){for(var y=h.length-2;y>0;--y)if(_=h[y].dequeue(),_){d=d.concat(o(u,h,f,_,!0));break}}}return d}function o(u,h,f,d,p){var m=p?[]:void 0;return t.forEach(u.inEdges(d.v),function(_){var y=u.edge(_),b=u.node(_.v);p&&m.push({v:_.v,w:_.w}),b.out-=y,l(h,f,b)}),t.forEach(u.outEdges(d.v),function(_){var y=u.edge(_),b=_.w,k=u.node(b);k.in-=y,l(h,f,k)}),u.removeNode(d.v),m}function s(u,h){var f=new e,d=0,p=0;t.forEach(u.nodes(),function(y){f.setNode(y,{v:y,in:0,out:0})}),t.forEach(u.edges(),function(y){var b=f.edge(y.v,y.w)||0,k=h(y),T=b+k;f.setEdge(y.v,y.w,T),p=Math.max(p,f.node(y.v).out+=k),d=Math.max(d,f.node(y.w).in+=k)});var m=t.range(p+d+3).map(function(){return new n}),_=d+1;return t.forEach(f.nodes(),function(y){l(m,_,f.node(y))}),{graph:f,buckets:m,zeroIdx:_}}function l(u,h,f){f.out?f.in?u[f.out-f.in+h].enqueue(f):u[u.length-1].enqueue(f):u[0].enqueue(f)}return yy}var my,ck;function fet(){if(ck)return my;ck=1;var t=Xe(),e=det();my={run:n,undo:i};function n(a){var o=a.graph().acyclicer==="greedy"?e(a,s(a)):r(a);t.forEach(o,function(l){var u=a.edge(l);a.removeEdge(l),u.forwardName=l.name,u.reversed=!0,a.setEdge(l.w,l.v,u,t.uniqueId("rev"))});function s(l){return function(u){return l.edge(u).weight}}}function r(a){var o=[],s={},l={};function u(h){t.has(l,h)||(l[h]=!0,s[h]=!0,t.forEach(a.outEdges(h),function(f){t.has(s,f.w)?o.push(f):u(f.w)}),delete s[h])}return t.forEach(a.nodes(),u),o}function i(a){t.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var l=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,l)}})}return my}var by,lk;function vr(){if(lk)return by;lk=1;var t=Xe(),e=li().Graph;by={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:h,addBorderNode:f,maxRank:d,partition:p,time:m,notime:_};function n(y,b,k,T){var x;do x=t.uniqueId(T);while(y.hasNode(x));return k.dummy=b,y.setNode(x,k),x}function r(y){var b=new e().setGraph(y.graph());return t.forEach(y.nodes(),function(k){b.setNode(k,y.node(k))}),t.forEach(y.edges(),function(k){var T=b.edge(k.v,k.w)||{weight:0,minlen:1},x=y.edge(k);b.setEdge(k.v,k.w,{weight:T.weight+x.weight,minlen:Math.max(T.minlen,x.minlen)})}),b}function i(y){var b=new e({multigraph:y.isMultigraph()}).setGraph(y.graph());return t.forEach(y.nodes(),function(k){y.children(k).length||b.setNode(k,y.node(k))}),t.forEach(y.edges(),function(k){b.setEdge(k,y.edge(k))}),b}function a(y){var b=t.map(y.nodes(),function(k){var T={};return t.forEach(y.outEdges(k),function(x){T[x.w]=(T[x.w]||0)+y.edge(x).weight}),T});return t.zipObject(y.nodes(),b)}function o(y){var b=t.map(y.nodes(),function(k){var T={};return t.forEach(y.inEdges(k),function(x){T[x.v]=(T[x.v]||0)+y.edge(x).weight}),T});return t.zipObject(y.nodes(),b)}function s(y,b){var k=y.x,T=y.y,x=b.x-k,A=b.y-T,C=y.width/2,L=y.height/2;if(!x&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var S,N;return Math.abs(A)*C>Math.abs(x)*L?(A<0&&(L=-L),S=L*x/A,N=L):(x<0&&(C=-C),S=C,N=C*A/x),{x:k+S,y:T+N}}function l(y){var b=t.map(t.range(d(y)+1),function(){return[]});return t.forEach(y.nodes(),function(k){var T=y.node(k),x=T.rank;t.isUndefined(x)||(b[x][T.order]=k)}),b}function u(y){var b=t.min(t.map(y.nodes(),function(k){return y.node(k).rank}));t.forEach(y.nodes(),function(k){var T=y.node(k);t.has(T,"rank")&&(T.rank-=b)})}function h(y){var b=t.min(t.map(y.nodes(),function(A){return y.node(A).rank})),k=[];t.forEach(y.nodes(),function(A){var C=y.node(A).rank-b;k[C]||(k[C]=[]),k[C].push(A)});var T=0,x=y.graph().nodeRankFactor;t.forEach(k,function(A,C){t.isUndefined(A)&&C%x!==0?--T:T&&t.forEach(A,function(L){y.node(L).rank+=T})})}function f(y,b,k,T){var x={width:0,height:0};return arguments.length>=4&&(x.rank=k,x.order=T),n(y,"border",x,b)}function d(y){return t.max(t.map(y.nodes(),function(b){var k=y.node(b).rank;if(!t.isUndefined(k))return k}))}function p(y,b){var k={lhs:[],rhs:[]};return t.forEach(y,function(T){b(T)?k.lhs.push(T):k.rhs.push(T)}),k}function m(y,b){var k=t.now();try{return b()}finally{console.log(y+" time: "+(t.now()-k)+"ms")}}function _(y,b){return b()}return by}var _y,uk;function pet(){if(uk)return _y;uk=1;var t=Xe(),e=vr();_y={run:n,undo:i};function n(a){a.graph().dummyChains=[],t.forEach(a.edges(),function(o){r(a,o)})}function r(a,o){var s=o.v,l=a.node(s).rank,u=o.w,h=a.node(u).rank,f=o.name,d=a.edge(o),p=d.labelRank;if(h!==l+1){a.removeEdge(o);var m,_,y;for(y=0,++l;l<h;++y,++l)d.points=[],_={width:0,height:0,edgeLabel:d,edgeObj:o,rank:l},m=e.addDummyNode(a,"edge",_,"_d"),l===p&&(_.width=d.width,_.height=d.height,_.dummy="edge-label",_.labelpos=d.labelpos),a.setEdge(s,m,{weight:d.weight},f),y===0&&a.graph().dummyChains.push(m),s=m;a.setEdge(s,u,{weight:d.weight},f)}}function i(a){t.forEach(a.graph().dummyChains,function(o){var s=a.node(o),l=s.edgeLabel,u;for(a.setEdge(s.edgeObj,l);s.dummy;)u=a.successors(o)[0],a.removeNode(o),l.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(l.x=s.x,l.y=s.y,l.width=s.width,l.height=s.height),o=u,s=a.node(o)})}return _y}var vy,hk;function j1(){if(hk)return vy;hk=1;var t=Xe();vy={longestPath:e,slack:n};function e(r){var i={};function a(o){var s=r.node(o);if(t.has(i,o))return s.rank;i[o]=!0;var l=t.min(t.map(r.outEdges(o),function(u){return a(u.w)-r.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),s.rank=l}t.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return vy}var xy,dk;function PM(){if(dk)return xy;dk=1;var t=Xe(),e=li().Graph,n=j1().slack;xy=r;function r(s){var l=new e({directed:!1}),u=s.nodes()[0],h=s.nodeCount();l.setNode(u,{});for(var f,d;i(l,s)<h;)f=a(l,s),d=l.hasNode(f.v)?n(s,f):-n(s,f),o(l,s,d);return l}function i(s,l){function u(h){t.forEach(l.nodeEdges(h),function(f){var d=f.v,p=h===d?f.w:d;!s.hasNode(p)&&!n(l,f)&&(s.setNode(p,{}),s.setEdge(h,p,{}),u(p))})}return t.forEach(s.nodes(),u),s.nodeCount()}function a(s,l){return t.minBy(l.edges(),function(u){if(s.hasNode(u.v)!==s.hasNode(u.w))return n(l,u)})}function o(s,l,u){t.forEach(s.nodes(),function(h){l.node(h).rank+=u})}return xy}var ky,fk;function get(){if(fk)return ky;fk=1;var t=Xe(),e=PM(),n=j1().slack,r=j1().longestPath,i=li().alg.preorder,a=li().alg.postorder,o=vr().simplify;ky=s,s.initLowLimValues=f,s.initCutValues=l,s.calcCutValue=h,s.leaveEdge=p,s.enterEdge=m,s.exchangeEdges=_;function s(T){T=o(T),r(T);var x=e(T);f(x),l(x,T);for(var A,C;A=p(x);)C=m(x,T,A),_(x,T,A,C)}function l(T,x){var A=a(T,T.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(C){u(T,x,C)})}function u(T,x,A){var C=T.node(A),L=C.parent;T.edge(A,L).cutvalue=h(T,x,A)}function h(T,x,A){var C=T.node(A),L=C.parent,S=!0,N=x.edge(A,L),v=0;return N||(S=!1,N=x.edge(L,A)),v=N.weight,t.forEach(x.nodeEdges(A),function(M){var w=M.v===A,R=w?M.w:M.v;if(R!==L){var B=w===S,$=x.edge(M).weight;if(v+=B?$:-$,b(T,A,R)){var F=T.edge(A,R).cutvalue;v+=B?-F:F}}}),v}function f(T,x){arguments.length<2&&(x=T.nodes()[0]),d(T,{},1,x)}function d(T,x,A,C,L){var S=A,N=T.node(C);return x[C]=!0,t.forEach(T.neighbors(C),function(v){t.has(x,v)||(A=d(T,x,A,v,C))}),N.low=S,N.lim=A++,L?N.parent=L:delete N.parent,A}function p(T){return t.find(T.edges(),function(x){return T.edge(x).cutvalue<0})}function m(T,x,A){var C=A.v,L=A.w;x.hasEdge(C,L)||(C=A.w,L=A.v);var S=T.node(C),N=T.node(L),v=S,M=!1;S.lim>N.lim&&(v=N,M=!0);var w=t.filter(x.edges(),function(R){return M===k(T,T.node(R.v),v)&&M!==k(T,T.node(R.w),v)});return t.minBy(w,function(R){return n(x,R)})}function _(T,x,A,C){var L=A.v,S=A.w;T.removeEdge(L,S),T.setEdge(C.v,C.w,{}),f(T),l(T,x),y(T,x)}function y(T,x){var A=t.find(T.nodes(),function(L){return!x.node(L).parent}),C=i(T,A);C=C.slice(1),t.forEach(C,function(L){var S=T.node(L).parent,N=x.edge(L,S),v=!1;N||(N=x.edge(S,L),v=!0),x.node(L).rank=x.node(S).rank+(v?N.minlen:-N.minlen)})}function b(T,x,A){return T.hasEdge(x,A)}function k(T,x,A){return A.low<=x.lim&&x.lim<=A.lim}return ky}var wy,pk;function yet(){if(pk)return wy;pk=1;var t=j1(),e=t.longestPath,n=PM(),r=get();wy=i;function i(l){switch(l.graph().ranker){case"network-simplex":s(l);break;case"tight-tree":o(l);break;case"longest-path":a(l);break;default:s(l)}}var a=e;function o(l){e(l),n(l)}function s(l){r(l)}return wy}var Ty,gk;function met(){if(gk)return Ty;gk=1;var t=Xe();Ty=e;function e(i){var a=r(i);t.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),l=s.edgeObj,u=n(i,a,l.v,l.w),h=u.path,f=u.lca,d=0,p=h[d],m=!0;o!==l.w;){if(s=i.node(o),m){for(;(p=h[d])!==f&&i.node(p).maxRank<s.rank;)d++;p===f&&(m=!1)}if(!m){for(;d<h.length-1&&i.node(p=h[d+1]).minRank<=s.rank;)d++;p=h[d]}i.setParent(o,p),o=i.successors(o)[0]}})}function n(i,a,o,s){var l=[],u=[],h=Math.min(a[o].low,a[s].low),f=Math.max(a[o].lim,a[s].lim),d,p;d=o;do d=i.parent(d),l.push(d);while(d&&(a[d].low>h||f>a[d].lim));for(p=d,d=s;(d=i.parent(d))!==p;)u.push(d);return{path:l.concat(u.reverse()),lca:p}}function r(i){var a={},o=0;function s(l){var u=o;t.forEach(i.children(l),s),a[l]={low:u,lim:o++}}return t.forEach(i.children(),s),a}return Ty}var Ey,yk;function bet(){if(yk)return Ey;yk=1;var t=Xe(),e=vr();Ey={run:n,cleanup:o};function n(s){var l=e.addDummyNode(s,"root",{},"_root"),u=i(s),h=t.max(t.values(u))-1,f=2*h+1;s.graph().nestingRoot=l,t.forEach(s.edges(),function(p){s.edge(p).minlen*=f});var d=a(s)+1;t.forEach(s.children(),function(p){r(s,l,f,d,h,u,p)}),s.graph().nodeRankFactor=f}function r(s,l,u,h,f,d,p){var m=s.children(p);if(!m.length){p!==l&&s.setEdge(l,p,{weight:0,minlen:u});return}var _=e.addBorderNode(s,"_bt"),y=e.addBorderNode(s,"_bb"),b=s.node(p);s.setParent(_,p),b.borderTop=_,s.setParent(y,p),b.borderBottom=y,t.forEach(m,function(k){r(s,l,u,h,f,d,k);var T=s.node(k),x=T.borderTop?T.borderTop:k,A=T.borderBottom?T.borderBottom:k,C=T.borderTop?h:2*h,L=x!==A?1:f-d[p]+1;s.setEdge(_,x,{weight:C,minlen:L,nestingEdge:!0}),s.setEdge(A,y,{weight:C,minlen:L,nestingEdge:!0})}),s.parent(p)||s.setEdge(l,_,{weight:0,minlen:f+d[p]})}function i(s){var l={};function u(h,f){var d=s.children(h);d&&d.length&&t.forEach(d,function(p){u(p,f+1)}),l[h]=f}return t.forEach(s.children(),function(h){u(h,1)}),l}function a(s){return t.reduce(s.edges(),function(l,u){return l+s.edge(u).weight},0)}function o(s){var l=s.graph();s.removeNode(l.nestingRoot),delete l.nestingRoot,t.forEach(s.edges(),function(u){var h=s.edge(u);h.nestingEdge&&s.removeEdge(u)})}return Ey}var Cy,mk;function _et(){if(mk)return Cy;mk=1;var t=Xe(),e=vr();Cy=n;function n(i){function a(o){var s=i.children(o),l=i.node(o);if(s.length&&t.forEach(s,a),t.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,h=l.maxRank+1;u<h;++u)r(i,"borderLeft","_bl",o,l,u),r(i,"borderRight","_br",o,l,u)}}t.forEach(i.children(),a)}function r(i,a,o,s,l,u){var h={width:0,height:0,rank:u,borderType:a},f=l[a][u-1],d=e.addDummyNode(i,"border",h,o);l[a][u]=d,i.setParent(d,s),f&&i.setEdge(f,d,{weight:1})}return Cy}var Sy,bk;function vet(){if(bk)return Sy;bk=1;var t=Xe();Sy={adjust:e,undo:n};function e(u){var h=u.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(u)}function n(u){var h=u.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&a(u),(h==="lr"||h==="rl")&&(s(u),r(u))}function r(u){t.forEach(u.nodes(),function(h){i(u.node(h))}),t.forEach(u.edges(),function(h){i(u.edge(h))})}function i(u){var h=u.width;u.width=u.height,u.height=h}function a(u){t.forEach(u.nodes(),function(h){o(u.node(h))}),t.forEach(u.edges(),function(h){var f=u.edge(h);t.forEach(f.points,o),t.has(f,"y")&&o(f)})}function o(u){u.y=-u.y}function s(u){t.forEach(u.nodes(),function(h){l(u.node(h))}),t.forEach(u.edges(),function(h){var f=u.edge(h);t.forEach(f.points,l),t.has(f,"x")&&l(f)})}function l(u){var h=u.x;u.x=u.y,u.y=h}return Sy}var Ay,_k;function xet(){if(_k)return Ay;_k=1;var t=Xe();Ay=e;function e(n){var r={},i=t.filter(n.nodes(),function(u){return!n.children(u).length}),a=t.max(t.map(i,function(u){return n.node(u).rank})),o=t.map(t.range(a+1),function(){return[]});function s(u){if(!t.has(r,u)){r[u]=!0;var h=n.node(u);o[h.rank].push(u),t.forEach(n.successors(u),s)}}var l=t.sortBy(i,function(u){return n.node(u).rank});return t.forEach(l,s),o}return Ay}var My,vk;function ket(){if(vk)return My;vk=1;var t=Xe();My=e;function e(r,i){for(var a=0,o=1;o<i.length;++o)a+=n(r,i[o-1],i[o]);return a}function n(r,i,a){for(var o=t.zipObject(a,t.map(a,function(d,p){return p})),s=t.flatten(t.map(i,function(d){return t.sortBy(t.map(r.outEdges(d),function(p){return{pos:o[p.w],weight:r.edge(p).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var u=2*l-1;l-=1;var h=t.map(new Array(u),function(){return 0}),f=0;return t.forEach(s.forEach(function(d){var p=d.pos+l;h[p]+=d.weight;for(var m=0;p>0;)p%2&&(m+=h[p+1]),p=p-1>>1,h[p]+=d.weight;f+=d.weight*m})),f}return My}var Ly,xk;function wet(){if(xk)return Ly;xk=1;var t=Xe();Ly=e;function e(n,r){return t.map(r,function(i){var a=n.inEdges(i);if(a.length){var o=t.reduce(a,function(s,l){var u=n.edge(l),h=n.node(l.v);return{sum:s.sum+u.weight*h.order,weight:s.weight+u.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return Ly}var By,kk;function Tet(){if(kk)return By;kk=1;var t=Xe();By=e;function e(i,a){var o={};t.forEach(i,function(l,u){var h=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};t.isUndefined(l.barycenter)||(h.barycenter=l.barycenter,h.weight=l.weight)}),t.forEach(a.edges(),function(l){var u=o[l.v],h=o[l.w];!t.isUndefined(u)&&!t.isUndefined(h)&&(h.indegree++,u.out.push(o[l.w]))});var s=t.filter(o,function(l){return!l.indegree});return n(s)}function n(i){var a=[];function o(u){return function(h){h.merged||(t.isUndefined(h.barycenter)||t.isUndefined(u.barycenter)||h.barycenter>=u.barycenter)&&r(u,h)}}function s(u){return function(h){h.in.push(u),--h.indegree===0&&i.push(h)}}for(;i.length;){var l=i.pop();a.push(l),t.forEach(l.in.reverse(),o(l)),t.forEach(l.out,s(l))}return t.map(t.filter(a,function(u){return!u.merged}),function(u){return t.pick(u,["vs","i","barycenter","weight"])})}function r(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return By}var Dy,wk;function Eet(){if(wk)return Dy;wk=1;var t=Xe(),e=vr();Dy=n;function n(a,o){var s=e.partition(a,function(_){return t.has(_,"barycenter")}),l=s.lhs,u=t.sortBy(s.rhs,function(_){return-_.i}),h=[],f=0,d=0,p=0;l.sort(i(!!o)),p=r(h,u,p),t.forEach(l,function(_){p+=_.vs.length,h.push(_.vs),f+=_.barycenter*_.weight,d+=_.weight,p=r(h,u,p)});var m={vs:t.flatten(h,!0)};return d&&(m.barycenter=f/d,m.weight=d),m}function r(a,o,s){for(var l;o.length&&(l=t.last(o)).i<=s;)o.pop(),a.push(l.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return Dy}var Ny,Tk;function Cet(){if(Tk)return Ny;Tk=1;var t=Xe(),e=wet(),n=Tet(),r=Eet();Ny=i;function i(s,l,u,h){var f=s.children(l),d=s.node(l),p=d?d.borderLeft:void 0,m=d?d.borderRight:void 0,_={};p&&(f=t.filter(f,function(A){return A!==p&&A!==m}));var y=e(s,f);t.forEach(y,function(A){if(s.children(A.v).length){var C=i(s,A.v,u,h);_[A.v]=C,t.has(C,"barycenter")&&o(A,C)}});var b=n(y,u);a(b,_);var k=r(b,h);if(p&&(k.vs=t.flatten([p,k.vs,m],!0),s.predecessors(p).length)){var T=s.node(s.predecessors(p)[0]),x=s.node(s.predecessors(m)[0]);t.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+T.order+x.order)/(k.weight+2),k.weight+=2}return k}function a(s,l){t.forEach(s,function(u){u.vs=t.flatten(u.vs.map(function(h){return l[h]?l[h].vs:h}),!0)})}function o(s,l){t.isUndefined(s.barycenter)?(s.barycenter=l.barycenter,s.weight=l.weight):(s.barycenter=(s.barycenter*s.weight+l.barycenter*l.weight)/(s.weight+l.weight),s.weight+=l.weight)}return Ny}var Oy,Ek;function Aet(){if(Ek)return Oy;Ek=1;var t=Xe(),e=li().Graph;Oy=n;function n(i,a,o){var s=r(i),l=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(u){return i.node(u)});return t.forEach(i.nodes(),function(u){var h=i.node(u),f=i.parent(u);(h.rank===a||h.minRank<=a&&a<=h.maxRank)&&(l.setNode(u),l.setParent(u,f||s),t.forEach(i[o](u),function(d){var p=d.v===u?d.w:d.v,m=l.edge(p,u),_=t.isUndefined(m)?0:m.weight;l.setEdge(p,u,{weight:i.edge(d).weight+_})}),t.has(h,"minRank")&&l.setNode(u,{borderLeft:h.borderLeft[a],borderRight:h.borderRight[a]}))}),l}function r(i){for(var a;i.hasNode(a=t.uniqueId("_root")););return a}return Oy}var Ry,Ck;function Met(){if(Ck)return Ry;Ck=1;var t=Xe();Ry=e;function e(n,r,i){var a={},o;t.forEach(i,function(s){for(var l=n.parent(s),u,h;l;){if(u=n.parent(l),u?(h=a[u],a[u]=l):(h=o,o=l),h&&h!==l){r.setEdge(h,l);return}l=u}})}return Ry}var Iy,Sk;function Let(){if(Sk)return Iy;Sk=1;var t=Xe(),e=xet(),n=ket(),r=Cet(),i=Aet(),a=Met(),o=li().Graph,s=vr();Iy=l;function l(d){var p=s.maxRank(d),m=u(d,t.range(1,p+1),"inEdges"),_=u(d,t.range(p-1,-1,-1),"outEdges"),y=e(d);f(d,y);for(var b=Number.POSITIVE_INFINITY,k,T=0,x=0;x<4;++T,++x){h(T%2?m:_,T%4>=2),y=s.buildLayerMatrix(d);var A=n(d,y);A<b&&(x=0,k=t.cloneDeep(y),b=A)}f(d,k)}function u(d,p,m){return t.map(p,function(_){return i(d,_,m)})}function h(d,p){var m=new o;t.forEach(d,function(_){var y=_.graph().root,b=r(_,y,m,p);t.forEach(b.vs,function(k,T){_.node(k).order=T}),a(_,m,b.vs)})}function f(d,p){t.forEach(p,function(m){t.forEach(m,function(_,y){d.node(_).order=y})})}return Iy}var Fy,Ak;function Bet(){if(Ak)return Fy;Ak=1;var t=Xe(),e=li().Graph,n=vr();Fy={positionX:m,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:f,balance:p};function r(b,k){var T={};function x(A,C){var L=0,S=0,N=A.length,v=t.last(C);return t.forEach(C,function(M,w){var R=a(b,M),B=R?b.node(R).order:N;(R||M===v)&&(t.forEach(C.slice(S,w+1),function($){t.forEach(b.predecessors($),function(F){var Q=b.node(F),nt=Q.order;(nt<L||B<nt)&&!(Q.dummy&&b.node($).dummy)&&o(T,F,$)})}),S=w+1,L=B)}),C}return t.reduce(k,x),T}function i(b,k){var T={};function x(C,L,S,N,v){var M;t.forEach(t.range(L,S),function(w){M=C[w],b.node(M).dummy&&t.forEach(b.predecessors(M),function(R){var B=b.node(R);B.dummy&&(B.order<N||B.order>v)&&o(T,R,M)})})}function A(C,L){var S=-1,N,v=0;return t.forEach(L,function(M,w){if(b.node(M).dummy==="border"){var R=b.predecessors(M);R.length&&(N=b.node(R[0]).order,x(L,v,w,S,N),v=w,S=N)}x(L,v,L.length,N,C.length)}),L}return t.reduce(k,A),T}function a(b,k){if(b.node(k).dummy)return t.find(b.predecessors(k),function(T){return b.node(T).dummy})}function o(b,k,T){if(k>T){var x=k;k=T,T=x}var A=b[k];A||(b[k]=A={}),A[T]=!0}function s(b,k,T){if(k>T){var x=k;k=T,T=x}return t.has(b[k],T)}function l(b,k,T,x){var A={},C={},L={};return t.forEach(k,function(S){t.forEach(S,function(N,v){A[N]=N,C[N]=N,L[N]=v})}),t.forEach(k,function(S){var N=-1;t.forEach(S,function(v){var M=x(v);if(M.length){M=t.sortBy(M,function(F){return L[F]});for(var w=(M.length-1)/2,R=Math.floor(w),B=Math.ceil(w);R<=B;++R){var $=M[R];C[v]===v&&N<L[$]&&!s(T,v,$)&&(C[$]=v,C[v]=A[v]=A[$],N=L[$])}}})}),{root:A,align:C}}function u(b,k,T,x,A){var C={},L=h(b,k,T,A),S=A?"borderLeft":"borderRight";function N(w,R){for(var B=L.nodes(),$=B.pop(),F={};$;)F[$]?w($):(F[$]=!0,B.push($),B=B.concat(R($))),$=B.pop()}function v(w){C[w]=L.inEdges(w).reduce(function(R,B){return Math.max(R,C[B.v]+L.edge(B))},0)}function M(w){var R=L.outEdges(w).reduce(function($,F){return Math.min($,C[F.w]-L.edge(F))},Number.POSITIVE_INFINITY),B=b.node(w);R!==Number.POSITIVE_INFINITY&&B.borderType!==S&&(C[w]=Math.max(C[w],R))}return N(v,L.predecessors.bind(L)),N(M,L.successors.bind(L)),t.forEach(x,function(w){C[w]=C[T[w]]}),C}function h(b,k,T,x){var A=new e,C=b.graph(),L=_(C.nodesep,C.edgesep,x);return t.forEach(k,function(S){var N;t.forEach(S,function(v){var M=T[v];if(A.setNode(M),N){var w=T[N],R=A.edge(w,M);A.setEdge(w,M,Math.max(L(b,v,N),R||0))}N=v})}),A}function f(b,k){return t.minBy(t.values(k),function(T){var x=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(T,function(C,L){var S=y(b,L)/2;x=Math.max(C+S,x),A=Math.min(C-S,A)}),x-A})}function d(b,k){var T=t.values(k),x=t.min(T),A=t.max(T);t.forEach(["u","d"],function(C){t.forEach(["l","r"],function(L){var S=C+L,N=b[S],v;if(N!==k){var M=t.values(N);v=L==="l"?x-t.min(M):A-t.max(M),v&&(b[S]=t.mapValues(N,function(w){return w+v}))}})})}function p(b,k){return t.mapValues(b.ul,function(T,x){if(k)return b[k.toLowerCase()][x];var A=t.sortBy(t.map(b,x));return(A[1]+A[2])/2})}function m(b){var k=n.buildLayerMatrix(b),T=t.merge(r(b,k),i(b,k)),x={},A;t.forEach(["u","d"],function(L){A=L==="u"?k:t.values(k).reverse(),t.forEach(["l","r"],function(S){S==="r"&&(A=t.map(A,function(w){return t.values(w).reverse()}));var N=(L==="u"?b.predecessors:b.successors).bind(b),v=l(b,A,T,N),M=u(b,A,v.root,v.align,S==="r");S==="r"&&(M=t.mapValues(M,function(w){return-w})),x[L+S]=M})});var C=f(b,x);return d(x,C),p(x,b.graph().align)}function _(b,k,T){return function(x,A,C){var L=x.node(A),S=x.node(C),N=0,v;if(N+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":v=-L.width/2;break;case"r":v=L.width/2;break}if(v&&(N+=T?v:-v),v=0,N+=(L.dummy?k:b)/2,N+=(S.dummy?k:b)/2,N+=S.width/2,t.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":v=S.width/2;break;case"r":v=-S.width/2;break}return v&&(N+=T?v:-v),v=0,N}}function y(b,k){return b.node(k).width}return Fy}var $y,Mk;function Det(){if(Mk)return $y;Mk=1;var t=Xe(),e=vr(),n=Bet().positionX;$y=r;function r(a){a=e.asNonCompoundGraph(a),i(a),t.forEach(n(a),function(o,s){a.node(s).x=o})}function i(a){var o=e.buildLayerMatrix(a),s=a.graph().ranksep,l=0;t.forEach(o,function(u){var h=t.max(t.map(u,function(f){return a.node(f).height}));t.forEach(u,function(f){a.node(f).y=l+h/2}),l+=h+s})}return $y}var Py,Lk;function Net(){if(Lk)return Py;Lk=1;var t=Xe(),e=fet(),n=pet(),r=yet(),i=vr().normalizeRanks,a=met(),o=vr().removeEmptyRanks,s=bet(),l=_et(),u=vet(),h=Let(),f=Det(),d=vr(),p=li().Graph;Py=m;function m(Z,q){var it=q&&q.debugTiming?d.time:d.notime;it("layout",function(){var ut=it("  buildLayoutGraph",function(){return N(Z)});it("  runLayout",function(){_(ut,it)}),it("  updateInputGraph",function(){y(Z,ut)})})}function _(Z,q){q("    makeSpaceForEdgeLabels",function(){v(Z)}),q("    removeSelfEdges",function(){z(Z)}),q("    acyclic",function(){e.run(Z)}),q("    nestingGraph.run",function(){s.run(Z)}),q("    rank",function(){r(d.asNonCompoundGraph(Z))}),q("    injectEdgeLabelProxies",function(){M(Z)}),q("    removeEmptyRanks",function(){o(Z)}),q("    nestingGraph.cleanup",function(){s.cleanup(Z)}),q("    normalizeRanks",function(){i(Z)}),q("    assignRankMinMax",function(){w(Z)}),q("    removeEdgeLabelProxies",function(){R(Z)}),q("    normalize.run",function(){n.run(Z)}),q("    parentDummyChains",function(){a(Z)}),q("    addBorderSegments",function(){l(Z)}),q("    order",function(){h(Z)}),q("    insertSelfEdges",function(){Y(Z)}),q("    adjustCoordinateSystem",function(){u.adjust(Z)}),q("    position",function(){f(Z)}),q("    positionSelfEdges",function(){rt(Z)}),q("    removeBorderNodes",function(){nt(Z)}),q("    normalize.undo",function(){n.undo(Z)}),q("    fixupEdgeLabelCoords",function(){F(Z)}),q("    undoCoordinateSystem",function(){u.undo(Z)}),q("    translateGraph",function(){B(Z)}),q("    assignNodeIntersects",function(){$(Z)}),q("    reversePoints",function(){Q(Z)}),q("    acyclic.undo",function(){e.undo(Z)})}function y(Z,q){t.forEach(Z.nodes(),function(it){var ut=Z.node(it),G=q.node(it);ut&&(ut.x=G.x,ut.y=G.y,q.children(it).length&&(ut.width=G.width,ut.height=G.height))}),t.forEach(Z.edges(),function(it){var ut=Z.edge(it),G=q.edge(it);ut.points=G.points,t.has(G,"x")&&(ut.x=G.x,ut.y=G.y)}),Z.graph().width=q.graph().width,Z.graph().height=q.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T=["acyclicer","ranker","rankdir","align"],x=["width","height"],A={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],L={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function N(Z){var q=new p({multigraph:!0,compound:!0}),it=J(Z.graph());return q.setGraph(t.merge({},k,lt(it,b),t.pick(it,T))),t.forEach(Z.nodes(),function(ut){var G=J(Z.node(ut));q.setNode(ut,t.defaults(lt(G,x),A)),q.setParent(ut,Z.parent(ut))}),t.forEach(Z.edges(),function(ut){var G=J(Z.edge(ut));q.setEdge(ut,t.merge({},L,lt(G,C),t.pick(G,S)))}),q}function v(Z){var q=Z.graph();q.ranksep/=2,t.forEach(Z.edges(),function(it){var ut=Z.edge(it);ut.minlen*=2,ut.labelpos.toLowerCase()!=="c"&&(q.rankdir==="TB"||q.rankdir==="BT"?ut.width+=ut.labeloffset:ut.height+=ut.labeloffset)})}function M(Z){t.forEach(Z.edges(),function(q){var it=Z.edge(q);if(it.width&&it.height){var ut=Z.node(q.v),G=Z.node(q.w),j={rank:(G.rank-ut.rank)/2+ut.rank,e:q};d.addDummyNode(Z,"edge-proxy",j,"_ep")}})}function w(Z){var q=0;t.forEach(Z.nodes(),function(it){var ut=Z.node(it);ut.borderTop&&(ut.minRank=Z.node(ut.borderTop).rank,ut.maxRank=Z.node(ut.borderBottom).rank,q=t.max(q,ut.maxRank))}),Z.graph().maxRank=q}function R(Z){t.forEach(Z.nodes(),function(q){var it=Z.node(q);it.dummy==="edge-proxy"&&(Z.edge(it.e).labelRank=it.rank,Z.removeNode(q))})}function B(Z){var q=Number.POSITIVE_INFINITY,it=0,ut=Number.POSITIVE_INFINITY,G=0,j=Z.graph(),P=j.marginx||0,X=j.marginy||0;function O(V){var U=V.x,H=V.y,xt=V.width,ot=V.height;q=Math.min(q,U-xt/2),it=Math.max(it,U+xt/2),ut=Math.min(ut,H-ot/2),G=Math.max(G,H+ot/2)}t.forEach(Z.nodes(),function(V){O(Z.node(V))}),t.forEach(Z.edges(),function(V){var U=Z.edge(V);t.has(U,"x")&&O(U)}),q-=P,ut-=X,t.forEach(Z.nodes(),function(V){var U=Z.node(V);U.x-=q,U.y-=ut}),t.forEach(Z.edges(),function(V){var U=Z.edge(V);t.forEach(U.points,function(H){H.x-=q,H.y-=ut}),t.has(U,"x")&&(U.x-=q),t.has(U,"y")&&(U.y-=ut)}),j.width=it-q+P,j.height=G-ut+X}function $(Z){t.forEach(Z.edges(),function(q){var it=Z.edge(q),ut=Z.node(q.v),G=Z.node(q.w),j,P;it.points?(j=it.points[0],P=it.points[it.points.length-1]):(it.points=[],j=G,P=ut),it.points.unshift(d.intersectRect(ut,j)),it.points.push(d.intersectRect(G,P))})}function F(Z){t.forEach(Z.edges(),function(q){var it=Z.edge(q);if(t.has(it,"x"))switch((it.labelpos==="l"||it.labelpos==="r")&&(it.width-=it.labeloffset),it.labelpos){case"l":it.x-=it.width/2+it.labeloffset;break;case"r":it.x+=it.width/2+it.labeloffset;break}})}function Q(Z){t.forEach(Z.edges(),function(q){var it=Z.edge(q);it.reversed&&it.points.reverse()})}function nt(Z){t.forEach(Z.nodes(),function(q){if(Z.children(q).length){var it=Z.node(q),ut=Z.node(it.borderTop),G=Z.node(it.borderBottom),j=Z.node(t.last(it.borderLeft)),P=Z.node(t.last(it.borderRight));it.width=Math.abs(P.x-j.x),it.height=Math.abs(G.y-ut.y),it.x=j.x+it.width/2,it.y=ut.y+it.height/2}}),t.forEach(Z.nodes(),function(q){Z.node(q).dummy==="border"&&Z.removeNode(q)})}function z(Z){t.forEach(Z.edges(),function(q){if(q.v===q.w){var it=Z.node(q.v);it.selfEdges||(it.selfEdges=[]),it.selfEdges.push({e:q,label:Z.edge(q)}),Z.removeEdge(q)}})}function Y(Z){var q=d.buildLayerMatrix(Z);t.forEach(q,function(it){var ut=0;t.forEach(it,function(G,j){var P=Z.node(G);P.order=j+ut,t.forEach(P.selfEdges,function(X){d.addDummyNode(Z,"selfedge",{width:X.label.width,height:X.label.height,rank:P.rank,order:j+ ++ut,e:X.e,label:X.label},"_se")}),delete P.selfEdges})})}function rt(Z){t.forEach(Z.nodes(),function(q){var it=Z.node(q);if(it.dummy==="selfedge"){var ut=Z.node(it.e.v),G=ut.x+ut.width/2,j=ut.y,P=it.x-G,X=ut.height/2;Z.setEdge(it.e,it.label),Z.removeNode(q),it.label.points=[{x:G+2*P/3,y:j-X},{x:G+5*P/6,y:j-X},{x:G+P,y:j},{x:G+5*P/6,y:j+X},{x:G+2*P/3,y:j+X}],it.label.x=it.x,it.label.y=it.y}})}function lt(Z,q){return t.mapValues(t.pick(Z,q),Number)}function J(Z){var q={};return t.forEach(Z,function(it,ut){q[ut.toLowerCase()]=it}),q}return Py}var Yy,Bk;function Oet(){if(Bk)return Yy;Bk=1;var t=Xe(),e=vr(),n=li().Graph;Yy={debugOrdering:r};function r(i){var a=e.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),t.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),t.forEach(a,function(s,l){var u="layer"+l;o.setNode(u,{rank:"same"}),t.reduce(s,function(h,f){return o.setEdge(h,f,{style:"invis"}),f})}),o}return Yy}var Dk,Nk;function Ret(){return Nk||(Nk=1,Dk="0.8.5"),Dk}var Ok,Rk;function YM(){return Rk||(Rk=1,Ok={graphlib:li(),layout:Net(),debug:Oet(),util:{time:vr().time,notime:vr().notime},version:Ret()}),Ok}var gu=YM();let Ik=0;const Iet=function(t,e,n,r,i){const a=function(k){switch(k){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.EXTENSION:return"extension";case i.db.COMPOSITION:return"composition";case i.db.DEPENDENCY:return"dependency";case i.db.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(k=>!Number.isNaN(k.y));const o=e.points,s=no().x(function(k){return k.x}).y(function(k){return k.y}).curve(Io),l=t.append("path").attr("d",s(o)).attr("id","edge"+Ik).attr("class","relation");let u="";r.arrowMarkerAbsolute&&(u=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,u=u.replace(/\(/g,"\\("),u=u.replace(/\)/g,"\\)")),n.relation.lineType==1&&l.attr("class","relation dashed-line"),n.relation.type1!=="none"&&l.attr("marker-start","url("+u+"#"+a(n.relation.type1)+"Start)"),n.relation.type2!=="none"&&l.attr("marker-end","url("+u+"#"+a(n.relation.type2)+"End)");let h,f;const d=e.points.length;let p=we.calcLabelPosition(e.points);h=p.x,f=p.y;let m,_,y,b;if(d%2!==0&&d>1){let k=we.calcCardinalityPosition(n.relation.type1!=="none",e.points,e.points[0]),T=we.calcCardinalityPosition(n.relation.type2!=="none",e.points,e.points[d-1]);W.debug("cardinality_1_point "+JSON.stringify(k)),W.debug("cardinality_2_point "+JSON.stringify(T)),m=k.x,_=k.y,y=T.x,b=T.y}if(typeof n.title<"u"){const k=t.append("g").attr("class","classLabel"),T=k.append("text").attr("class","label").attr("x",h).attr("y",f).attr("fill","red").attr("text-anchor","middle").text(n.title);window.label=T;const x=T.node().getBBox();k.insert("rect",":first-child").attr("class","box").attr("x",x.x-r.padding/2).attr("y",x.y-r.padding/2).attr("width",x.width+r.padding).attr("height",x.height+r.padding)}W.info("Rendering relation "+JSON.stringify(n)),typeof n.relationTitle1<"u"&&n.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",m).attr("y",_).attr("fill","black").attr("font-size","6").text(n.relationTitle1),typeof n.relationTitle2<"u"&&n.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",y).attr("y",b).attr("fill","black").attr("font-size","6").text(n.relationTitle2),Ik++},Fet=function(t,e,n,r){W.debug("Rendering class ",e,n);const i=e.id,a={id:i,label:e.id,width:0,height:0},o=t.append("g").attr("id",r.db.lookUpDomId(i)).attr("class","classGroup");let s;e.link?s=o.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",n.textHeight+n.padding).attr("x",0):s=o.append("text").attr("y",n.textHeight+n.padding).attr("x",0);let l=!0;e.annotations.forEach(function(x){const A=s.append("tspan").text("«"+x+"»");l||A.attr("dy",n.textHeight),l=!1});let u=e.id;e.type!==void 0&&e.type!==""&&(u+="<"+e.type+">");const h=s.append("tspan").text(u).attr("class","title");l||h.attr("dy",n.textHeight);const f=s.node().getBBox().height,d=o.append("line").attr("x1",0).attr("y1",n.padding+f+n.dividerMargin/2).attr("y2",n.padding+f+n.dividerMargin/2),p=o.append("text").attr("x",n.padding).attr("y",f+n.dividerMargin+n.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(x){Fk(p,x,l,n),l=!1});const m=p.node().getBBox(),_=o.append("line").attr("x1",0).attr("y1",n.padding+f+n.dividerMargin+m.height).attr("y2",n.padding+f+n.dividerMargin+m.height),y=o.append("text").attr("x",n.padding).attr("y",f+2*n.dividerMargin+m.height+n.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(x){Fk(y,x,l,n),l=!1});const b=o.node().getBBox();var k=" ";e.cssClasses.length>0&&(k=k+e.cssClasses.join(" "));const T=o.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",b.width+2*n.padding).attr("height",b.height+n.padding+.5*n.dividerMargin).attr("class",k).node().getBBox().width;return s.node().childNodes.forEach(function(x){x.setAttribute("x",(T-x.getBBox().width)/2)}),e.tooltip&&s.insert("title").text(e.tooltip),d.attr("x2",T),_.attr("x2",T),a.width=T,a.height=b.height+n.padding+.5*n.dividerMargin,a},U1=function(t){const e=/^(\+|-|~|#)?(\w+)(~\w+~|\[\])?\s+(\w+) *(\*|\$)?$/,n=/^([+|\-|~|#])?(\w+) *\( *(.*)\) *(\*|\$)? *(\w*[~|[\]]*\s*\w*~?)$/;let r=t.match(e),i=t.match(n);return r&&!i?$et(r):i?Pet(i):Yet(t)},$et=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",a=t[3]?Pa(t[3].trim()):"",o=t[4]?t[4].trim():"",s=t[5]?t[5].trim():"";n=r+i+a+" "+o,e=jb(s)}catch{n=t}return{displayText:n,cssStyle:e}},Pet=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",a=t[3]?Pa(t[3].trim()):"",o=t[4]?t[4].trim():"",s=t[5]?" : "+Pa(t[5]).trim():"";n=r+i+"("+a+")"+s,e=jb(o)}catch{n=t}return{displayText:n,cssStyle:e}},Yet=function(t){let e="",n="",r="",i=t.indexOf("("),a=t.indexOf(")");if(i>1&&a>i&&a<=t.length){let o="",s="",l=t.substring(0,1);l.match(/\w/)?s=t.substring(0,i).trim():(l.match(/\+|-|~|#/)&&(o=l),s=t.substring(1,i).trim());const u=t.substring(i+1,a);t.substring(a+1,1),n=jb(t.substring(a+1,a+2)),e=o+s+"("+Pa(u.trim())+")",a<t.length&&(r=t.substring(a+2).trim(),r!==""&&(r=" : "+Pa(r),e+=r))}else e=Pa(t);return{displayText:e,cssStyle:n}},Fk=function(t,e,n,r){let i=U1(e);const a=t.append("tspan").attr("x",r.padding).text(i.displayText);i.cssStyle!==""&&a.attr("style",i.cssStyle),n||a.attr("dy",r.textHeight)},jb=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},$k={drawClass:Fet,drawEdge:Iet,parseMember:U1};let g3={};const ih=20,ah=function(t){const e=Object.entries(g3).find(n=>n[1].label===t);if(e)return e[0]},zet=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},jet=function(t,e,n,r){const i=at().class;g3={},W.info("Rendering diagram "+t);const a=at().securityLevel;let o;a==="sandbox"&&(o=Lt("#i"+e));const s=Lt(a==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=s.select(`[id='${e}']`);zet(l);const u=new dn.Graph({multigraph:!0});u.setGraph({isMultiGraph:!0}),u.setDefaultEdgeLabel(function(){return{}});const h=r.db.getClasses(),f=Object.keys(h);for(let y=0;y<f.length;y++){const b=h[f[y]],k=$k.drawClass(l,b,i,r);g3[k.id]=k,u.setNode(k.id,k),W.info("Org height: "+k.height)}r.db.getRelations().forEach(function(y){W.info("tjoho"+ah(y.id1)+ah(y.id2)+JSON.stringify(y)),u.setEdge(ah(y.id1),ah(y.id2),{relation:y},y.title||"DEFAULT")}),gu.layout(u),u.nodes().forEach(function(y){typeof y<"u"&&typeof u.node(y)<"u"&&(W.debug("Node "+y+": "+JSON.stringify(u.node(y))),s.select("#"+r.db.lookUpDomId(y)).attr("transform","translate("+(u.node(y).x-u.node(y).width/2)+","+(u.node(y).y-u.node(y).height/2)+" )"))}),u.edges().forEach(function(y){typeof y<"u"&&typeof u.edge(y)<"u"&&(W.debug("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(u.edge(y))),$k.drawEdge(l,u.edge(y),u.edge(y).relation,i,r))});const d=l.node().getBBox(),p=d.width+ih*2,m=d.height+ih*2;fi(l,m,p,i.useMaxWidth);const _=`${d.x-ih} ${d.y-ih} ${p} ${m}`;W.debug(`viewBox ${_}`),l.attr("viewBox",_),xr(r.db,l,e)},Uet={draw:jet},Het=(t,e,n,r)=>{e.forEach(i=>{tnt[i](t,n,r)})},Wet=(t,e,n)=>{W.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},Get=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},Vet=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},qet=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Xet=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},Ket=(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Zet=(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},Qet=(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},Jet=(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},tnt={extension:Wet,composition:Get,aggregation:Vet,dependency:qet,lollipop:Xet,point:Ket,circle:Zet,cross:Qet,barb:Jet};function ent(t,e){e&&t.attr("style",e)}function nnt(t){const e=Lt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=t.label,i=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+i+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),ent(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const mr=(t,e,n,r)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),Mn(at().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),W.info("vertexText"+i);const a={isNode:r,label:Sd(i).replace(/fa[lrsb]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return nnt(a)}else{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(let s=0;s<o.length;s++){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o[s].trim(),a.appendChild(l)}return a}},Gn=(t,e,n,r)=>{let i;n?i=n:i="node default";const a=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let s;typeof e.labelText>"u"?s="":s=typeof e.labelText=="string"?e.labelText:e.labelText[0];const l=o.node().appendChild(mr(si(Sd(s),at()),e.labelStyle,!1,r));let u=l.getBBox();if(Mn(at().flowchart.htmlLabels)){const f=l.children[0],d=Lt(l);u=f.getBoundingClientRect(),d.attr("width",u.width),d.attr("height",u.height)}const h=e.padding/2;return o.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),{shapeSvg:a,bbox:u,halfPadding:h,label:o}},fn=(t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height};function _a(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}let Le={},ti={},zM={};const rnt=()=>{ti={},zM={},Le={}},H1=(t,e)=>(W.trace("In isDecendant",e," ",t," = ",ti[e].indexOf(t)>=0),ti[e].indexOf(t)>=0),int=(t,e)=>(W.info("Decendants of ",e," is ",ti[e]),W.info("Edge is ",t),t.v===e||t.w===e?!1:ti[e]?!!(ti[e].indexOf(t.v)>=0||H1(t.v,e)||H1(t.w,e)||ti[e].indexOf(t.w)>=0):(W.debug("Tilt, ",e,",not in decendants"),!1)),jM=(t,e,n,r)=>{W.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const i=e.children(t)||[];t!==r&&i.push(t),W.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach(a=>{if(e.children(a).length>0)jM(a,e,n,r);else{const o=e.node(a);W.info("cp ",a," to ",r," with parent ",t),n.setNode(a,o),r!==e.parent(a)&&(W.warn("Setting parent",a,e.parent(a)),n.setParent(a,e.parent(a))),t!==r&&a!==t?(W.debug("Setting parent",a,t),n.setParent(a,t)):(W.info("In copy ",t,"root",r,"data",e.node(t),r),W.debug("Not Setting parent for node=",a,"cluster!==rootId",t!==r,"node!==clusterId",a!==t));const s=e.edges(a);W.debug("Copying Edges",s),s.forEach(l=>{W.info("Edge",l);const u=e.edge(l.v,l.w,l.name);W.info("Edge data",u,r);try{int(l,r)?(W.info("Copying as ",l.v,l.w,u,l.name),n.setEdge(l.v,l.w,u,l.name),W.info("newGraph edges ",n.edges(),n.edge(n.edges()[0]))):W.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(h){W.error(h)}})}W.debug("Removing node",a),e.removeNode(a)})},UM=(t,e)=>{const n=e.children(t);let r=[].concat(n);for(let i=0;i<n.length;i++)zM[n[i]]=t,r=r.concat(UM(n[i],e));return r},Wl=(t,e)=>{W.trace("Searching",t);const n=e.children(t);if(W.trace("Searching children of id ",t,n),n.length<1)return W.trace("This is a valid node",t),t;for(let r=0;r<n.length;r++){const i=Wl(n[r],e);if(i)return W.trace("Found replacement for",t," => ",i),i}},oh=t=>!Le[t]||!Le[t].externalConnections?t:Le[t]?Le[t].id:t,ant=(t,e)=>{if(!t||e>10){W.debug("Opting out, no graph ");return}else W.debug("Opting in, graph ");t.nodes().forEach(function(n){t.children(n).length>0&&(W.warn("Cluster identified",n," Replacement id in edges: ",Wl(n,t)),ti[n]=UM(n,t),Le[n]={id:Wl(n,t),clusterData:t.node(n)})}),t.nodes().forEach(function(n){const r=t.children(n),i=t.edges();r.length>0?(W.debug("Cluster identified",n,ti),i.forEach(a=>{if(a.v!==n&&a.w!==n){const o=H1(a.v,n),s=H1(a.w,n);o^s&&(W.warn("Edge: ",a," leaves cluster ",n),W.warn("Decendants of XXX ",n,": ",ti[n]),Le[n].externalConnections=!0)}})):W.debug("Not a cluster ",n,ti)}),t.edges().forEach(function(n){const r=t.edge(n);W.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(n)),W.warn("Edge "+n.v+" -> "+n.w+": "+JSON.stringify(t.edge(n)));let i=n.v,a=n.w;if(W.warn("Fix XXX",Le,"ids:",n.v,n.w,"Translateing: ",Le[n.v]," --- ",Le[n.w]),Le[n.v]&&Le[n.w]&&Le[n.v]===Le[n.w]){W.warn("Fixing and trixing link to self - removing XXX",n.v,n.w,n.name),W.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),i=oh(n.v),a=oh(n.w),t.removeEdge(n.v,n.w,n.name);const o=n.w+"---"+n.v;t.setNode(o,{domId:o,id:o,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const s=JSON.parse(JSON.stringify(r)),l=JSON.parse(JSON.stringify(r));s.label="",s.arrowTypeEnd="none",l.label="",s.fromCluster=n.v,l.toCluster=n.v,t.setEdge(i,o,s,n.name+"-cyclic-special"),t.setEdge(o,a,l,n.name+"-cyclic-special")}else(Le[n.v]||Le[n.w])&&(W.warn("Fixing and trixing - removing XXX",n.v,n.w,n.name),i=oh(n.v),a=oh(n.w),t.removeEdge(n.v,n.w,n.name),i!==n.v&&(r.fromCluster=n.v),a!==n.w&&(r.toCluster=n.w),W.warn("Fix Replacing with XXX",i,a,n.name),t.setEdge(i,a,r,n.name))}),W.warn("Adjusted Graph",dn.json.write(t)),HM(t,0),W.trace(Le)},HM=(t,e)=>{if(W.warn("extractor - ",e,dn.json.write(t),t.children("D")),e>10){W.error("Bailing out");return}let n=t.nodes(),r=!1;for(let i=0;i<n.length;i++){const a=n[i],o=t.children(a);r=r||o.length>0}if(!r){W.debug("Done, no node has children",t.nodes());return}W.debug("Nodes = ",n,e);for(let i=0;i<n.length;i++){const a=n[i];if(W.debug("Extracting node",a,Le,Le[a]&&!Le[a].externalConnections,!t.parent(a),t.node(a),t.children("D")," Depth ",e),!Le[a])W.debug("Not a cluster",a,e);else if(!Le[a].externalConnections&&t.children(a)&&t.children(a).length>0){W.warn("Cluster without external connections, without a parent and with children",a,e);let o=t.graph().rankdir==="TB"?"LR":"TB";Le[a]&&Le[a].clusterData&&Le[a].clusterData.dir&&(o=Le[a].clusterData.dir,W.warn("Fixing dir",Le[a].clusterData.dir,o));const s=new dn.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:o,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});W.warn("Old graph before copy",dn.json.write(t)),jM(a,t,s,a),t.setNode(a,{clusterNode:!0,id:a,clusterData:Le[a].clusterData,labelText:Le[a].labelText,graph:s}),W.warn("New graph after copy node: (",a,")",dn.json.write(s)),W.debug("Old graph after copy",dn.json.write(t))}else W.warn("Cluster ** ",a," **not meeting the criteria !externalConnections:",!Le[a].externalConnections," no parent: ",!t.parent(a)," children ",t.children(a)&&t.children(a).length>0,t.children("D"),e),W.debug(Le)}n=t.nodes(),W.warn("New list of nodes",n);for(let i=0;i<n.length;i++){const a=n[i],o=t.node(a);W.warn(" Now next level",a,o),o.clusterNode&&HM(o.graph,e+1)}},WM=(t,e)=>{if(e.length===0)return[];let n=Object.assign(e);return e.forEach(r=>{const i=t.children(r),a=WM(t,i);n=n.concat(a)}),n},ont=t=>WM(t,t.children());function snt(t,e){return t.intersect(e)}function GM(t,e,n,r){var i=t.x,a=t.y,o=i-r.x,s=a-r.y,l=Math.sqrt(e*e*s*s+n*n*o*o),u=Math.abs(e*n*o/l);r.x<i&&(u=-u);var h=Math.abs(e*n*s/l);return r.y<a&&(h=-h),{x:i+u,y:a+h}}function cnt(t,e,n){return GM(t,e,e,n)}function lnt(t,e,n,r){var i,a,o,s,l,u,h,f,d,p,m,_,y,b,k;if(i=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,d=i*n.x+o*n.y+l,p=i*r.x+o*r.y+l,!(d!==0&&p!==0&&Pk(d,p))&&(a=r.y-n.y,s=n.x-r.x,u=r.x*n.y-n.x*r.y,h=a*t.x+s*t.y+u,f=a*e.x+s*e.y+u,!(h!==0&&f!==0&&Pk(h,f))&&(m=i*s-a*o,m!==0)))return _=Math.abs(m/2),y=o*u-s*l,b=y<0?(y-_)/m:(y+_)/m,y=a*l-i*u,k=y<0?(y-_)/m:(y+_)/m,{x:b,y:k}}function Pk(t,e){return t*e>0}function unt(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(m){o=Math.min(o,m.x),s=Math.min(s,m.y)}):(o=Math.min(o,e.x),s=Math.min(s,e.y));for(var l=r-t.width/2-o,u=i-t.height/2-s,h=0;h<e.length;h++){var f=e[h],d=e[h<e.length-1?h+1:0],p=lnt(t,n,{x:l+f.x,y:u+f.y},{x:l+d.x,y:u+d.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort(function(m,_){var y=m.x-n.x,b=m.y-n.y,k=Math.sqrt(y*y+b*b),T=_.x-n.x,x=_.y-n.y,A=Math.sqrt(T*T+x*x);return k<A?-1:k===A?0:1}),a[0]):t}const yu=(t,e)=>{var n=t.x,r=t.y,i=e.x-n,a=e.y-r,o=t.width/2,s=t.height/2,l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=a===0?0:s*i/a,u=s):(i<0&&(o=-o),l=o,u=i===0?0:o*a/i),{x:n+l,y:r+u}},cn={node:snt,circle:cnt,ellipse:GM,polygon:unt,rect:yu},hnt=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Gn(t,e,"node "+e.classes,!0);W.info("Classes = ",e.classes);const a=n.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),fn(e,a),e.intersect=function(o){return cn.rect(e,o)},n},dnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=i+a,s=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}];W.info("Question main (Circle)");const l=_a(n,o,o,s);return l.attr("style",e.style),fn(e,l),e.intersect=function(u){return W.warn("Intersect called"),cn.polygon(e,s,u)},n},fnt=(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,i=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return n.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return cn.circle(e,14,a)},n},pnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=4,a=r.height+e.padding,o=a/i,s=r.width+2*o+e.padding,l=[{x:o,y:0},{x:s-o,y:0},{x:s,y:-a/2},{x:s-o,y:-a},{x:o,y:-a},{x:0,y:-a/2}],u=_a(n,s,a,l);return u.attr("style",e.style),fn(e,u),e.intersect=function(h){return cn.polygon(e,l,h)},n},gnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return _a(n,i,a,o).attr("style",e.style),e.width=i+a,e.height=a,e.intersect=function(s){return cn.polygon(e,o,s)},n},ynt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],s=_a(n,i,a,o);return s.attr("style",e.style),fn(e,s),e.intersect=function(l){return cn.polygon(e,o,l)},n},mnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],s=_a(n,i,a,o);return s.attr("style",e.style),fn(e,s),e.intersect=function(l){return cn.polygon(e,o,l)},n},bnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],s=_a(n,i,a,o);return s.attr("style",e.style),fn(e,s),e.intersect=function(l){return cn.polygon(e,o,l)},n},_nt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=_a(n,i,a,o);return s.attr("style",e.style),fn(e,s),e.intersect=function(l){return cn.polygon(e,o,l)},n},vnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],s=_a(n,i,a,o);return s.attr("style",e.style),fn(e,s),e.intersect=function(l){return cn.polygon(e,o,l)},n},xnt=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=i/2,o=a/(2.5+i/50),s=r.height+o+e.padding,l="M 0,"+o+" a "+a+","+o+" 0,0,0 "+i+" 0 a "+a+","+o+" 0,0,0 "+-i+" 0 l 0,"+s+" a "+a+","+o+" 0,0,0 "+i+" 0 l 0,"+-s,u=n.attr("label-offset-y",o).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-i/2+","+-(s/2+o)+")");return fn(e,u),e.intersect=function(h){const f=cn.rect(e,h),d=f.x-e.x;if(a!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(f.y-e.y)>e.height/2-o)){let p=o*o*(1-d*d/(a*a));p!=0&&(p=Math.sqrt(p)),p=o-p,h.y-e.y>0&&(p=-p),f.y+=p}return f},n},knt=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Gn(t,e,"node "+e.classes,!0);W.trace("Classes = ",e.classes);const a=n.insert("rect",":first-child"),o=r.width+e.padding,s=r.height+e.padding;if(a.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",o).attr("height",s),e.props){const l=new Set(Object.keys(e.props));e.props.borders&&(VM(a,e.props.borders,o,s),l.delete("borders")),l.forEach(u=>{W.warn(`Unknown node property ${u}`)})}return fn(e,a),e.intersect=function(l){return cn.rect(e,l)},n},wnt=(t,e)=>{const{shapeSvg:n}=Gn(t,e,"label",!0);W.trace("Classes = ",e.classes);const r=n.insert("rect",":first-child"),i=0,a=0;if(r.attr("width",i).attr("height",a),n.attr("class","label edgeLabel"),e.props){const o=new Set(Object.keys(e.props));e.props.borders&&(VM(r,e.props.borders,i,a),o.delete("borders")),o.forEach(s=>{W.warn(`Unknown node property ${s}`)})}return fn(e,r),e.intersect=function(o){return cn.rect(e,o)},n};function VM(t,e,n,r){const i=[],a=s=>{i.push(s),i.push(0)},o=s=>{i.push(0),i.push(s)};e.includes("t")?(W.debug("add top border"),a(n)):o(n),e.includes("r")?(W.debug("add right border"),a(r)):o(r),e.includes("b")?(W.debug("add bottom border"),a(n)):o(n),e.includes("l")?(W.debug("add left border"),a(r)):o(r),t.attr("stroke-dasharray",i.join(" "))}const Tnt=(t,e)=>{let n;e.classes?n="node "+e.classes:n="node default";const r=t.insert("g").attr("class",n).attr("id",e.domId||e.id),i=r.insert("rect",":first-child"),a=r.insert("line"),o=r.insert("g").attr("class","label"),s=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof s=="object"?l=s[0]:l=s,W.info("Label text abc79",l,s,typeof s=="object");const u=o.node().appendChild(mr(l,e.labelStyle,!0,!0));let h={width:0,height:0};if(Mn(at().flowchart.htmlLabels)){const _=u.children[0],y=Lt(u);h=_.getBoundingClientRect(),y.attr("width",h.width),y.attr("height",h.height)}W.info("Text 2",s);const f=s.slice(1,s.length);let d=u.getBBox();const p=o.node().appendChild(mr(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0));if(Mn(at().flowchart.htmlLabels)){const _=p.children[0],y=Lt(p);h=_.getBoundingClientRect(),y.attr("width",h.width),y.attr("height",h.height)}const m=e.padding/2;return Lt(p).attr("transform","translate( "+(h.width>d.width?0:(d.width-h.width)/2)+", "+(d.height+m+5)+")"),Lt(u).attr("transform","translate( "+(h.width<d.width?0:-(d.width-h.width)/2)+", "+0+")"),h=o.node().getBBox(),o.attr("transform","translate("+-h.width/2+", "+(-h.height/2-m+3)+")"),i.attr("class","outer title-state").attr("x",-h.width/2-m).attr("y",-h.height/2-m).attr("width",h.width+e.padding).attr("height",h.height+e.padding),a.attr("class","divider").attr("x1",-h.width/2-m).attr("x2",h.width/2+m).attr("y1",-h.height/2-m+d.height+m).attr("y2",-h.height/2-m+d.height+m),fn(e,i),e.intersect=function(_){return cn.rect(e,_)},r},Ent=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.height+e.padding,a=r.width+i/4+e.padding,o=n.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return fn(e,o),e.intersect=function(s){return cn.rect(e,s)},n},Cnt=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Gn(t,e,void 0,!0),a=n.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),W.info("Circle main"),fn(e,a),e.intersect=function(o){return W.info("Circle intersect",e,r.width/2+i,o),cn.circle(e,r.width/2+i,o)},n},Snt=(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=Gn(t,e,void 0,!0),a=5,o=n.insert("g",":first-child"),s=o.insert("circle"),l=o.insert("circle");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i+a).attr("width",r.width+e.padding+a*2).attr("height",r.height+e.padding+a*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),W.info("DoubleCircle main"),fn(e,s),e.intersect=function(u){return W.info("DoubleCircle intersect",e,r.width/2+i+a,u),cn.circle(e,r.width/2+i+a,u)},n},Ant=(t,e)=>{const{shapeSvg:n,bbox:r}=Gn(t,e,void 0,!0),i=r.width+e.padding,a=r.height+e.padding,o=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=_a(n,i,a,o);return s.attr("style",e.style),fn(e,s),e.intersect=function(l){return cn.polygon(e,o,l)},n},Mnt=(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),fn(e,r),e.intersect=function(i){return cn.circle(e,7,i)},n},Yk=(t,e,n)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,a=10;n==="LR"&&(i=10,a=70);const o=r.append("rect").attr("x",-1*i/2).attr("y",-1*a/2).attr("width",i).attr("height",a).attr("class","fork-join");return fn(e,o),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(s){return cn.rect(e,s)},r},Lnt=(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child"),i=n.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),fn(e,i),e.intersect=function(a){return cn.circle(e,7,a)},n},Bnt=(t,e)=>{const n=e.padding/2,r=4,i=8;let a;e.classes?a="node "+e.classes:a="node default";const o=t.insert("g").attr("class",a).attr("id",e.domId||e.id),s=o.insert("rect",":first-child"),l=o.insert("line"),u=o.insert("line");let h=0,f=r;const d=o.insert("g").attr("class","label");let p=0;const m=e.classData.annotations&&e.classData.annotations[0],_=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",y=d.node().appendChild(mr(_,e.labelStyle,!0,!0));let b=y.getBBox();if(Mn(at().flowchart.htmlLabels)){const S=y.children[0],N=Lt(y);b=S.getBoundingClientRect(),N.attr("width",b.width),N.attr("height",b.height)}e.classData.annotations[0]&&(f+=b.height+r,h+=b.width);let k=e.classData.id;e.classData.type!==void 0&&e.classData.type!==""&&(at().flowchart.htmlLabels?k+="&lt;"+e.classData.type+"&gt;":k+="<"+e.classData.type+">");const T=d.node().appendChild(mr(k,e.labelStyle,!0,!0));Lt(T).attr("class","classTitle");let x=T.getBBox();if(Mn(at().flowchart.htmlLabels)){const S=T.children[0],N=Lt(T);x=S.getBoundingClientRect(),N.attr("width",x.width),N.attr("height",x.height)}f+=x.height+r,x.width>h&&(h=x.width);const A=[];e.classData.members.forEach(S=>{const N=U1(S);let v=N.displayText;at().flowchart.htmlLabels&&(v=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const M=d.node().appendChild(mr(v,N.cssStyle?N.cssStyle:e.labelStyle,!0,!0));let w=M.getBBox();if(Mn(at().flowchart.htmlLabels)){const R=M.children[0],B=Lt(M);w=R.getBoundingClientRect(),B.attr("width",w.width),B.attr("height",w.height)}w.width>h&&(h=w.width),f+=w.height+r,A.push(M)}),f+=i;const C=[];if(e.classData.methods.forEach(S=>{const N=U1(S);let v=N.displayText;at().flowchart.htmlLabels&&(v=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const M=d.node().appendChild(mr(v,N.cssStyle?N.cssStyle:e.labelStyle,!0,!0));let w=M.getBBox();if(Mn(at().flowchart.htmlLabels)){const R=M.children[0],B=Lt(M);w=R.getBoundingClientRect(),B.attr("width",w.width),B.attr("height",w.height)}w.width>h&&(h=w.width),f+=w.height+r,C.push(M)}),f+=i,m){let S=(h-b.width)/2;Lt(y).attr("transform","translate( "+(-1*h/2+S)+", "+-1*f/2+")"),p=b.height+r}let L=(h-x.width)/2;return Lt(T).attr("transform","translate( "+(-1*h/2+L)+", "+(-1*f/2+p)+")"),p+=x.height+r,l.attr("class","divider").attr("x1",-h/2-n).attr("x2",h/2+n).attr("y1",-f/2-n+i+p).attr("y2",-f/2-n+i+p),p+=i,A.forEach(S=>{Lt(S).attr("transform","translate( "+-h/2+", "+(-1*f/2+p+i/2)+")"),p+=x.height+r}),p+=i,u.attr("class","divider").attr("x1",-h/2-n).attr("x2",h/2+n).attr("y1",-f/2-n+i+p).attr("y2",-f/2-n+i+p),p+=i,C.forEach(S=>{Lt(S).attr("transform","translate( "+-h/2+", "+(-1*f/2+p)+")"),p+=x.height+r}),s.attr("class","outer title-state").attr("x",-h/2-n).attr("y",-(f/2)-n).attr("width",h+e.padding).attr("height",f+e.padding),fn(e,s),e.intersect=function(S){return cn.rect(e,S)},o},zk={question:dnt,rect:knt,labelRect:wnt,rectWithTitle:Tnt,choice:fnt,circle:Cnt,doublecircle:Snt,stadium:Ent,hexagon:pnt,rect_left_inv_arrow:gnt,lean_right:ynt,lean_left:mnt,trapezoid:bnt,inv_trapezoid:_nt,rect_right_inv_arrow:vnt,cylinder:xnt,start:Mnt,end:Lnt,note:hnt,subroutine:Ant,fork:Yk,join:Yk,class_box:Bnt};let Ss={};const Dnt=(t,e,n)=>{let r,i;if(e.link){let a;at().securityLevel==="sandbox"?a="_top":e.linkTarget&&(a=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",a),i=zk[e.shape](r,e,n)}else i=zk[e.shape](t,e,n),r=i;e.tooltip&&i.attr("title",e.tooltip),e.class&&i.attr("class","node default "+e.class),Ss[e.id]=r,e.haveCallback&&Ss[e.id].attr("class",Ss[e.id].attr("class")+" clickable")},Nnt=(t,e)=>{Ss[e.id]=t},Ont=()=>{Ss={}},jk=t=>{const e=Ss[t.id];W.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},Rnt=(t,e)=>{W.trace("Creating subgraph rect for ",e.id,e);const n=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),a=i.node().appendChild(mr(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();if(Mn(at().flowchart.htmlLabels)){const f=a.children[0],d=Lt(a);o=f.getBoundingClientRect(),d.attr("width",o.width),d.attr("height",o.height)}const s=0*e.padding,l=s/2,u=e.width<=o.width+s?o.width+s:e.width;e.width<=o.width+s?e.diff=(o.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,W.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-u/2).attr("y",e.y-e.height/2-l).attr("width",u).attr("height",e.height+s),i.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2+e.padding/3)+")");const h=r.node().getBBox();return e.width=h.width,e.height=h.height,e.intersect=function(f){return yu(e,f)},n},Int=(t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,a=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(s){return yu(e,s)},n},Fnt=(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),a=n.append("rect"),o=i.node().appendChild(mr(e.labelText,e.labelStyle,void 0,!0));let s=o.getBBox();if(Mn(at().flowchart.htmlLabels)){const d=o.children[0],p=Lt(o);s=d.getBoundingClientRect(),p.attr("width",s.width),p.attr("height",s.height)}s=o.getBBox();const l=0*e.padding,u=l/2,h=e.width<=s.width+e.padding?s.width+e.padding:e.width;e.width<=s.width+e.padding?e.diff=(s.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-h/2-u).attr("y",e.y-e.height/2-u).attr("width",h+l).attr("height",e.height+l),a.attr("class","inner").attr("x",e.x-h/2-u).attr("y",e.y-e.height/2-u+s.height-1).attr("width",h+l).attr("height",e.height+l-s.height-3),i.attr("transform","translate("+(e.x-s.width/2)+", "+(e.y-e.height/2-e.padding/3+(Mn(at().flowchart.htmlLabels)?5:3))+")");const f=r.node().getBBox();return e.height=f.height,e.intersect=function(d){return yu(e,d)},n},$nt=(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,a=i/2;r.attr("class","divider").attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i);const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.diff=-e.padding/2,e.intersect=function(s){return yu(e,s)},n},Pnt={rect:Rnt,roundedWithTitle:Fnt,noteGroup:Int,divider:$nt};let qM={};const Ynt=(t,e)=>{W.trace("Inserting cluster");const n=e.shape||"rect";qM[e.id]=Pnt[n](t,e)},znt=()=>{qM={}};let W1={},Rn={};const jnt=()=>{W1={},Rn={}},Unt=(t,e)=>{const n=mr(e.label,e.labelStyle),r=t.insert("g").attr("class","edgeLabel"),i=r.insert("g").attr("class","label");i.node().appendChild(n);let a=n.getBBox();if(Mn(at().flowchart.htmlLabels)){const s=n.children[0],l=Lt(n);a=s.getBoundingClientRect(),l.attr("width",a.width),l.attr("height",a.height)}i.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),W1[e.id]=r,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const s=mr(e.startLabelLeft,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Rn[e.id]||(Rn[e.id]={}),Rn[e.id].startLeft=l,sh(o,e.startLabelLeft)}if(e.startLabelRight){const s=mr(e.startLabelRight,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=l.node().appendChild(s),u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Rn[e.id]||(Rn[e.id]={}),Rn[e.id].startRight=l,sh(o,e.startLabelRight)}if(e.endLabelLeft){const s=mr(e.endLabelLeft,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),l.node().appendChild(s),Rn[e.id]||(Rn[e.id]={}),Rn[e.id].endLeft=l,sh(o,e.endLabelLeft)}if(e.endLabelRight){const s=mr(e.endLabelRight,e.labelStyle),l=t.insert("g").attr("class","edgeTerminals"),u=l.insert("g").attr("class","inner");o=u.node().appendChild(s);const h=s.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),l.node().appendChild(s),Rn[e.id]||(Rn[e.id]={}),Rn[e.id].endRight=l,sh(o,e.endLabelRight)}};function sh(t,e){at().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const Hnt=(t,e)=>{W.info("Moving label abc78 ",t.id,t.label,W1[t.id]);let n=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const r=W1[t.id];let i=t.x,a=t.y;if(n){const o=we.calcLabelPosition(n);W.info("Moving label from (",i,",",a,") to (",o.x,",",o.y,") abc78")}r.attr("transform","translate("+i+", "+a+")")}if(t.startLabelLeft){const r=Rn[t.id].startLeft;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}if(t.startLabelRight){const r=Rn[t.id].startRight;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}if(t.endLabelLeft){const r=Rn[t.id].endLeft;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}if(t.endLabelRight){const r=Rn[t.id].endRight;let i=t.x,a=t.y;if(n){const o=we.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);i=o.x,a=o.y}r.attr("transform","translate("+i+", "+a+")")}},Wnt=(t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),a=Math.abs(e.y-r),o=t.width/2,s=t.height/2;return i>=o||a>=s},Gnt=(t,e,n)=>{W.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,a=Math.abs(r-n.x),o=t.width/2;let s=n.x<e.x?o-a:o+a;const l=t.height/2,u=Math.abs(e.y-n.y),h=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*o>Math.abs(r-e.x)*l){let f=n.y<e.y?e.y-l-i:i-l-e.y;s=h*f/u;const d={x:n.x<e.x?n.x+s:n.x-h+s,y:n.y<e.y?n.y+u-f:n.y-u+f};return s===0&&(d.x=e.x,d.y=e.y),h===0&&(d.x=e.x),u===0&&(d.y=e.y),W.warn(`abc89 topp/bott calc, Q ${u}, q ${f}, R ${h}, r ${s}`,d),d}else{n.x<e.x?s=e.x-o-r:s=r-o-e.x;let f=u*s/h,d=n.x<e.x?n.x+h-s:n.x-h+s,p=n.y<e.y?n.y+f:n.y-f;return W.warn(`sides calc abc89, Q ${u}, q ${f}, R ${h}, r ${s}`,{_x:d,_y:p}),s===0&&(d=e.x,p=e.y),h===0&&(d=e.x),u===0&&(p=e.y),{x:d,y:p}}},Uk=(t,e)=>{W.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach(a=>{if(W.info("abc88 checking point",a,e),!Wnt(e,a)&&!i){const o=Gnt(e,r,a);W.warn("abc88 inside",a,r,o),W.warn("abc88 intersection",o);let s=!1;n.forEach(l=>{s=s||l.x===o.x&&l.y===o.y}),n.find(l=>l.x===o.x&&l.y===o.y)?W.warn("abc88 no intersect",o,n):n.push(o),i=!0}else W.warn("abc88 outside",a,r),r=a,i||n.push(a)}),W.warn("abc88 returning points",n),n},Vnt=function(t,e,n,r,i,a){let o=n.points,s=!1;const l=a.node(e.v);var u=a.node(e.w);W.info("abc88 InsertEdge: ",n),u.intersect&&l.intersect&&(o=o.slice(1,n.points.length-1),o.unshift(l.intersect(o[0])),W.info("Last point",o[o.length-1],u,u.intersect(o[o.length-1])),o.push(u.intersect(o[o.length-1]))),n.toCluster&&(W.info("to cluster abc88",r[n.toCluster]),o=Uk(n.points,r[n.toCluster].node),s=!0),n.fromCluster&&(W.info("from cluster abc88",r[n.fromCluster]),o=Uk(o.reverse(),r[n.fromCluster].node).reverse(),s=!0);const h=o.filter(b=>!Number.isNaN(b.y));let f;i==="graph"||i==="flowchart"?f=n.curve||Io:f=Io;const d=no().x(function(b){return b.x}).y(function(b){return b.y}).curve(f);let p;switch(n.thickness){case"normal":p="edge-thickness-normal";break;case"thick":p="edge-thickness-thick";break;case"invisible":p="edge-thickness-thick";break;default:p=""}switch(n.pattern){case"solid":p+=" edge-pattern-solid";break;case"dotted":p+=" edge-pattern-dotted";break;case"dashed":p+=" edge-pattern-dashed";break}const m=t.append("path").attr("d",d(h)).attr("id",n.id).attr("class"," "+p+(n.classes?" "+n.classes:"")).attr("style",n.style);let _="";switch((at().flowchart.arrowMarkerAbsolute||at().state.arrowMarkerAbsolute)&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\("),_=_.replace(/\)/g,"\\)")),W.info("arrowTypeStart",n.arrowTypeStart),W.info("arrowTypeEnd",n.arrowTypeEnd),n.arrowTypeStart){case"arrow_cross":m.attr("marker-start","url("+_+"#"+i+"-crossStart)");break;case"arrow_point":m.attr("marker-start","url("+_+"#"+i+"-pointStart)");break;case"arrow_barb":m.attr("marker-start","url("+_+"#"+i+"-barbStart)");break;case"arrow_circle":m.attr("marker-start","url("+_+"#"+i+"-circleStart)");break;case"aggregation":m.attr("marker-start","url("+_+"#"+i+"-aggregationStart)");break;case"extension":m.attr("marker-start","url("+_+"#"+i+"-extensionStart)");break;case"composition":m.attr("marker-start","url("+_+"#"+i+"-compositionStart)");break;case"dependency":m.attr("marker-start","url("+_+"#"+i+"-dependencyStart)");break;case"lollipop":m.attr("marker-start","url("+_+"#"+i+"-lollipopStart)");break}switch(n.arrowTypeEnd){case"arrow_cross":m.attr("marker-end","url("+_+"#"+i+"-crossEnd)");break;case"arrow_point":m.attr("marker-end","url("+_+"#"+i+"-pointEnd)");break;case"arrow_barb":m.attr("marker-end","url("+_+"#"+i+"-barbEnd)");break;case"arrow_circle":m.attr("marker-end","url("+_+"#"+i+"-circleEnd)");break;case"aggregation":m.attr("marker-end","url("+_+"#"+i+"-aggregationEnd)");break;case"extension":m.attr("marker-end","url("+_+"#"+i+"-extensionEnd)");break;case"composition":m.attr("marker-end","url("+_+"#"+i+"-compositionEnd)");break;case"dependency":m.attr("marker-end","url("+_+"#"+i+"-dependencyEnd)");break;case"lollipop":m.attr("marker-end","url("+_+"#"+i+"-lollipopEnd)");break}let y={};return s&&(y.updatedPath=o),y.originalPath=n.points,y},XM=(t,e,n,r)=>{W.info("Graph in recursive render: XXX",dn.json.write(e),r);const i=e.graph().rankdir;W.trace("Dir in recursive render - dir:",i);const a=t.insert("g").attr("class","root");e.nodes()?W.info("Recursive render XXX",e.nodes()):W.info("No nodes found for",e),e.edges().length>0&&W.trace("Recursive edges",e.edge(e.edges()[0]));const o=a.insert("g").attr("class","clusters"),s=a.insert("g").attr("class","edgePaths"),l=a.insert("g").attr("class","edgeLabels"),u=a.insert("g").attr("class","nodes");e.nodes().forEach(function(f){const d=e.node(f);if(typeof r<"u"){const p=JSON.parse(JSON.stringify(r.clusterData));W.info("Setting data for cluster XXX (",f,") ",p,r),e.setNode(r.id,p),e.parent(f)||(W.trace("Setting parent",f,r.id),e.setParent(f,r.id,p))}if(W.info("(Insert) Node XXX"+f+": "+JSON.stringify(e.node(f))),d&&d.clusterNode){W.info("Cluster identified",f,d.width,e.node(f));const p=XM(u,d.graph,n,e.node(f)),m=p.elem;fn(d,m),d.diff=p.diff||0,W.info("Node bounds (abc123)",f,d,d.width,d.x,d.y),Nnt(m,d),W.warn("Recursive render complete ",m,d)}else e.children(f).length>0?(W.info("Cluster - the non recursive path XXX",f,d.id,d,e),W.info(Wl(d.id,e)),Le[d.id]={id:Wl(d.id,e),node:d}):(W.info("Node - the non recursive path",f,d.id,d),Dnt(u,e.node(f),i))}),e.edges().forEach(function(f){const d=e.edge(f.v,f.w,f.name);W.info("Edge "+f.v+" -> "+f.w+": "+JSON.stringify(f)),W.info("Edge "+f.v+" -> "+f.w+": ",f," ",JSON.stringify(e.edge(f))),W.info("Fix",Le,"ids:",f.v,f.w,"Translateing: ",Le[f.v],Le[f.w]),Unt(l,d)}),e.edges().forEach(function(f){W.info("Edge "+f.v+" -> "+f.w+": "+JSON.stringify(f))}),W.info("#############################################"),W.info("###                Layout                 ###"),W.info("#############################################"),W.info(e),gu.layout(e),W.info("Graph after layout:",dn.json.write(e));let h=0;return ont(e).forEach(function(f){const d=e.node(f);W.info("Position "+f+": "+JSON.stringify(e.node(f))),W.info("Position "+f+": ("+d.x,","+d.y,") width: ",d.width," height: ",d.height),d&&d.clusterNode?jk(d):e.children(f).length>0?(Ynt(o,d),Le[d.id].node=d):jk(d)}),e.edges().forEach(function(f){const d=e.edge(f);W.info("Edge "+f.v+" -> "+f.w+": "+JSON.stringify(d),d);const p=Vnt(s,f,d,Le,n,e);Hnt(d,p)}),e.nodes().forEach(function(f){const d=e.node(f);W.info(f,d.type,d.diff),d.type==="group"&&(h=d.diff)}),{elem:a,diff:h}},Ub=(t,e,n,r,i)=>{Het(t,n,r,i),Ont(),jnt(),znt(),rnt(),W.warn("Graph at first:",dn.json.write(e)),ant(e),W.warn("Graph after:",dn.json.write(e)),XM(t,e,r)},qnt=t=>pe.sanitizeText(t,at()),Xnt=function(t,e,n,r){const i=Object.keys(t);W.info("keys:",i),W.info(t),i.forEach(function(a){const o=t[a];let s="";o.cssClasses.length>0&&(s=s+" "+o.cssClasses.join(" "));const l={labelStyle:""};let u=o.text!==void 0?o.text:o.id,h=0,f="";switch(o.type){case"class":f="class_box";break;default:f="class_box"}e.setNode(o.id,{labelStyle:l.labelStyle,shape:f,labelText:qnt(u),classData:o,rx:h,ry:h,class:s,style:l.style,id:o.id,domId:o.domId,tooltip:r.db.getTooltip(o.id)||"",haveCallback:o.haveCallback,link:o.link,width:o.type==="group"?500:void 0,type:o.type,padding:at().flowchart.padding}),W.info("setNode",{labelStyle:l.labelStyle,shape:f,labelText:u,rx:h,ry:h,class:s,style:l.style,id:o.id,width:o.type==="group"?500:void 0,type:o.type,padding:at().flowchart.padding})})},Knt=function(t,e){const n=at().flowchart;let r=0;t.forEach(function(i){r++;const a={};a.classes="relation",a.pattern=i.relation.lineType==1?"dashed":"solid",a.id="id"+r,i.type==="arrow_open"?a.arrowhead="none":a.arrowhead="normal",W.info(a,i),a.startLabelRight=i.relationTitle1==="none"?"":i.relationTitle1,a.endLabelLeft=i.relationTitle2==="none"?"":i.relationTitle2,a.arrowTypeStart=Hk(i.relation.type1),a.arrowTypeEnd=Hk(i.relation.type2);let o="",s="";if(typeof i.style<"u"){const l=Xa(i.style);o=l.style,s=l.labelStyle}else o="fill:none";a.style=o,a.labelStyle=s,typeof i.interpolate<"u"?a.curve=Li(i.interpolate,_r):typeof t.defaultInterpolate<"u"?a.curve=Li(t.defaultInterpolate,_r):a.curve=Li(n.curve,_r),i.text=i.title,typeof i.text>"u"?typeof i.style<"u"&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",at().flowchart.htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+i.text+"</span>"):(a.labelType="text",a.label=i.text.replace(pe.lineBreakRegex,`
`),typeof i.style>"u"&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(i.id1,i.id2,a,r)})},Znt=function(t){Object.keys(t).forEach(function(e){t[e]})},Qnt=function(t,e,n,r){W.info("Drawing class - ",e);const i=at().flowchart,a=at().securityLevel;W.info("config:",i);const o=i.nodeSpacing||50,s=i.rankSpacing||50,l=new dn.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:o,ranksep:s,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),u=r.db.getClasses(),h=r.db.getRelations();W.info(h),Xnt(u,l,e,r),Knt(h,l);let f;a==="sandbox"&&(f=Lt("#i"+e));const d=Lt(a==="sandbox"?f.nodes()[0].contentDocument.body:"body"),p=d.select(`[id="${e}"]`),m=d.select("#"+e+" g");if(Ub(m,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),td(l,p,i.diagramPadding,i.useMaxWidth),!i.htmlLabels){const _=a==="sandbox"?f.nodes()[0].contentDocument:document,y=_.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let b=0;b<y.length;b++){const k=y[b],T=k.getBBox(),x=_.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("rx",0),x.setAttribute("ry",0),x.setAttribute("width",T.width),x.setAttribute("height",T.height),k.insertBefore(x,k.firstChild)}}xr(r.db,p,e)};function Hk(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const Jnt={setConf:Znt,draw:Qnt};var y3=function(){var t=function(N,v,M,w){for(M=M||{},w=N.length;w--;M[N[w]]=v);return M},e=[1,2],n=[1,5],r=[6,9,11,23,25,27,29,30,31,49],i=[1,17],a=[1,18],o=[1,19],s=[1,20],l=[1,21],u=[1,22],h=[1,25],f=[1,30],d=[1,31],p=[1,32],m=[1,33],_=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],y=[1,45],b=[30,31,46,47],k=[4,6,9,11,23,25,27,29,30,31,49],T=[42,43,44,45],x=[22,37],A=[1,64],C={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(N,v,M,w,R,B,$){var F=B.length-1;switch(R){case 1:break;case 3:this.$=[];break;case 4:B[F-1].push(B[F]),this.$=B[F-1];break;case 5:case 6:this.$=B[F];break;case 7:case 8:this.$=[];break;case 12:w.addEntity(B[F-4]),w.addEntity(B[F-2]),w.addRelationship(B[F-4],B[F],B[F-2],B[F-3]);break;case 13:w.addEntity(B[F-3]),w.addAttributes(B[F-3],B[F-1]);break;case 14:w.addEntity(B[F-2]);break;case 15:w.addEntity(B[F]);break;case 16:case 17:this.$=B[F].trim(),w.setAccTitle(this.$);break;case 18:case 19:this.$=B[F].trim(),w.setAccDescription(this.$);break;case 20:case 41:this.$=B[F];break;case 21:case 39:case 40:this.$=B[F].replace(/"/g,"");break;case 22:this.$=[B[F]];break;case 23:B[F].push(B[F-1]),this.$=B[F];break;case 24:this.$={attributeType:B[F-1],attributeName:B[F]};break;case 25:this.$={attributeType:B[F-2],attributeName:B[F-1],attributeKeyType:B[F]};break;case 26:this.$={attributeType:B[F-2],attributeName:B[F-1],attributeComment:B[F]};break;case 27:this.$={attributeType:B[F-3],attributeName:B[F-2],attributeKeyType:B[F-1],attributeComment:B[F]};break;case 28:case 29:case 30:this.$=B[F];break;case 31:this.$=B[F].replace(/"/g,"");break;case 32:this.$={cardA:B[F],relType:B[F-1],cardB:B[F-2]};break;case 33:this.$=w.Cardinality.ZERO_OR_ONE;break;case 34:this.$=w.Cardinality.ZERO_OR_MORE;break;case 35:this.$=w.Cardinality.ONE_OR_MORE;break;case 36:this.$=w.Cardinality.ONLY_ONE;break;case 37:this.$=w.Identification.NON_IDENTIFYING;break;case 38:this.$=w.Identification.IDENTIFYING;break;case 42:w.parseDirective("%%{","open_directive");break;case 43:w.parseDirective(B[F],"type_directive");break;case 44:B[F]=B[F].trim().replace(/'/g,'"'),w.parseDirective(B[F],"arg_directive");break;case 45:w.parseDirective("}%%","close_directive","er");break}},table:[{3:1,4:e,7:3,12:4,49:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,49:n},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:i,25:a,27:o,29:s,30:l,31:u,49:n},{1:[2,2]},{14:23,15:[1,24],52:h},t([15,52],[2,43]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:15,10:26,12:4,17:16,23:i,25:a,27:o,29:s,30:l,31:u,49:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),t(r,[2,15],{18:27,40:29,20:[1,28],42:f,43:d,44:p,45:m}),{24:[1,34]},{26:[1,35]},{28:[1,36]},t(r,[2,19]),t(_,[2,20]),t(_,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},t(r,[2,5]),{17:40,30:l,31:u},{21:41,22:[1,42],32:43,33:44,37:y},{41:46,46:[1,47],47:[1,48]},t(b,[2,33]),t(b,[2,34]),t(b,[2,35]),t(b,[2,36]),t(r,[2,16]),t(r,[2,17]),t(r,[2,18]),t(k,[2,9]),{14:49,52:h},{52:[2,44]},{15:[1,50]},{22:[1,51]},t(r,[2,14]),{21:52,22:[2,22],32:43,33:44,37:y},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:f,43:d,44:p,45:m},t(T,[2,37]),t(T,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},t(r,[2,13]),{22:[2,23]},t(x,[2,24],{35:61,36:62,38:[1,63],39:A}),t([22,37,38,39],[2,29]),t([30,31],[2,32]),t(k,[2,10]),t(r,[2,12]),t(r,[2,39]),t(r,[2,40]),t(r,[2,41]),t(x,[2,25],{36:65,39:A}),t(x,[2,26]),t([22,37,39],[2,30]),t(x,[2,31]),t(x,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(N,v){if(v.recoverable)this.trace(N);else{var M=new Error(N);throw M.hash=v,M}},parse:function(N){var v=this,M=[0],w=[],R=[null],B=[],$=this.table,F="",Q=0,nt=0,z=2,Y=1,rt=B.slice.call(arguments,1),lt=Object.create(this.lexer),J={yy:{}};for(var Z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Z)&&(J.yy[Z]=this.yy[Z]);lt.setInput(N,J.yy),J.yy.lexer=lt,J.yy.parser=this,typeof lt.yylloc>"u"&&(lt.yylloc={});var q=lt.yylloc;B.push(q);var it=lt.options&&lt.options.ranges;typeof J.yy.parseError=="function"?this.parseError=J.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var Nt;return Nt=w.pop()||lt.lex()||Y,typeof Nt!="number"&&(Nt instanceof Array&&(w=Nt,Nt=w.pop()),Nt=v.symbols_[Nt]||Nt),Nt}for(var G,j,P,X,O={},V,U,H,xt;;){if(j=M[M.length-1],this.defaultActions[j]?P=this.defaultActions[j]:((G===null||typeof G>"u")&&(G=ut()),P=$[j]&&$[j][G]),typeof P>"u"||!P.length||!P[0]){var ot="";xt=[];for(V in $[j])this.terminals_[V]&&V>z&&xt.push("'"+this.terminals_[V]+"'");lt.showPosition?ot="Parse error on line "+(Q+1)+`:
`+lt.showPosition()+`
Expecting `+xt.join(", ")+", got '"+(this.terminals_[G]||G)+"'":ot="Parse error on line "+(Q+1)+": Unexpected "+(G==Y?"end of input":"'"+(this.terminals_[G]||G)+"'"),this.parseError(ot,{text:lt.match,token:this.terminals_[G]||G,line:lt.yylineno,loc:q,expected:xt})}if(P[0]instanceof Array&&P.length>1)throw new Error("Parse Error: multiple actions possible at state: "+j+", token: "+G);switch(P[0]){case 1:M.push(G),R.push(lt.yytext),B.push(lt.yylloc),M.push(P[1]),G=null,nt=lt.yyleng,F=lt.yytext,Q=lt.yylineno,q=lt.yylloc;break;case 2:if(U=this.productions_[P[1]][1],O.$=R[R.length-U],O._$={first_line:B[B.length-(U||1)].first_line,last_line:B[B.length-1].last_line,first_column:B[B.length-(U||1)].first_column,last_column:B[B.length-1].last_column},it&&(O._$.range=[B[B.length-(U||1)].range[0],B[B.length-1].range[1]]),X=this.performAction.apply(O,[F,nt,Q,J.yy,P[1],R,B].concat(rt)),typeof X<"u")return X;U&&(M=M.slice(0,-1*U*2),R=R.slice(0,-1*U),B=B.slice(0,-1*U)),M.push(this.productions_[P[1]][0]),R.push(O.$),B.push(O._$),H=$[M[M.length-2]][M[M.length-1]],M.push(H);break;case 3:return!0}}return!0}},L=function(){var N={EOF:1,parseError:function(v,M){if(this.yy.parser)this.yy.parser.parseError(v,M);else throw new Error(v)},setInput:function(v,M){return this.yy=M||this.yy||{},this._input=v,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var v=this._input[0];this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v;var M=v.match(/(?:\r\n?|\n).*/g);return M?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),v},unput:function(v){var M=v.length,w=v.split(/(?:\r\n?|\n)/g);this._input=v+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-M),this.offset-=M;var R=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),w.length-1&&(this.yylineno-=w.length-1);var B=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:w?(w.length===R.length?this.yylloc.first_column:0)+R[R.length-w.length].length-w[0].length:this.yylloc.first_column-M},this.options.ranges&&(this.yylloc.range=[B[0],B[0]+this.yyleng-M]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(v){this.unput(this.match.slice(v))},pastInput:function(){var v=this.matched.substr(0,this.matched.length-this.match.length);return(v.length>20?"...":"")+v.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var v=this.match;return v.length<20&&(v+=this._input.substr(0,20-v.length)),(v.substr(0,20)+(v.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var v=this.pastInput(),M=new Array(v.length+1).join("-");return v+this.upcomingInput()+`
`+M+"^"},test_match:function(v,M){var w,R,B;if(this.options.backtrack_lexer&&(B={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(B.yylloc.range=this.yylloc.range.slice(0))),R=v[0].match(/(?:\r\n?|\n).*/g),R&&(this.yylineno+=R.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:R?R[R.length-1].length-R[R.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+v[0].length},this.yytext+=v[0],this.match+=v[0],this.matches=v,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(v[0].length),this.matched+=v[0],w=this.performAction.call(this,this.yy,this,M,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),w)return w;if(this._backtrack){for(var $ in B)this[$]=B[$];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var v,M,w,R;this._more||(this.yytext="",this.match="");for(var B=this._currentRules(),$=0;$<B.length;$++)if(w=this._input.match(this.rules[B[$]]),w&&(!M||w[0].length>M[0].length)){if(M=w,R=$,this.options.backtrack_lexer){if(v=this.test_match(w,B[$]),v!==!1)return v;if(this._backtrack){M=!1;continue}else return!1}else if(!this.options.flex)break}return M?(v=this.test_match(M,B[R]),v!==!1?v:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var v=this.next();return v||this.lex()},begin:function(v){this.conditionStack.push(v)},popState:function(){var v=this.conditionStack.length-1;return v>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(v){return v=this.conditionStack.length-1-Math.abs(v||0),v>=0?this.conditionStack[v]:"INITIAL"},pushState:function(v){this.begin(v)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(v,M,w,R){switch(w){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:break;case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:return 37;case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return M.yytext[0];case 29:return 42;case 30:return 43;case 31:return 44;case 32:return 45;case 33:return 42;case 34:return 43;case 35:return 44;case 36:return 46;case 37:return 47;case 38:return 46;case 39:return 46;case 40:return 30;case 41:return M.yytext[0];case 42:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\|o\b)/i,/^(?:\}o\b)/i,/^(?:\}\|)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!0}}};return N}();C.lexer=L;function S(){this.yy={}}return S.prototype=C,C.Parser=S,new S}();y3.parser=y3;const trt=t=>t.match(/^\s*erDiagram/)!==null;let dl={},Hb=[];const ert={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},nrt={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},rrt=function(t,e,n){qe.parseDirective(this,t,e,n)},KM=function(t){return typeof dl[t]>"u"&&(dl[t]={attributes:[]},W.info("Added new entity :",t)),dl[t]},irt=()=>dl,art=function(t,e){let n=KM(t),r;for(r=e.length-1;r>=0;r--)n.attributes.push(e[r]),W.debug("Added attribute ",e[r].attributeName)},ort=function(t,e,n,r){let i={entityA:t,roleA:e,entityB:n,relSpec:r};Hb.push(i),W.debug("Added new relationship :",i)},srt=()=>Hb,crt=function(){dl={},Hb=[],pi()},lrt={Cardinality:ert,Identification:nrt,parseDirective:rrt,getConfig:()=>at().er,addEntity:KM,addAttributes:art,getEntities:irt,addRelationship:ort,getRelationships:srt,clear:crt,setAccTitle:zr,getAccTitle:gi,setAccDescription:yi,getAccDescription:mi},na={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},urt=function(t,e){let n;t.append("defs").append("marker").attr("id",na.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",na.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",na.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",na.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",na.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",na.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),n=t.append("defs").append("marker").attr("id",na.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),n=t.append("defs").append("marker").attr("id",na.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},ra={ERMarkers:na,insertMarkers:urt};let ch;const hrt=new Uint8Array(16);function drt(){if(!ch&&(ch=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ch))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ch(hrt)}const On=[];for(let t=0;t<256;++t)On.push((t+256).toString(16).slice(1));function frt(t,e=0){return(On[t[e+0]]+On[t[e+1]]+On[t[e+2]]+On[t[e+3]]+"-"+On[t[e+4]]+On[t[e+5]]+"-"+On[t[e+6]]+On[t[e+7]]+"-"+On[t[e+8]]+On[t[e+9]]+"-"+On[t[e+10]]+On[t[e+11]]+On[t[e+12]]+On[t[e+13]]+On[t[e+14]]+On[t[e+15]]).toLowerCase()}const prt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wk={randomUUID:prt};function grt(t,e,n){if(Wk.randomUUID&&!e&&!t)return Wk.randomUUID();t=t||{};const r=t.random||(t.rng||drt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return frt(r)}const yrt=/[^A-Za-z0-9]([\W])*/g;let je={},Gl=new Map;const mrt=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)je[e[n]]=t[e[n]]},brt=(t,e,n)=>{const r=je.entityPadding/3,i=je.entityPadding/3,a=je.fontSize*.85,o=e.node().getBBox(),s=[];let l=!1,u=!1,h=0,f=0,d=0,p=0,m=o.height+r*2,_=1;n.forEach(T=>{T.attributeKeyType!==void 0&&(l=!0),T.attributeComment!==void 0&&(u=!0)}),n.forEach(T=>{const x=`${e.node().id}-attr-${_}`;let A=0;const C=Pa(T.attributeType),L=t.append("text").attr("class","er entityLabel").attr("id",`${x}-type`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(C),S=t.append("text").attr("class","er entityLabel").attr("id",`${x}-name`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(T.attributeName),N={};N.tn=L,N.nn=S;const v=L.node().getBBox(),M=S.node().getBBox();if(h=Math.max(h,v.width),f=Math.max(f,M.width),A=Math.max(v.height,M.height),l){const w=t.append("text").attr("class","er entityLabel").attr("id",`${x}-key`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(T.attributeKeyType||"");N.kn=w;const R=w.node().getBBox();d=Math.max(d,R.width),A=Math.max(A,R.height)}if(u){const w=t.append("text").attr("class","er entityLabel").attr("id",`${x}-comment`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+at().fontFamily+"; font-size: "+a+"px").text(T.attributeComment||"");N.cn=w;const R=w.node().getBBox();p=Math.max(p,R.width),A=Math.max(A,R.height)}N.height=A,s.push(N),m+=A+r*2,_+=1});let y=4;l&&(y+=2),u&&(y+=2);const b=h+f+d+p,k={width:Math.max(je.minEntityWidth,Math.max(o.width+je.entityPadding*2,b+i*y)),height:n.length>0?m:Math.max(je.minEntityHeight,o.height+je.entityPadding*2)};if(n.length>0){const T=Math.max(0,(k.width-b-i*y)/(y/2));e.attr("transform","translate("+k.width/2+","+(r+o.height/2)+")");let x=o.height+r*2,A="attributeBoxOdd";s.forEach(C=>{const L=x+r+C.height/2;C.tn.attr("transform","translate("+i+","+L+")");const S=t.insert("rect","#"+C.tn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",0).attr("y",x).attr("width",h+i*2+T).attr("height",C.height+r*2),N=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));C.nn.attr("transform","translate("+(N+i)+","+L+")");const v=t.insert("rect","#"+C.nn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",N).attr("y",x).attr("width",f+i*2+T).attr("height",C.height+r*2);let M=parseFloat(v.attr("x"))+parseFloat(v.attr("width"));if(l){C.kn.attr("transform","translate("+(M+i)+","+L+")");const w=t.insert("rect","#"+C.kn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",M).attr("y",x).attr("width",d+i*2+T).attr("height",C.height+r*2);M=parseFloat(w.attr("x"))+parseFloat(w.attr("width"))}u&&(C.cn.attr("transform","translate("+(M+i)+","+L+")"),t.insert("rect","#"+C.cn.node().id).attr("class",`er ${A}`).attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",M).attr("y",x).attr("width",p+i*2+T).attr("height",C.height+r*2)),x+=C.height+r*2,A=A==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else k.height=Math.max(je.minEntityHeight,m),e.attr("transform","translate("+k.width/2+","+k.height/2+")");return k},_rt=function(t,e,n){const r=Object.keys(e);let i;return r.forEach(function(a){const o=Trt(a,"entity");Gl.set(a,o);const s=t.append("g").attr("id",o);i=i===void 0?o:i;const l="text-"+o,u=s.append("text").attr("class","er entityLabel").attr("id",l).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("style","font-family: "+at().fontFamily+"; font-size: "+je.fontSize+"px").text(a),{width:h,height:f}=brt(s,u,e[a].attributes),d=s.insert("rect","#"+l).attr("class","er entityBox").attr("fill",je.fill).attr("fill-opacity","100%").attr("stroke",je.stroke).attr("x",0).attr("y",0).attr("width",h).attr("height",f).node().getBBox();n.setNode(o,{width:d.width,height:d.height,shape:"rect",id:o})}),i},vrt=function(t,e){e.nodes().forEach(function(n){typeof n<"u"&&typeof e.node(n)<"u"&&t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )")})},ZM=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},xrt=function(t,e){return t.forEach(function(n){e.setEdge(Gl.get(n.entityA),Gl.get(n.entityB),{relationship:n},ZM(n))}),t};let Gk=0;const krt=function(t,e,n,r,i){Gk++;const a=n.edge(Gl.get(e.entityA),Gl.get(e.entityB),ZM(e)),o=no().x(function(p){return p.x}).y(function(p){return p.y}).curve(Io),s=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",o(a.points)).attr("stroke",je.stroke).attr("fill","none");e.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&s.attr("stroke-dasharray","8,8");let l="";switch(je.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:s.attr("marker-end","url("+l+"#"+ra.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:s.attr("marker-end","url("+l+"#"+ra.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:s.attr("marker-end","url("+l+"#"+ra.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:s.attr("marker-end","url("+l+"#"+ra.ERMarkers.ONLY_ONE_END+")");break}switch(e.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:s.attr("marker-start","url("+l+"#"+ra.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:s.attr("marker-start","url("+l+"#"+ra.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:s.attr("marker-start","url("+l+"#"+ra.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:s.attr("marker-start","url("+l+"#"+ra.ERMarkers.ONLY_ONE_START+")");break}const u=s.node().getTotalLength(),h=s.node().getPointAtLength(u*.5),f="rel"+Gk,d=t.append("text").attr("class","er relationshipLabel").attr("id",f).attr("x",h.x).attr("y",h.y).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("style","font-family: "+at().fontFamily+"; font-size: "+je.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+f).attr("class","er relationshipLabelBox").attr("x",h.x-d.width/2).attr("y",h.y-d.height/2).attr("width",d.width).attr("height",d.height).attr("fill","white").attr("fill-opacity","85%")},wrt=function(t,e,n,r){je=at().er,W.info("Drawing ER diagram");const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);ra.insertMarkers(o,je);let s;s=new dn.Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:je.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const l=_rt(o,r.db.getEntities(),s),u=xrt(r.db.getRelationships(),s);gu.layout(s),vrt(o,s),u.forEach(function(m){krt(o,m,s,l,r)});const h=je.diagramPadding,f=o.node().getBBox(),d=f.width+h*2,p=f.height+h*2;fi(o,p,d,je.useMaxWidth),o.attr("viewBox",`${f.x-h} ${f.y-h} ${d} ${p}`),xr(r.db,o,e)};function Trt(t="",e=""){const n=t.replace(yrt,"");return`${Vk(e)}${Vk(n)}${grt()}`}function Vk(t=""){return t.length>0?`${t}-`:""}const Ert={setConf:mrt,draw:wrt};var G1=function(){var t=function(qn,Yt,ce,Bt){for(ce=ce||{},Bt=qn.length;Bt--;ce[qn[Bt]]=Yt);return ce},e=[1,9],n=[1,7],r=[1,6],i=[1,8],a=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],o=[2,10],s=[1,20],l=[1,21],u=[1,22],h=[1,23],f=[1,30],d=[1,32],p=[1,33],m=[1,34],_=[1,62],y=[1,48],b=[1,52],k=[1,36],T=[1,37],x=[1,38],A=[1,39],C=[1,40],L=[1,56],S=[1,63],N=[1,51],v=[1,53],M=[1,55],w=[1,59],R=[1,60],B=[1,41],$=[1,42],F=[1,43],Q=[1,44],nt=[1,61],z=[1,50],Y=[1,54],rt=[1,57],lt=[1,58],J=[1,49],Z=[1,66],q=[1,71],it=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],ut=[1,75],G=[1,74],j=[1,76],P=[20,21,23,81,82],X=[1,99],O=[1,104],V=[1,107],U=[1,108],H=[1,101],xt=[1,106],ot=[1,109],Nt=[1,102],Mt=[1,114],wt=[1,113],Et=[1,103],bt=[1,105],mt=[1,110],Tt=[1,111],kt=[1,112],st=[1,115],Zt=[20,21,22,23,81,82],$t=[20,21,22,23,53,81,82],Jt=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ht=[20,21,23],qt=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],oe=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Xt=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],It=[1,149],Pt=[1,157],yt=[1,158],Ct=[1,159],pt=[1,160],Ft=[1,144],dt=[1,145],Ee=[1,141],gt=[1,152],ie=[1,153],se=[1,154],_e=[1,155],he=[1,156],me=[1,161],Vt=[1,162],te=[1,147],de=[1,150],ge=[1,146],fe=[1,143],ji=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],$e=[1,165],Pe=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Kt=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],Vn=[12,21,22,24],en=[22,106],Ke=[1,250],Ye=[1,245],tt=[1,246],Dt=[1,254],At=[1,251],Qt=[1,248],Be=[1,247],ze=[1,249],De=[1,252],pn=[1,253],Ve=[1,255],Ue=[1,273],xa=[20,21,23,106],Ce=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],Ui={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(qn,Yt,ce,Bt,Fe,et,Fn){var ct=et.length-1;switch(Fe){case 5:Bt.parseDirective("%%{","open_directive");break;case 6:Bt.parseDirective(et[ct],"type_directive");break;case 7:et[ct]=et[ct].trim().replace(/'/g,'"'),Bt.parseDirective(et[ct],"arg_directive");break;case 8:Bt.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(et[ct])||et[ct].length>0)&&et[ct-1].push(et[ct]),this.$=et[ct-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=et[ct];break;case 19:Bt.setDirection("TB"),this.$="TB";break;case 20:Bt.setDirection(et[ct-1]),this.$=et[ct-1];break;case 35:this.$=et[ct-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=Bt.addSubGraph(et[ct-6],et[ct-1],et[ct-4]);break;case 42:this.$=Bt.addSubGraph(et[ct-3],et[ct-1],et[ct-3]);break;case 43:this.$=Bt.addSubGraph(void 0,et[ct-1],void 0);break;case 45:this.$=et[ct].trim(),Bt.setAccTitle(this.$);break;case 46:case 47:this.$=et[ct].trim(),Bt.setAccDescription(this.$);break;case 51:Bt.addLink(et[ct-2].stmt,et[ct],et[ct-1]),this.$={stmt:et[ct],nodes:et[ct].concat(et[ct-2].nodes)};break;case 52:Bt.addLink(et[ct-3].stmt,et[ct-1],et[ct-2]),this.$={stmt:et[ct-1],nodes:et[ct-1].concat(et[ct-3].nodes)};break;case 53:this.$={stmt:et[ct-1],nodes:et[ct-1]};break;case 54:this.$={stmt:et[ct],nodes:et[ct]};break;case 55:this.$=[et[ct]];break;case 56:this.$=et[ct-4].concat(et[ct]);break;case 57:this.$=[et[ct-2]],Bt.setClass(et[ct-2],et[ct]);break;case 58:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"square");break;case 59:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"doublecircle");break;case 60:this.$=et[ct-5],Bt.addVertex(et[ct-5],et[ct-2],"circle");break;case 61:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"ellipse");break;case 62:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"stadium");break;case 63:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"subroutine");break;case 64:this.$=et[ct-7],Bt.addVertex(et[ct-7],et[ct-1],"rect",void 0,void 0,void 0,Object.fromEntries([[et[ct-5],et[ct-3]]]));break;case 65:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"cylinder");break;case 66:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"round");break;case 67:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"diamond");break;case 68:this.$=et[ct-5],Bt.addVertex(et[ct-5],et[ct-2],"hexagon");break;case 69:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"odd");break;case 70:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"trapezoid");break;case 71:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"inv_trapezoid");break;case 72:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"lean_right");break;case 73:this.$=et[ct-3],Bt.addVertex(et[ct-3],et[ct-1],"lean_left");break;case 74:this.$=et[ct],Bt.addVertex(et[ct]);break;case 75:et[ct-1].text=et[ct],this.$=et[ct-1];break;case 76:case 77:et[ct-2].text=et[ct-1],this.$=et[ct-2];break;case 78:this.$=et[ct];break;case 79:var Dn=Bt.destructLink(et[ct],et[ct-2]);this.$={type:Dn.type,stroke:Dn.stroke,length:Dn.length,text:et[ct-1]};break;case 80:var Dn=Bt.destructLink(et[ct]);this.$={type:Dn.type,stroke:Dn.stroke,length:Dn.length};break;case 81:this.$=et[ct-1];break;case 83:case 97:case 153:this.$=et[ct-1]+""+et[ct];break;case 98:case 99:this.$=et[ct-4],Bt.addClass(et[ct-2],et[ct]);break;case 100:this.$=et[ct-4],Bt.setClass(et[ct-2],et[ct]);break;case 101:case 109:this.$=et[ct-1],Bt.setClickEvent(et[ct-1],et[ct]);break;case 102:case 110:this.$=et[ct-3],Bt.setClickEvent(et[ct-3],et[ct-2]),Bt.setTooltip(et[ct-3],et[ct]);break;case 103:this.$=et[ct-2],Bt.setClickEvent(et[ct-2],et[ct-1],et[ct]);break;case 104:this.$=et[ct-4],Bt.setClickEvent(et[ct-4],et[ct-3],et[ct-2]),Bt.setTooltip(et[ct-4],et[ct]);break;case 105:case 111:this.$=et[ct-1],Bt.setLink(et[ct-1],et[ct]);break;case 106:case 112:this.$=et[ct-3],Bt.setLink(et[ct-3],et[ct-2]),Bt.setTooltip(et[ct-3],et[ct]);break;case 107:case 113:this.$=et[ct-3],Bt.setLink(et[ct-3],et[ct-2],et[ct]);break;case 108:case 114:this.$=et[ct-5],Bt.setLink(et[ct-5],et[ct-4],et[ct]),Bt.setTooltip(et[ct-5],et[ct-2]);break;case 115:this.$=et[ct-4],Bt.addVertex(et[ct-2],void 0,void 0,et[ct]);break;case 116:case 118:this.$=et[ct-4],Bt.updateLink(et[ct-2],et[ct]);break;case 117:this.$=et[ct-4],Bt.updateLink([et[ct-2]],et[ct]);break;case 119:this.$=et[ct-8],Bt.updateLinkInterpolate([et[ct-6]],et[ct-2]),Bt.updateLink([et[ct-6]],et[ct]);break;case 120:this.$=et[ct-8],Bt.updateLinkInterpolate(et[ct-6],et[ct-2]),Bt.updateLink(et[ct-6],et[ct]);break;case 121:this.$=et[ct-6],Bt.updateLinkInterpolate([et[ct-4]],et[ct]);break;case 122:this.$=et[ct-6],Bt.updateLinkInterpolate(et[ct-4],et[ct]);break;case 123:case 125:this.$=[et[ct]];break;case 124:case 126:et[ct-2].push(et[ct]),this.$=et[ct-2];break;case 128:this.$=et[ct-1]+et[ct];break;case 150:this.$=et[ct];break;case 151:this.$=et[ct-1]+""+et[ct];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},t(a,o,{17:11}),{7:12,13:[1,13]},{16:14,21:n,22:r,24:i},{16:15,21:n,22:r,24:i},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,118:B,119:$,120:F,121:Q,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{8:64,10:[1,65],15:Z},t([10,15],[2,6]),t(a,[2,17]),t(a,[2,18]),t(a,[2,19]),{20:[1,68],21:[1,69],22:q,27:67,30:70},t(it,[2,11]),t(it,[2,12]),t(it,[2,13]),t(it,[2,14]),t(it,[2,15]),t(it,[2,16]),{9:72,20:ut,21:G,23:j,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:ut,21:G,23:j},{9:81,20:ut,21:G,23:j},{9:82,20:ut,21:G,23:j},{9:83,20:ut,21:G,23:j},{9:84,20:ut,21:G,23:j},{9:86,20:ut,21:G,22:[1,85],23:j},t(it,[2,44]),{45:[1,87]},{47:[1,88]},t(it,[2,47]),t(P,[2,54],{30:89,22:q}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:X,52:O,66:V,67:U,84:[1,97],91:H,97:96,98:[1,94],100:[1,95],105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(it,[2,158]),t(it,[2,159]),t(it,[2,160]),t(it,[2,161]),t(Zt,[2,55],{53:[1,116]}),t($t,[2,74],{116:129,40:[1,117],52:_,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:y,67:b,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:L,95:S,105:N,106:v,109:M,111:w,112:R,122:nt,123:z,124:Y,125:rt,126:lt,127:J}),t(Jt,[2,150]),t(Jt,[2,175]),t(Jt,[2,176]),t(Jt,[2,177]),t(Jt,[2,178]),t(Jt,[2,179]),t(Jt,[2,180]),t(Jt,[2,181]),t(Jt,[2,182]),t(Jt,[2,183]),t(Jt,[2,184]),t(Jt,[2,185]),t(Jt,[2,186]),t(Jt,[2,187]),t(Jt,[2,188]),t(Jt,[2,189]),t(Jt,[2,190]),{9:130,20:ut,21:G,23:j},{11:131,14:[1,132]},t(Ht,[2,8]),t(a,[2,20]),t(a,[2,26]),t(a,[2,27]),{21:[1,133]},t(qt,[2,34],{30:134,22:q}),t(it,[2,35]),{50:135,51:45,52:_,54:46,66:y,67:b,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,122:nt,123:z,124:Y,125:rt,126:lt,127:J},t(oe,[2,48]),t(oe,[2,49]),t(oe,[2,50]),t(Xt,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:It,24:Pt,26:yt,38:Ct,39:139,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),t(it,[2,36]),t(it,[2,37]),t(it,[2,38]),t(it,[2,39]),t(it,[2,40]),{22:It,24:Pt,26:yt,38:Ct,39:163,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(ji,o,{17:164}),t(it,[2,45]),t(it,[2,46]),t(P,[2,53],{52:$e}),{26:X,52:O,66:V,67:U,91:H,97:166,102:[1,167],105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{95:[1,168],103:169,105:[1,170]},{26:X,52:O,66:V,67:U,91:H,95:[1,171],97:172,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{26:X,52:O,66:V,67:U,91:H,97:173,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Ht,[2,101],{22:[1,174],99:[1,175]}),t(Ht,[2,105],{22:[1,176]}),t(Ht,[2,109],{115:100,117:178,22:[1,177],26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),t(Ht,[2,111],{22:[1,179]}),t(Pe,[2,152]),t(Pe,[2,154]),t(Pe,[2,155]),t(Pe,[2,156]),t(Pe,[2,157]),t(Kt,[2,162]),t(Kt,[2,163]),t(Kt,[2,164]),t(Kt,[2,165]),t(Kt,[2,166]),t(Kt,[2,167]),t(Kt,[2,168]),t(Kt,[2,169]),t(Kt,[2,170]),t(Kt,[2,171]),t(Kt,[2,172]),t(Kt,[2,173]),t(Kt,[2,174]),{52:_,54:180,66:y,67:b,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:It,24:Pt,26:yt,38:Ct,39:181,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:182,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:184,42:pt,52:O,57:[1,183],66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:185,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:186,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:187,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{66:[1,188]},{22:It,24:Pt,26:yt,38:Ct,39:189,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:190,42:pt,52:O,66:V,67:U,71:[1,191],73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:192,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:193,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:194,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Jt,[2,151]),t(Vn,[2,3]),{8:195,15:Z},{15:[2,7]},t(a,[2,28]),t(qt,[2,33]),t(P,[2,51],{30:196,22:q}),t(Xt,[2,75],{22:[1,197]}),{22:[1,198]},{22:It,24:Pt,26:yt,38:Ct,39:199,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,73:Ft,81:dt,82:[1,200],83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Kt,[2,82]),t(Kt,[2,84]),t(Kt,[2,140]),t(Kt,[2,141]),t(Kt,[2,142]),t(Kt,[2,143]),t(Kt,[2,144]),t(Kt,[2,145]),t(Kt,[2,146]),t(Kt,[2,147]),t(Kt,[2,148]),t(Kt,[2,149]),t(Kt,[2,85]),t(Kt,[2,86]),t(Kt,[2,87]),t(Kt,[2,88]),t(Kt,[2,89]),t(Kt,[2,90]),t(Kt,[2,91]),t(Kt,[2,92]),t(Kt,[2,93]),t(Kt,[2,94]),t(Kt,[2,95]),{9:203,20:ut,21:G,22:It,23:j,24:Pt,26:yt,38:Ct,40:[1,202],42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,42:[1,204],43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,118:B,119:$,120:F,121:Q,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:q,30:205},{22:[1,206],26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:178,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},t(en,[2,123]),{22:[1,211]},{22:[1,212],26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:178,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:[1,213],26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:178,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{84:[1,214]},t(Ht,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},t(Pe,[2,153]),{84:[1,219],101:[1,220]},t(Zt,[2,57],{116:129,52:_,66:y,67:b,91:L,95:S,105:N,106:v,109:M,111:w,112:R,122:nt,123:z,124:Y,125:rt,126:lt,127:J}),{22:It,24:Pt,26:yt,38:Ct,41:[1,221],42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,56:[1,222],66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:223,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,58:[1,224],66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,60:[1,225],66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,62:[1,226],66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,64:[1,227],66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{67:[1,228]},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,70:[1,229],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,72:[1,230],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,39:231,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,41:[1,232],42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,73:Ft,75:[1,233],77:[1,234],81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,73:Ft,75:[1,236],77:[1,235],81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{9:237,20:ut,21:G,23:j},t(P,[2,52],{52:$e}),t(Xt,[2,77]),t(Xt,[2,76]),{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,68:[1,238],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Xt,[2,79]),t(Kt,[2,83]),{22:It,24:Pt,26:yt,38:Ct,39:239,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(ji,o,{17:240}),t(it,[2,43]),{51:241,52:_,54:46,66:y,67:b,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:Ke,66:Ye,67:tt,86:Dt,96:242,102:At,105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{22:Ke,66:Ye,67:tt,86:Dt,96:256,102:At,105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{22:Ke,66:Ye,67:tt,86:Dt,96:257,102:At,104:[1,258],105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{22:Ke,66:Ye,67:tt,86:Dt,96:259,102:At,104:[1,260],105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{105:[1,261]},{22:Ke,66:Ye,67:tt,86:Dt,96:262,102:At,105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{22:Ke,66:Ye,67:tt,86:Dt,96:263,102:At,105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{26:X,52:O,66:V,67:U,91:H,97:264,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Ht,[2,102]),{84:[1,265]},t(Ht,[2,106],{22:[1,266]}),t(Ht,[2,107]),t(Ht,[2,110]),t(Ht,[2,112],{22:[1,267]}),t(Ht,[2,113]),t($t,[2,58]),t($t,[2,59]),{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,58:[1,268],66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t($t,[2,66]),t($t,[2,61]),t($t,[2,62]),t($t,[2,63]),{66:[1,269]},t($t,[2,65]),t($t,[2,67]),{22:It,24:Pt,26:yt,38:Ct,42:pt,52:O,66:V,67:U,72:[1,270],73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t($t,[2,69]),t($t,[2,70]),t($t,[2,72]),t($t,[2,71]),t($t,[2,73]),t(Vn,[2,4]),t([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:It,24:Pt,26:yt,38:Ct,41:[1,271],42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,42:[1,272],43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,118:B,119:$,120:F,121:Q,122:nt,123:z,124:Y,125:rt,126:lt,127:J},t(Zt,[2,56]),t(Ht,[2,115],{106:Ue}),t(xa,[2,125],{108:274,22:Ke,66:Ye,67:tt,86:Dt,102:At,105:Qt,109:Be,110:ze,111:De,112:pn,113:Ve}),t(Ce,[2,127]),t(Ce,[2,129]),t(Ce,[2,130]),t(Ce,[2,131]),t(Ce,[2,132]),t(Ce,[2,133]),t(Ce,[2,134]),t(Ce,[2,135]),t(Ce,[2,136]),t(Ce,[2,137]),t(Ce,[2,138]),t(Ce,[2,139]),t(Ht,[2,116],{106:Ue}),t(Ht,[2,117],{106:Ue}),{22:[1,275]},t(Ht,[2,118],{106:Ue}),{22:[1,276]},t(en,[2,124]),t(Ht,[2,98],{106:Ue}),t(Ht,[2,99],{106:Ue}),t(Ht,[2,100],{115:100,117:178,26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),t(Ht,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:ut,21:G,23:j},t(it,[2,42]),{22:Ke,66:Ye,67:tt,86:Dt,102:At,105:Qt,107:283,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},t(Ce,[2,128]),{26:X,52:O,66:V,67:U,91:H,97:284,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{26:X,52:O,66:V,67:U,91:H,97:285,105:xt,106:ot,109:Nt,111:Mt,112:wt,115:100,117:98,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t(Ht,[2,108]),t(Ht,[2,114]),t($t,[2,60]),{22:It,24:Pt,26:yt,38:Ct,39:286,42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:140,84:Ee,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},t($t,[2,68]),t(ji,o,{17:287}),t(xa,[2,126],{108:274,22:Ke,66:Ye,67:tt,86:Dt,102:At,105:Qt,109:Be,110:ze,111:De,112:pn,113:Ve}),t(Ht,[2,121],{115:100,117:178,22:[1,288],26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),t(Ht,[2,122],{115:100,117:178,22:[1,289],26:X,52:O,66:V,67:U,91:H,105:xt,106:ot,109:Nt,111:Mt,112:wt,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st}),{22:It,24:Pt,26:yt,38:Ct,41:[1,290],42:pt,52:O,66:V,67:U,73:Ft,81:dt,83:201,85:151,86:gt,87:ie,88:se,89:_e,90:he,91:me,92:Vt,94:142,95:te,105:xt,106:ot,109:de,111:Mt,112:wt,113:ge,114:fe,115:148,122:Et,123:bt,124:mt,125:Tt,126:kt,127:st},{18:18,19:19,20:s,21:l,22:u,23:h,32:24,33:25,34:26,35:27,36:28,37:29,38:f,42:[1,291],43:31,44:d,46:p,48:m,50:35,51:45,52:_,54:46,66:y,67:b,86:k,87:T,88:x,89:A,90:C,91:L,95:S,105:N,106:v,109:M,111:w,112:R,116:47,118:B,119:$,120:F,121:Q,122:nt,123:z,124:Y,125:rt,126:lt,127:J},{22:Ke,66:Ye,67:tt,86:Dt,96:292,102:At,105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},{22:Ke,66:Ye,67:tt,86:Dt,96:293,102:At,105:Qt,107:243,108:244,109:Be,110:ze,111:De,112:pn,113:Ve},t($t,[2,64]),t(it,[2,41]),t(Ht,[2,119],{106:Ue}),t(Ht,[2,120],{106:Ue})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(qn,Yt){if(Yt.recoverable)this.trace(qn);else{var ce=new Error(qn);throw ce.hash=Yt,ce}},parse:function(qn){var Yt=this,ce=[0],Bt=[],Fe=[null],et=[],Fn=this.table,ct="",Dn=0,Qo=0,Ad=2,wu=1,Md=et.slice.call(arguments,1),ln=Object.create(this.lexer),Hi={yy:{}};for(var Jo in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Jo)&&(Hi.yy[Jo]=this.yy[Jo]);ln.setInput(qn,Hi.yy),Hi.yy.lexer=ln,Hi.yy.parser=this,typeof ln.yylloc>"u"&&(ln.yylloc={});var bi=ln.yylloc;et.push(bi);var _c=ln.options&&ln.options.ranges;typeof Hi.yy.parseError=="function"?this.parseError=Hi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function vc(){var kr;return kr=Bt.pop()||ln.lex()||wu,typeof kr!="number"&&(kr instanceof Array&&(Bt=kr,kr=Bt.pop()),kr=Yt.symbols_[kr]||kr),kr}for(var Nn,_i,Se,ts,Mr={},Wi,hr,es,oo;;){if(_i=ce[ce.length-1],this.defaultActions[_i]?Se=this.defaultActions[_i]:((Nn===null||typeof Nn>"u")&&(Nn=vc()),Se=Fn[_i]&&Fn[_i][Nn]),typeof Se>"u"||!Se.length||!Se[0]){var xc="";oo=[];for(Wi in Fn[_i])this.terminals_[Wi]&&Wi>Ad&&oo.push("'"+this.terminals_[Wi]+"'");ln.showPosition?xc="Parse error on line "+(Dn+1)+`:
`+ln.showPosition()+`
Expecting `+oo.join(", ")+", got '"+(this.terminals_[Nn]||Nn)+"'":xc="Parse error on line "+(Dn+1)+": Unexpected "+(Nn==wu?"end of input":"'"+(this.terminals_[Nn]||Nn)+"'"),this.parseError(xc,{text:ln.match,token:this.terminals_[Nn]||Nn,line:ln.yylineno,loc:bi,expected:oo})}if(Se[0]instanceof Array&&Se.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_i+", token: "+Nn);switch(Se[0]){case 1:ce.push(Nn),Fe.push(ln.yytext),et.push(ln.yylloc),ce.push(Se[1]),Nn=null,Qo=ln.yyleng,ct=ln.yytext,Dn=ln.yylineno,bi=ln.yylloc;break;case 2:if(hr=this.productions_[Se[1]][1],Mr.$=Fe[Fe.length-hr],Mr._$={first_line:et[et.length-(hr||1)].first_line,last_line:et[et.length-1].last_line,first_column:et[et.length-(hr||1)].first_column,last_column:et[et.length-1].last_column},_c&&(Mr._$.range=[et[et.length-(hr||1)].range[0],et[et.length-1].range[1]]),ts=this.performAction.apply(Mr,[ct,Qo,Dn,Hi.yy,Se[1],Fe,et].concat(Md)),typeof ts<"u")return ts;hr&&(ce=ce.slice(0,-1*hr*2),Fe=Fe.slice(0,-1*hr),et=et.slice(0,-1*hr)),ce.push(this.productions_[Se[1]][0]),Fe.push(Mr.$),et.push(Mr._$),es=Fn[ce[ce.length-2]][ce[ce.length-1]],ce.push(es);break;case 3:return!0}}return!0}},ku=function(){var qn={EOF:1,parseError:function(Yt,ce){if(this.yy.parser)this.yy.parser.parseError(Yt,ce);else throw new Error(Yt)},setInput:function(Yt,ce){return this.yy=ce||this.yy||{},this._input=Yt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Yt=this._input[0];this.yytext+=Yt,this.yyleng++,this.offset++,this.match+=Yt,this.matched+=Yt;var ce=Yt.match(/(?:\r\n?|\n).*/g);return ce?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Yt},unput:function(Yt){var ce=Yt.length,Bt=Yt.split(/(?:\r\n?|\n)/g);this._input=Yt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ce),this.offset-=ce;var Fe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Bt.length-1&&(this.yylineno-=Bt.length-1);var et=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Bt?(Bt.length===Fe.length?this.yylloc.first_column:0)+Fe[Fe.length-Bt.length].length-Bt[0].length:this.yylloc.first_column-ce},this.options.ranges&&(this.yylloc.range=[et[0],et[0]+this.yyleng-ce]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Yt){this.unput(this.match.slice(Yt))},pastInput:function(){var Yt=this.matched.substr(0,this.matched.length-this.match.length);return(Yt.length>20?"...":"")+Yt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Yt=this.match;return Yt.length<20&&(Yt+=this._input.substr(0,20-Yt.length)),(Yt.substr(0,20)+(Yt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Yt=this.pastInput(),ce=new Array(Yt.length+1).join("-");return Yt+this.upcomingInput()+`
`+ce+"^"},test_match:function(Yt,ce){var Bt,Fe,et;if(this.options.backtrack_lexer&&(et={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(et.yylloc.range=this.yylloc.range.slice(0))),Fe=Yt[0].match(/(?:\r\n?|\n).*/g),Fe&&(this.yylineno+=Fe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Fe?Fe[Fe.length-1].length-Fe[Fe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Yt[0].length},this.yytext+=Yt[0],this.match+=Yt[0],this.matches=Yt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Yt[0].length),this.matched+=Yt[0],Bt=this.performAction.call(this,this.yy,this,ce,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Bt)return Bt;if(this._backtrack){for(var Fn in et)this[Fn]=et[Fn];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Yt,ce,Bt,Fe;this._more||(this.yytext="",this.match="");for(var et=this._currentRules(),Fn=0;Fn<et.length;Fn++)if(Bt=this._input.match(this.rules[et[Fn]]),Bt&&(!ce||Bt[0].length>ce[0].length)){if(ce=Bt,Fe=Fn,this.options.backtrack_lexer){if(Yt=this.test_match(Bt,et[Fn]),Yt!==!1)return Yt;if(this._backtrack){ce=!1;continue}else return!1}else if(!this.options.flex)break}return ce?(Yt=this.test_match(ce,et[Fe]),Yt!==!1?Yt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Yt=this.next();return Yt||this.lex()},begin:function(Yt){this.conditionStack.push(Yt)},popState:function(){var Yt=this.conditionStack.length-1;return Yt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Yt){return Yt=this.conditionStack.length-1-Math.abs(Yt||0),Yt>=0?this.conditionStack[Yt]:"INITIAL"},pushState:function(Yt){this.begin(Yt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Yt,ce,Bt,Fe){switch(Bt){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:break;case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:return Yt.lex.firstGraph()&&this.begin("dir"),24;case 36:return Yt.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:return 101;case 40:return 101;case 41:return 101;case 42:return 101;case 43:return this.popState(),25;case 44:return this.popState(),26;case 45:return this.popState(),26;case 46:return this.popState(),26;case 47:return this.popState(),26;case 48:return this.popState(),26;case 49:return this.popState(),26;case 50:return this.popState(),26;case 51:return this.popState(),26;case 52:return this.popState(),26;case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:return 82;case 67:return 82;case 68:return 82;case 69:return 82;case 70:return 81;case 71:return 81;case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:return 125;case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};return qn}();Ui.lexer=ku;function bc(){this.yy={}}return bc.prototype=Ui,Ui.Parser=bc,new bc}();G1.parser=G1;const Crt=(t,e)=>{var n;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*graph/)!==null},Srt=(t,e)=>{var n;return((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"&&t.match(/^\s*graph/)!==null?!0:t.match(/^\s*flowchart/)!==null},Art="flowchart-";let qk=0,Wb=at(),an={},Yo=[],vs=[],Fi=[],V1={},Gb={},Dh=0,m3=!0,xi,md,bd=[];const _d=t=>pe.sanitizeText(t,Wb),Mrt=function(t,e,n){qe.parseDirective(this,t,e,n)},vd=function(t){const e=Object.keys(an);for(let n=0;n<e.length;n++)if(an[e[n]].id===t)return an[e[n]].domId;return t},Lrt=function(t,e,n,r,i,a,o={}){let s,l=t;typeof l>"u"||l.trim().length!==0&&(typeof an[l]>"u"&&(an[l]={id:l,domId:Art+l+"-"+qk,styles:[],classes:[]}),qk++,typeof e<"u"?(Wb=at(),s=_d(e.trim()),s[0]==='"'&&s[s.length-1]==='"'&&(s=s.substring(1,s.length-1)),an[l].text=s):typeof an[l].text>"u"&&(an[l].text=t),typeof n<"u"&&(an[l].type=n),typeof r<"u"&&r!==null&&r.forEach(function(u){an[l].styles.push(u)}),typeof i<"u"&&i!==null&&i.forEach(function(u){an[l].classes.push(u)}),typeof a<"u"&&(an[l].dir=a),an[l].props=o)},Brt=function(t,e,n,r){const i={start:t,end:e,type:void 0,text:""};r=n.text,typeof r<"u"&&(i.text=_d(r.trim()),i.text[0]==='"'&&i.text[i.text.length-1]==='"'&&(i.text=i.text.substring(1,i.text.length-1))),typeof n<"u"&&(i.type=n.type,i.stroke=n.stroke,i.length=n.length),Yo.push(i)},Drt=function(t,e,n,r){let i,a;for(i=0;i<t.length;i++)for(a=0;a<e.length;a++)Brt(t[i],e[a],n,r)},Nrt=function(t,e){t.forEach(function(n){n==="default"?Yo.defaultInterpolate=e:Yo[n].interpolate=e})},Ort=function(t,e){t.forEach(function(n){n==="default"?Yo.defaultStyle=e:(we.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),Yo[n].style=e)})},Rrt=function(t,e){typeof vs[t]>"u"&&(vs[t]={id:t,styles:[],textStyles:[]}),typeof e<"u"&&e!==null&&e.forEach(function(n){if(n.match("color")){const r=n.replace("fill","bgFill").replace("color","fill");vs[t].textStyles.push(r)}vs[t].styles.push(n)})},Irt=function(t){xi=t,xi.match(/.*</)&&(xi="RL"),xi.match(/.*\^/)&&(xi="BT"),xi.match(/.*>/)&&(xi="LR"),xi.match(/.*v/)&&(xi="TB")},Vb=function(t,e){t.split(",").forEach(function(n){let r=n;typeof an[r]<"u"&&an[r].classes.push(e),typeof V1[r]<"u"&&V1[r].classes.push(e)})},Frt=function(t,e){t.split(",").forEach(function(n){typeof e<"u"&&(Gb[md==="gen-1"?vd(n):n]=_d(e))})},$rt=function(t,e,n){let r=vd(t);if(at().securityLevel!=="loose"||typeof e>"u")return;let i=[];if(typeof n=="string"){i=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let a=0;a<i.length;a++){let o=i[a].trim();o.charAt(0)==='"'&&o.charAt(o.length-1)==='"'&&(o=o.substr(1,o.length-2)),i[a]=o}}i.length===0&&i.push(t),typeof an[t]<"u"&&(an[t].haveCallback=!0,bd.push(function(){const a=document.querySelector(`[id="${r}"]`);a!==null&&a.addEventListener("click",function(){we.runFunc(e,...i)},!1)}))},Prt=function(t,e,n){t.split(",").forEach(function(r){typeof an[r]<"u"&&(an[r].link=we.formatUrl(e,Wb),an[r].linkTarget=n)}),Vb(t,"clickable")},Yrt=function(t){return Gb[t]},zrt=function(t,e,n){t.split(",").forEach(function(r){$rt(r,e,n)}),Vb(t,"clickable")},jrt=function(t){bd.forEach(function(e){e(t)})},Urt=function(){return xi.trim()},Hrt=function(){return an},Wrt=function(){return Yo},Grt=function(){return vs},QM=function(t){let e=Lt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=Lt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Lt(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=Lt(this);if(n.attr("title")===null)return;const r=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+r.left+(r.right-r.left)/2+"px").style("top",window.scrollY+r.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),Lt(this).classed("hover",!1)})};bd.push(QM);const Vrt=function(t="gen-1"){an={},vs={},Yo=[],bd=[QM],Fi=[],V1={},Dh=0,Gb=[],m3=!0,md=t,pi()},qrt=t=>{md=t||"gen-1"},Xrt=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},Krt=function(t,e,n){let r=t.trim(),i=n.trim();r===i&&i.match(/\s/)&&(r=void 0);function a(h){const f={boolean:{},number:{},string:{}},d=[];let p;return{nodeList:h.filter(function(m){const _=typeof m;return m.stmt&&m.stmt==="dir"?(p=m.value,!1):m.trim()===""?!1:_ in f?f[_].hasOwnProperty(m)?!1:f[_][m]=!0:d.indexOf(m)>=0?!1:d.push(m)}),dir:p}}let o=[];const{nodeList:s,dir:l}=a(o.concat.apply(o,e));if(o=s,md==="gen-1")for(let h=0;h<o.length;h++)o[h]=vd(o[h]);r=r||"subGraph"+Dh,i=i||"",i=_d(i),Dh=Dh+1;const u={id:r,nodes:o,title:i.trim(),classes:[],dir:l};return W.info("Adding",u.id,u.nodes,u.dir),u.nodes=nL(u,Fi).nodes,Fi.push(u),V1[r]=u,r},Zrt=function(t){for(let e=0;e<Fi.length;e++)if(Fi[e].id===t)return e;return-1};let Jc=-1;const JM=[],tL=function(t,e){const n=Fi[e].nodes;if(Jc=Jc+1,Jc>2e3)return;if(JM[Jc]=e,Fi[e].id===t)return{result:!0,count:0};let r=0,i=1;for(;r<n.length;){const a=Zrt(n[r]);if(a>=0){const o=tL(t,a);if(o.result)return{result:!0,count:i+o.count};i=i+o.count}r=r+1}return{result:!1,count:i}},Qrt=function(t){return JM[t]},Jrt=function(){Jc=-1,Fi.length>0&&tL("none",Fi.length-1)},tit=function(){return Fi},eit=()=>m3?(m3=!1,!0):!1,nit=t=>{let e=t.trim(),n="arrow_open";switch(e[0]){case"<":n="arrow_point",e=e.slice(1);break;case"x":n="arrow_cross",e=e.slice(1);break;case"o":n="arrow_circle",e=e.slice(1);break}let r="normal";return e.indexOf("=")!==-1&&(r="thick"),e.indexOf(".")!==-1&&(r="dotted"),{type:n,stroke:r}},rit=(t,e)=>{const n=e.length;let r=0;for(let i=0;i<n;++i)e[i]===t&&++r;return r},iit=t=>{const e=t.trim();let n=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,n=n.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,n=n.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,n=n.slice(1));break}let i="normal",a=n.length-1;n[0]==="="&&(i="thick"),n[0]==="~"&&(i="invisible");let o=rit(".",n);return o&&(i="dotted",a=o),{type:r,stroke:i,length:a}},ait=(t,e)=>{const n=iit(t);let r;if(e){if(r=nit(e),r.stroke!==n.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=n.type;else{if(r.type!==n.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=n.length,r}return n},eL=(t,e)=>{let n=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(n=!0)}),n},nL=(t,e)=>{const n=[];return t.nodes.forEach((r,i)=>{eL(e,r)||n.push(t.nodes[i])}),{nodes:n}},oa={parseDirective:Mrt,defaultConfig:()=>qs.flowchart,setAccTitle:zr,getAccTitle:gi,getAccDescription:mi,setAccDescription:yi,addVertex:Lrt,lookUpDomId:vd,addLink:Drt,updateLinkInterpolate:Nrt,updateLink:Ort,addClass:Rrt,setDirection:Irt,setClass:Vb,setTooltip:Frt,getTooltip:Yrt,setClickEvent:zrt,setLink:Prt,bindFunctions:jrt,getDirection:Urt,getVertices:Hrt,getEdges:Wrt,getClasses:Grt,clear:Vrt,setGen:qrt,defaultStyle:Xrt,addSubGraph:Krt,getDepthFirstPos:Qrt,indexNodes:Jrt,getSubGraphs:tit,destructLink:ait,lex:{firstGraph:eit},exists:eL,makeUniq:nL};var q1;if(typeof Ka=="function")try{q1=dn}catch{}q1||(q1=window.graphlib);var oit=q1,X1;if(typeof Ka=="function")try{X1=YM()}catch{}X1||(X1=window.dagre);var rL=X1,iL=sit;function sit(t,e){return t.intersect(e)}var qb=cit;function cit(t,e,n,r){var i=t.x,a=t.y,o=i-r.x,s=a-r.y,l=Math.sqrt(e*e*s*s+n*n*o*o),u=Math.abs(e*n*o/l);r.x<i&&(u=-u);var h=Math.abs(e*n*s/l);return r.y<a&&(h=-h),{x:i+u,y:a+h}}var lit=qb,aL=uit;function uit(t,e,n){return lit(t,e,e,n)}var hit=dit;function dit(t,e,n,r){var i,a,o,s,l,u,h,f,d,p,m,_,y,b,k;if(i=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,d=i*n.x+o*n.y+l,p=i*r.x+o*r.y+l,!(d!==0&&p!==0&&Xk(d,p))&&(a=r.y-n.y,s=n.x-r.x,u=r.x*n.y-n.x*r.y,h=a*t.x+s*t.y+u,f=a*e.x+s*e.y+u,!(h!==0&&f!==0&&Xk(h,f))&&(m=i*s-a*o,m!==0)))return _=Math.abs(m/2),y=o*u-s*l,b=y<0?(y-_)/m:(y+_)/m,y=a*l-i*u,k=y<0?(y-_)/m:(y+_)/m,{x:b,y:k}}function Xk(t,e){return t*e>0}var fit=hit,oL=pit;function pit(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(function(m){o=Math.min(o,m.x),s=Math.min(s,m.y)});for(var l=r-t.width/2-o,u=i-t.height/2-s,h=0;h<e.length;h++){var f=e[h],d=e[h<e.length-1?h+1:0],p=fit(t,n,{x:l+f.x,y:u+f.y},{x:l+d.x,y:u+d.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort(function(m,_){var y=m.x-n.x,b=m.y-n.y,k=Math.sqrt(y*y+b*b),T=_.x-n.x,x=_.y-n.y,A=Math.sqrt(T*T+x*x);return k<A?-1:k===A?0:1}),a[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}var sL=git;function git(t,e){var n=t.x,r=t.y,i=e.x-n,a=e.y-r,o=t.width/2,s=t.height/2,l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=a===0?0:s*i/a,u=s):(i<0&&(o=-o),l=o,u=i===0?0:o*a/i),{x:n+l,y:r+u}}var yit={node:iL,circle:aL,ellipse:qb,polygon:oL,rect:sL},K1;if(typeof Ka=="function")try{K1={defaults:MM(),each:Ob(),isFunction:sc,isPlainObject:NM(),pick:IM(),has:Fb(),range:FM(),uniqueId:$M()}}catch{}K1||(K1=window._);var yc=K1;const mit=SB(IW);var Vl;if(!Vl&&typeof Ka=="function")try{Vl=mit}catch{}Vl||(Vl=window.d3);var ao=Vl,Kk=yc,Hr={isSubgraph:bit,edgeToId:_it,applyStyle:xit,applyClass:kit,applyTransition:wit};function bit(t,e){return!!t.children(e).length}function _it(t){return zy(t.v)+":"+zy(t.w)+":"+zy(t.name)}var vit=/:/g;function zy(t){return t?String(t).replace(vit,"\\:"):""}function xit(t,e){e&&t.attr("style",e)}function kit(t,e,n){e&&t.attr("class",e).attr("class",n+" "+t.attr("class"))}function wit(t,e){var n=e.graph();if(Kk.isPlainObject(n)){var r=n.transition;if(Kk.isFunction(r))return r(t)}return t}var jy,Zk;function Tit(){if(Zk)return jy;Zk=1;var t=Hr;jy=e;function e(r,i){for(var a=r.append("text"),o=n(i.label).split(`
`),s=0;s<o.length;s++)a.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(o[s]);return t.applyStyle(a,i.labelStyle),a}function n(r){for(var i="",a=!1,o,s=0;s<r.length;++s)if(o=r[s],a){switch(o){case"n":i+=`
`;break;default:i+=o}a=!1}else o==="\\"?a=!0:i+=o;return i}return jy}var Eit=Hr,Xb=Cit;function Cit(t,e){var n=t.append("foreignObject").attr("width","100000"),r=n.append("xhtml:div");r.attr("xmlns","http://www.w3.org/1999/xhtml");var i=e.label;switch(typeof i){case"function":r.insert(i);break;case"object":r.insert(function(){return i});break;default:r.html(i)}Eit.applyStyle(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");var a=r.node().getBoundingClientRect();return n.attr("width",a.width).attr("height",a.height),n}var Uy,Qk;function Sit(){if(Qk)return Uy;Qk=1;var t=Hr;Uy=e;function e(n,r){var i=n;return i.node().appendChild(r.label),t.applyStyle(i,r.labelStyle),i}return Uy}var Hy,Jk;function Kb(){if(Jk)return Hy;Jk=1;var t=Tit(),e=Xb,n=Sit();Hy=r;function r(i,a,o){var s=a.label,l=i.append("g");a.labelType==="svg"?n(l,a):typeof s!="string"||a.labelType==="html"?e(l,a):t(l,a);var u=l.node().getBBox(),h;switch(o){case"top":h=-a.height/2;break;case"bottom":h=a.height/2-u.height;break;default:h=-u.height/2}return l.attr("transform","translate("+-u.width/2+","+h+")"),l}return Hy}var Wy,t9;function Ait(){if(t9)return Wy;t9=1;var t=yc,e=Kb(),n=Hr,r=ao;Wy=i;function i(a,o,s){var l=o.nodes().filter(function(f){return!n.isSubgraph(o,f)}),u=a.selectAll("g.node").data(l,function(f){return f}).classed("update",!0);u.exit().remove(),u.enter().append("g").attr("class","node").style("opacity",0),u=a.selectAll("g.node"),u.each(function(f){var d=o.node(f),p=r.select(this);n.applyClass(p,d.class,(p.classed("update")?"update ":"")+"node"),p.select("g.label").remove();var m=p.append("g").attr("class","label"),_=e(m,d),y=s[d.shape],b=t.pick(_.node().getBBox(),"width","height");d.elem=this,d.id&&p.attr("id",d.id),d.labelId&&m.attr("id",d.labelId),t.has(d,"width")&&(b.width=d.width),t.has(d,"height")&&(b.height=d.height),b.width+=d.paddingLeft+d.paddingRight,b.height+=d.paddingTop+d.paddingBottom,m.attr("transform","translate("+(d.paddingLeft-d.paddingRight)/2+","+(d.paddingTop-d.paddingBottom)/2+")");var k=r.select(this);k.select(".label-container").remove();var T=y(k,b,d).classed("label-container",!0);n.applyStyle(T,d.style);var x=T.node().getBBox();d.width=x.width,d.height=x.height});var h;return u.exit?h=u.exit():h=u.selectAll(null),n.applyTransition(h,o).style("opacity",0).remove(),u}return Wy}var Gy,e9;function Mit(){if(e9)return Gy;e9=1;var t=Hr,e=ao,n=Kb();Gy=r;function r(i,a){var o=a.nodes().filter(function(u){return t.isSubgraph(a,u)}),s=i.selectAll("g.cluster").data(o,function(u){return u});s.selectAll("*").remove(),s.enter().append("g").attr("class","cluster").attr("id",function(u){var h=a.node(u);return h.id}).style("opacity",0),s=i.selectAll("g.cluster"),t.applyTransition(s,a).style("opacity",1),s.each(function(u){var h=a.node(u),f=e.select(this);e.select(this).append("rect");var d=f.append("g").attr("class","label");n(d,h,h.clusterLabelPos)}),s.selectAll("rect").each(function(u){var h=a.node(u),f=e.select(this);t.applyStyle(f,h.style)});var l;return s.exit?l=s.exit():l=s.selectAll(null),t.applyTransition(l,a).style("opacity",0).remove(),s}return Gy}var Vy,n9;function Lit(){if(n9)return Vy;n9=1;var t=yc,e=Kb(),n=Hr,r=ao;Vy=i;function i(a,o){var s=a.selectAll("g.edgeLabel").data(o.edges(),function(u){return n.edgeToId(u)}).classed("update",!0);s.exit().remove(),s.enter().append("g").classed("edgeLabel",!0).style("opacity",0),s=a.selectAll("g.edgeLabel"),s.each(function(u){var h=r.select(this);h.select(".label").remove();var f=o.edge(u),d=e(h,o.edge(u),0,0).classed("label",!0),p=d.node().getBBox();f.labelId&&d.attr("id",f.labelId),t.has(f,"width")||(f.width=p.width),t.has(f,"height")||(f.height=p.height)});var l;return s.exit?l=s.exit():l=s.selectAll(null),n.applyTransition(l,o).style("opacity",0).remove(),s}return Vy}var qy,r9;function Bit(){if(r9)return qy;r9=1;var t=yc,e=iL,n=Hr,r=ao;qy=i;function i(f,d,p){var m=f.selectAll("g.edgePath").data(d.edges(),function(b){return n.edgeToId(b)}).classed("update",!0),_=u(m,d);h(m,d);var y=m.merge!==void 0?m.merge(_):m;return n.applyTransition(y,d).style("opacity",1),y.each(function(b){var k=r.select(this),T=d.edge(b);T.elem=this,T.id&&k.attr("id",T.id),n.applyClass(k,T.class,(k.classed("update")?"update ":"")+"edgePath")}),y.selectAll("path.path").each(function(b){var k=d.edge(b);k.arrowheadId=t.uniqueId("arrowhead");var T=r.select(this).attr("marker-end",function(){return"url("+a(location.href,k.arrowheadId)+")"}).style("fill","none");n.applyTransition(T,d).attr("d",function(x){return o(d,x)}),n.applyStyle(T,k.style)}),y.selectAll("defs *").remove(),y.selectAll("defs").each(function(b){var k=d.edge(b),T=p[k.arrowhead];T(r.select(this),k.arrowheadId,k,"arrowhead")}),y}function a(f,d){var p=f.split("#")[0];return p+"#"+d}function o(f,d){var p=f.edge(d),m=f.node(d.v),_=f.node(d.w),y=p.points.slice(1,p.points.length-1);return y.unshift(e(m,y[0])),y.push(e(_,y[y.length-1])),s(p,y)}function s(f,d){var p=(r.line||r.svg.line)().x(function(m){return m.x}).y(function(m){return m.y});return(p.curve||p.interpolate)(f.curve),p(d)}function l(f){var d=f.getBBox(),p=f.ownerSVGElement.getScreenCTM().inverse().multiply(f.getScreenCTM()).translate(d.width/2,d.height/2);return{x:p.e,y:p.f}}function u(f,d){var p=f.enter().append("g").attr("class","edgePath").style("opacity",0);return p.append("path").attr("class","path").attr("d",function(m){var _=d.edge(m),y=d.node(m.v).elem,b=t.range(_.points.length).map(function(){return l(y)});return s(_,b)}),p.append("defs"),p}function h(f,d){var p=f.exit();n.applyTransition(p,d).style("opacity",0).remove()}return qy}var Xy,i9;function Dit(){if(i9)return Xy;i9=1;var t=Hr,e=ao;Xy=n;function n(r,i){var a=r.filter(function(){return!e.select(this).classed("update")});function o(s){var l=i.node(s);return"translate("+l.x+","+l.y+")"}a.attr("transform",o),t.applyTransition(r,i).style("opacity",1).attr("transform",o)}return Xy}var Ky,a9;function Nit(){if(a9)return Ky;a9=1;var t=Hr,e=ao,n=yc;Ky=r;function r(i,a){var o=i.filter(function(){return!e.select(this).classed("update")});function s(l){var u=a.edge(l);return n.has(u,"x")?"translate("+u.x+","+u.y+")":""}o.attr("transform",s),t.applyTransition(i,a).style("opacity",1).attr("transform",s)}return Ky}var Zy,o9;function Oit(){if(o9)return Zy;o9=1;var t=Hr,e=ao;Zy=n;function n(r,i){var a=r.filter(function(){return!e.select(this).classed("update")});function o(s){var l=i.node(s);return"translate("+l.x+","+l.y+")"}a.attr("transform",o),t.applyTransition(r,i).style("opacity",1).attr("transform",o),t.applyTransition(a.selectAll("rect"),i).attr("width",function(s){return i.node(s).width}).attr("height",function(s){return i.node(s).height}).attr("x",function(s){var l=i.node(s);return-l.width/2}).attr("y",function(s){var l=i.node(s);return-l.height/2})}return Zy}var Qy,s9;function Rit(){if(s9)return Qy;s9=1;var t=sL,e=qb,n=aL,r=oL;Qy={rect:i,ellipse:a,circle:o,diamond:s};function i(l,u,h){var f=l.insert("rect",":first-child").attr("rx",h.rx).attr("ry",h.ry).attr("x",-u.width/2).attr("y",-u.height/2).attr("width",u.width).attr("height",u.height);return h.intersect=function(d){return t(h,d)},f}function a(l,u,h){var f=u.width/2,d=u.height/2,p=l.insert("ellipse",":first-child").attr("x",-u.width/2).attr("y",-u.height/2).attr("rx",f).attr("ry",d);return h.intersect=function(m){return e(h,f,d,m)},p}function o(l,u,h){var f=Math.max(u.width,u.height)/2,d=l.insert("circle",":first-child").attr("x",-u.width/2).attr("y",-u.height/2).attr("r",f);return h.intersect=function(p){return n(h,f,p)},d}function s(l,u,h){var f=u.width*Math.SQRT2/2,d=u.height*Math.SQRT2/2,p=[{x:0,y:-d},{x:-f,y:0},{x:0,y:d},{x:f,y:0}],m=l.insert("polygon",":first-child").attr("points",p.map(function(_){return _.x+","+_.y}).join(" "));return h.intersect=function(_){return r(h,p,_)},m}return Qy}var Jy,c9;function Iit(){if(c9)return Jy;c9=1;var t=Hr;Jy={default:e,normal:e,vee:n,undirected:r};function e(i,a,o,s){var l=i.append("marker").attr("id",a).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),u=l.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(u,o[s+"Style"]),o[s+"Class"]&&u.attr("class",o[s+"Class"])}function n(i,a,o,s){var l=i.append("marker").attr("id",a).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),u=l.append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(u,o[s+"Style"]),o[s+"Class"]&&u.attr("class",o[s+"Class"])}function r(i,a,o,s){var l=i.append("marker").attr("id",a).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),u=l.append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(u,o[s+"Style"]),o[s+"Class"]&&u.attr("class",o[s+"Class"])}return Jy}var Hn=yc,Fit=ao,$it=rL.layout,Pit=Yit;function Yit(){var t=Ait(),e=Mit(),n=Lit(),r=Bit(),i=Dit(),a=Nit(),o=Oit(),s=Rit(),l=Iit(),u=function(h,f){Uit(f);var d=Rc(h,"output"),p=Rc(d,"clusters"),m=Rc(d,"edgePaths"),_=n(Rc(d,"edgeLabels"),f),y=t(Rc(d,"nodes"),f,s);$it(f),i(y,f),a(_,f),r(m,f,l);var b=e(p,f);o(b,f),Hit(f)};return u.createNodes=function(h){return arguments.length?(t=h,u):t},u.createClusters=function(h){return arguments.length?(e=h,u):e},u.createEdgeLabels=function(h){return arguments.length?(n=h,u):n},u.createEdgePaths=function(h){return arguments.length?(r=h,u):r},u.shapes=function(h){return arguments.length?(s=h,u):s},u.arrows=function(h){return arguments.length?(l=h,u):l},u}var zit={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},jit={arrowhead:"normal",curve:Fit.curveLinear};function Uit(t){t.nodes().forEach(function(e){var n=t.node(e);!Hn.has(n,"label")&&!t.children(e).length&&(n.label=e),Hn.has(n,"paddingX")&&Hn.defaults(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),Hn.has(n,"paddingY")&&Hn.defaults(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),Hn.has(n,"padding")&&Hn.defaults(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),Hn.defaults(n,zit),Hn.each(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(r){n[r]=Number(n[r])}),Hn.has(n,"width")&&(n._prevWidth=n.width),Hn.has(n,"height")&&(n._prevHeight=n.height)}),t.edges().forEach(function(e){var n=t.edge(e);Hn.has(n,"label")||(n.label=""),Hn.defaults(n,jit)})}function Hit(t){Hn.each(t.nodes(),function(e){var n=t.node(e);Hn.has(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,Hn.has(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight})}function Rc(t,e){var n=t.select("g."+e);return n.empty()&&(n=t.append("g").attr("class",e)),n}var Wit="0.6.4";/**
 * @license
 * Copyright (c) 2012-2013 Chris Pettitt
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ar={graphlib:oit,dagre:rL,intersect:yit,render:Pit,util:Hr,version:Wit};function cL(t,e,n){const r=e.width,i=e.height,a=(r+i)*.9,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],s=va(t,a,a,o);return n.intersect=function(l){return Ar.intersect.polygon(n,o,l)},s}function lL(t,e,n){const r=e.height,i=r/4,a=e.width+2*i,o=[{x:i,y:0},{x:a-i,y:0},{x:a,y:-r/2},{x:a-i,y:-r},{x:i,y:-r},{x:0,y:-r/2}],s=va(t,a,r,o);return n.intersect=function(l){return Ar.intersect.polygon(n,o,l)},s}function uL(t,e,n){const r=e.width,i=e.height,a=[{x:-i/2,y:0},{x:r,y:0},{x:r,y:-i},{x:-i/2,y:-i},{x:0,y:-i/2}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function hL(t,e,n){const r=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:i/6,y:-i}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function dL(t,e,n){const r=e.width,i=e.height,a=[{x:2*i/6,y:0},{x:r+i/6,y:0},{x:r-2*i/6,y:-i},{x:-i/6,y:-i}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function fL(t,e,n){const r=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:r+2*i/6,y:0},{x:r-i/6,y:-i},{x:i/6,y:-i}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function pL(t,e,n){const r=e.width,i=e.height,a=[{x:i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:-2*i/6,y:-i}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function gL(t,e,n){const r=e.width,i=e.height,a=[{x:0,y:0},{x:r+i/2,y:0},{x:r,y:-i/2},{x:r+i/2,y:-i},{x:0,y:-i}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function yL(t,e,n){const r=e.height,i=e.width+r/4,a=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-i/2).attr("y",-r/2).attr("width",i).attr("height",r);return n.intersect=function(o){return Ar.intersect.rect(n,o)},a}function mL(t,e,n){const r=e.width,i=e.height,a=[{x:0,y:0},{x:r,y:0},{x:r,y:-i},{x:0,y:-i},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-i},{x:-8,y:-i},{x:-8,y:0}],o=va(t,r,i,a);return n.intersect=function(s){return Ar.intersect.polygon(n,a,s)},o}function bL(t,e,n){const r=e.width,i=r/2,a=i/(2.5+r/50),o=e.height+a,s="M 0,"+a+" a "+i+","+a+" 0,0,0 "+r+" 0 a "+i+","+a+" 0,0,0 "+-r+" 0 l 0,"+o+" a "+i+","+a+" 0,0,0 "+r+" 0 l 0,"+-o,l=t.attr("label-offset-y",a).insert("path",":first-child").attr("d",s).attr("transform","translate("+-r/2+","+-(o/2+a)+")");return n.intersect=function(u){const h=Ar.intersect.rect(n,u),f=h.x-n.x;if(i!=0&&(Math.abs(f)<n.width/2||Math.abs(f)==n.width/2&&Math.abs(h.y-n.y)>n.height/2-a)){let d=a*a*(1-f*f/(i*i));d!=0&&(d=Math.sqrt(d)),d=a-d,u.y-n.y>0&&(d=-d),h.y+=d}return h},l}function Git(t){t.shapes().question=cL,t.shapes().hexagon=lL,t.shapes().stadium=yL,t.shapes().subroutine=mL,t.shapes().cylinder=bL,t.shapes().rect_left_inv_arrow=uL,t.shapes().lean_right=hL,t.shapes().lean_left=dL,t.shapes().trapezoid=fL,t.shapes().inv_trapezoid=pL,t.shapes().rect_right_inv_arrow=gL}function Vit(t){t({question:cL}),t({hexagon:lL}),t({stadium:yL}),t({subroutine:mL}),t({cylinder:bL}),t({rect_left_inv_arrow:uL}),t({lean_right:hL}),t({lean_left:dL}),t({trapezoid:fL}),t({inv_trapezoid:pL}),t({rect_right_inv_arrow:gL})}function va(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("transform","translate("+-e/2+","+n/2+")")}const qit={addToRender:Git,addToRenderV2:Vit},_L={},Xit=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)_L[e[n]]=t[e[n]]},vL=function(t,e,n,r,i,a){const o=r?r.select(`[id="${n}"]`):Lt(`[id="${n}"]`),s=i||document;Object.keys(t).forEach(function(l){const u=t[l];let h="default";u.classes.length>0&&(h=u.classes.join(" "));const f=Xa(u.styles);let d=u.text!==void 0?u.text:u.id,p;if(Mn(at().flowchart.htmlLabels)){const y={label:d.replace(/fa[lrsb]?:fa-[\w-]+/g,b=>`<i class='${b.replace(":"," ")}'></i>`)};p=Xb(o,y).node(),p.parentNode.removeChild(p)}else{const y=s.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("style",f.labelStyle.replace("color:","fill:"));const b=d.split(pe.lineBreakRegex);for(let k=0;k<b.length;k++){const T=s.createElementNS("http://www.w3.org/2000/svg","tspan");T.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),T.setAttribute("dy","1em"),T.setAttribute("x","1"),T.textContent=b[k],y.appendChild(T)}p=y}let m=0,_="";switch(u.type){case"round":m=5,_="rect";break;case"square":_="rect";break;case"diamond":_="question";break;case"hexagon":_="hexagon";break;case"odd":_="rect_left_inv_arrow";break;case"lean_right":_="lean_right";break;case"lean_left":_="lean_left";break;case"trapezoid":_="trapezoid";break;case"inv_trapezoid":_="inv_trapezoid";break;case"odd_right":_="rect_left_inv_arrow";break;case"circle":_="circle";break;case"ellipse":_="ellipse";break;case"stadium":_="stadium";break;case"subroutine":_="subroutine";break;case"cylinder":_="cylinder";break;case"group":_="rect";break;default:_="rect"}W.warn("Adding node",u.id,u.domId),e.setNode(a.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:f.labelStyle,shape:_,label:p,rx:m,ry:m,class:h,style:f.style,id:a.db.lookUpDomId(u.id)})})},xL=function(t,e,n){let r=0,i,a;if(typeof t.defaultStyle<"u"){const o=Xa(t.defaultStyle);i=o.style,a=o.labelStyle}t.forEach(function(o){r++;var s="L-"+o.start+"-"+o.end,l="LS-"+o.start,u="LE-"+o.end;const h={};o.type==="arrow_open"?h.arrowhead="none":h.arrowhead="normal";let f="",d="";if(typeof o.style<"u"){const p=Xa(o.style);f=p.style,d=p.labelStyle}else switch(o.stroke){case"normal":f="fill:none",typeof i<"u"&&(f=i),typeof a<"u"&&(d=a);break;case"dotted":f="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f=" stroke-width: 3.5px;fill:none";break}h.style=f,h.labelStyle=d,typeof o.interpolate<"u"?h.curve=Li(o.interpolate,_r):typeof t.defaultInterpolate<"u"?h.curve=Li(t.defaultInterpolate,_r):h.curve=Li(_L.curve,_r),typeof o.text>"u"?typeof o.style<"u"&&(h.arrowheadStyle="fill: #333"):(h.arrowheadStyle="fill: #333",h.labelpos="c",Mn(at().flowchart.htmlLabels)?(h.labelType="html",h.label=`<span id="L-${s}" class="edgeLabel L-${l}' L-${u}" style="${h.labelStyle}">${o.text.replace(/fa[lrsb]?:fa-[\w-]+/g,p=>`<i class='${p.replace(":"," ")}'></i>`)}</span>`):(h.labelType="text",h.label=o.text.replace(pe.lineBreakRegex,`
`),typeof o.style>"u"&&(h.style=h.style||"stroke: #333; stroke-width: 1.5px;fill:none"),h.labelStyle=h.labelStyle.replace("color:","fill:"))),h.id=s,h.class=l+" "+u,h.minlen=o.length||1,e.setEdge(n.db.lookUpDomId(o.start),n.db.lookUpDomId(o.end),h,r)})},Kit=function(t,e){W.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{return}},Zit=function(t,e,n,r){W.info("Drawing flowchart"),r.db.clear();const{securityLevel:i,flowchart:a}=at();let o;i==="sandbox"&&(o=Lt("#i"+e));const s=Lt(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=i==="sandbox"?o.nodes()[0].contentDocument:document;try{r.parser.parse(t)}catch{W.debug("Parsing failed")}let u=r.db.getDirection();typeof u>"u"&&(u="TD");const h=a.nodeSpacing||50,f=a.rankSpacing||50,d=new dn.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:u,nodesep:h,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let p;const m=r.db.getSubGraphs();for(let C=m.length-1;C>=0;C--)p=m[C],r.db.addVertex(p.id,p.title,"group",void 0,p.classes);const _=r.db.getVertices();W.warn("Get vertices",_);const y=r.db.getEdges();let b=0;for(b=m.length-1;b>=0;b--){p=m[b],u0("cluster").append("text");for(let C=0;C<p.nodes.length;C++)W.warn("Setting subgraph",p.nodes[C],r.db.lookUpDomId(p.nodes[C]),r.db.lookUpDomId(p.id)),d.setParent(r.db.lookUpDomId(p.nodes[C]),r.db.lookUpDomId(p.id))}vL(_,d,e,s,l,r),xL(y,d,r);const k=Ar.render,T=new k;qit.addToRender(T),T.arrows().none=function(C,L,S,N){const v=C.append("marker").attr("id",L).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");Ar.util.applyStyle(v,S[N+"Style"])},T.arrows().normal=function(C,L){C.append("marker").attr("id",L).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const x=s.select(`[id="${e}"]`);xr(r.db,x,e);const A=s.select("#"+e+" g");for(T(A,d),A.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+b),b=0;b<m.length;b++)if(p=m[b],p.title!=="undefined"){const C=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"] rect'),L=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"]'),S=C[0].x.baseVal.value,N=C[0].y.baseVal.value,v=C[0].width.baseVal.value,M=Lt(L[0]).select(".label");M.attr("transform",`translate(${S+v/2}, ${N+14})`),M.attr("id",e+"Text");for(let w=0;w<p.classes.length;w++)L[0].classList.add(p.classes[w])}if(!a.htmlLabels){const C=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let L=0;L<C.length;L++){const S=C[L],N=S.getBBox(),v=l.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("rx",0),v.setAttribute("ry",0),v.setAttribute("width",N.width),v.setAttribute("height",N.height),S.insertBefore(v,S.firstChild)}}td(d,x,a.diagramPadding,a.useMaxWidth),Object.keys(_).forEach(function(C){const L=_[C];if(L.link){const S=s.select("#"+e+' [id="'+r.db.lookUpDomId(C)+'"]');if(S){const N=l.createElementNS("http://www.w3.org/2000/svg","a");N.setAttributeNS("http://www.w3.org/2000/svg","class",L.classes.join(" ")),N.setAttributeNS("http://www.w3.org/2000/svg","href",L.link),N.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),i==="sandbox"?N.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):L.linkTarget&&N.setAttributeNS("http://www.w3.org/2000/svg","target",L.linkTarget);const v=S.insert(function(){return N},":first-child"),M=S.select(".label-container");M&&v.append(function(){return M.node()});const w=S.select(".label");w&&v.append(function(){return w.node()})}}})},Zb={setConf:Xit,addVertices:vL,addEdges:xL,getClasses:Kit,draw:Zit},kL={},Qit=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)kL[e[n]]=t[e[n]]},wL=function(t,e,n,r,i,a){const o=r.select(`[id="${n}"]`);Object.keys(t).forEach(function(s){const l=t[s];let u="default";l.classes.length>0&&(u=l.classes.join(" "));const h=Xa(l.styles);let f=l.text!==void 0?l.text:l.id,d;if(Mn(at().flowchart.htmlLabels)){const _={label:f.replace(/fa[lrsb]?:fa-[\w-]+/g,y=>`<i class='${y.replace(":"," ")}'></i>`)};d=Xb(o,_).node(),d.parentNode.removeChild(d)}else{const _=i.createElementNS("http://www.w3.org/2000/svg","text");_.setAttribute("style",h.labelStyle.replace("color:","fill:"));const y=f.split(pe.lineBreakRegex);for(let b=0;b<y.length;b++){const k=i.createElementNS("http://www.w3.org/2000/svg","tspan");k.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),k.setAttribute("dy","1em"),k.setAttribute("x","1"),k.textContent=y[b],_.appendChild(k)}d=_}let p=0,m="";switch(l.type){case"round":p=5,m="rect";break;case"square":m="rect";break;case"diamond":m="question";break;case"hexagon":m="hexagon";break;case"odd":m="rect_left_inv_arrow";break;case"lean_right":m="lean_right";break;case"lean_left":m="lean_left";break;case"trapezoid":m="trapezoid";break;case"inv_trapezoid":m="inv_trapezoid";break;case"odd_right":m="rect_left_inv_arrow";break;case"circle":m="circle";break;case"ellipse":m="ellipse";break;case"stadium":m="stadium";break;case"subroutine":m="subroutine";break;case"cylinder":m="cylinder";break;case"group":m="rect";break;case"doublecircle":m="doublecircle";break;default:m="rect"}e.setNode(l.id,{labelStyle:h.labelStyle,shape:m,labelText:f,rx:p,ry:p,class:u,style:h.style,id:l.id,link:l.link,linkTarget:l.linkTarget,tooltip:a.db.getTooltip(l.id)||"",domId:a.db.lookUpDomId(l.id),haveCallback:l.haveCallback,width:l.type==="group"?500:void 0,dir:l.dir,type:l.type,props:l.props,padding:at().flowchart.padding}),W.info("setNode",{labelStyle:h.labelStyle,shape:m,labelText:f,rx:p,ry:p,class:u,style:h.style,id:l.id,domId:a.db.lookUpDomId(l.id),width:l.type==="group"?500:void 0,type:l.type,dir:l.dir,props:l.props,padding:at().flowchart.padding})})},TL=function(t,e,n){W.info("abc78 edges = ",t);let r=0,i={},a,o;if(typeof t.defaultStyle<"u"){const s=Xa(t.defaultStyle);a=s.style,o=s.labelStyle}t.forEach(function(s){r++;var l="L-"+s.start+"-"+s.end;typeof i[l]>"u"?(i[l]=0,W.info("abc78 new entry",l,i[l])):(i[l]++,W.info("abc78 new entry",l,i[l]));let u=l+"-"+i[l];W.info("abc78 new link id to be used is",l,u,i[l]);var h="LS-"+s.start,f="LE-"+s.end;const d={style:"",labelStyle:""};switch(d.minlen=s.length||1,s.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",s.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let p="",m="";switch(s.stroke){case"normal":p="fill:none;",typeof a<"u"&&(p=a),typeof o<"u"&&(m=o),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(typeof s.style<"u"){const _=Xa(s.style);p=_.style,m=_.labelStyle}d.style=d.style+=p,d.labelStyle=d.labelStyle+=m,typeof s.interpolate<"u"?d.curve=Li(s.interpolate,_r):typeof t.defaultInterpolate<"u"?d.curve=Li(t.defaultInterpolate,_r):d.curve=Li(kL.curve,_r),typeof s.text>"u"?typeof s.style<"u"&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType="text",d.label=s.text.replace(pe.lineBreakRegex,`
`),typeof s.style>"u"&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=u,d.classes="flowchart-link "+h+" "+f,e.setEdge(s.start,s.end,d,r)})},Jit=function(t,e){W.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{return}},tat=function(t,e,n,r){W.info("Drawing flowchart"),r.db.clear(),oa.setGen("gen-2"),r.parser.parse(t);let i=r.db.getDirection();typeof i>"u"&&(i="TD");const{securityLevel:a,flowchart:o}=at(),s=o.nodeSpacing||50,l=o.rankSpacing||50;let u;a==="sandbox"&&(u=Lt("#i"+e));const h=Lt(a==="sandbox"?u.nodes()[0].contentDocument.body:"body"),f=a==="sandbox"?u.nodes()[0].contentDocument:document,d=new dn.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:s,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let p;const m=r.db.getSubGraphs();W.info("Subgraphs - ",m);for(let x=m.length-1;x>=0;x--)p=m[x],W.info("Subgraph - ",p),r.db.addVertex(p.id,p.title,"group",void 0,p.classes,p.dir);const _=r.db.getVertices(),y=r.db.getEdges();W.info(y);let b=0;for(b=m.length-1;b>=0;b--){p=m[b],u0("cluster").append("text");for(let x=0;x<p.nodes.length;x++)W.info("Setting up subgraphs",p.nodes[x],p.id),d.setParent(p.nodes[x],p.id)}wL(_,d,e,h,f,r),TL(y,d);const k=h.select(`[id="${e}"]`);xr(r.db,k,e);const T=h.select("#"+e+" g");if(Ub(T,d,["point","circle","cross"],"flowchart",e),td(d,k,o.diagramPadding,o.useMaxWidth),r.db.indexNodes("subGraph"+b),!o.htmlLabels){const x=f.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let A=0;A<x.length;A++){const C=x[A],L=C.getBBox(),S=f.createElementNS("http://www.w3.org/2000/svg","rect");S.setAttribute("rx",0),S.setAttribute("ry",0),S.setAttribute("width",L.width),S.setAttribute("height",L.height),C.insertBefore(S,C.firstChild)}}Object.keys(_).forEach(function(x){const A=_[x];if(A.link){const C=Lt("#"+e+' [id="'+x+'"]');if(C){const L=f.createElementNS("http://www.w3.org/2000/svg","a");L.setAttributeNS("http://www.w3.org/2000/svg","class",A.classes.join(" ")),L.setAttributeNS("http://www.w3.org/2000/svg","href",A.link),L.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),a==="sandbox"?L.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):A.linkTarget&&L.setAttributeNS("http://www.w3.org/2000/svg","target",A.linkTarget);const S=C.insert(function(){return L},":first-child"),N=C.select(".label-container");N&&S.append(function(){return N.node()});const v=C.select(".label");v&&S.append(function(){return v.node()})}}})},tm={setConf:Qit,addVertices:wL,addEdges:TL,getClasses:Jit,draw:tat};var b3=function(){var t=function(L,S,N,v){for(N=N||{},v=L.length;v--;N[L[v]]=S);return N},e=[1,3],n=[1,5],r=[7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],i=[1,15],a=[1,16],o=[1,17],s=[1,18],l=[1,19],u=[1,20],h=[1,21],f=[1,22],d=[1,23],p=[1,24],m=[1,25],_=[1,26],y=[1,28],b=[1,30],k=[1,33],T=[5,7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],x={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,excludes:16,includes:17,todayMarker:18,title:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,clickStatement:26,taskTxt:27,taskData:28,openDirective:29,typeDirective:30,closeDirective:31,":":32,argDirective:33,click:34,callbackname:35,callbackargs:36,href:37,clickStatementDebug:38,open_directive:39,type_directive:40,arg_directive:41,close_directive:42,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"excludes",17:"includes",18:"todayMarker",19:"title",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"taskTxt",28:"taskData",32:":",34:"click",35:"callbackname",36:"callbackargs",37:"href",39:"open_directive",40:"type_directive",41:"arg_directive",42:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[26,2],[26,3],[26,3],[26,4],[26,3],[26,4],[26,2],[38,2],[38,3],[38,3],[38,4],[38,3],[38,4],[38,2],[29,1],[30,1],[33,1],[31,1]],performAction:function(L,S,N,v,M,w,R){var B=w.length-1;switch(M){case 2:return w[B-1];case 3:this.$=[];break;case 4:w[B-1].push(w[B]),this.$=w[B-1];break;case 5:case 6:this.$=w[B];break;case 7:case 8:this.$=[];break;case 9:v.setDateFormat(w[B].substr(11)),this.$=w[B].substr(11);break;case 10:v.enableInclusiveEndDates(),this.$=w[B].substr(18);break;case 11:v.TopAxis(),this.$=w[B].substr(8);break;case 12:v.setAxisFormat(w[B].substr(11)),this.$=w[B].substr(11);break;case 13:v.setExcludes(w[B].substr(9)),this.$=w[B].substr(9);break;case 14:v.setIncludes(w[B].substr(9)),this.$=w[B].substr(9);break;case 15:v.setTodayMarker(w[B].substr(12)),this.$=w[B].substr(12);break;case 16:v.setDiagramTitle(w[B].substr(6)),this.$=w[B].substr(6);break;case 17:this.$=w[B].trim(),v.setAccTitle(this.$);break;case 18:case 19:this.$=w[B].trim(),v.setAccDescription(this.$);break;case 20:v.addSection(w[B].substr(8)),this.$=w[B].substr(8);break;case 22:v.addTask(w[B-1],w[B]),this.$="task";break;case 26:this.$=w[B-1],v.setClickEvent(w[B-1],w[B],null);break;case 27:this.$=w[B-2],v.setClickEvent(w[B-2],w[B-1],w[B]);break;case 28:this.$=w[B-2],v.setClickEvent(w[B-2],w[B-1],null),v.setLink(w[B-2],w[B]);break;case 29:this.$=w[B-3],v.setClickEvent(w[B-3],w[B-2],w[B-1]),v.setLink(w[B-3],w[B]);break;case 30:this.$=w[B-2],v.setClickEvent(w[B-2],w[B],null),v.setLink(w[B-2],w[B-1]);break;case 31:this.$=w[B-3],v.setClickEvent(w[B-3],w[B-1],w[B]),v.setLink(w[B-3],w[B-2]);break;case 32:this.$=w[B-1],v.setLink(w[B-1],w[B]);break;case 33:case 39:this.$=w[B-1]+" "+w[B];break;case 34:case 35:case 37:this.$=w[B-2]+" "+w[B-1]+" "+w[B];break;case 36:case 38:this.$=w[B-3]+" "+w[B-2]+" "+w[B-1]+" "+w[B];break;case 40:v.parseDirective("%%{","open_directive");break;case 41:v.parseDirective(w[B],"type_directive");break;case 42:w[B]=w[B].trim().replace(/'/g,'"'),v.parseDirective(w[B],"arg_directive");break;case 43:v.parseDirective("}%%","close_directive","gantt");break}},table:[{3:1,4:2,5:e,29:4,39:n},{1:[3]},{3:6,4:2,5:e,29:4,39:n},t(r,[2,3],{6:7}),{30:8,40:[1,9]},{40:[2,40]},{1:[2,1]},{4:29,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:i,13:a,14:o,15:s,16:l,17:u,18:h,19:f,20:d,22:p,24:m,25:_,26:27,27:y,29:4,34:b,39:n},{31:31,32:[1,32],42:k},t([32,42],[2,41]),t(r,[2,8],{1:[2,2]}),t(r,[2,4]),{4:29,10:34,12:i,13:a,14:o,15:s,16:l,17:u,18:h,19:f,20:d,22:p,24:m,25:_,26:27,27:y,29:4,34:b,39:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,9]),t(r,[2,10]),t(r,[2,11]),t(r,[2,12]),t(r,[2,13]),t(r,[2,14]),t(r,[2,15]),t(r,[2,16]),{21:[1,35]},{23:[1,36]},t(r,[2,19]),t(r,[2,20]),t(r,[2,21]),{28:[1,37]},t(r,[2,23]),{35:[1,38],37:[1,39]},{11:[1,40]},{33:41,41:[1,42]},{11:[2,43]},t(r,[2,5]),t(r,[2,17]),t(r,[2,18]),t(r,[2,22]),t(r,[2,26],{36:[1,43],37:[1,44]}),t(r,[2,32],{35:[1,45]}),t(T,[2,24]),{31:46,42:k},{42:[2,42]},t(r,[2,27],{37:[1,47]}),t(r,[2,28]),t(r,[2,30],{36:[1,48]}),{11:[1,49]},t(r,[2,29]),t(r,[2,31]),t(T,[2,25])],defaultActions:{5:[2,40],6:[2,1],33:[2,43],42:[2,42]},parseError:function(L,S){if(S.recoverable)this.trace(L);else{var N=new Error(L);throw N.hash=S,N}},parse:function(L){var S=this,N=[0],v=[],M=[null],w=[],R=this.table,B="",$=0,F=0,Q=2,nt=1,z=w.slice.call(arguments,1),Y=Object.create(this.lexer),rt={yy:{}};for(var lt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lt)&&(rt.yy[lt]=this.yy[lt]);Y.setInput(L,rt.yy),rt.yy.lexer=Y,rt.yy.parser=this,typeof Y.yylloc>"u"&&(Y.yylloc={});var J=Y.yylloc;w.push(J);var Z=Y.options&&Y.options.ranges;typeof rt.yy.parseError=="function"?this.parseError=rt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function q(){var xt;return xt=v.pop()||Y.lex()||nt,typeof xt!="number"&&(xt instanceof Array&&(v=xt,xt=v.pop()),xt=S.symbols_[xt]||xt),xt}for(var it,ut,G,j,P={},X,O,V,U;;){if(ut=N[N.length-1],this.defaultActions[ut]?G=this.defaultActions[ut]:((it===null||typeof it>"u")&&(it=q()),G=R[ut]&&R[ut][it]),typeof G>"u"||!G.length||!G[0]){var H="";U=[];for(X in R[ut])this.terminals_[X]&&X>Q&&U.push("'"+this.terminals_[X]+"'");Y.showPosition?H="Parse error on line "+($+1)+`:
`+Y.showPosition()+`
Expecting `+U.join(", ")+", got '"+(this.terminals_[it]||it)+"'":H="Parse error on line "+($+1)+": Unexpected "+(it==nt?"end of input":"'"+(this.terminals_[it]||it)+"'"),this.parseError(H,{text:Y.match,token:this.terminals_[it]||it,line:Y.yylineno,loc:J,expected:U})}if(G[0]instanceof Array&&G.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ut+", token: "+it);switch(G[0]){case 1:N.push(it),M.push(Y.yytext),w.push(Y.yylloc),N.push(G[1]),it=null,F=Y.yyleng,B=Y.yytext,$=Y.yylineno,J=Y.yylloc;break;case 2:if(O=this.productions_[G[1]][1],P.$=M[M.length-O],P._$={first_line:w[w.length-(O||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(O||1)].first_column,last_column:w[w.length-1].last_column},Z&&(P._$.range=[w[w.length-(O||1)].range[0],w[w.length-1].range[1]]),j=this.performAction.apply(P,[B,F,$,rt.yy,G[1],M,w].concat(z)),typeof j<"u")return j;O&&(N=N.slice(0,-1*O*2),M=M.slice(0,-1*O),w=w.slice(0,-1*O)),N.push(this.productions_[G[1]][0]),M.push(P.$),w.push(P._$),V=R[N[N.length-2]][N[N.length-1]],N.push(V);break;case 3:return!0}}return!0}},A=function(){var L={EOF:1,parseError:function(S,N){if(this.yy.parser)this.yy.parser.parseError(S,N);else throw new Error(S)},setInput:function(S,N){return this.yy=N||this.yy||{},this._input=S,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var S=this._input[0];this.yytext+=S,this.yyleng++,this.offset++,this.match+=S,this.matched+=S;var N=S.match(/(?:\r\n?|\n).*/g);return N?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),S},unput:function(S){var N=S.length,v=S.split(/(?:\r\n?|\n)/g);this._input=S+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-N),this.offset-=N;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),v.length-1&&(this.yylineno-=v.length-1);var w=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:v?(v.length===M.length?this.yylloc.first_column:0)+M[M.length-v.length].length-v[0].length:this.yylloc.first_column-N},this.options.ranges&&(this.yylloc.range=[w[0],w[0]+this.yyleng-N]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(S){this.unput(this.match.slice(S))},pastInput:function(){var S=this.matched.substr(0,this.matched.length-this.match.length);return(S.length>20?"...":"")+S.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var S=this.match;return S.length<20&&(S+=this._input.substr(0,20-S.length)),(S.substr(0,20)+(S.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var S=this.pastInput(),N=new Array(S.length+1).join("-");return S+this.upcomingInput()+`
`+N+"^"},test_match:function(S,N){var v,M,w;if(this.options.backtrack_lexer&&(w={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(w.yylloc.range=this.yylloc.range.slice(0))),M=S[0].match(/(?:\r\n?|\n).*/g),M&&(this.yylineno+=M.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:M?M[M.length-1].length-M[M.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+S[0].length},this.yytext+=S[0],this.match+=S[0],this.matches=S,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(S[0].length),this.matched+=S[0],v=this.performAction.call(this,this.yy,this,N,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),v)return v;if(this._backtrack){for(var R in w)this[R]=w[R];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var S,N,v,M;this._more||(this.yytext="",this.match="");for(var w=this._currentRules(),R=0;R<w.length;R++)if(v=this._input.match(this.rules[w[R]]),v&&(!N||v[0].length>N[0].length)){if(N=v,M=R,this.options.backtrack_lexer){if(S=this.test_match(v,w[R]),S!==!1)return S;if(this._backtrack){N=!1;continue}else return!1}else if(!this.options.flex)break}return N?(S=this.test_match(N,w[M]),S!==!1?S:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var S=this.next();return S||this.lex()},begin:function(S){this.conditionStack.push(S)},popState:function(){var S=this.conditionStack.length-1;return S>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(S){return S=this.conditionStack.length-1-Math.abs(S||0),S>=0?this.conditionStack[S]:"INITIAL"},pushState:function(S){this.begin(S)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(S,N,v,M){switch(v){case 0:return this.begin("open_directive"),39;case 1:return this.begin("type_directive"),40;case 2:return this.popState(),this.begin("arg_directive"),32;case 3:return this.popState(),this.popState(),42;case 4:return 41;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:break;case 13:break;case 14:break;case 15:return 11;case 16:break;case 17:break;case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 37;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 35;case 26:this.popState();break;case 27:return 36;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 34;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 17;case 37:return 16;case 38:return 18;case 39:return"date";case 40:return 19;case 41:return"accDescription";case 42:return 25;case 43:return 27;case 44:return 28;case 45:return 32;case 46:return 7;case 47:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],inclusive:!0}}};return L}();x.lexer=A;function C(){this.yy={}}return C.prototype=x,x.Parser=C,new C}();b3.parser=b3;const eat=t=>t.match(/^\s*gantt/)!==null;let Ai="",Qb="",Jb="",mu=[],bu=[],t5={},e5=[],Z1=[],Zs="";const EL=["active","done","crit","milestone"];let Q1=[],_u=!1,n5=!1,_3=0;const nat=function(t,e,n){qe.parseDirective(this,t,e,n)},rat=function(){e5=[],Z1=[],Zs="",Q1=[],Nh=0,x3=void 0,Oh=void 0,yn=[],Ai="",Qb="",Jb="",mu=[],bu=[],_u=!1,n5=!1,_3=0,t5={},pi()},iat=function(t){Qb=t},aat=function(){return Qb},oat=function(t){Jb=t},sat=function(){return Jb},cat=function(t){Ai=t},lat=function(){_u=!0},uat=function(){return _u},hat=function(){n5=!0},dat=function(){return n5},fat=function(){return Ai},pat=function(t){mu=t.toLowerCase().split(/[\s,]+/)},gat=function(){return mu},yat=function(t){bu=t.toLowerCase().split(/[\s,]+/)},mat=function(){return bu},bat=function(){return t5},_at=function(t){Zs=t,e5.push(t)},vat=function(){return e5},xat=function(){let t=l9();const e=10;let n=0;for(;!t&&n<e;)t=l9(),n++;return Z1=yn,Z1},CL=function(t,e,n,r){return r.indexOf(t.format(e.trim()))>=0?!1:t.isoWeekday()>=6&&n.indexOf("weekends")>=0||n.indexOf(t.format("dddd").toLowerCase())>=0?!0:n.indexOf(t.format(e.trim()))>=0},SL=function(t,e,n,r){if(!n.length||t.manualEndTime)return;let i=ii(t.startTime,e,!0);i.add(1,"d");let a=ii(t.endTime,e,!0),o=kat(i,a,e,n,r);t.endTime=a.toDate(),t.renderEndTime=o},kat=function(t,e,n,r,i){let a=!1,o=null;for(;t<=e;)a||(o=e.toDate()),a=CL(t,n,r,i),a&&e.add(1,"d"),t.add(1,"d");return o},v3=function(t,e,n){n=n.trim();const r=/^after\s+([\d\w- ]+)/.exec(n.trim());if(r!==null){let a=null;if(r[1].split(" ").forEach(function(o){let s=mc(o);typeof s<"u"&&(a?s.endTime>a.endTime&&(a=s):a=s)}),a)return a.endTime;{const o=new Date;return o.setHours(0,0,0,0),o}}let i=ii(n,e.trim(),!0);if(i.isValid())return i.toDate();{W.debug("Invalid date:"+n),W.debug("With date format:"+e.trim());const a=new Date(n);if(typeof a>"u"||isNaN(a.getTime()))throw new Error("Invalid date:"+n);return a}},AL=function(t){const e=/^(\d+(?:\.\d+)?)([yMwdhms]|ms)$/.exec(t.trim());return e!==null?ii.duration(Number.parseFloat(e[1]),e[2]):ii.duration.invalid()},ML=function(t,e,n,r){r=r||!1,n=n.trim();let i=ii(n,e.trim(),!0);if(i.isValid())return r&&i.add(1,"d"),i.toDate();const a=ii(t),o=AL(n);return o.isValid()&&a.add(o),a.toDate()};let Nh=0;const As=function(t){return typeof t>"u"?(Nh=Nh+1,"task"+Nh):t},wat=function(t,e){let n;e.substr(0,1)===":"?n=e.substr(1,e.length):n=e;const r=n.split(","),i={};NL(r,i,EL);for(let o=0;o<r.length;o++)r[o]=r[o].trim();let a="";switch(r.length){case 1:i.id=As(),i.startTime=t.endTime,a=r[0];break;case 2:i.id=As(),i.startTime=v3(void 0,Ai,r[0]),a=r[1];break;case 3:i.id=As(r[0]),i.startTime=v3(void 0,Ai,r[1]),a=r[2];break}return a&&(i.endTime=ML(i.startTime,Ai,a,_u),i.manualEndTime=ii(a,"YYYY-MM-DD",!0).isValid(),SL(i,Ai,bu,mu)),i},Tat=function(t,e){let n;e.substr(0,1)===":"?n=e.substr(1,e.length):n=e;const r=n.split(","),i={};NL(r,i,EL);for(let a=0;a<r.length;a++)r[a]=r[a].trim();switch(r.length){case 1:i.id=As(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:r[0]};break;case 2:i.id=As(),i.startTime={type:"getStartDate",startData:r[0]},i.endTime={data:r[1]};break;case 3:i.id=As(r[0]),i.startTime={type:"getStartDate",startData:r[1]},i.endTime={data:r[2]};break}return i};let x3,Oh,yn=[];const LL={},Eat=function(t,e){const n={section:Zs,type:Zs,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=Tat(Oh,e);n.raw.startTime=r.startTime,n.raw.endTime=r.endTime,n.id=r.id,n.prevTaskId=Oh,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,n.order=_3,_3++;const i=yn.push(n);Oh=n.id,LL[n.id]=i-1},mc=function(t){const e=LL[t];return yn[e]},Cat=function(t,e){const n={section:Zs,type:Zs,description:t,task:t,classes:[]},r=wat(x3,e);n.startTime=r.startTime,n.endTime=r.endTime,n.id=r.id,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,x3=n,Z1.push(n)},l9=function(){const t=function(n){const r=yn[n];let i="";switch(yn[n].raw.startTime.type){case"prevTaskEnd":{const a=mc(r.prevTaskId);r.startTime=a.endTime;break}case"getStartDate":i=v3(void 0,Ai,yn[n].raw.startTime.startData),i&&(yn[n].startTime=i);break}return yn[n].startTime&&(yn[n].endTime=ML(yn[n].startTime,Ai,yn[n].raw.endTime.data,_u),yn[n].endTime&&(yn[n].processed=!0,yn[n].manualEndTime=ii(yn[n].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),SL(yn[n],Ai,bu,mu))),yn[n].processed};let e=!0;for(let n=0;n<yn.length;n++)t(n),e=e&&yn[n].processed;return e},Sat=function(t,e){let n=e;at().securityLevel!=="loose"&&(n=$i(e)),t.split(",").forEach(function(r){typeof mc(r)<"u"&&(DL(r,()=>{window.open(n,"_self")}),t5[r]=n)}),BL(t,"clickable")},BL=function(t,e){t.split(",").forEach(function(n){let r=mc(n);typeof r<"u"&&r.classes.push(e)})},Aat=function(t,e,n){if(at().securityLevel!=="loose"||typeof e>"u")return;let r=[];if(typeof n=="string"){r=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let i=0;i<r.length;i++){let a=r[i].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[i]=a}}r.length===0&&r.push(t),typeof mc(t)<"u"&&DL(t,()=>{we.runFunc(e,...r)})},DL=function(t,e){Q1.push(function(){const n=document.querySelector(`[id="${t}"]`);n!==null&&n.addEventListener("click",function(){e()})}),Q1.push(function(){const n=document.querySelector(`[id="${t}-text"]`);n!==null&&n.addEventListener("click",function(){e()})})},Mat=function(t,e,n){t.split(",").forEach(function(r){Aat(r,e,n)}),BL(t,"clickable")},Lat=function(t){Q1.forEach(function(e){e(t)})},r5={parseDirective:nat,getConfig:()=>at().gantt,clear:rat,setDateFormat:cat,getDateFormat:fat,enableInclusiveEndDates:lat,endDatesAreInclusive:uat,enableTopAxis:hat,topAxisEnabled:dat,setAxisFormat:iat,getAxisFormat:aat,setTodayMarker:oat,getTodayMarker:sat,setAccTitle:zr,getAccTitle:gi,setDiagramTitle:nd,getDiagramTitle:rd,setAccDescription:yi,getAccDescription:mi,addSection:_at,getSections:vat,getTasks:xat,addTask:Eat,findTaskById:mc,addTaskOrg:Cat,setIncludes:pat,getIncludes:gat,setExcludes:yat,getExcludes:mat,setClickEvent:Mat,setLink:Sat,getLinks:bat,bindFunctions:Lat,parseDuration:AL,isInvalidDate:CL};function NL(t,e,n){let r=!0;for(;r;)r=!1,n.forEach(function(i){const a="^\\s*"+i+"\\s*$",o=new RegExp(a);t[0].match(o)&&(e[i]=!0,t.shift(1),r=!0)})}const Bat=function(){W.debug("Something is calling, setConf, remove the call")};let Ji;const Dat=function(t,e,n,r){const i=at().gantt,a=at().securityLevel;let o;a==="sandbox"&&(o=Lt("#i"+e));const s=Lt(a==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=a==="sandbox"?o.nodes()[0].contentDocument:document,u=l.getElementById(e);Ji=u.parentElement.offsetWidth,typeof Ji>"u"&&(Ji=1200),typeof i.useWidth<"u"&&(Ji=i.useWidth);const h=r.db.getTasks(),f=h.length*(i.barHeight+i.barGap)+2*i.topPadding;u.setAttribute("viewBox","0 0 "+Ji+" "+f);const d=s.select(`[id="${e}"]`),p=tC().domain([bl(h,function(v){return v.startTime}),Ns(h,function(v){return v.endTime})]).rangeRound([0,Ji-i.leftPadding-i.rightPadding]);let m=[];for(let v=0;v<h.length;v++)m.push(h[v].type);const _=m;m=L(m);function y(v,M){const w=v.startTime,R=M.startTime;let B=0;return w>R?B=1:w<R&&(B=-1),B}h.sort(y),b(h,Ji,f),fi(d,f,Ji,i.useMaxWidth),d.append("text").text(r.db.getDiagramTitle()).attr("x",Ji/2).attr("y",i.titleTopMargin).attr("class","titleText"),xr(r.db,d,e);function b(v,M,w){const R=i.barHeight,B=R+i.barGap,$=i.topPadding,F=i.leftPadding,Q=O4().domain([0,m.length]).range(["#00B9FA","#F95002"]).interpolate(zw);T(B,$,F,M,w,v,r.db.getExcludes(),r.db.getIncludes()),x(F,$,M,w),k(v,B,$,F,R,Q,M),A(B,$),C(F,$,M,w)}function k(v,M,w,R,B,$,F){d.append("g").selectAll("rect").data(v).enter().append("rect").attr("x",0).attr("y",function(z,Y){return Y=z.order,Y*M+w-2}).attr("width",function(){return F-i.rightPadding/2}).attr("height",M).attr("class",function(z){for(let Y=0;Y<m.length;Y++)if(z.type===m[Y])return"section section"+Y%i.numberSectionStyles;return"section section0"});const Q=d.append("g").selectAll("rect").data(v).enter(),nt=r.db.getLinks();if(Q.append("rect").attr("id",function(z){return z.id}).attr("rx",3).attr("ry",3).attr("x",function(z){return z.milestone?p(z.startTime)+R+.5*(p(z.endTime)-p(z.startTime))-.5*B:p(z.startTime)+R}).attr("y",function(z,Y){return Y=z.order,Y*M+w}).attr("width",function(z){return z.milestone?B:p(z.renderEndTime||z.endTime)-p(z.startTime)}).attr("height",B).attr("transform-origin",function(z,Y){return Y=z.order,(p(z.startTime)+R+.5*(p(z.endTime)-p(z.startTime))).toString()+"px "+(Y*M+w+.5*B).toString()+"px"}).attr("class",function(z){const Y="task";let rt="";z.classes.length>0&&(rt=z.classes.join(" "));let lt=0;for(let Z=0;Z<m.length;Z++)z.type===m[Z]&&(lt=Z%i.numberSectionStyles);let J="";return z.active?z.crit?J+=" activeCrit":J=" active":z.done?z.crit?J=" doneCrit":J=" done":z.crit&&(J+=" crit"),J.length===0&&(J=" task"),z.milestone&&(J=" milestone "+J),J+=lt,J+=" "+rt,Y+J}),Q.append("text").attr("id",function(z){return z.id+"-text"}).text(function(z){return z.task}).attr("font-size",i.fontSize).attr("x",function(z){let Y=p(z.startTime),rt=p(z.renderEndTime||z.endTime);z.milestone&&(Y+=.5*(p(z.endTime)-p(z.startTime))-.5*B),z.milestone&&(rt=Y+B);const lt=this.getBBox().width;return lt>rt-Y?rt+lt+1.5*i.leftPadding>F?Y+R-5:rt+R+5:(rt-Y)/2+Y+R}).attr("y",function(z,Y){return Y=z.order,Y*M+i.barHeight/2+(i.fontSize/2-2)+w}).attr("text-height",B).attr("class",function(z){const Y=p(z.startTime);let rt=p(z.endTime);z.milestone&&(rt=Y+B);const lt=this.getBBox().width;let J="";z.classes.length>0&&(J=z.classes.join(" "));let Z=0;for(let it=0;it<m.length;it++)z.type===m[it]&&(Z=it%i.numberSectionStyles);let q="";return z.active&&(z.crit?q="activeCritText"+Z:q="activeText"+Z),z.done?z.crit?q=q+" doneCritText"+Z:q=q+" doneText"+Z:z.crit&&(q=q+" critText"+Z),z.milestone&&(q+=" milestoneText"),lt>rt-Y?rt+lt+1.5*i.leftPadding>F?J+" taskTextOutsideLeft taskTextOutside"+Z+" "+q:J+" taskTextOutsideRight taskTextOutside"+Z+" "+q+" width-"+lt:J+" taskText taskText"+Z+" "+q+" width-"+lt}),at().securityLevel==="sandbox"){let z;z=Lt("#i"+e);const Y=z.nodes()[0].contentDocument;Q.filter(function(rt){return typeof nt[rt.id]<"u"}).each(function(rt){var lt=Y.querySelector("#"+rt.id),J=Y.querySelector("#"+rt.id+"-text");const Z=lt.parentNode;var q=Y.createElement("a");q.setAttribute("xlink:href",nt[rt.id]),q.setAttribute("target","_top"),Z.appendChild(q),q.appendChild(lt),q.appendChild(J)})}}function T(v,M,w,R,B,$,F,Q){const nt=$.reduce((Z,{startTime:q})=>Z?Math.min(Z,q):q,0),z=$.reduce((Z,{endTime:q})=>Z?Math.max(Z,q):q,0),Y=r.db.getDateFormat();if(!nt||!z)return;const rt=[];let lt=null,J=ii(nt);for(;J.valueOf()<=z;)r.db.isInvalidDate(J,Y,F,Q)?lt?lt.end=J.clone():lt={start:J.clone(),end:J.clone()}:lt&&(rt.push(lt),lt=null),J.add(1,"d");d.append("g").selectAll("rect").data(rt).enter().append("rect").attr("id",function(Z){return"exclude-"+Z.start.format("YYYY-MM-DD")}).attr("x",function(Z){return p(Z.start)+w}).attr("y",i.gridLineStartPadding).attr("width",function(Z){const q=Z.end.clone().add(1,"day");return p(q)-p(Z.start)}).attr("height",B-M-i.gridLineStartPadding).attr("transform-origin",function(Z,q){return(p(Z.start)+w+.5*(p(Z.end)-p(Z.start))).toString()+"px "+(q*v+.5*B).toString()+"px"}).attr("class","exclude-range")}function x(v,M,w,R){let B=tw(p).tickSize(-R+M+i.gridLineStartPadding).tickFormat(Ol(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(d.append("g").attr("class","grid").attr("transform","translate("+v+", "+(R-50)+")").call(B).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||i.topAxis){let $=J9(p).tickSize(-R+M+i.gridLineStartPadding).tickFormat(Ol(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));d.append("g").attr("class","grid").attr("transform","translate("+v+", "+M+")").call($).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function A(v,M){const w=[];let R=0;for(let B=0;B<m.length;B++)w[B]=[m[B],N(m[B],_)];d.append("g").selectAll("text").data(w).enter().append(function(B){const $=B[0].split(pe.lineBreakRegex),F=-($.length-1)/2,Q=l.createElementNS("http://www.w3.org/2000/svg","text");Q.setAttribute("dy",F+"em");for(let nt=0;nt<$.length;nt++){const z=l.createElementNS("http://www.w3.org/2000/svg","tspan");z.setAttribute("alignment-baseline","central"),z.setAttribute("x","10"),nt>0&&z.setAttribute("dy","1em"),z.textContent=$[nt],Q.appendChild(z)}return Q}).attr("x",10).attr("y",function(B,$){if($>0)for(let F=0;F<$;F++)return R+=w[$-1][1],B[1]*v/2+R*v+M;else return B[1]*v/2+M}).attr("font-size",i.sectionFontSize).attr("font-size",i.sectionFontSize).attr("class",function(B){for(let $=0;$<m.length;$++)if(B[0]===m[$])return"sectionTitle sectionTitle"+$%i.numberSectionStyles;return"sectionTitle"})}function C(v,M,w,R){const B=r.db.getTodayMarker();if(B==="off")return;const $=d.append("g").attr("class","today"),F=new Date,Q=$.append("line");Q.attr("x1",p(F)+v).attr("x2",p(F)+v).attr("y1",i.titleTopMargin).attr("y2",R-i.titleTopMargin).attr("class","today"),B!==""&&Q.attr("style",B.replace(/,/g,";"))}function L(v){const M={},w=[];for(let R=0,B=v.length;R<B;++R)Object.prototype.hasOwnProperty.call(M,v[R])||(M[v[R]]=!0,w.push(v[R]));return w}function S(v){let M=v.length;const w={};for(;M;)w[v[--M]]=(w[v[M]]||0)+1;return w}function N(v,M){return S(M)[v]||0}},Nat={setConf:Bat,draw:Dat};var k3=function(){var t=function(a,o,s,l){for(s=s||{},l=a.length;l--;s[a[l]]=o);return s},e=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,s,l,u,h,f){switch(h.length-1,u){case 1:return l;case 4:break;case 6:l.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var s=new Error(a);throw s.hash=o,s}},parse:function(a){var o=this,s=[0],l=[],u=[null],h=[],f=this.table,d="",p=0,m=0,_=2,y=1,b=h.slice.call(arguments,1),k=Object.create(this.lexer),T={yy:{}};for(var x in this.yy)Object.prototype.hasOwnProperty.call(this.yy,x)&&(T.yy[x]=this.yy[x]);k.setInput(a,T.yy),T.yy.lexer=k,T.yy.parser=this,typeof k.yylloc>"u"&&(k.yylloc={});var A=k.yylloc;h.push(A);var C=k.options&&k.options.ranges;typeof T.yy.parseError=="function"?this.parseError=T.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function L(){var nt;return nt=l.pop()||k.lex()||y,typeof nt!="number"&&(nt instanceof Array&&(l=nt,nt=l.pop()),nt=o.symbols_[nt]||nt),nt}for(var S,N,v,M,w={},R,B,$,F;;){if(N=s[s.length-1],this.defaultActions[N]?v=this.defaultActions[N]:((S===null||typeof S>"u")&&(S=L()),v=f[N]&&f[N][S]),typeof v>"u"||!v.length||!v[0]){var Q="";F=[];for(R in f[N])this.terminals_[R]&&R>_&&F.push("'"+this.terminals_[R]+"'");k.showPosition?Q="Parse error on line "+(p+1)+`:
`+k.showPosition()+`
Expecting `+F.join(", ")+", got '"+(this.terminals_[S]||S)+"'":Q="Parse error on line "+(p+1)+": Unexpected "+(S==y?"end of input":"'"+(this.terminals_[S]||S)+"'"),this.parseError(Q,{text:k.match,token:this.terminals_[S]||S,line:k.yylineno,loc:A,expected:F})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+S);switch(v[0]){case 1:s.push(S),u.push(k.yytext),h.push(k.yylloc),s.push(v[1]),S=null,m=k.yyleng,d=k.yytext,p=k.yylineno,A=k.yylloc;break;case 2:if(B=this.productions_[v[1]][1],w.$=u[u.length-B],w._$={first_line:h[h.length-(B||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-(B||1)].first_column,last_column:h[h.length-1].last_column},C&&(w._$.range=[h[h.length-(B||1)].range[0],h[h.length-1].range[1]]),M=this.performAction.apply(w,[d,m,p,T.yy,v[1],u,h].concat(b)),typeof M<"u")return M;B&&(s=s.slice(0,-1*B*2),u=u.slice(0,-1*B),h=h.slice(0,-1*B)),s.push(this.productions_[v[1]][0]),u.push(w.$),h.push(w._$),$=f[s[s.length-2]][s[s.length-1]],s.push($);break;case 3:return!0}}return!0}},r=function(){var a={EOF:1,parseError:function(o,s){if(this.yy.parser)this.yy.parser.parseError(o,s);else throw new Error(o)},setInput:function(o,s){return this.yy=s||this.yy||{},this._input=o,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.offset++,this.match+=o,this.matched+=o;var s=o.match(/(?:\r\n?|\n).*/g);return s?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),o},unput:function(o){var s=o.length,l=o.split(/(?:\r\n?|\n)/g);this._input=o+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-s),this.offset-=s;var u=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var h=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===u.length?this.yylloc.first_column:0)+u[u.length-l.length].length-l[0].length:this.yylloc.first_column-s},this.options.ranges&&(this.yylloc.range=[h[0],h[0]+this.yyleng-s]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),s=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+s+"^"},test_match:function(o,s){var l,u,h;if(this.options.backtrack_lexer&&(h={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(h.yylloc.range=this.yylloc.range.slice(0))),u=o[0].match(/(?:\r\n?|\n).*/g),u&&(this.yylineno+=u.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:u?u[u.length-1].length-u[u.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+o[0].length},this.yytext+=o[0],this.match+=o[0],this.matches=o,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(o[0].length),this.matched+=o[0],l=this.performAction.call(this,this.yy,this,s,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var f in h)this[f]=h[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,s,l,u;this._more||(this.yytext="",this.match="");for(var h=this._currentRules(),f=0;f<h.length;f++)if(l=this._input.match(this.rules[h[f]]),l&&(!s||l[0].length>s[0].length)){if(s=l,u=f,this.options.backtrack_lexer){if(o=this.test_match(l,h[f]),o!==!1)return o;if(this._backtrack){s=!1;continue}else return!1}else if(!this.options.flex)break}return s?(o=this.test_match(s,h[u]),o!==!1?o:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,s,l,u){switch(l){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return a}();n.lexer=r;function i(){this.yy={}}return i.prototype=n,n.Parser=i,new i}();k3.parser=k3;var OL="",RL=!1;const Oat=t=>{W.debug("Setting message to: "+t),OL=t},Rat=()=>OL,Iat=t=>{RL=t},Fat=()=>RL,$at={setMessage:Oat,getMessage:Rat,setInfo:Iat,getInfo:Fat,clear:pi},Pat=(t,e,n,r)=>{try{W.debug(`Rendering info diagram
`+t);const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body").select("#"+e);o.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+n),o.attr("height",100),o.attr("width",400)}catch(i){W.error("Error while rendering info diagram"),W.error(i.message)}},Yat={draw:Pat},zat=t=>t.match(/^\s*info/)!==null;var w3=function(){var t=function(C,L,S,N){for(S=S||{},N=C.length;N--;S[C[N]]=L);return S},e=[1,4],n=[1,5],r=[1,6],i=[1,7],a=[1,9],o=[1,11,13,15,17,19,20,26,27,28,29],s=[2,5],l=[1,6,11,13,15,17,19,20,26,27,28,29],u=[26,27,28],h=[2,8],f=[1,18],d=[1,19],p=[1,20],m=[1,21],_=[1,22],y=[1,23],b=[1,28],k=[6,26,27,28,29],T={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(C,L,S,N,v,M,w){var R=M.length-1;switch(v){case 4:N.setShowData(!0);break;case 7:this.$=M[R-1];break;case 9:N.addSection(M[R-1],N.cleanupValue(M[R]));break;case 10:this.$=M[R].trim(),N.setDiagramTitle(this.$);break;case 11:this.$=M[R].trim(),N.setAccTitle(this.$);break;case 12:case 13:this.$=M[R].trim(),N.setAccDescription(this.$);break;case 14:N.addSection(M[R].substr(8)),this.$=M[R].substr(8);break;case 21:N.parseDirective("%%{","open_directive");break;case 22:N.parseDirective(M[R],"type_directive");break;case 23:M[R]=M[R].trim().replace(/'/g,'"'),N.parseDirective(M[R],"arg_directive");break;case 24:N.parseDirective("}%%","close_directive","pie");break}},table:[{3:1,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},{1:[3]},{3:10,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},{3:11,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:a},t(o,s,{7:12,8:[1,13]}),t(l,[2,18]),t(l,[2,19]),t(l,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},t(u,h,{21:8,9:16,10:17,5:24,1:[2,3],11:f,13:d,15:p,17:m,19:_,20:y,29:a}),t(o,s,{7:25}),{23:26,24:[1,27],32:b},t([24,32],[2,22]),t(o,[2,6]),{4:29,26:n,27:r,28:i},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),t(u,h,{21:8,9:16,10:17,5:24,1:[2,4],11:f,13:d,15:p,17:m,19:_,20:y,29:a}),t(k,[2,16]),{25:34,31:[1,35]},t(k,[2,24]),t(o,[2,7]),t(u,[2,9]),t(u,[2,10]),t(u,[2,11]),t(u,[2,12]),{23:36,32:b},{32:[2,23]},t(k,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(C,L){if(L.recoverable)this.trace(C);else{var S=new Error(C);throw S.hash=L,S}},parse:function(C){var L=this,S=[0],N=[],v=[null],M=[],w=this.table,R="",B=0,$=0,F=2,Q=1,nt=M.slice.call(arguments,1),z=Object.create(this.lexer),Y={yy:{}};for(var rt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,rt)&&(Y.yy[rt]=this.yy[rt]);z.setInput(C,Y.yy),Y.yy.lexer=z,Y.yy.parser=this,typeof z.yylloc>"u"&&(z.yylloc={});var lt=z.yylloc;M.push(lt);var J=z.options&&z.options.ranges;typeof Y.yy.parseError=="function"?this.parseError=Y.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Z(){var H;return H=N.pop()||z.lex()||Q,typeof H!="number"&&(H instanceof Array&&(N=H,H=N.pop()),H=L.symbols_[H]||H),H}for(var q,it,ut,G,j={},P,X,O,V;;){if(it=S[S.length-1],this.defaultActions[it]?ut=this.defaultActions[it]:((q===null||typeof q>"u")&&(q=Z()),ut=w[it]&&w[it][q]),typeof ut>"u"||!ut.length||!ut[0]){var U="";V=[];for(P in w[it])this.terminals_[P]&&P>F&&V.push("'"+this.terminals_[P]+"'");z.showPosition?U="Parse error on line "+(B+1)+`:
`+z.showPosition()+`
Expecting `+V.join(", ")+", got '"+(this.terminals_[q]||q)+"'":U="Parse error on line "+(B+1)+": Unexpected "+(q==Q?"end of input":"'"+(this.terminals_[q]||q)+"'"),this.parseError(U,{text:z.match,token:this.terminals_[q]||q,line:z.yylineno,loc:lt,expected:V})}if(ut[0]instanceof Array&&ut.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+q);switch(ut[0]){case 1:S.push(q),v.push(z.yytext),M.push(z.yylloc),S.push(ut[1]),q=null,$=z.yyleng,R=z.yytext,B=z.yylineno,lt=z.yylloc;break;case 2:if(X=this.productions_[ut[1]][1],j.$=v[v.length-X],j._$={first_line:M[M.length-(X||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(X||1)].first_column,last_column:M[M.length-1].last_column},J&&(j._$.range=[M[M.length-(X||1)].range[0],M[M.length-1].range[1]]),G=this.performAction.apply(j,[R,$,B,Y.yy,ut[1],v,M].concat(nt)),typeof G<"u")return G;X&&(S=S.slice(0,-1*X*2),v=v.slice(0,-1*X),M=M.slice(0,-1*X)),S.push(this.productions_[ut[1]][0]),v.push(j.$),M.push(j._$),O=w[S[S.length-2]][S[S.length-1]],S.push(O);break;case 3:return!0}}return!0}},x=function(){var C={EOF:1,parseError:function(L,S){if(this.yy.parser)this.yy.parser.parseError(L,S);else throw new Error(L)},setInput:function(L,S){return this.yy=S||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var S=L.match(/(?:\r\n?|\n).*/g);return S?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},unput:function(L){var S=L.length,N=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-S),this.offset-=S;var v=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var M=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===v.length?this.yylloc.first_column:0)+v[v.length-N.length].length-N[0].length:this.yylloc.first_column-S},this.options.ranges&&(this.yylloc.range=[M[0],M[0]+this.yyleng-S]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(L){this.unput(this.match.slice(L))},pastInput:function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var L=this.pastInput(),S=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+S+"^"},test_match:function(L,S){var N,v,M;if(this.options.backtrack_lexer&&(M={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(M.yylloc.range=this.yylloc.range.slice(0))),v=L[0].match(/(?:\r\n?|\n).*/g),v&&(this.yylineno+=v.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:v?v[v.length-1].length-v[v.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],N=this.performAction.call(this,this.yy,this,S,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var w in M)this[w]=M[w];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,S,N,v;this._more||(this.yytext="",this.match="");for(var M=this._currentRules(),w=0;w<M.length;w++)if(N=this._input.match(this.rules[M[w]]),N&&(!S||N[0].length>S[0].length)){if(S=N,v=w,this.options.backtrack_lexer){if(L=this.test_match(N,M[w]),L!==!1)return L;if(this._backtrack){S=!1;continue}else return!1}else if(!this.options.flex)break}return S?(L=this.test_match(S,M[v]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var L=this.next();return L||this.lex()},begin:function(L){this.conditionStack.push(L)},popState:function(){var L=this.conditionStack.length-1;return L>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(L){return L=this.conditionStack.length-1-Math.abs(L||0),L>=0?this.conditionStack[L]:"INITIAL"},pushState:function(L){this.begin(L)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(L,S,N,v){switch(N){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:break;case 6:break;case 7:return 26;case 8:break;case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};return C}();T.lexer=x;function A(){this.yy={}}return A.prototype=T,T.Parser=A,new A}();w3.parser=w3;const jat=t=>t.match(/^\s*pie/)!==null;let J1={},i5=!1;const Uat=function(t,e,n){qe.parseDirective(this,t,e,n)},Hat=function(t,e){t=pe.sanitizeText(t,at()),typeof J1[t]>"u"&&(J1[t]=e,W.debug("Added new section :",t))},Wat=()=>J1,Gat=function(t){i5=t},Vat=function(){return i5},qat=function(t){return t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())},Xat=function(){J1={},i5=!1,pi()},Kat={parseDirective:Uat,getConfig:()=>at().pie,addSection:Hat,getSections:Wat,cleanupValue:qat,clear:Xat,setAccTitle:zr,getAccTitle:gi,setDiagramTitle:nd,getDiagramTitle:rd,setShowData:Gat,getShowData:Vat,getAccDescription:mi,setAccDescription:yi};let ta=at(),ea;const Ic=450,Zat=(t,e,n,r)=>{try{ta=at(),W.debug(`Rendering info diagram
`+t);const b=at().securityLevel;let k;b==="sandbox"&&(k=Lt("#i"+e));const T=Lt(b==="sandbox"?k.nodes()[0].contentDocument.body:"body"),x=b==="sandbox"?k.nodes()[0].contentDocument:document;r.db.clear(),r.parser.parse(t),W.debug("Parsed info diagram");const A=x.getElementById(e);ea=A.parentElement.offsetWidth,typeof ea>"u"&&(ea=1200),typeof ta.useWidth<"u"&&(ea=ta.useWidth),typeof ta.pie.useWidth<"u"&&(ea=ta.pie.useWidth);const C=T.select("#"+e);fi(C,Ic,ea,ta.pie.useMaxWidth),xr(r.db,C,e),A.setAttribute("viewBox","0 0 "+ea+" "+Ic);var i=40,a=18,o=4,s=Math.min(ea,Ic)/2-i,l=C.append("g").attr("transform","translate("+ea/2+","+Ic/2+")"),u=r.db.getSections(),h=0;Object.keys(u).forEach(function(S){h+=u[S]});const L=ta.themeVariables;var f=[L.pie1,L.pie2,L.pie3,L.pie4,L.pie5,L.pie6,L.pie7,L.pie8,L.pie9,L.pie10,L.pie11,L.pie12],d=M0().range(f),p=FC().value(function(S){return S[1]}),m=p(Object.entries(u)),_=x1().innerRadius(0).outerRadius(s);l.selectAll("mySlices").data(m).enter().append("path").attr("d",_).attr("fill",function(S){return d(S.data[0])}).attr("class","pieCircle"),l.selectAll("mySlices").data(m).enter().append("text").text(function(S){return(S.data[1]/h*100).toFixed(0)+"%"}).attr("transform",function(S){return"translate("+_.centroid(S)+")"}).style("text-anchor","middle").attr("class","slice"),l.append("text").text(r.db.getDiagramTitle()).attr("x",0).attr("y",-(Ic-50)/2).attr("class","pieTitleText");var y=l.selectAll(".legend").data(d.domain()).enter().append("g").attr("class","legend").attr("transform",function(S,N){var v=a+o,M=v*d.domain().length/2,w=12*a,R=N*v-M;return"translate("+w+","+R+")"});y.append("rect").attr("width",a).attr("height",a).style("fill",d).style("stroke",d),y.data(m).append("text").attr("x",a+o).attr("y",a-o).text(function(S){return r.db.getShowData()||ta.showData||ta.pie.showData?S.data[0]+" ["+S.data[1]+"]":S.data[0]})}catch(b){W.error("Error while rendering info diagram"),W.error(b)}},Qat={draw:Zat};var T3=function(){var t=function(ut,G,j,P){for(j=j||{},P=ut.length;P--;j[ut[P]]=G);return j},e=[1,3],n=[1,5],r=[1,6],i=[1,7],a=[1,8],o=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],s=[1,22],l=[2,13],u=[1,26],h=[1,27],f=[1,28],d=[1,29],p=[1,30],m=[1,31],_=[1,24],y=[1,32],b=[1,33],k=[1,36],T=[71,72],x=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],A=[1,56],C=[1,57],L=[1,58],S=[1,59],N=[1,60],v=[1,61],M=[1,62],w=[62,63],R=[1,74],B=[1,70],$=[1,71],F=[1,72],Q=[1,73],nt=[1,75],z=[1,79],Y=[1,80],rt=[1,77],lt=[1,78],J=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],Z={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(ut,G,j,P,X,O,V){var U=O.length-1;switch(X){case 6:this.$=O[U].trim(),P.setAccTitle(this.$);break;case 7:case 8:this.$=O[U].trim(),P.setAccDescription(this.$);break;case 9:P.parseDirective("%%{","open_directive");break;case 10:P.parseDirective(O[U],"type_directive");break;case 11:O[U]=O[U].trim().replace(/'/g,'"'),P.parseDirective(O[U],"arg_directive");break;case 12:P.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:P.addRequirement(O[U-3],O[U-4]);break;case 20:P.setNewReqId(O[U-2]);break;case 21:P.setNewReqText(O[U-2]);break;case 22:P.setNewReqRisk(O[U-2]);break;case 23:P.setNewReqVerifyMethod(O[U-2]);break;case 26:this.$=P.RequirementType.REQUIREMENT;break;case 27:this.$=P.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=P.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=P.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=P.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=P.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=P.RiskLevel.LOW_RISK;break;case 33:this.$=P.RiskLevel.MED_RISK;break;case 34:this.$=P.RiskLevel.HIGH_RISK;break;case 35:this.$=P.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=P.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=P.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=P.VerifyType.VERIFY_TEST;break;case 39:P.addElement(O[U-3]);break;case 40:P.setNewElementType(O[U-2]);break;case 41:P.setNewElementDocRef(O[U-2]);break;case 44:P.addRelationship(O[U-2],O[U],O[U-4]);break;case 45:P.addRelationship(O[U-2],O[U-4],O[U]);break;case 46:this.$=P.Relationships.CONTAINS;break;case 47:this.$=P.Relationships.COPIES;break;case 48:this.$=P.Relationships.DERIVES;break;case 49:this.$=P.Relationships.SATISFIES;break;case 50:this.$=P.Relationships.VERIFIES;break;case 51:this.$=P.Relationships.REFINES;break;case 52:this.$=P.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:4,14:n,16:r,18:i,19:a},{1:[3]},{3:10,4:2,5:[1,9],6:e,9:4,14:n,16:r,18:i,19:a},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},t(o,[2,8]),{20:[2,9]},{3:16,4:2,6:e,9:4,14:n,16:r,18:i,19:a},{1:[2,2]},{4:21,5:s,7:17,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{11:34,12:[1,35],22:k},t([12,22],[2,10]),t(o,[2,6]),t(o,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:s,7:38,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:39,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:40,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:41,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{4:21,5:s,7:42,8:l,9:4,14:n,16:r,18:i,19:a,23:18,24:19,25:20,26:23,32:25,40:u,41:h,42:f,43:d,44:p,45:m,53:_,71:y,72:b},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},t(T,[2,26]),t(T,[2,27]),t(T,[2,28]),t(T,[2,29]),t(T,[2,30]),t(T,[2,31]),t(x,[2,55]),t(x,[2,56]),t(o,[2,4]),{13:51,21:[1,52]},t(o,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:A,65:C,66:L,67:S,68:N,69:v,70:M},{61:63,64:A,65:C,66:L,67:S,68:N,69:v,70:M},{11:64,22:k},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},t(w,[2,46]),t(w,[2,47]),t(w,[2,48]),t(w,[2,49]),t(w,[2,50]),t(w,[2,51]),t(w,[2,52]),{63:[1,68]},t(o,[2,5]),{5:R,29:69,30:B,33:$,35:F,37:Q,39:nt},{5:z,39:Y,55:76,56:rt,58:lt},{32:81,71:y,72:b},{32:82,71:y,72:b},t(J,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:R,29:87,30:B,33:$,35:F,37:Q,39:nt},t(J,[2,25]),t(J,[2,39]),{31:[1,88]},{31:[1,89]},{5:z,39:Y,55:90,56:rt,58:lt},t(J,[2,43]),t(J,[2,44]),t(J,[2,45]),{32:91,71:y,72:b},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},t(J,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},t(J,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:R,29:116,30:B,33:$,35:F,37:Q,39:nt},{5:R,29:117,30:B,33:$,35:F,37:Q,39:nt},{5:R,29:118,30:B,33:$,35:F,37:Q,39:nt},{5:R,29:119,30:B,33:$,35:F,37:Q,39:nt},{5:z,39:Y,55:120,56:rt,58:lt},{5:z,39:Y,55:121,56:rt,58:lt},t(J,[2,20]),t(J,[2,21]),t(J,[2,22]),t(J,[2,23]),t(J,[2,40]),t(J,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(ut,G){if(G.recoverable)this.trace(ut);else{var j=new Error(ut);throw j.hash=G,j}},parse:function(ut){var G=this,j=[0],P=[],X=[null],O=[],V=this.table,U="",H=0,xt=0,ot=2,Nt=1,Mt=O.slice.call(arguments,1),wt=Object.create(this.lexer),Et={yy:{}};for(var bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,bt)&&(Et.yy[bt]=this.yy[bt]);wt.setInput(ut,Et.yy),Et.yy.lexer=wt,Et.yy.parser=this,typeof wt.yylloc>"u"&&(wt.yylloc={});var mt=wt.yylloc;O.push(mt);var Tt=wt.options&&wt.options.ranges;typeof Et.yy.parseError=="function"?this.parseError=Et.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function kt(){var yt;return yt=P.pop()||wt.lex()||Nt,typeof yt!="number"&&(yt instanceof Array&&(P=yt,yt=P.pop()),yt=G.symbols_[yt]||yt),yt}for(var st,Zt,$t,Jt,Ht={},qt,oe,Xt,It;;){if(Zt=j[j.length-1],this.defaultActions[Zt]?$t=this.defaultActions[Zt]:((st===null||typeof st>"u")&&(st=kt()),$t=V[Zt]&&V[Zt][st]),typeof $t>"u"||!$t.length||!$t[0]){var Pt="";It=[];for(qt in V[Zt])this.terminals_[qt]&&qt>ot&&It.push("'"+this.terminals_[qt]+"'");wt.showPosition?Pt="Parse error on line "+(H+1)+`:
`+wt.showPosition()+`
Expecting `+It.join(", ")+", got '"+(this.terminals_[st]||st)+"'":Pt="Parse error on line "+(H+1)+": Unexpected "+(st==Nt?"end of input":"'"+(this.terminals_[st]||st)+"'"),this.parseError(Pt,{text:wt.match,token:this.terminals_[st]||st,line:wt.yylineno,loc:mt,expected:It})}if($t[0]instanceof Array&&$t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Zt+", token: "+st);switch($t[0]){case 1:j.push(st),X.push(wt.yytext),O.push(wt.yylloc),j.push($t[1]),st=null,xt=wt.yyleng,U=wt.yytext,H=wt.yylineno,mt=wt.yylloc;break;case 2:if(oe=this.productions_[$t[1]][1],Ht.$=X[X.length-oe],Ht._$={first_line:O[O.length-(oe||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(oe||1)].first_column,last_column:O[O.length-1].last_column},Tt&&(Ht._$.range=[O[O.length-(oe||1)].range[0],O[O.length-1].range[1]]),Jt=this.performAction.apply(Ht,[U,xt,H,Et.yy,$t[1],X,O].concat(Mt)),typeof Jt<"u")return Jt;oe&&(j=j.slice(0,-1*oe*2),X=X.slice(0,-1*oe),O=O.slice(0,-1*oe)),j.push(this.productions_[$t[1]][0]),X.push(Ht.$),O.push(Ht._$),Xt=V[j[j.length-2]][j[j.length-1]],j.push(Xt);break;case 3:return!0}}return!0}},q=function(){var ut={EOF:1,parseError:function(G,j){if(this.yy.parser)this.yy.parser.parseError(G,j);else throw new Error(G)},setInput:function(G,j){return this.yy=j||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var j=G.match(/(?:\r\n?|\n).*/g);return j?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var j=G.length,P=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var O=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===X.length?this.yylloc.first_column:0)+X[X.length-P.length].length-P[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[O[0],O[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),j=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+j+"^"},test_match:function(G,j){var P,X,O;if(this.options.backtrack_lexer&&(O={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(O.yylloc.range=this.yylloc.range.slice(0))),X=G[0].match(/(?:\r\n?|\n).*/g),X&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],P=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var V in O)this[V]=O[V];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,j,P,X;this._more||(this.yytext="",this.match="");for(var O=this._currentRules(),V=0;V<O.length;V++)if(P=this._input.match(this.rules[O[V]]),P&&(!j||P[0].length>j[0].length)){if(j=P,X=V,this.options.backtrack_lexer){if(G=this.test_match(P,O[V]),G!==!1)return G;if(this._backtrack){j=!1;continue}else return!1}else if(!this.options.flex)break}return j?(G=this.test_match(j,O[X]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var G=this.next();return G||this.lex()},begin:function(G){this.conditionStack.push(G)},popState:function(){var G=this.conditionStack.length-1;return G>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(G){return G=this.conditionStack.length-1-Math.abs(G||0),G>=0?this.conditionStack[G]:"INITIAL"},pushState:function(G){this.begin(G)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(G,j,P,X){switch(P){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:break;case 15:break;case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return j.yytext=j.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};return ut}();Z.lexer=q;function it(){this.yy={}}return it.prototype=Z,Z.Parser=it,new it}();T3.parser=T3;const Jat=t=>t.match(/^\s*requirement(Diagram)?/)!==null;let a5=[],br={},fl={},ja={},pl={};const tot={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},eot={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},not={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},rot={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},iot=function(t,e,n){qe.parseDirective(this,t,e,n)},aot=(t,e)=>(typeof fl[t]>"u"&&(fl[t]={name:t,type:e,id:br.id,text:br.text,risk:br.risk,verifyMethod:br.verifyMethod}),br={},fl[t]),oot=()=>fl,sot=t=>{typeof br<"u"&&(br.id=t)},cot=t=>{typeof br<"u"&&(br.text=t)},lot=t=>{typeof br<"u"&&(br.risk=t)},uot=t=>{typeof br<"u"&&(br.verifyMethod=t)},hot=t=>(typeof pl[t]>"u"&&(pl[t]={name:t,type:ja.type,docRef:ja.docRef},W.info("Added new requirement: ",t)),ja={},pl[t]),dot=()=>pl,fot=t=>{typeof ja<"u"&&(ja.type=t)},pot=t=>{typeof ja<"u"&&(ja.docRef=t)},got=(t,e,n)=>{a5.push({type:t,src:e,dst:n})},yot=()=>a5,mot=()=>{a5=[],br={},fl={},ja={},pl={},pi()},bot={RequirementType:tot,RiskLevel:eot,VerifyType:not,Relationships:rot,parseDirective:iot,getConfig:()=>at().req,addRequirement:aot,getRequirements:oot,setNewReqId:sot,setNewReqText:cot,setNewReqRisk:lot,setNewReqVerifyMethod:uot,setAccTitle:zr,getAccTitle:gi,setAccDescription:yi,getAccDescription:mi,addElement:hot,getElements:dot,setNewElementType:fot,setNewElementDocRef:pot,addRelationship:got,getRelationships:yot,clear:mot},E3={CONTAINS:"contains",ARROW:"arrow"},_ot=(t,e)=>{let n=t.append("defs").append("marker").attr("id",E3.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");n.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),n.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),n.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",E3.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},IL={ReqMarkers:E3,insertLineEndings:_ot};let on={},u9=0;const FL=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",on.rect_min_width+"px").attr("height",on.rect_min_height+"px"),$L=(t,e,n)=>{let r=on.rect_min_width/2,i=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",on.rect_padding).attr("dominant-baseline","hanging"),a=0;n.forEach(u=>{a==0?i.append("tspan").attr("text-anchor","middle").attr("x",on.rect_min_width/2).attr("dy",0).text(u):i.append("tspan").attr("text-anchor","middle").attr("x",on.rect_min_width/2).attr("dy",on.line_height*.75).text(u),a++});let o=1.5*on.rect_padding,s=a*on.line_height*.75,l=o+s;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",on.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:i,y:l}},PL=(t,e,n,r)=>{let i=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",on.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),a=0;const o=30;let s=[];return n.forEach(l=>{let u=l.length;for(;u>o&&a<3;){let h=l.substring(0,o);l=l.substring(o,l.length),u=l.length,s[s.length]=h,a++}if(a==3){let h=s[s.length-1];s[s.length-1]=h.substring(0,h.length-4)+"..."}else s[s.length]=l;a=0}),s.forEach(l=>{i.append("tspan").attr("x",on.rect_padding).attr("dy",on.line_height).text(l)}),i},vot=(t,e,n,r)=>{const i=e.node().getTotalLength(),a=e.node().getPointAtLength(i*.5),o="rel"+u9;u9++;const s=t.append("text").attr("class","req relationshipLabel").attr("id",o).attr("x",a.x).attr("y",a.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+o).attr("class","req reqLabelBox").attr("x",a.x-s.width/2).attr("y",a.y-s.height/2).attr("width",s.width).attr("height",s.height).attr("fill","white").attr("fill-opacity","85%")},xot=function(t,e,n,r,i){const a=n.edge(Qs(e.src),Qs(e.dst)),o=no().x(function(l){return l.x}).y(function(l){return l.y}),s=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",o(a.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?s.attr("marker-start","url("+pe.getUrl(on.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(s.attr("stroke-dasharray","10,7"),s.attr("marker-end","url("+pe.getUrl(on.arrowMarkerAbsolute)+"#"+IL.ReqMarkers.ARROW+"_line_ending)")),vot(t,s,on,`<<${e.type}>>`)},kot=(t,e,n)=>{Object.keys(t).forEach(r=>{let i=t[r];r=Qs(r),W.info("Added new requirement: ",r);const a=n.append("g").attr("id",r),o="req-"+r,s=FL(a,o);let l=$L(a,r+"_title",[`<<${i.type}>>`,`${i.name}`]);PL(a,r+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],l.y);const u=s.node().getBBox();e.setNode(r,{width:u.width,height:u.height,shape:"rect",id:r})})},wot=(t,e,n)=>{Object.keys(t).forEach(r=>{let i=t[r];const a=Qs(r),o=n.append("g").attr("id",a),s="element-"+a,l=FL(o,s);let u=$L(o,s+"_title",["<<Element>>",`${r}`]);PL(o,s+"_body",[`Type: ${i.type||"Not Specified"}`,`Doc Ref: ${i.docRef||"None"}`],u.y);const h=l.node().getBBox();e.setNode(a,{width:h.width,height:h.height,shape:"rect",id:a})})},Tot=(t,e)=>(t.forEach(function(n){let r=Qs(n.src),i=Qs(n.dst);e.setEdge(r,i,{relationship:n})}),t),Eot=function(t,e){e.nodes().forEach(function(n){typeof n<"u"&&typeof e.node(n)<"u"&&(t.select("#"+n),t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )"))})},Qs=t=>t.replace(/\s/g,"").replace(/\./g,"_"),Cot=(t,e,n,r)=>{on=at().requirement,r.db.clear(),r.parser.parse(t);const i=on.securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);IL.insertLineEndings(o,on);const s=new dn.Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:on.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let l=r.db.getRequirements(),u=r.db.getElements(),h=r.db.getRelationships();kot(l,s,o),wot(u,s,o),Tot(h,s),gu.layout(s),Eot(o,s),h.forEach(function(_){xot(o,_,s,e,r)});const f=on.rect_padding,d=o.node().getBBox(),p=d.width+f*2,m=d.height+f*2;fi(o,m,p,on.useMaxWidth),o.attr("viewBox",`${d.x-f} ${d.y-f} ${p} ${m}`),xr(r.db,o,e)},Sot={draw:Cot};var C3=function(){var t=function(ut,G,j,P){for(j=j||{},P=ut.length;P--;j[ut[P]]=G);return j},e=[1,2],n=[1,3],r=[1,5],i=[1,7],a=[2,5],o=[1,15],s=[1,17],l=[1,18],u=[1,19],h=[1,21],f=[1,22],d=[1,23],p=[1,29],m=[1,30],_=[1,31],y=[1,32],b=[1,33],k=[1,34],T=[1,35],x=[1,36],A=[1,37],C=[1,38],L=[1,39],S=[1,40],N=[1,43],v=[1,44],M=[1,45],w=[1,46],R=[1,47],B=[1,48],$=[1,51],F=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Q=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],nt=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],z=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],Y=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],rt=[67,68,69],lt=[1,121],J=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Z={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(ut,G,j,P,X,O,V){var U=O.length-1;switch(X){case 4:return P.apply(O[U]),O[U];case 5:this.$=[];break;case 6:O[U-1].push(O[U]),this.$=O[U-1];break;case 7:case 8:this.$=O[U];break;case 9:this.$=[];break;case 12:O[U-3].type="addParticipant",O[U-3].description=P.parseMessage(O[U-1]),this.$=O[U-3];break;case 13:O[U-1].type="addParticipant",this.$=O[U-1];break;case 14:O[U-3].type="addActor",O[U-3].description=P.parseMessage(O[U-1]),this.$=O[U-3];break;case 15:O[U-1].type="addActor",this.$=O[U-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(O[U-2]),sequenceIndexStep:Number(O[U-1]),sequenceVisible:!0,signalType:P.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(O[U-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:P.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:P.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:P.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:P.LINETYPE.ACTIVE_START,actor:O[U-1]};break;case 22:this.$={type:"activeEnd",signalType:P.LINETYPE.ACTIVE_END,actor:O[U-1]};break;case 28:P.setDiagramTitle(O[U].substring(6)),this.$=O[U].substring(6);break;case 29:P.setDiagramTitle(O[U].substring(7)),this.$=O[U].substring(7);break;case 30:this.$=O[U].trim(),P.setAccTitle(this.$);break;case 31:case 32:this.$=O[U].trim(),P.setAccDescription(this.$);break;case 33:O[U-1].unshift({type:"loopStart",loopText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.LOOP_START}),O[U-1].push({type:"loopEnd",loopText:O[U-2],signalType:P.LINETYPE.LOOP_END}),this.$=O[U-1];break;case 34:O[U-1].unshift({type:"rectStart",color:P.parseMessage(O[U-2]),signalType:P.LINETYPE.RECT_START}),O[U-1].push({type:"rectEnd",color:P.parseMessage(O[U-2]),signalType:P.LINETYPE.RECT_END}),this.$=O[U-1];break;case 35:O[U-1].unshift({type:"optStart",optText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.OPT_START}),O[U-1].push({type:"optEnd",optText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.OPT_END}),this.$=O[U-1];break;case 36:O[U-1].unshift({type:"altStart",altText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.ALT_START}),O[U-1].push({type:"altEnd",signalType:P.LINETYPE.ALT_END}),this.$=O[U-1];break;case 37:O[U-1].unshift({type:"parStart",parText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.PAR_START}),O[U-1].push({type:"parEnd",signalType:P.LINETYPE.PAR_END}),this.$=O[U-1];break;case 38:O[U-1].unshift({type:"criticalStart",criticalText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.CRITICAL_START}),O[U-1].push({type:"criticalEnd",signalType:P.LINETYPE.CRITICAL_END}),this.$=O[U-1];break;case 39:O[U-1].unshift({type:"breakStart",breakText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.BREAK_START}),O[U-1].push({type:"breakEnd",optText:P.parseMessage(O[U-2]),signalType:P.LINETYPE.BREAK_END}),this.$=O[U-1];break;case 42:this.$=O[U-3].concat([{type:"option",optionText:P.parseMessage(O[U-1]),signalType:P.LINETYPE.CRITICAL_OPTION},O[U]]);break;case 44:this.$=O[U-3].concat([{type:"and",parText:P.parseMessage(O[U-1]),signalType:P.LINETYPE.PAR_AND},O[U]]);break;case 46:this.$=O[U-3].concat([{type:"else",altText:P.parseMessage(O[U-1]),signalType:P.LINETYPE.ALT_ELSE},O[U]]);break;case 47:this.$=[O[U-1],{type:"addNote",placement:O[U-2],actor:O[U-1].actor,text:O[U]}];break;case 48:O[U-2]=[].concat(O[U-1],O[U-1]).slice(0,2),O[U-2][0]=O[U-2][0].actor,O[U-2][1]=O[U-2][1].actor,this.$=[O[U-1],{type:"addNote",placement:P.PLACEMENT.OVER,actor:O[U-2].slice(0,2),text:O[U]}];break;case 49:this.$=[O[U-1],{type:"addLinks",actor:O[U-1].actor,text:O[U]}];break;case 50:this.$=[O[U-1],{type:"addALink",actor:O[U-1].actor,text:O[U]}];break;case 51:this.$=[O[U-1],{type:"addProperties",actor:O[U-1].actor,text:O[U]}];break;case 52:this.$=[O[U-1],{type:"addDetails",actor:O[U-1].actor,text:O[U]}];break;case 55:this.$=[O[U-2],O[U]];break;case 56:this.$=O[U];break;case 57:this.$=P.PLACEMENT.LEFTOF;break;case 58:this.$=P.PLACEMENT.RIGHTOF;break;case 59:this.$=[O[U-4],O[U-1],{type:"addMessage",from:O[U-4].actor,to:O[U-1].actor,signalType:O[U-3],msg:O[U]},{type:"activeStart",signalType:P.LINETYPE.ACTIVE_START,actor:O[U-1]}];break;case 60:this.$=[O[U-4],O[U-1],{type:"addMessage",from:O[U-4].actor,to:O[U-1].actor,signalType:O[U-3],msg:O[U]},{type:"activeEnd",signalType:P.LINETYPE.ACTIVE_END,actor:O[U-4]}];break;case 61:this.$=[O[U-3],O[U-1],{type:"addMessage",from:O[U-3].actor,to:O[U-1].actor,signalType:O[U-2],msg:O[U]}];break;case 62:this.$={type:"addParticipant",actor:O[U]};break;case 63:this.$=P.LINETYPE.SOLID_OPEN;break;case 64:this.$=P.LINETYPE.DOTTED_OPEN;break;case 65:this.$=P.LINETYPE.SOLID;break;case 66:this.$=P.LINETYPE.DOTTED;break;case 67:this.$=P.LINETYPE.SOLID_CROSS;break;case 68:this.$=P.LINETYPE.DOTTED_CROSS;break;case 69:this.$=P.LINETYPE.SOLID_POINT;break;case 70:this.$=P.LINETYPE.DOTTED_POINT;break;case 71:this.$=P.parseMessage(O[U].trim().substring(1));break;case 72:P.parseDirective("%%{","open_directive");break;case 73:P.parseDirective(O[U],"type_directive");break;case 74:O[U]=O[U].trim().replace(/'/g,'"'),P.parseDirective(O[U],"arg_directive");break;case 75:P.parseDirective("}%%","close_directive","sequence");break}},table:[{3:1,4:e,5:n,6:4,7:r,11:6,79:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,11:6,79:i},{3:9,4:e,5:n,6:4,7:r,11:6,79:i},{3:10,4:e,5:n,6:4,7:r,11:6,79:i},t([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],a,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,41:T,42:x,43:A,45:C,47:L,49:S,53:N,58:v,59:M,60:w,61:R,69:B,79:i},{13:49,14:[1,50],82:$},t([14,82],[2,73]),t(F,[2,6]),{6:41,10:52,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,41:T,42:x,43:A,45:C,47:L,49:S,53:N,58:v,59:M,60:w,61:R,69:B,79:i},t(F,[2,8]),t(F,[2,9]),{17:53,69:B},{17:54,69:B},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:B},{17:60,69:B},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},t(F,[2,28]),t(F,[2,29]),{35:[1,66]},{37:[1,67]},t(F,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},t(F,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:B},{17:89,69:B},{17:90,69:B},{17:91,69:B},t([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},t(F,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},t(F,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},t(F,[2,20]),{5:[1,102]},{5:[1,103]},t(F,[2,23]),t(F,[2,24]),t(F,[2,25]),t(F,[2,26]),t(F,[2,27]),t(F,[2,30]),t(F,[2,31]),t(Q,a,{8:104}),t(Q,a,{8:105}),t(Q,a,{8:106}),t(nt,a,{44:107,8:108}),t(z,a,{46:109,8:110}),t(Y,a,{48:111,8:112}),t(Q,a,{8:113}),{17:116,67:[1,114],68:[1,115],69:B},t(rt,[2,63]),t(rt,[2,64]),t(rt,[2,65]),t(rt,[2,66]),t(rt,[2,67]),t(rt,[2,68]),t(rt,[2,69]),t(rt,[2,70]),{17:117,69:B},{17:119,57:118,69:B},{69:[2,57]},{69:[2,58]},{55:120,78:lt},{55:122,78:lt},{55:123,78:lt},{55:124,78:lt},t(J,[2,10]),{13:125,82:$},{82:[2,74]},{19:[1,126]},t(F,[2,13]),{19:[1,127]},t(F,[2,15]),{5:[1,128]},t(F,[2,18]),t(F,[2,19]),t(F,[2,21]),t(F,[2,22]),{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,129],41:T,42:x,43:A,45:C,47:L,49:S,53:N,58:v,59:M,60:w,61:R,69:B,79:i},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,130],41:T,42:x,43:A,45:C,47:L,49:S,53:N,58:v,59:M,60:w,61:R,69:B,79:i},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,131],41:T,42:x,43:A,45:C,47:L,49:S,53:N,58:v,59:M,60:w,61:R,69:B,79:i},{40:[1,132]},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[2,45],41:T,42:x,43:A,45:C,47:L,49:S,52:[1,133],53:N,58:v,59:M,60:w,61:R,69:B,79:i},{40:[1,134]},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[2,43],41:T,42:x,43:A,45:C,47:L,49:S,51:[1,135],53:N,58:v,59:M,60:w,61:R,69:B,79:i},{40:[1,136]},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[2,41],41:T,42:x,43:A,45:C,47:L,49:S,50:[1,137],53:N,58:v,59:M,60:w,61:R,69:B,79:i},{4:o,5:s,6:41,9:14,10:16,11:6,16:l,17:42,20:u,21:20,22:h,25:f,26:d,27:24,28:25,29:26,30:27,31:28,32:p,33:m,34:_,36:y,38:b,39:k,40:[1,138],41:T,42:x,43:A,45:C,47:L,49:S,53:N,58:v,59:M,60:w,61:R,69:B,79:i},{17:139,69:B},{17:140,69:B},{55:141,78:lt},{55:142,78:lt},{55:143,78:lt},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},t(F,[2,17]),t(F,[2,33]),t(F,[2,34]),t(F,[2,35]),t(F,[2,36]),{19:[1,148]},t(F,[2,37]),{19:[1,149]},t(F,[2,38]),{19:[1,150]},t(F,[2,39]),{55:151,78:lt},{55:152,78:lt},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:B},t(J,[2,11]),t(F,[2,12]),t(F,[2,14]),t(nt,a,{8:108,44:154}),t(z,a,{8:110,46:155}),t(Y,a,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(ut,G){if(G.recoverable)this.trace(ut);else{var j=new Error(ut);throw j.hash=G,j}},parse:function(ut){var G=this,j=[0],P=[],X=[null],O=[],V=this.table,U="",H=0,xt=0,ot=2,Nt=1,Mt=O.slice.call(arguments,1),wt=Object.create(this.lexer),Et={yy:{}};for(var bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,bt)&&(Et.yy[bt]=this.yy[bt]);wt.setInput(ut,Et.yy),Et.yy.lexer=wt,Et.yy.parser=this,typeof wt.yylloc>"u"&&(wt.yylloc={});var mt=wt.yylloc;O.push(mt);var Tt=wt.options&&wt.options.ranges;typeof Et.yy.parseError=="function"?this.parseError=Et.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function kt(){var yt;return yt=P.pop()||wt.lex()||Nt,typeof yt!="number"&&(yt instanceof Array&&(P=yt,yt=P.pop()),yt=G.symbols_[yt]||yt),yt}for(var st,Zt,$t,Jt,Ht={},qt,oe,Xt,It;;){if(Zt=j[j.length-1],this.defaultActions[Zt]?$t=this.defaultActions[Zt]:((st===null||typeof st>"u")&&(st=kt()),$t=V[Zt]&&V[Zt][st]),typeof $t>"u"||!$t.length||!$t[0]){var Pt="";It=[];for(qt in V[Zt])this.terminals_[qt]&&qt>ot&&It.push("'"+this.terminals_[qt]+"'");wt.showPosition?Pt="Parse error on line "+(H+1)+`:
`+wt.showPosition()+`
Expecting `+It.join(", ")+", got '"+(this.terminals_[st]||st)+"'":Pt="Parse error on line "+(H+1)+": Unexpected "+(st==Nt?"end of input":"'"+(this.terminals_[st]||st)+"'"),this.parseError(Pt,{text:wt.match,token:this.terminals_[st]||st,line:wt.yylineno,loc:mt,expected:It})}if($t[0]instanceof Array&&$t.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Zt+", token: "+st);switch($t[0]){case 1:j.push(st),X.push(wt.yytext),O.push(wt.yylloc),j.push($t[1]),st=null,xt=wt.yyleng,U=wt.yytext,H=wt.yylineno,mt=wt.yylloc;break;case 2:if(oe=this.productions_[$t[1]][1],Ht.$=X[X.length-oe],Ht._$={first_line:O[O.length-(oe||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(oe||1)].first_column,last_column:O[O.length-1].last_column},Tt&&(Ht._$.range=[O[O.length-(oe||1)].range[0],O[O.length-1].range[1]]),Jt=this.performAction.apply(Ht,[U,xt,H,Et.yy,$t[1],X,O].concat(Mt)),typeof Jt<"u")return Jt;oe&&(j=j.slice(0,-1*oe*2),X=X.slice(0,-1*oe),O=O.slice(0,-1*oe)),j.push(this.productions_[$t[1]][0]),X.push(Ht.$),O.push(Ht._$),Xt=V[j[j.length-2]][j[j.length-1]],j.push(Xt);break;case 3:return!0}}return!0}},q=function(){var ut={EOF:1,parseError:function(G,j){if(this.yy.parser)this.yy.parser.parseError(G,j);else throw new Error(G)},setInput:function(G,j){return this.yy=j||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var G=this._input[0];this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G;var j=G.match(/(?:\r\n?|\n).*/g);return j?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G},unput:function(G){var j=G.length,P=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var O=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===X.length?this.yylloc.first_column:0)+X[X.length-P.length].length-P[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[O[0],O[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput(),j=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+j+"^"},test_match:function(G,j){var P,X,O;if(this.options.backtrack_lexer&&(O={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(O.yylloc.range=this.yylloc.range.slice(0))),X=G[0].match(/(?:\r\n?|\n).*/g),X&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],P=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var V in O)this[V]=O[V];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var G,j,P,X;this._more||(this.yytext="",this.match="");for(var O=this._currentRules(),V=0;V<O.length;V++)if(P=this._input.match(this.rules[O[V]]),P&&(!j||P[0].length>j[0].length)){if(j=P,X=V,this.options.backtrack_lexer){if(G=this.test_match(P,O[V]),G!==!1)return G;if(this._backtrack){j=!1;continue}else return!1}else if(!this.options.flex)break}return j?(G=this.test_match(j,O[X]),G!==!1?G:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var G=this.next();return G||this.lex()},begin:function(G){this.conditionStack.push(G)},popState:function(){var G=this.conditionStack.length-1;return G>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(G){return G=this.conditionStack.length-1-Math.abs(G||0),G>=0?this.conditionStack[G]:"INITIAL"},pushState:function(G){this.begin(G)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(G,j,P,X){switch(P){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:break;case 7:break;case 8:break;case 9:break;case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return j.yytext=j.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return j.yytext=j.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};return ut}();Z.lexer=q;function it(){this.yy={}}return it.prototype=Z,Z.Parser=it,new it}();C3.parser=C3;const Aot=t=>t.match(/^\s*sequenceDiagram/)!==null;let Fc,Fa={},Zr=[],xd=!1,S3;const Mot=function(t,e,n){qe.parseDirective(this,t,e,n)},A3=function(t,e,n,r){const i=Fa[t];i&&e===i.name&&n==null||((n==null||n.text==null)&&(n={text:e,wrap:null,type:r}),(r==null||n.text==null)&&(n={text:e,wrap:null,type:r}),Fa[t]={name:e,description:n.text,wrap:n.wrap===void 0&&Js()||!!n.wrap,prevActor:Fc,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},Fc&&Fa[Fc]&&(Fa[Fc].nextActor=t),Fc=t)},Lot=t=>{let e,n=0;for(e=0;e<Zr.length;e++)Zr[e].type===ql.ACTIVE_START&&Zr[e].from.actor===t&&n++,Zr[e].type===ql.ACTIVE_END&&Zr[e].from.actor===t&&n--;return n},Bot=function(t,e,n,r){Zr.push({from:t,to:e,message:n.text,wrap:n.wrap===void 0&&Js()||!!n.wrap,answer:r})},un=function(t,e,n={text:void 0,wrap:void 0},r){if(r===ql.ACTIVE_END&&Lot(t.actor)<1){let i=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw i.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},i}return Zr.push({from:t,to:e,message:n.text,wrap:n.wrap===void 0&&Js()||!!n.wrap,type:r}),!0},Dot=function(){return Zr},Not=function(){return Fa},vu=function(t){return Fa[t]},Oot=function(){return Object.keys(Fa)},Rot=function(){xd=!0},Iot=function(){xd=!1},Fot=()=>xd,$ot=function(t){S3=t},Js=()=>typeof S3<"u"?S3:at().sequence.wrap,Pot=function(){Fa={},Zr=[],xd=!1,pi()},Yot=function(t){const e=t.trim(),n={text:e.replace(/^[:]?(?:no)?wrap:/,"").trim(),wrap:e.match(/^[:]?wrap:/)!==null?!0:e.match(/^[:]?nowrap:/)!==null?!1:void 0};return W.debug("parseMessage:",n),n},ql={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},zot={FILLED:0,OPEN:1},jot={LEFTOF:0,RIGHTOF:1,OVER:2},YL=function(t,e,n){n.text,n.wrap===void 0&&Js()||n.wrap;const r=[].concat(t,t);Zr.push({from:r[0],to:r[1],message:n.text,wrap:n.wrap===void 0&&Js()||!!n.wrap,type:ql.NOTE,placement:e})},zL=function(t,e){const n=vu(t);try{let r=si(e.text,at());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const i=JSON.parse(r);o5(n,i)}catch(r){W.error("error while parsing actor link text",r)}},Uot=function(t,e){const n=vu(t);try{const o={};let s=si(e.text,at());var r=s.indexOf("@");s=s.replace(/&amp;/g,"&"),s=s.replace(/&equals;/g,"=");var i=s.slice(0,r-1).trim(),a=s.slice(r+1).trim();o[i]=a,o5(n,o)}catch(o){W.error("error while parsing actor link text",o)}};function o5(t,e){if(t.links==null)t.links=e;else for(let n in e)t.links[n]=e[n]}const jL=function(t,e){const n=vu(t);try{let r=si(e.text,at());const i=JSON.parse(r);UL(n,i)}catch(r){W.error("error while parsing actor properties text",r)}};function UL(t,e){if(t.properties==null)t.properties=e;else for(let n in e)t.properties[n]=e[n]}const HL=function(t,e){const n=vu(t),r=document.getElementById(e.text);try{const i=r.innerHTML,a=JSON.parse(i);a.properties&&UL(n,a.properties),a.links&&o5(n,a.links)}catch(i){W.error("error while parsing actor details text",i)}},Hot=function(t,e){if(typeof t<"u"&&typeof t.properties<"u")return t.properties[e]},WL=function(t){if(t instanceof Array)t.forEach(function(e){WL(e)});else switch(t.type){case"sequenceIndex":Zr.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":A3(t.actor,t.actor,t.description,"participant");break;case"addActor":A3(t.actor,t.actor,t.description,"actor");break;case"activeStart":un(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":un(t.actor,void 0,void 0,t.signalType);break;case"addNote":YL(t.actor,t.placement,t.text);break;case"addLinks":zL(t.actor,t.text);break;case"addALink":Uot(t.actor,t.text);break;case"addProperties":jL(t.actor,t.text);break;case"addDetails":HL(t.actor,t.text);break;case"addMessage":un(t.from,t.to,t.msg,t.signalType);break;case"loopStart":un(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":un(void 0,void 0,void 0,t.signalType);break;case"rectStart":un(void 0,void 0,t.color,t.signalType);break;case"rectEnd":un(void 0,void 0,void 0,t.signalType);break;case"optStart":un(void 0,void 0,t.optText,t.signalType);break;case"optEnd":un(void 0,void 0,void 0,t.signalType);break;case"altStart":un(void 0,void 0,t.altText,t.signalType);break;case"else":un(void 0,void 0,t.altText,t.signalType);break;case"altEnd":un(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":zr(t.text);break;case"parStart":un(void 0,void 0,t.parText,t.signalType);break;case"and":un(void 0,void 0,t.parText,t.signalType);break;case"parEnd":un(void 0,void 0,void 0,t.signalType);break;case"criticalStart":un(void 0,void 0,t.criticalText,t.signalType);break;case"option":un(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":un(void 0,void 0,void 0,t.signalType);break;case"breakStart":un(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":un(void 0,void 0,void 0,t.signalType);break}},h9={addActor:A3,addMessage:Bot,addSignal:un,addLinks:zL,addDetails:HL,addProperties:jL,autoWrap:Js,setWrap:$ot,enableSequenceNumbers:Rot,disableSequenceNumbers:Iot,showSequenceNumbers:Fot,getMessages:Dot,getActors:Not,getActor:vu,getActorKeys:Oot,getActorProperty:Hot,getAccTitle:gi,getDiagramTitle:rd,setDiagramTitle:nd,parseDirective:Mot,getConfig:()=>at().sequence,clear:Pot,parseMessage:Yot,LINETYPE:ql,ARROWTYPE:zot,PLACEMENT:jot,addNote:YL,setAccTitle:zr,apply:WL,setAccDescription:yi,getAccDescription:mi};let M3=[];const Wot=t=>{M3.push(t)},GL=()=>{M3.forEach(t=>{t()}),M3=[]},kd=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),typeof e.class<"u"&&n.attr("class",e.class),n},VL=(t,e)=>{Wot(()=>{const n=document.querySelectorAll(t);n.length!==0&&(n[0].addEventListener("mouseover",function(){Xot("actor"+e+"_popup")}),n[0].addEventListener("mouseout",function(){Kot("actor"+e+"_popup")}))})},Got=function(t,e,n,r,i){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const a=e.links,o=e.actorCnt,s=e.rectData;var l="none";i&&(l="block !important");const u=t.append("g");u.attr("id","actor"+o+"_popup"),u.attr("class","actorPopupMenu"),u.attr("display",l),VL("#actor"+o+"_popup",o);var h="";typeof s.class<"u"&&(h=" "+s.class);let f=s.width>n?s.width:n;const d=u.append("rect");if(d.attr("class","actorPopupMenuPanel"+h),d.attr("x",s.x),d.attr("y",s.height),d.attr("fill",s.fill),d.attr("stroke",s.stroke),d.attr("width",f),d.attr("height",s.height),d.attr("rx",s.rx),d.attr("ry",s.ry),a!=null){var p=20;for(let y in a){var m=u.append("a"),_=$i(a[y]);m.attr("xlink:href",_),m.attr("target","_blank"),hst(r)(y,m,s.x+10,s.height+p,f,20,{class:"actor"},r),p+=30}}return d.attr("height",p),{height:s.height+p,width:f}},qL=function(t,e,n,r){const i=t.append("image");i.attr("x",e),i.attr("y",n);var a=$i(r);i.attr("xlink:href",a)},XL=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var a=$i(r);i.attr("xlink:href","#"+a)},Vot=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},qot=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},Xot=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="block")},Kot=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="none")},tc=function(t,e){let n=0,r=0;const i=e.text.split(pe.lineBreakRegex);let a=[],o=0,s=()=>e.y;if(typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0)switch(e.valign){case"top":case"start":s=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":s=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":s=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin);break}if(typeof e.anchor<"u"&&typeof e.textMargin<"u"&&typeof e.width<"u")switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let l=0;l<i.length;l++){let u=i[l];typeof e.textMargin<"u"&&e.textMargin===0&&typeof e.fontSize<"u"&&(o=l*e.fontSize);const h=t.append("text");if(h.attr("x",e.x),h.attr("y",s()),typeof e.anchor<"u"&&h.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),typeof e.fontFamily<"u"&&h.style("font-family",e.fontFamily),typeof e.fontSize<"u"&&h.style("font-size",e.fontSize),typeof e.fontWeight<"u"&&h.style("font-weight",e.fontWeight),typeof e.fill<"u"&&h.attr("fill",e.fill),typeof e.class<"u"&&h.attr("class",e.class),typeof e.dy<"u"?h.attr("dy",e.dy):o!==0&&h.attr("dy",o),e.tspan){const f=h.append("tspan");f.attr("x",e.x),typeof e.fill<"u"&&f.attr("fill",e.fill),f.text(u)}else h.text(u);typeof e.valign<"u"&&typeof e.textMargin<"u"&&e.textMargin>0&&(r+=(h._groups||h)[0][0].getBBox().height,n=r),a.push(h)}return a},KL=function(t,e){function n(i,a,o,s,l){return i+","+a+" "+(i+o)+","+a+" "+(i+o)+","+(a+s-l)+" "+(i+o-l*1.2)+","+(a+s)+" "+i+","+(a+s)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,tc(t,e),r};let wi=-1;const ZL=(t,e)=>{!t.selectAll||t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},Zot=function(t,e,n){const r=e.x+e.width/2,i=t.append("g");var a=i;e.y===0&&(wi++,a.append("line").attr("id","actor"+wi).attr("x1",r).attr("y1",5).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),a=i.append("g"),e.actorCnt=wi,e.links!=null&&(a.attr("id","root-"+wi),VL("#root-"+wi,wi)));const o=wd();var s="actor";e.properties!=null&&e.properties.class?s=e.properties.class:o.fill="#eaeaea",o.x=e.x,o.y=e.y,o.width=e.width,o.height=e.height,o.class=s,o.rx=3,o.ry=3;const l=kd(a,o);if(e.rectData=o,e.properties!=null&&e.properties.icon){const h=e.properties.icon.trim();h.charAt(0)==="@"?XL(a,o.x+o.width-20,o.y+10,h.substr(1)):qL(a,o.x+o.width-20,o.y+10,h)}QL(n)(e.description,a,o.x,o.y,o.width,o.height,{class:"actor"},n);let u=e.height;if(l.node){const h=l.node().getBBox();e.height=h.height,u=h.height}return u},Qot=function(t,e,n){const r=e.x+e.width/2;e.y===0&&(wi++,t.append("line").attr("id","actor"+wi).attr("x1",r).attr("y1",80).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const i=t.append("g");i.attr("class","actor-man");const a=wd();a.x=e.x,a.y=e.y,a.fill="#eaeaea",a.width=e.width,a.height=e.height,a.class="actor",a.rx=3,a.ry=3,i.append("line").attr("id","actor-man-torso"+wi).attr("x1",r).attr("y1",e.y+25).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("id","actor-man-arms"+wi).attr("x1",r-18).attr("y1",e.y+33).attr("x2",r+18).attr("y2",e.y+33),i.append("line").attr("x1",r-18).attr("y1",e.y+60).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("x1",r).attr("y1",e.y+45).attr("x2",r+16).attr("y2",e.y+60);const o=i.append("circle");o.attr("cx",e.x+e.width/2),o.attr("cy",e.y+10),o.attr("r",15),o.attr("width",e.width),o.attr("height",e.height);const s=i.node().getBBox();return e.height=s.height,QL(n)(e.description,i,a.x,a.y+35,a.width,a.height,{class:"actor"},n),e.height},Jot=function(t,e,n){switch(e.type){case"actor":return Qot(t,e,n);case"participant":return Zot(t,e,n)}},tst=function(t){return t.append("g")},est=function(t,e,n,r,i){const a=wd(),o=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+i%3,a.width=e.stopx-e.startx,a.height=n-e.starty,kd(o,a)},nst=function(t,e,n,r){const{boxMargin:i,boxTextMargin:a,labelBoxHeight:o,labelBoxWidth:s,messageFontFamily:l,messageFontSize:u,messageFontWeight:h}=r,f=t.append("g"),d=function(_,y,b,k){return f.append("line").attr("x1",_).attr("y1",y).attr("x2",b).attr("y2",k).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),typeof e.sections<"u"&&e.sections.forEach(function(_){d(e.startx,_.y,e.stopx,_.y).style("stroke-dasharray","3, 3")});let p=L3();p.text=n,p.x=e.startx,p.y=e.starty,p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=s||50,p.height=o||20,p.textMargin=a,p.class="labelText",KL(f,p),p=L3(),p.text=e.title,p.x=e.startx+s/2+(e.stopx-e.startx)/2,p.y=e.starty+i+a,p.anchor="middle",p.valign="middle",p.textMargin=a,p.class="loopText",p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.wrap=!0;let m=tc(f,p);return typeof e.sectionTitles<"u"&&e.sectionTitles.forEach(function(_,y){if(_.message){p.text=_.message,p.x=e.startx+(e.stopx-e.startx)/2,p.y=e.sections[y].y+i+a,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=l,p.fontSize=u,p.fontWeight=h,p.wrap=e.wrap,m=tc(f,p);let b=Math.round(m.map(k=>(k._groups||k)[0][0].getBBox().height).reduce((k,T)=>k+T));e.sections[y].height+=b-(i+a)}}),e.height=Math.round(e.stopy-e.starty),f},rst=function(t,e){kd(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},ist=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},ast=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},ost=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},sst=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},cst=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lst=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},ust=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},L3=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},wd=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},QL=function(){function t(i,a,o,s,l,u,h){const f=a.append("text").attr("x",o+l/2).attr("y",s+u/2+5).style("text-anchor","middle").text(i);r(f,h)}function e(i,a,o,s,l,u,h,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:m}=f;let _=d&&d.replace?d.replace("px",""):d;const y=i.split(pe.lineBreakRegex);for(let b=0;b<y.length;b++){const k=b*_-_*(y.length-1)/2,T=a.append("text").attr("x",o+l/2).attr("y",s).style("text-anchor","middle").style("font-size",d).style("font-weight",m).style("font-family",p);T.append("tspan").attr("x",o+l/2).attr("dy",k).text(y[b]),T.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(T,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)a.hasOwnProperty(o)&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),hst=function(){function t(i,a,o,s,l,u,h){const f=a.append("text").attr("x",o).attr("y",s).style("text-anchor","start").text(i);r(f,h)}function e(i,a,o,s,l,u,h,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:m}=f,_=i.split(pe.lineBreakRegex);for(let y=0;y<_.length;y++){const b=y*d-d*(_.length-1)/2,k=a.append("text").attr("x",o).attr("y",s).style("text-anchor","start").style("font-size",d).style("font-weight",m).style("font-family",p);k.append("tspan").attr("x",o).attr("dy",b).text(_[y]),k.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)a.hasOwnProperty(o)&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),nn={drawRect:kd,drawText:tc,drawLabel:KL,drawActor:Jot,drawPopup:Got,drawImage:qL,drawEmbeddedImage:XL,anchorElement:tst,drawActivation:est,drawLoop:nst,drawBackgroundRect:rst,insertArrowHead:sst,insertArrowFilledHead:cst,insertSequenceNumber:lst,insertArrowCrossHead:ust,insertDatabaseIcon:ist,insertComputerIcon:ast,insertClockIcon:ost,getTextObj:L3,getNoteRect:wd,popupMenu:Vot,popdownMenu:qot,fixLifeLineHeights:ZL,sanitizeUrl:$i};let ft={};const Ot={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,tB(at())},updateVal:function(t,e,n,r){typeof t[e]>"u"?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=this;let a=0;function o(s){return function(l){a++;const u=i.sequenceItems.length-a+1;i.updateVal(l,"starty",e-u*ft.boxMargin,Math.min),i.updateVal(l,"stopy",r+u*ft.boxMargin,Math.max),i.updateVal(Ot.data,"startx",t-u*ft.boxMargin,Math.min),i.updateVal(Ot.data,"stopx",n+u*ft.boxMargin,Math.max),s!=="activation"&&(i.updateVal(l,"startx",t-u*ft.boxMargin,Math.min),i.updateVal(l,"stopx",n+u*ft.boxMargin,Math.max),i.updateVal(Ot.data,"starty",e-u*ft.boxMargin,Math.min),i.updateVal(Ot.data,"stopy",r+u*ft.boxMargin,Math.max))}}this.sequenceItems.forEach(o()),this.activations.forEach(o("activation"))},insert:function(t,e,n,r){const i=Math.min(t,n),a=Math.max(t,n),o=Math.min(e,r),s=Math.max(e,r);this.updateVal(Ot.data,"startx",i,Math.min),this.updateVal(Ot.data,"starty",o,Math.min),this.updateVal(Ot.data,"stopx",a,Math.max),this.updateVal(Ot.data,"stopy",s,Math.max),this.updateBounds(i,o,a,s)},newActivation:function(t,e,n){const r=n[t.from.actor],i=Td(t.from.actor).length||0,a=r.x+r.width/2+(i-1)*ft.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+ft.activationWidth,stopy:void 0,actor:t.from.actor,anchored:nn.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(n){return n.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:Ot.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},dst=function(t,e){Ot.bumpVerticalPos(ft.boxMargin),e.height=ft.boxMargin,e.starty=Ot.getVerticalPos();const n=nn.getNoteRect();n.x=e.startx,n.y=e.starty,n.width=e.width||ft.width,n.class="note";const r=t.append("g"),i=nn.drawRect(r,n),a=nn.getTextObj();a.x=e.startx,a.y=e.starty,a.width=n.width,a.dy="1em",a.text=e.message,a.class="noteText",a.fontFamily=ft.noteFontFamily,a.fontSize=ft.noteFontSize,a.fontWeight=ft.noteFontWeight,a.anchor=ft.noteAlign,a.textMargin=ft.noteMargin,a.valign="center";const o=tc(r,a),s=Math.round(o.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,u)=>l+u));i.attr("height",s+2*ft.noteMargin),e.height+=s+2*ft.noteMargin,Ot.bumpVerticalPos(s+2*ft.noteMargin),e.stopy=e.starty+s+2*ft.noteMargin,e.stopx=e.startx+n.width,Ot.insert(e.startx,e.starty,e.stopx,e.stopy),Ot.models.addNote(e)},ec=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),ys=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),B3=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight}),fst=function(t,e){Ot.bumpVerticalPos(10);const{startx:n,stopx:r,message:i}=e,a=pe.splitBreaks(i).length,o=we.calculateTextDimensions(i,ec(ft)),s=o.height/a;e.height+=s,Ot.bumpVerticalPos(s);let l,u=o.height-10;const h=o.width;if(n===r){l=Ot.getVerticalPos()+u,ft.rightAngles||(u+=ft.boxMargin,l=Ot.getVerticalPos()+u),u+=30;const f=Math.max(h/2,ft.width/2);Ot.insert(n-f,Ot.getVerticalPos()-10+u,r+f,Ot.getVerticalPos()+30+u)}else u+=ft.boxMargin,l=Ot.getVerticalPos()+u,Ot.insert(n,l-10,r,l);return Ot.bumpVerticalPos(u),e.height+=u,e.stopy=e.starty+e.height,Ot.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l},pst=function(t,e,n,r){const{startx:i,stopx:a,starty:o,message:s,type:l,sequenceIndex:u,sequenceVisible:h}=e,f=we.calculateTextDimensions(s,ec(ft)),d=nn.getTextObj();d.x=i,d.y=o+10,d.width=a-i,d.class="messageText",d.dy="1em",d.text=s,d.fontFamily=ft.messageFontFamily,d.fontSize=ft.messageFontSize,d.fontWeight=ft.messageFontWeight,d.anchor=ft.messageAlign,d.valign="center",d.textMargin=ft.wrapPadding,d.tspan=!1,tc(t,d);const p=f.width;let m;i===a?ft.rightAngles?m=t.append("path").attr("d",`M  ${i},${n} H ${i+Math.max(ft.width/2,p/2)} V ${n+25} H ${i}`):m=t.append("path").attr("d","M "+i+","+n+" C "+(i+60)+","+(n-10)+" "+(i+60)+","+(n+30)+" "+i+","+(n+20)):(m=t.append("line"),m.attr("x1",i),m.attr("y1",n),m.attr("x2",a),m.attr("y2",n)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(m.style("stroke-dasharray","3, 3"),m.attr("class","messageLine1")):m.attr("class","messageLine0");let _="";ft.arrowMarkerAbsolute&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\("),_=_.replace(/\)/g,"\\)")),m.attr("stroke-width",2),m.attr("stroke","none"),m.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&m.attr("marker-end","url("+_+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&m.attr("marker-end","url("+_+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&m.attr("marker-end","url("+_+"#crosshead)"),(h||ft.showSequenceNumbers)&&(m.attr("marker-start","url("+_+"#sequencenumber)"),t.append("text").attr("x",i).attr("y",n+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(u))},D3=function(t,e,n,r,i,a){if(i.hideUnusedParticipants===!0){const u=new Set;a.forEach(h=>{u.add(h.from),u.add(h.to)}),n=n.filter(h=>u.has(h))}let o=0,s=0,l=0;for(let u=0;u<n.length;u++){const h=e[n[u]];h.width=h.width||ft.width,h.height=Math.max(h.height||ft.height,ft.height),h.margin=h.margin||ft.actorMargin,h.x=o+s,h.y=r;const f=nn.drawActor(t,h,ft);l=Math.max(l,f),Ot.insert(h.x,r,h.x+h.width,h.height),o+=h.width,s+=h.margin,Ot.models.addActor(h)}Ot.bumpVerticalPos(l)},JL=function(t,e,n,r){let i=0,a=0;for(let o=0;o<n.length;o++){const s=e[n[o]],l=mst(s),u=nn.drawPopup(t,s,l,ft,ft.forceMenus,r);u.height>i&&(i=u.height),u.width+s.x>a&&(a=u.width+s.x)}return{maxHeight:i,maxWidth:a}},tB=function(t){_n(ft,t),t.fontFamily&&(ft.actorFontFamily=ft.noteFontFamily=ft.messageFontFamily=t.fontFamily),t.fontSize&&(ft.actorFontSize=ft.noteFontSize=ft.messageFontSize=t.fontSize),t.fontWeight&&(ft.actorFontWeight=ft.noteFontWeight=ft.messageFontWeight=t.fontWeight)},Td=function(t){return Ot.activations.filter(function(e){return e.actor===t})},d9=function(t,e){const n=e[t],r=Td(t),i=r.reduce(function(o,s){return Math.min(o,s.startx)},n.x+n.width/2),a=r.reduce(function(o,s){return Math.max(o,s.stopx)},n.x+n.width/2);return[i,a]};function vi(t,e,n,r,i){Ot.bumpVerticalPos(n);let a=r;if(e.id&&e.message&&t[e.id]){const o=t[e.id].width,s=ec(ft);e.message=we.wrapLabel(`[${e.message}]`,o-2*ft.wrapPadding,s),e.width=o,e.wrap=!0;const l=we.calculateTextDimensions(e.message,s),u=Math.max(l.height,ft.labelBoxHeight);a=r+u,W.debug(`${u} - ${e.message}`)}i(e),Ot.bumpVerticalPos(a)}const gst=function(t,e,n,r){const{securityLevel:i,sequence:a}=at();ft=a;let o;i==="sandbox"&&(o=Lt("#i"+e));const s=Lt(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=i==="sandbox"?o.nodes()[0].contentDocument:document;Ot.init(),W.debug(r.db);const u=i==="sandbox"?s.select(`[id="${e}"]`):Lt(`[id="${e}"]`),h=r.db.getActors(),f=r.db.getActorKeys(),d=r.db.getMessages(),p=r.db.getDiagramTitle(),m=yst(h,d,r);ft.height=bst(h,m),nn.insertComputerIcon(u),nn.insertDatabaseIcon(u),nn.insertClockIcon(u),D3(u,h,f,0,ft,d);const _=xst(d,h,m,r);nn.insertArrowHead(u),nn.insertArrowCrossHead(u),nn.insertArrowFilledHead(u),nn.insertSequenceNumber(u);function y(M,w){const R=Ot.endActivation(M);R.starty+18>w&&(R.starty=w-6,w+=12),nn.drawActivation(u,R,w,ft,Td(M.from.actor).length),Ot.insert(R.startx,w-10,R.stopx,w)}let b=1,k=1;const T=[];d.forEach(function(M){let w,R,B;switch(M.type){case r.db.LINETYPE.NOTE:R=M.noteModel,dst(u,R);break;case r.db.LINETYPE.ACTIVE_START:Ot.newActivation(M,u,h);break;case r.db.LINETYPE.ACTIVE_END:y(M,Ot.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:vi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.LOOP_END:w=Ot.endLoop(),nn.drawLoop(u,w,"loop",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.RECT_START:vi(_,M,ft.boxMargin,ft.boxMargin,$=>Ot.newLoop(void 0,$.message));break;case r.db.LINETYPE.RECT_END:w=Ot.endLoop(),nn.drawBackgroundRect(u,w),Ot.models.addLoop(w),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos());break;case r.db.LINETYPE.OPT_START:vi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.OPT_END:w=Ot.endLoop(),nn.drawLoop(u,w,"opt",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.ALT_START:vi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.ALT_ELSE:vi(_,M,ft.boxMargin+ft.boxTextMargin,ft.boxMargin,$=>Ot.addSectionToLoop($));break;case r.db.LINETYPE.ALT_END:w=Ot.endLoop(),nn.drawLoop(u,w,"alt",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.PAR_START:vi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.PAR_AND:vi(_,M,ft.boxMargin+ft.boxTextMargin,ft.boxMargin,$=>Ot.addSectionToLoop($));break;case r.db.LINETYPE.PAR_END:w=Ot.endLoop(),nn.drawLoop(u,w,"par",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.AUTONUMBER:b=M.message.start||b,k=M.message.step||k,M.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:vi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.CRITICAL_OPTION:vi(_,M,ft.boxMargin+ft.boxTextMargin,ft.boxMargin,$=>Ot.addSectionToLoop($));break;case r.db.LINETYPE.CRITICAL_END:w=Ot.endLoop(),nn.drawLoop(u,w,"critical",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;case r.db.LINETYPE.BREAK_START:vi(_,M,ft.boxMargin,ft.boxMargin+ft.boxTextMargin,$=>Ot.newLoop($));break;case r.db.LINETYPE.BREAK_END:w=Ot.endLoop(),nn.drawLoop(u,w,"break",ft),Ot.bumpVerticalPos(w.stopy-Ot.getVerticalPos()),Ot.models.addLoop(w);break;default:try{B=M.msgModel,B.starty=Ot.getVerticalPos(),B.sequenceIndex=b,B.sequenceVisible=r.db.showSequenceNumbers();const $=fst(u,B);T.push({messageModel:B,lineStarty:$}),Ot.models.addMessage(B)}catch($){W.error("error while drawing message",$)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(M.type)&&(b=b+k)}),T.forEach(M=>pst(u,M.messageModel,M.lineStarty,r)),ft.mirrorActors&&(Ot.bumpVerticalPos(ft.boxMargin*2),D3(u,h,f,Ot.getVerticalPos(),ft,d),Ot.bumpVerticalPos(ft.boxMargin),ZL(u,Ot.getVerticalPos()));const x=JL(u,h,f,l),{bounds:A}=Ot.getBounds();W.debug("For line height fix Querying: #"+e+" .actor-line"),u0("#"+e+" .actor-line").attr("y2",A.stopy);let C=A.stopy-A.starty;C<x.maxHeight&&(C=x.maxHeight);let L=C+2*ft.diagramMarginY;ft.mirrorActors&&(L=L-ft.boxMargin+ft.bottomMarginAdj);let S=A.stopx-A.startx;S<x.maxWidth&&(S=x.maxWidth);const N=S+2*ft.diagramMarginX;p&&u.append("text").text(p).attr("x",(A.stopx-A.startx)/2-2*ft.diagramMarginX).attr("y",-25),fi(u,L,N,ft.useMaxWidth);const v=p?40:0;u.attr("viewBox",A.startx-ft.diagramMarginX+" -"+(ft.diagramMarginY+v)+" "+N+" "+(L+v)),xr(r.db,u,e),W.debug("models:",Ot.models)},yst=function(t,e,n){const r={};return e.forEach(function(i){if(t[i.to]&&t[i.from]){const a=t[i.to];if(i.placement===n.db.PLACEMENT.LEFTOF&&!a.prevActor||i.placement===n.db.PLACEMENT.RIGHTOF&&!a.nextActor)return;const o=i.placement!==void 0,s=!o,l=o?ys(ft):ec(ft),u=i.wrap?we.wrapLabel(i.message,ft.width-2*ft.wrapPadding,l):i.message,h=we.calculateTextDimensions(u,l).width+2*ft.wrapPadding;s&&i.from===a.nextActor?r[i.to]=Math.max(r[i.to]||0,h):s&&i.from===a.prevActor?r[i.from]=Math.max(r[i.from]||0,h):s&&i.from===i.to?(r[i.from]=Math.max(r[i.from]||0,h/2),r[i.to]=Math.max(r[i.to]||0,h/2)):i.placement===n.db.PLACEMENT.RIGHTOF?r[i.from]=Math.max(r[i.from]||0,h):i.placement===n.db.PLACEMENT.LEFTOF?r[a.prevActor]=Math.max(r[a.prevActor]||0,h):i.placement===n.db.PLACEMENT.OVER&&(a.prevActor&&(r[a.prevActor]=Math.max(r[a.prevActor]||0,h/2)),a.nextActor&&(r[i.from]=Math.max(r[i.from]||0,h/2)))}}),W.debug("maxMessageWidthPerActor:",r),r},mst=function(t){let e=0;const n=B3(ft);for(const r in t.links){const i=we.calculateTextDimensions(r,n).width+2*ft.wrapPadding+2*ft.boxMargin;e<i&&(e=i)}return e},bst=function(t,e){let n=0;Object.keys(t).forEach(r=>{const i=t[r];i.wrap&&(i.description=we.wrapLabel(i.description,ft.width-2*ft.wrapPadding,B3(ft)));const a=we.calculateTextDimensions(i.description,B3(ft));i.width=i.wrap?ft.width:Math.max(ft.width,a.width+2*ft.wrapPadding),i.height=i.wrap?Math.max(a.height,ft.height):ft.height,n=Math.max(n,i.height)});for(const r in e){const i=t[r];if(!i)continue;const a=t[i.nextActor];if(!a)continue;const o=e[r]+ft.actorMargin-i.width/2-a.width/2;i.margin=Math.max(o,ft.actorMargin)}return Math.max(n,ft.height)},_st=function(t,e,n){const r=e[t.from].x,i=e[t.to].x,a=t.wrap&&t.message;let o=we.calculateTextDimensions(a?we.wrapLabel(t.message,ft.width,ys(ft)):t.message,ys(ft));const s={width:a?ft.width:Math.max(ft.width,o.width+2*ft.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===n.db.PLACEMENT.RIGHTOF?(s.width=a?Math.max(ft.width,o.width):Math.max(e[t.from].width/2+e[t.to].width/2,o.width+2*ft.noteMargin),s.startx=r+(e[t.from].width+ft.actorMargin)/2):t.placement===n.db.PLACEMENT.LEFTOF?(s.width=Math.max(a?ft.width:e[t.from].width/2+e[t.to].width/2,o.width+2*ft.noteMargin),s.startx=r-s.width+(e[t.from].width-ft.actorMargin)/2):t.to===t.from?(o=we.calculateTextDimensions(a?we.wrapLabel(t.message,Math.max(ft.width,e[t.from].width),ys(ft)):t.message,ys(ft)),s.width=a?Math.max(ft.width,e[t.from].width):Math.max(e[t.from].width,ft.width,o.width+2*ft.noteMargin),s.startx=r+(e[t.from].width-s.width)/2):(s.width=Math.abs(r+e[t.from].width/2-(i+e[t.to].width/2))+ft.actorMargin,s.startx=r<i?r+e[t.from].width/2-ft.actorMargin/2:i+e[t.to].width/2-ft.actorMargin/2),a&&(s.message=we.wrapLabel(t.message,s.width-2*ft.wrapPadding,ys(ft))),W.debug(`NM:[${s.startx},${s.stopx},${s.starty},${s.stopy}:${s.width},${s.height}=${t.message}]`),s},vst=function(t,e,n){let r=!1;if([n.db.LINETYPE.SOLID_OPEN,n.db.LINETYPE.DOTTED_OPEN,n.db.LINETYPE.SOLID,n.db.LINETYPE.DOTTED,n.db.LINETYPE.SOLID_CROSS,n.db.LINETYPE.DOTTED_CROSS,n.db.LINETYPE.SOLID_POINT,n.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(r=!0),!r)return{};const i=d9(t.from,e),a=d9(t.to,e),o=i[0]<=a[0]?1:0,s=i[0]<a[0]?0:1,l=i.concat(a),u=Math.abs(a[s]-i[o]);t.wrap&&t.message&&(t.message=we.wrapLabel(t.message,Math.max(u+2*ft.wrapPadding,ft.width),ec(ft)));const h=we.calculateTextDimensions(t.message,ec(ft));return{width:Math.max(t.wrap?0:h.width+2*ft.wrapPadding,u+2*ft.wrapPadding,ft.width),height:0,startx:i[o],stopx:a[s],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,l),toBounds:Math.max.apply(null,l)}},xst=function(t,e,n,r){const i={},a=[];let o,s,l;return t.forEach(function(u){switch(u.id=we.random({length:10}),u.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:a.push({id:u.id,msg:u.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:u.message&&(o=a.pop(),i[o.id]=o,i[u.id]=o,a.push(o));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:o=a.pop(),i[o.id]=o;break;case r.db.LINETYPE.ACTIVE_START:{const h=e[u.from?u.from.actor:u.to.actor],f=Td(u.from?u.from.actor:u.to.actor).length,d=h.x+h.width/2+(f-1)*ft.activationWidth/2,p={startx:d,stopx:d+ft.activationWidth,actor:u.from.actor,enabled:!0};Ot.activations.push(p)}break;case r.db.LINETYPE.ACTIVE_END:{const h=Ot.activations.map(f=>f.actor).lastIndexOf(u.from.actor);delete Ot.activations.splice(h,1)[0]}break}u.placement!==void 0?(s=_st(u,e,r),u.noteModel=s,a.forEach(h=>{o=h,o.from=Math.min(o.from,s.startx),o.to=Math.max(o.to,s.startx+s.width),o.width=Math.max(o.width,Math.abs(o.from-o.to))-ft.labelBoxWidth})):(l=vst(u,e,r),u.msgModel=l,l.startx&&l.stopx&&a.length>0&&a.forEach(h=>{if(o=h,l.startx===l.stopx){const f=e[u.from],d=e[u.to];o.from=Math.min(f.x-l.width/2,f.x-f.width/2,o.from),o.to=Math.max(d.x+l.width/2,d.x+f.width/2,o.to),o.width=Math.max(o.width,Math.abs(o.to-o.from))-ft.labelBoxWidth}else o.from=Math.min(l.startx,o.from),o.to=Math.max(l.stopx,o.to),o.width=Math.max(o.width,l.width)-ft.labelBoxWidth}))}),Ot.activations=[],W.debug("Loop type widths:",i),i},f9={bounds:Ot,drawActors:D3,drawActorsPopup:JL,setConf:tB,draw:gst};var t0=function(){var t=function(nt,z,Y,rt){for(Y=Y||{},rt=nt.length;rt--;Y[nt[rt]]=z);return Y},e=[1,2],n=[1,3],r=[1,5],i=[1,7],a=[2,5],o=[1,15],s=[1,17],l=[1,19],u=[1,20],h=[1,21],f=[1,22],d=[1,33],p=[1,23],m=[1,24],_=[1,25],y=[1,26],b=[1,27],k=[1,30],T=[1,31],x=[1,32],A=[1,35],C=[1,36],L=[1,37],S=[1,38],N=[1,34],v=[1,41],M=[1,4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],w=[1,4,5,12,13,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],R=[1,4,5,7,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],B=[4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],$={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,idStatement:11,DESCR:12,"-->":13,HIDE_EMPTY:14,scale:15,WIDTH:16,COMPOSIT_STATE:17,STRUCT_START:18,STRUCT_STOP:19,STATE_DESCR:20,AS:21,ID:22,FORK:23,JOIN:24,CHOICE:25,CONCURRENT:26,note:27,notePosition:28,NOTE_TEXT:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,openDirective:36,typeDirective:37,closeDirective:38,":":39,argDirective:40,direction_tb:41,direction_bt:42,direction_rl:43,direction_lr:44,eol:45,";":46,EDGE_STATE:47,left_of:48,right_of:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",12:"DESCR",13:"-->",14:"HIDE_EMPTY",15:"scale",16:"WIDTH",17:"COMPOSIT_STATE",18:"STRUCT_START",19:"STRUCT_STOP",20:"STATE_DESCR",21:"AS",22:"ID",23:"FORK",24:"JOIN",25:"CHOICE",26:"CONCURRENT",27:"note",29:"NOTE_TEXT",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",39:":",41:"direction_tb",42:"direction_bt",43:"direction_rl",44:"direction_lr",46:";",47:"EDGE_STATE",48:"left_of",49:"right_of",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[6,3],[6,5],[30,1],[30,1],[30,1],[30,1],[45,1],[45,1],[11,1],[11,1],[28,1],[28,1],[36,1],[37,1],[40,1],[38,1]],performAction:function(nt,z,Y,rt,lt,J,Z){var q=J.length-1;switch(lt){case 4:return rt.setRootDoc(J[q]),J[q];case 5:this.$=[];break;case 6:J[q]!="nl"&&(J[q-1].push(J[q]),this.$=J[q-1]);break;case 7:case 8:this.$=J[q];break;case 9:this.$="nl";break;case 10:this.$={stmt:"state",id:J[q],type:"default",description:""};break;case 11:this.$={stmt:"state",id:J[q-1],type:"default",description:rt.trimColon(J[q])};break;case 12:this.$={stmt:"relation",state1:{stmt:"state",id:J[q-2],type:"default",description:""},state2:{stmt:"state",id:J[q],type:"default",description:""}};break;case 13:this.$={stmt:"relation",state1:{stmt:"state",id:J[q-3],type:"default",description:""},state2:{stmt:"state",id:J[q-1],type:"default",description:""},description:J[q].substr(1).trim()};break;case 17:this.$={stmt:"state",id:J[q-3],type:"default",description:"",doc:J[q-1]};break;case 18:var it=J[q],ut=J[q-2].trim();if(J[q].match(":")){var G=J[q].split(":");it=G[0],ut=[ut,G[1]]}this.$={stmt:"state",id:it,type:"default",description:ut};break;case 19:this.$={stmt:"state",id:J[q-3],type:"default",description:J[q-5],doc:J[q-1]};break;case 20:this.$={stmt:"state",id:J[q],type:"fork"};break;case 21:this.$={stmt:"state",id:J[q],type:"join"};break;case 22:this.$={stmt:"state",id:J[q],type:"choice"};break;case 23:this.$={stmt:"state",id:rt.getDividerId(),type:"divider"};break;case 24:this.$={stmt:"state",id:J[q-1].trim(),note:{position:J[q-2].trim(),text:J[q].trim()}};break;case 28:this.$=J[q].trim(),rt.setAccTitle(this.$);break;case 29:case 30:this.$=J[q].trim(),rt.setAccDescription(this.$);break;case 33:rt.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 34:rt.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 35:rt.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 36:rt.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 39:case 40:this.$=J[q];break;case 43:rt.parseDirective("%%{","open_directive");break;case 44:rt.parseDirective(J[q],"type_directive");break;case 45:J[q]=J[q].trim().replace(/'/g,'"'),rt.parseDirective(J[q],"arg_directive");break;case 46:rt.parseDirective("}%%","close_directive","state");break}},table:[{3:1,4:e,5:n,6:4,7:r,36:6,50:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,36:6,50:i},{3:9,4:e,5:n,6:4,7:r,36:6,50:i},{3:10,4:e,5:n,6:4,7:r,36:6,50:i},t([1,4,5,14,15,17,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],a,{8:11}),{37:12,51:[1,13]},{51:[2,43]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:o,5:s,6:28,9:14,10:16,11:18,14:l,15:u,17:h,20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:N,50:i},{38:39,39:[1,40],53:v},t([39,53],[2,44]),t(M,[2,6]),{6:28,10:42,11:18,14:l,15:u,17:h,20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:N,50:i},t(M,[2,8]),t(M,[2,9]),t(M,[2,10],{12:[1,43],13:[1,44]}),t(M,[2,14]),{16:[1,45]},t(M,[2,16],{18:[1,46]}),{21:[1,47]},t(M,[2,20]),t(M,[2,21]),t(M,[2,22]),t(M,[2,23]),{28:48,29:[1,49],48:[1,50],49:[1,51]},t(M,[2,26]),t(M,[2,27]),{32:[1,52]},{34:[1,53]},t(M,[2,30]),t(w,[2,39]),t(w,[2,40]),t(M,[2,33]),t(M,[2,34]),t(M,[2,35]),t(M,[2,36]),t(R,[2,31]),{40:54,52:[1,55]},t(R,[2,46]),t(M,[2,7]),t(M,[2,11]),{11:56,22:d,47:N},t(M,[2,15]),t(B,a,{8:57}),{22:[1,58]},{22:[1,59]},{21:[1,60]},{22:[2,41]},{22:[2,42]},t(M,[2,28]),t(M,[2,29]),{38:61,53:v},{53:[2,45]},t(M,[2,12],{12:[1,62]}),{4:o,5:s,6:28,9:14,10:16,11:18,14:l,15:u,17:h,19:[1,63],20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:N,50:i},t(M,[2,18],{18:[1,64]}),{29:[1,65]},{22:[1,66]},t(R,[2,32]),t(M,[2,13]),t(M,[2,17]),t(B,a,{8:67}),t(M,[2,24]),t(M,[2,25]),{4:o,5:s,6:28,9:14,10:16,11:18,14:l,15:u,17:h,19:[1,68],20:f,22:d,23:p,24:m,25:_,26:y,27:b,30:29,31:k,33:T,35:x,36:6,41:A,42:C,43:L,44:S,47:N,50:i},t(M,[2,19])],defaultActions:{7:[2,43],8:[2,1],9:[2,2],10:[2,3],50:[2,41],51:[2,42],55:[2,45]},parseError:function(nt,z){if(z.recoverable)this.trace(nt);else{var Y=new Error(nt);throw Y.hash=z,Y}},parse:function(nt){var z=this,Y=[0],rt=[],lt=[null],J=[],Z=this.table,q="",it=0,ut=0,G=2,j=1,P=J.slice.call(arguments,1),X=Object.create(this.lexer),O={yy:{}};for(var V in this.yy)Object.prototype.hasOwnProperty.call(this.yy,V)&&(O.yy[V]=this.yy[V]);X.setInput(nt,O.yy),O.yy.lexer=X,O.yy.parser=this,typeof X.yylloc>"u"&&(X.yylloc={});var U=X.yylloc;J.push(U);var H=X.options&&X.options.ranges;typeof O.yy.parseError=="function"?this.parseError=O.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function xt(){var Zt;return Zt=rt.pop()||X.lex()||j,typeof Zt!="number"&&(Zt instanceof Array&&(rt=Zt,Zt=rt.pop()),Zt=z.symbols_[Zt]||Zt),Zt}for(var ot,Nt,Mt,wt,Et={},bt,mt,Tt,kt;;){if(Nt=Y[Y.length-1],this.defaultActions[Nt]?Mt=this.defaultActions[Nt]:((ot===null||typeof ot>"u")&&(ot=xt()),Mt=Z[Nt]&&Z[Nt][ot]),typeof Mt>"u"||!Mt.length||!Mt[0]){var st="";kt=[];for(bt in Z[Nt])this.terminals_[bt]&&bt>G&&kt.push("'"+this.terminals_[bt]+"'");X.showPosition?st="Parse error on line "+(it+1)+`:
`+X.showPosition()+`
Expecting `+kt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":st="Parse error on line "+(it+1)+": Unexpected "+(ot==j?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(st,{text:X.match,token:this.terminals_[ot]||ot,line:X.yylineno,loc:U,expected:kt})}if(Mt[0]instanceof Array&&Mt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Nt+", token: "+ot);switch(Mt[0]){case 1:Y.push(ot),lt.push(X.yytext),J.push(X.yylloc),Y.push(Mt[1]),ot=null,ut=X.yyleng,q=X.yytext,it=X.yylineno,U=X.yylloc;break;case 2:if(mt=this.productions_[Mt[1]][1],Et.$=lt[lt.length-mt],Et._$={first_line:J[J.length-(mt||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(mt||1)].first_column,last_column:J[J.length-1].last_column},H&&(Et._$.range=[J[J.length-(mt||1)].range[0],J[J.length-1].range[1]]),wt=this.performAction.apply(Et,[q,ut,it,O.yy,Mt[1],lt,J].concat(P)),typeof wt<"u")return wt;mt&&(Y=Y.slice(0,-1*mt*2),lt=lt.slice(0,-1*mt),J=J.slice(0,-1*mt)),Y.push(this.productions_[Mt[1]][0]),lt.push(Et.$),J.push(Et._$),Tt=Z[Y[Y.length-2]][Y[Y.length-1]],Y.push(Tt);break;case 3:return!0}}return!0}},F=function(){var nt={EOF:1,parseError:function(z,Y){if(this.yy.parser)this.yy.parser.parseError(z,Y);else throw new Error(z)},setInput:function(z,Y){return this.yy=Y||this.yy||{},this._input=z,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var z=this._input[0];this.yytext+=z,this.yyleng++,this.offset++,this.match+=z,this.matched+=z;var Y=z.match(/(?:\r\n?|\n).*/g);return Y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),z},unput:function(z){var Y=z.length,rt=z.split(/(?:\r\n?|\n)/g);this._input=z+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Y),this.offset-=Y;var lt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),rt.length-1&&(this.yylineno-=rt.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:rt?(rt.length===lt.length?this.yylloc.first_column:0)+lt[lt.length-rt.length].length-rt[0].length:this.yylloc.first_column-Y},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-Y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(z){this.unput(this.match.slice(z))},pastInput:function(){var z=this.matched.substr(0,this.matched.length-this.match.length);return(z.length>20?"...":"")+z.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var z=this.match;return z.length<20&&(z+=this._input.substr(0,20-z.length)),(z.substr(0,20)+(z.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var z=this.pastInput(),Y=new Array(z.length+1).join("-");return z+this.upcomingInput()+`
`+Y+"^"},test_match:function(z,Y){var rt,lt,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),lt=z[0].match(/(?:\r\n?|\n).*/g),lt&&(this.yylineno+=lt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lt?lt[lt.length-1].length-lt[lt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+z[0].length},this.yytext+=z[0],this.match+=z[0],this.matches=z,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(z[0].length),this.matched+=z[0],rt=this.performAction.call(this,this.yy,this,Y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),rt)return rt;if(this._backtrack){for(var Z in J)this[Z]=J[Z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var z,Y,rt,lt;this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),Z=0;Z<J.length;Z++)if(rt=this._input.match(this.rules[J[Z]]),rt&&(!Y||rt[0].length>Y[0].length)){if(Y=rt,lt=Z,this.options.backtrack_lexer){if(z=this.test_match(rt,J[Z]),z!==!1)return z;if(this._backtrack){Y=!1;continue}else return!1}else if(!this.options.flex)break}return Y?(z=this.test_match(Y,J[lt]),z!==!1?z:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var z=this.next();return z||this.lex()},begin:function(z){this.conditionStack.push(z)},popState:function(){var z=this.conditionStack.length-1;return z>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(z){return z=this.conditionStack.length-1-Math.abs(z||0),z>=0?this.conditionStack[z]:"INITIAL"},pushState:function(z){this.begin(z)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(z,Y,rt,lt){switch(rt){case 0:return 41;case 1:return 42;case 2:return 43;case 3:return 44;case 4:return this.begin("open_directive"),50;case 5:return this.begin("type_directive"),51;case 6:return this.popState(),this.begin("arg_directive"),39;case 7:return this.popState(),this.popState(),53;case 8:return 52;case 9:break;case 10:break;case 11:return 5;case 12:break;case 13:break;case 14:break;case 15:break;case 16:return this.pushState("SCALE"),15;case 17:return 16;case 18:this.popState();break;case 19:return this.begin("acc_title"),31;case 20:return this.popState(),"acc_title_value";case 21:return this.begin("acc_descr"),33;case 22:return this.popState(),"acc_descr_value";case 23:this.begin("acc_descr_multiline");break;case 24:this.popState();break;case 25:return"acc_descr_multiline_value";case 26:this.pushState("STATE");break;case 27:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),23;case 28:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),24;case 29:return this.popState(),Y.yytext=Y.yytext.slice(0,-10).trim(),25;case 30:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),23;case 31:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),24;case 32:return this.popState(),Y.yytext=Y.yytext.slice(0,-10).trim(),25;case 33:return 41;case 34:return 42;case 35:return 43;case 36:return 44;case 37:this.begin("STATE_STRING");break;case 38:return this.popState(),this.pushState("STATE_ID"),"AS";case 39:return this.popState(),"ID";case 40:this.popState();break;case 41:return"STATE_DESCR";case 42:return 17;case 43:this.popState();break;case 44:return this.popState(),this.pushState("struct"),18;case 45:return this.popState(),19;case 46:break;case 47:return this.begin("NOTE"),27;case 48:return this.popState(),this.pushState("NOTE_ID"),48;case 49:return this.popState(),this.pushState("NOTE_ID"),49;case 50:this.popState(),this.pushState("FLOATING_NOTE");break;case 51:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 52:break;case 53:return"NOTE_TEXT";case 54:return this.popState(),"ID";case 55:return this.popState(),this.pushState("NOTE_TEXT"),22;case 56:return this.popState(),Y.yytext=Y.yytext.substr(2).trim(),29;case 57:return this.popState(),Y.yytext=Y.yytext.slice(0,-8).trim(),29;case 58:return 7;case 59:return 7;case 60:return 14;case 61:return 47;case 62:return 22;case 63:return Y.yytext=Y.yytext.trim(),12;case 64:return 13;case 65:return 26;case 66:return 5;case 67:return"INVALID"}},rules:[/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[13,14],inclusive:!1},close_directive:{rules:[13,14],inclusive:!1},arg_directive:{rules:[7,8,13,14],inclusive:!1},type_directive:{rules:[6,7,13,14],inclusive:!1},open_directive:{rules:[5,13,14],inclusive:!1},struct:{rules:[13,14,26,33,34,35,36,45,46,47,61,62,63,64,65],inclusive:!1},FLOATING_NOTE_ID:{rules:[54],inclusive:!1},FLOATING_NOTE:{rules:[51,52,53],inclusive:!1},NOTE_TEXT:{rules:[56,57],inclusive:!1},NOTE_ID:{rules:[55],inclusive:!1},NOTE:{rules:[48,49,50],inclusive:!1},acc_descr_multiline:{rules:[24,25],inclusive:!1},acc_descr:{rules:[22],inclusive:!1},acc_title:{rules:[20],inclusive:!1},SCALE:{rules:[17,18],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[39],inclusive:!1},STATE_STRING:{rules:[40,41],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[13,14,27,28,29,30,31,32,37,38,42,43,44],inclusive:!1},ID:{rules:[13,14],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,12,14,15,16,19,21,23,26,44,47,58,59,60,61,62,63,64,66,67],inclusive:!0}}};return nt}();$.lexer=F;function Q(){this.yy={}}return Q.prototype=$,$.Parser=Q,new Q}();t0.parser=t0;const kst=(t,e)=>{var n;return((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!1:t.match(/^\s*stateDiagram/)!==null},wst=(t,e)=>{var n;return!!(t.match(/^\s*stateDiagram-v2/)!==null||t.match(/^\s*stateDiagram/)&&((n=e==null?void 0:e.state)==null?void 0:n.defaultRenderer)==="dagre-wrapper")},lh=t=>JSON.parse(JSON.stringify(t));let e0=[];const Tst=function(t,e,n){qe.parseDirective(this,t,e,n)},Est=t=>{W.info("Setting root doc",t),e0=t},Cst=()=>e0,Rh=(t,e,n)=>{if(e.stmt==="relation")Rh(t,e.state1,!0),Rh(t,e.state2,!1);else if(e.stmt==="state"&&e.id==="[*]"&&(e.id=n?t.id+"_start":t.id+"_end",e.start=n),e.doc){const r=[];let i=0,a=[];for(i=0;i<e.doc.length;i++)if(e.doc[i].type==="divider"){const o=lh(e.doc[i]);o.doc=lh(a),r.push(o),a=[]}else a.push(e.doc[i]);if(r.length>0&&a.length>0){const o={stmt:"state",id:zS(),type:"divider",doc:lh(a)};r.push(lh(o)),e.doc=r}e.doc.forEach(o=>Rh(e,o,!0))}},Sst=()=>(Rh({id:"root"},{id:"root",doc:e0},!0),{id:"root",doc:e0}),Ast=t=>{let e;t.doc?e=t.doc:e=t,W.info(e),nB(!0),W.info("Extract",e),e.forEach(n=>{n.stmt==="state"&&n0(n.id,n.type,n.doc,n.description,n.note),n.stmt==="relation"&&rB(n.state1.id,n.state2.id,n.description)})},eB=()=>({relations:[],states:{},documents:{}});let gl={root:eB()},Wn=gl.root,Ih=0;const n0=function(t,e,n,r,i){typeof Wn.states[t]>"u"?Wn.states[t]={id:t,descriptions:[],type:e,doc:n,note:i}:(Wn.states[t].doc||(Wn.states[t].doc=n),Wn.states[t].type||(Wn.states[t].type=e)),r&&(W.info("Adding state ",t,r),typeof r=="string"&&p9(t,r.trim()),typeof r=="object"&&r.forEach(a=>p9(t,a.trim()))),i&&(Wn.states[t].note=i,Wn.states[t].note.text=pe.sanitizeText(Wn.states[t].note.text,at()))},nB=function(t){gl={root:eB()},Wn=gl.root,Wn=gl.root,Ih=0,iB=[],t||pi()},Mst=function(t){return Wn.states[t]},Lst=function(){return Wn.states},Bst=function(){W.info("Documents = ",gl)},Dst=function(){return Wn.relations},rB=function(t,e,n){let r=t,i=e,a="default",o="default";t==="[*]"&&(Ih++,r="start"+Ih,a="start"),e==="[*]"&&(i="end"+Ih,o="end"),n0(r,a),n0(i,o),Wn.relations.push({id1:r,id2:i,title:pe.sanitizeText(n,at())})},p9=function(t,e){const n=Wn.states[t];let r=e;r[0]===":"&&(r=r.substr(1).trim()),n.descriptions.push(pe.sanitizeText(r,at()))},Nst=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},Ost={LINE:0,DOTTED_LINE:1};let g9=0;const Rst=()=>(g9++,"divider-id-"+g9);let iB=[];const Ist=()=>iB;let aB="TB";const Fst=()=>aB,$st=t=>{aB=t},Pst={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Yst=t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),sa={parseDirective:Tst,getConfig:()=>at().state,addState:n0,clear:nB,getState:Mst,getStates:Lst,getRelations:Dst,getClasses:Ist,getDirection:Fst,addRelation:rB,getDividerId:Rst,setDirection:$st,cleanupLabel:Nst,lineType:Ost,relationType:Pst,logDocuments:Bst,getRootDoc:Cst,setRootDoc:Est,getRootDocV2:Sst,extract:Ast,trimColon:Yst,getAccTitle:gi,setAccTitle:zr,getAccDescription:mi,setAccDescription:yi},zst=t=>t.append("circle").attr("class","start-state").attr("r",at().state.sizeUnit).attr("cx",at().state.padding+at().state.sizeUnit).attr("cy",at().state.padding+at().state.sizeUnit),jst=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",at().state.textHeight).attr("class","divider").attr("x2",at().state.textHeight*2).attr("y1",0).attr("y2",0),Ust=(t,e)=>{const n=t.append("text").attr("x",2*at().state.padding).attr("y",at().state.textHeight+2*at().state.padding).attr("font-size",at().state.fontSize).attr("class","state-title").text(e.id),r=n.node().getBBox();return t.insert("rect",":first-child").attr("x",at().state.padding).attr("y",at().state.padding).attr("width",r.width+2*at().state.padding).attr("height",r.height+2*at().state.padding).attr("rx",at().state.radius),n},Hst=(t,e)=>{const n=function(f,d,p){const m=f.append("tspan").attr("x",2*at().state.padding).text(d);p||m.attr("dy",at().state.textHeight)},r=t.append("text").attr("x",2*at().state.padding).attr("y",at().state.textHeight+1.3*at().state.padding).attr("font-size",at().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),i=r.height,a=t.append("text").attr("x",at().state.padding).attr("y",i+at().state.padding*.4+at().state.dividerMargin+at().state.textHeight).attr("class","state-description");let o=!0,s=!0;e.descriptions.forEach(function(f){o||(n(a,f,s),s=!1),o=!1});const l=t.append("line").attr("x1",at().state.padding).attr("y1",at().state.padding+i+at().state.dividerMargin/2).attr("y2",at().state.padding+i+at().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),h=Math.max(u.width,r.width);return l.attr("x2",h+3*at().state.padding),t.insert("rect",":first-child").attr("x",at().state.padding).attr("y",at().state.padding).attr("width",h+2*at().state.padding).attr("height",u.height+i+2*at().state.padding).attr("rx",at().state.radius),t},Wst=(t,e,n)=>{const r=at().state.padding,i=2*at().state.padding,a=t.node().getBBox(),o=a.width,s=a.x,l=t.append("text").attr("x",0).attr("y",at().state.titleShift).attr("font-size",at().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+i;let h=Math.max(u,o);h===o&&(h=h+i);let f;const d=t.node().getBBox();e.doc,f=s-r,u>o&&(f=(o-h)/2+r),Math.abs(s-d.x)<r&&u>o&&(f=s-(u-o)/2);const p=1-at().state.textHeight;return t.insert("rect",":first-child").attr("x",f).attr("y",p).attr("class",n?"alt-composit":"composit").attr("width",h).attr("height",d.height+at().state.textHeight+at().state.titleShift+1).attr("rx","0"),l.attr("x",f+r),u<=o&&l.attr("x",s+(h-i)/2-u/2+r),t.insert("rect",":first-child").attr("x",f).attr("y",at().state.titleShift-at().state.textHeight-at().state.padding).attr("width",h).attr("height",at().state.textHeight*3).attr("rx",at().state.radius),t.insert("rect",":first-child").attr("x",f).attr("y",at().state.titleShift-at().state.textHeight-at().state.padding).attr("width",h).attr("height",d.height+3+2*at().state.textHeight).attr("rx",at().state.radius),t},Gst=t=>(t.append("circle").attr("class","end-state-outer").attr("r",at().state.sizeUnit+at().state.miniPadding).attr("cx",at().state.padding+at().state.sizeUnit+at().state.miniPadding).attr("cy",at().state.padding+at().state.sizeUnit+at().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",at().state.sizeUnit).attr("cx",at().state.padding+at().state.sizeUnit+2).attr("cy",at().state.padding+at().state.sizeUnit+2)),Vst=(t,e)=>{let n=at().state.forkWidth,r=at().state.forkHeight;if(e.parentId){let i=n;n=r,r=i}return t.append("rect").style("stroke","black").style("fill","black").attr("width",n).attr("height",r).attr("x",at().state.padding).attr("y",at().state.padding)},qst=(t,e,n,r)=>{let i=0;const a=r.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let o=t.replace(/\r\n/g,"<br/>");o=o.replace(/\n/g,"<br/>");const s=o.split(pe.lineBreakRegex);let l=1.25*at().state.noteMargin;for(const u of s){const h=u.trim();if(h.length>0){const f=a.append("tspan");f.text(h),l===0&&(l+=f.node().getBBox().height),i+=l,f.attr("x",e+at().state.noteMargin),f.attr("y",n+i+1.25*at().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:i}},Xst=(t,e)=>{e.attr("class","state-note");const n=e.append("rect").attr("x",0).attr("y",at().state.padding),r=e.append("g"),{textWidth:i,textHeight:a}=qst(t,0,0,r);return n.attr("height",a+2*at().state.noteMargin),n.attr("width",i+at().state.noteMargin*2),n},y9=function(t,e){const n=e.id,r={id:n,label:e.id,width:0,height:0},i=t.append("g").attr("id",n).attr("class","stateGroup");e.type==="start"&&zst(i),e.type==="end"&&Gst(i),(e.type==="fork"||e.type==="join")&&Vst(i,e),e.type==="note"&&Xst(e.note.text,i),e.type==="divider"&&jst(i),e.type==="default"&&e.descriptions.length===0&&Ust(i,e),e.type==="default"&&e.descriptions.length>0&&Hst(i,e);const a=i.node().getBBox();return r.width=a.width+2*at().state.padding,r.height=a.height+2*at().state.padding,r};let m9=0;const Kst=function(t,e,n){const r=function(l){switch(l){case sa.relationType.AGGREGATION:return"aggregation";case sa.relationType.EXTENSION:return"extension";case sa.relationType.COMPOSITION:return"composition";case sa.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const i=e.points,a=no().x(function(l){return l.x}).y(function(l){return l.y}).curve(Io),o=t.append("path").attr("d",a(i)).attr("id","edge"+m9).attr("class","transition");let s="";if(at().state.arrowMarkerAbsolute&&(s=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,s=s.replace(/\(/g,"\\("),s=s.replace(/\)/g,"\\)")),o.attr("marker-end","url("+s+"#"+r(sa.relationType.DEPENDENCY)+"End)"),typeof n.title<"u"){const l=t.append("g").attr("class","stateLabel"),{x:u,y:h}=we.calcLabelPosition(e.points),f=pe.getRows(n.title);let d=0;const p=[];let m=0,_=0;for(let k=0;k<=f.length;k++){const T=l.append("text").attr("text-anchor","middle").text(f[k]).attr("x",u).attr("y",h+d),x=T.node().getBBox();m=Math.max(m,x.width),_=Math.min(_,x.x),W.info(x.x,u,h+d),d===0&&(d=T.node().getBBox().height,W.info("Title height",d,h)),p.push(T)}let y=d*f.length;if(f.length>1){const k=(f.length-1)*d*.5;p.forEach((T,x)=>T.attr("y",h+x*d-k)),y=d*f.length}const b=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",u-m/2-at().state.padding/2).attr("y",h-y/2-at().state.padding/2-3.5).attr("width",m+at().state.padding).attr("height",y+at().state.padding),W.info(b)}m9++};let Cr;const em={},Zst=function(){},Qst=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},Jst=function(t,e,n,r){Cr=at().state;const i=at().securityLevel;let a;i==="sandbox"&&(a=Lt("#i"+e));const o=Lt(i==="sandbox"?a.nodes()[0].contentDocument.body:"body"),s=i==="sandbox"?a.nodes()[0].contentDocument:document;W.debug("Rendering diagram "+t);const l=o.select(`[id='${e}']`);Qst(l),new dn.Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}});const u=r.db.getRootDoc();oB(u,l,void 0,!1,o,s,r);const h=Cr.padding,f=l.node().getBBox(),d=f.width+h*2,p=f.height+h*2,m=d*1.75;fi(l,p,m,Cr.useMaxWidth),l.attr("viewBox",`${f.x-Cr.padding}  ${f.y-Cr.padding} `+d+" "+p),xr(r.db,l,e)},tct=t=>t?t.length*Cr.fontSizeFactor:1,oB=(t,e,n,r,i,a,o)=>{const s=new dn.Graph({compound:!0,multigraph:!0});let l,u=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){u=!1;break}n?s.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:u?1:Cr.edgeLengthFactor,nodeSep:u?1:50,isMultiGraph:!0}):s.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:u?1:Cr.edgeLengthFactor,nodeSep:u?1:50,ranker:"tight-tree",isMultiGraph:!0}),s.setDefaultEdgeLabel(function(){return{}}),o.db.extract(t);const h=o.db.getStates(),f=o.db.getRelations(),d=Object.keys(h);for(let b=0;b<d.length;b++){const k=h[d[b]];n&&(k.parentId=n);let T;if(k.doc){let x=e.append("g").attr("id",k.id).attr("class","stateGroup");T=oB(k.doc,x,k.id,!r,i,a,o);{x=Wst(x,k,r);let A=x.node().getBBox();T.width=A.width,T.height=A.height+Cr.padding/2,em[k.id]={y:Cr.compositTitleSize}}}else T=y9(e,k);if(k.note){const x={descriptions:[],id:k.id+"-note",note:k.note,type:"note"},A=y9(e,x);k.note.position==="left of"?(s.setNode(T.id+"-note",A),s.setNode(T.id,T)):(s.setNode(T.id,T),s.setNode(T.id+"-note",A)),s.setParent(T.id,T.id+"-group"),s.setParent(T.id+"-note",T.id+"-group")}else s.setNode(T.id,T)}W.debug("Count=",s.nodeCount(),s);let p=0;f.forEach(function(b){p++,W.debug("Setting edge",b),s.setEdge(b.id1,b.id2,{relation:b,width:tct(b.title),height:Cr.labelHeight*pe.getRows(b.title).length,labelpos:"c"},"id"+p)}),gu.layout(s),W.debug("Graph after layout",s.nodes());const m=e.node();s.nodes().forEach(function(b){typeof b<"u"&&typeof s.node(b)<"u"?(W.warn("Node "+b+": "+JSON.stringify(s.node(b))),i.select("#"+m.id+" #"+b).attr("transform","translate("+(s.node(b).x-s.node(b).width/2)+","+(s.node(b).y+(em[b]?em[b].y:0)-s.node(b).height/2)+" )"),i.select("#"+m.id+" #"+b).attr("data-x-shift",s.node(b).x-s.node(b).width/2),a.querySelectorAll("#"+m.id+" #"+b+" .divider").forEach(k=>{const T=k.parentElement;let x=0,A=0;T&&(T.parentElement&&(x=T.parentElement.getBBox().width),A=parseInt(T.getAttribute("data-x-shift"),10),Number.isNaN(A)&&(A=0)),k.setAttribute("x1",0-A+8),k.setAttribute("x2",x-A-8)})):W.debug("No Node "+b+": "+JSON.stringify(s.node(b)))});let _=m.getBBox();s.edges().forEach(function(b){typeof b<"u"&&typeof s.edge(b)<"u"&&(W.debug("Edge "+b.v+" -> "+b.w+": "+JSON.stringify(s.edge(b))),Kst(e,s.edge(b),s.edge(b).relation))}),_=m.getBBox();const y={id:n||"root",label:n||"root",width:0,height:0};return y.width=_.width+2*Cr.padding,y.height=_.height+2*Cr.padding,W.debug("Doc rendered",y,s),y},ect={setConf:Zst,draw:Jst},nct={},rct=function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)nct[e[n]]=t[e[n]]};let Re={};const ict=function(t,e){return W.trace("Extracting classes"),e.sb.clear(),e.parser.parse(t),e.sb.getClasses()},Fh=(t,e,n,r)=>{if(n.id!=="root"){let i="rect";n.start===!0&&(i="start"),n.start===!1&&(i="end"),n.type!=="default"&&(i=n.type),Re[n.id]||(Re[n.id]={id:n.id,shape:i,description:pe.sanitizeText(n.id,at()),classes:"statediagram-state"}),n.description&&(Array.isArray(Re[n.id].description)?(Re[n.id].shape="rectWithTitle",Re[n.id].description.push(n.description)):Re[n.id].description.length>0?(Re[n.id].shape="rectWithTitle",Re[n.id].description===n.id?Re[n.id].description=[n.description]:Re[n.id].description=[Re[n.id].description,n.description]):(Re[n.id].shape="rect",Re[n.id].description=n.description),Re[n.id].description=pe.sanitizeTextOrArray(Re[n.id].description,at())),Re[n.id].description.length===1&&Re[n.id].shape==="rectWithTitle"&&(Re[n.id].shape="rect"),!Re[n.id].type&&n.doc&&(W.info("Setting cluster for ",n.id,N3(n)),Re[n.id].type="group",Re[n.id].dir=N3(n),Re[n.id].shape=n.type==="divider"?"divider":"roundedWithTitle",Re[n.id].classes=Re[n.id].classes+" "+(r?"statediagram-cluster statediagram-cluster-alt":"statediagram-cluster"));const a={labelStyle:"",shape:Re[n.id].shape,labelText:Re[n.id].description,classes:Re[n.id].classes,style:"",id:n.id,dir:Re[n.id].dir,domId:"state-"+n.id+"-"+Na,type:Re[n.id].type,padding:15};if(n.note){const o={labelStyle:"",shape:"note",labelText:n.note.text,classes:"statediagram-note",style:"",id:n.id+"----note-"+Na,domId:"state-"+n.id+"----note-"+Na,type:Re[n.id].type,padding:15},s={labelStyle:"",shape:"noteGroup",labelText:n.note.text,classes:Re[n.id].classes,style:"",id:n.id+"----parent",domId:"state-"+n.id+"----parent-"+Na,type:"group",padding:0};Na++,t.setNode(n.id+"----parent",s),t.setNode(o.id,o),t.setNode(n.id,a),t.setParent(n.id,n.id+"----parent"),t.setParent(o.id,n.id+"----parent");let l=n.id,u=o.id;n.note.position==="left of"&&(l=o.id,u=n.id),t.setEdge(l,u,{arrowhead:"none",arrowType:"",style:"fill:none",labelStyle:"",classes:"transition note-edge",arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal"})}else t.setNode(n.id,a)}e&&e.id!=="root"&&(W.trace("Setting node ",n.id," to be child of its parent ",e.id),t.setParent(n.id,e.id)),n.doc&&(W.trace("Adding nodes children "),act(t,n,n.doc,!r))};let Na=0;const act=(t,e,n,r)=>{W.trace("items",n),n.forEach(i=>{if(i.stmt==="state"||i.stmt==="default")Fh(t,e,i,r);else if(i.stmt==="relation"){Fh(t,e,i.state1,r),Fh(t,e,i.state2,r);const a={id:"edge"+Na,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:"fill:none",labelStyle:"",label:pe.sanitizeText(i.description,at()),arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",classes:"transition"};let o=i.state1.id,s=i.state2.id;t.setEdge(o,s,a,Na),Na++}})},N3=(t,e)=>{let n=e||"TB";if(t.doc)for(let r=0;r<t.doc.length;r++){const i=t.doc[r];i.stmt==="dir"&&(n=i.value)}return n},oct=function(t,e,n,r){W.info("Drawing state diagram (v2)",e),Re={},r.db.getDirection();const{securityLevel:i,state:a}=at(),o=a.nodeSpacing||50,s=a.rankSpacing||50;W.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),W.info(r.db.getRootDocV2());const l=new dn.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:N3(r.db.getRootDocV2()),nodesep:o,ranksep:s,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});Fh(l,void 0,r.db.getRootDocV2(),!0);let u;i==="sandbox"&&(u=Lt("#i"+e));const h=Lt(i==="sandbox"?u.nodes()[0].contentDocument.body:"body"),f=h.select(`[id="${e}"]`),d=h.select("#"+e+" g");Ub(d,l,["barb"],"statediagram",e);const p=8,m=f.node().getBBox(),_=m.width+p*2,y=m.height+p*2;f.attr("class","statediagram");const b=f.node().getBBox();fi(f,y,_,a.useMaxWidth);const k=`${b.x-p} ${b.y-p} ${_} ${y}`;W.debug(`viewBox ${k}`),f.attr("viewBox",k);const T=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let x=0;x<T.length;x++){const A=T[x],C=A.getBBox(),L=document.createElementNS("http://www.w3.org/2000/svg","rect");L.setAttribute("rx",0),L.setAttribute("ry",0),L.setAttribute("width",C.width),L.setAttribute("height",C.height),A.insertBefore(L,A.firstChild)}xr(r.db,f,e)},sct={setConf:rct,getClasses:ict,draw:oct};var O3=function(){var t=function(_,y,b,k){for(b=b||{},k=_.length;k--;b[_[k]]=y);return b},e=[1,2],n=[1,5],r=[6,9,11,17,18,20,22,23,24,26],i=[1,15],a=[1,16],o=[1,17],s=[1,18],l=[1,19],u=[1,20],h=[1,24],f=[4,6,9,11,17,18,20,22,23,24,26],d={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(_,y,b,k,T,x,A){var C=x.length-1;switch(T){case 1:return x[C-1];case 3:this.$=[];break;case 4:x[C-1].push(x[C]),this.$=x[C-1];break;case 5:case 6:this.$=x[C];break;case 7:case 8:this.$=[];break;case 11:k.setDiagramTitle(x[C].substr(6)),this.$=x[C].substr(6);break;case 12:this.$=x[C].trim(),k.setAccTitle(this.$);break;case 13:case 14:this.$=x[C].trim(),k.setAccDescription(this.$);break;case 15:k.addSection(x[C].substr(8)),this.$=x[C].substr(8);break;case 16:k.addTask(x[C-1],x[C]),this.$="task";break;case 18:k.parseDirective("%%{","open_directive");break;case 19:k.parseDirective(x[C],"type_directive");break;case 20:x[C]=x[C].trim().replace(/'/g,'"'),k.parseDirective(x[C],"arg_directive");break;case 21:k.parseDirective("}%%","close_directive","journey");break}},table:[{3:1,4:e,7:3,12:4,26:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:i,18:a,20:o,22:s,23:l,24:u,26:n},{1:[2,2]},{14:22,15:[1,23],29:h},t([15,29],[2,19]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:21,10:25,12:4,17:i,18:a,20:o,22:s,23:l,24:u,26:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),{19:[1,26]},{21:[1,27]},t(r,[2,14]),t(r,[2,15]),{25:[1,28]},t(r,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},t(r,[2,5]),t(r,[2,12]),t(r,[2,13]),t(r,[2,16]),t(f,[2,9]),{14:32,29:h},{29:[2,20]},{11:[1,33]},t(f,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(_,y){if(y.recoverable)this.trace(_);else{var b=new Error(_);throw b.hash=y,b}},parse:function(_){var y=this,b=[0],k=[],T=[null],x=[],A=this.table,C="",L=0,S=0,N=2,v=1,M=x.slice.call(arguments,1),w=Object.create(this.lexer),R={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(R.yy[B]=this.yy[B]);w.setInput(_,R.yy),R.yy.lexer=w,R.yy.parser=this,typeof w.yylloc>"u"&&(w.yylloc={});var $=w.yylloc;x.push($);var F=w.options&&w.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Q(){var G;return G=k.pop()||w.lex()||v,typeof G!="number"&&(G instanceof Array&&(k=G,G=k.pop()),G=y.symbols_[G]||G),G}for(var nt,z,Y,rt,lt={},J,Z,q,it;;){if(z=b[b.length-1],this.defaultActions[z]?Y=this.defaultActions[z]:((nt===null||typeof nt>"u")&&(nt=Q()),Y=A[z]&&A[z][nt]),typeof Y>"u"||!Y.length||!Y[0]){var ut="";it=[];for(J in A[z])this.terminals_[J]&&J>N&&it.push("'"+this.terminals_[J]+"'");w.showPosition?ut="Parse error on line "+(L+1)+`:
`+w.showPosition()+`
Expecting `+it.join(", ")+", got '"+(this.terminals_[nt]||nt)+"'":ut="Parse error on line "+(L+1)+": Unexpected "+(nt==v?"end of input":"'"+(this.terminals_[nt]||nt)+"'"),this.parseError(ut,{text:w.match,token:this.terminals_[nt]||nt,line:w.yylineno,loc:$,expected:it})}if(Y[0]instanceof Array&&Y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+z+", token: "+nt);switch(Y[0]){case 1:b.push(nt),T.push(w.yytext),x.push(w.yylloc),b.push(Y[1]),nt=null,S=w.yyleng,C=w.yytext,L=w.yylineno,$=w.yylloc;break;case 2:if(Z=this.productions_[Y[1]][1],lt.$=T[T.length-Z],lt._$={first_line:x[x.length-(Z||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(Z||1)].first_column,last_column:x[x.length-1].last_column},F&&(lt._$.range=[x[x.length-(Z||1)].range[0],x[x.length-1].range[1]]),rt=this.performAction.apply(lt,[C,S,L,R.yy,Y[1],T,x].concat(M)),typeof rt<"u")return rt;Z&&(b=b.slice(0,-1*Z*2),T=T.slice(0,-1*Z),x=x.slice(0,-1*Z)),b.push(this.productions_[Y[1]][0]),T.push(lt.$),x.push(lt._$),q=A[b[b.length-2]][b[b.length-1]],b.push(q);break;case 3:return!0}}return!0}},p=function(){var _={EOF:1,parseError:function(y,b){if(this.yy.parser)this.yy.parser.parseError(y,b);else throw new Error(y)},setInput:function(y,b){return this.yy=b||this.yy||{},this._input=y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var y=this._input[0];this.yytext+=y,this.yyleng++,this.offset++,this.match+=y,this.matched+=y;var b=y.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),y},unput:function(y){var b=y.length,k=y.split(/(?:\r\n?|\n)/g);this._input=y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===T.length?this.yylloc.first_column:0)+T[T.length-k.length].length-k[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(y){this.unput(this.match.slice(y))},pastInput:function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var y=this.pastInput(),b=new Array(y.length+1).join("-");return y+this.upcomingInput()+`
`+b+"^"},test_match:function(y,b){var k,T,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),T=y[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+y[0].length},this.yytext+=y[0],this.match+=y[0],this.matches=y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(y[0].length),this.matched+=y[0],k=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var A in x)this[A]=x[A];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var y,b,k,T;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),A=0;A<x.length;A++)if(k=this._input.match(this.rules[x[A]]),k&&(!b||k[0].length>b[0].length)){if(b=k,T=A,this.options.backtrack_lexer){if(y=this.test_match(k,x[A]),y!==!1)return y;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(y=this.test_match(b,x[T]),y!==!1?y:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,b,k,T){switch(k){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:break;case 6:break;case 7:return 11;case 8:break;case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};return _}();d.lexer=p;function m(){this.yy={}}return m.prototype=d,d.Parser=m,new m}();O3.parser=O3;const cct=t=>t.match(/^\s*journey/)!==null;let nc="";const s5=[],Xl=[],Ms=[],lct=function(t,e,n){qe.parseDirective(this,t,e,n)},uct=function(){s5.length=0,Xl.length=0,nc="",Ms.length=0,pi()},hct=function(t){nc=t,s5.push(t)},dct=function(){return s5},fct=function(){let t=b9();const e=100;let n=0;for(;!t&&n<e;)t=b9(),n++;return Xl.push(...Ms),Xl},pct=function(){const t=[];return Xl.forEach(e=>{e.people&&t.push(...e.people)}),[...new Set(t)].sort()},gct=function(t,e){const n=e.substr(1).split(":");let r=0,i=[];n.length===1?(r=Number(n[0]),i=[]):(r=Number(n[0]),i=n[1].split(","));const a=i.map(s=>s.trim()),o={section:nc,type:nc,people:a,task:t,score:r};Ms.push(o)},yct=function(t){const e={section:nc,type:nc,description:t,task:t,classes:[]};Xl.push(e)},b9=function(){const t=function(n){return Ms[n].processed};let e=!0;for(let n=0;n<Ms.length;n++)t(n),e=e&&Ms[n].processed;return e},mct=function(){return pct()},_9={parseDirective:lct,getConfig:()=>at().journey,clear:uct,setDiagramTitle:nd,getDiagramTitle:rd,setAccTitle:zr,getAccTitle:gi,setAccDescription:yi,getAccDescription:mi,addSection:hct,getSections:dct,getTasks:fct,addTask:gct,addTaskOrg:yct,getActors:mct},Ed=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),typeof e.class<"u"&&n.attr("class",e.class),n},bct=function(t,e){const n=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),r=t.append("g");r.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),r.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function i(s){const l=x1().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);s.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(s){const l=x1().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);s.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(s){s.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?i(r):e.score<3?a(r):o(r),n},sB=function(t,e){const n=t.append("circle");return n.attr("cx",e.cx),n.attr("cy",e.cy),n.attr("class","actor-"+e.pos),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("r",e.r),typeof n.class<"u"&&n.attr("class",n.class),typeof e.title<"u"&&n.append("title").text(e.title),n},cB=function(t,e){const n=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),typeof e.class<"u"&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.text(n),r},_ct=function(t,e){function n(i,a,o,s,l){return i+","+a+" "+(i+o)+","+a+" "+(i+o)+","+(a+s-l)+" "+(i+o-l*1.2)+","+(a+s)+" "+i+","+(a+s)}const r=t.append("polygon");r.attr("points",n(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,cB(t,e)},vct=function(t,e,n){const r=t.append("g"),i=c5();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=n.width,i.height=n.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,Ed(r,i),lB(n)(e.text,r,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},n,e.colour)};let v9=-1;const xct=function(t,e,n){const r=e.x+n.width/2,i=t.append("g");v9++;const a=300+5*30;i.append("line").attr("id","task"+v9).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",a).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),bct(i,{cx:r,cy:300+(5-e.score)*30,score:e.score});const o=c5();o.x=e.x,o.y=e.y,o.fill=e.fill,o.width=n.width,o.height=n.height,o.class="task task-type-"+e.num,o.rx=3,o.ry=3,Ed(i,o);let s=e.x+14;e.people.forEach(l=>{const u=e.actors[l].color,h={cx:s,cy:e.y,r:7,fill:u,stroke:"#000",title:l,pos:e.actors[l].position};sB(i,h),s+=10}),lB(n)(e.task,i,o.x,o.y,o.width,o.height,{class:"task"},n,e.colour)},kct=function(t,e){Ed(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},wct=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},c5=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},lB=function(){function t(i,a,o,s,l,u,h,f){const d=a.append("text").attr("x",o+l/2).attr("y",s+u/2+5).style("font-color",f).style("text-anchor","middle").text(i);r(d,h)}function e(i,a,o,s,l,u,h,f,d){const{taskFontSize:p,taskFontFamily:m}=f,_=i.split(/<br\s*\/?>/gi);for(let y=0;y<_.length;y++){const b=y*p-p*(_.length-1)/2,k=a.append("text").attr("x",o+l/2).attr("y",s).attr("fill",d).style("text-anchor","middle").style("font-size",p).style("font-family",m);k.append("tspan").attr("x",o+l/2).attr("dy",b).text(_[y]),k.attr("y",s+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,h)}}function n(i,a,o,s,l,u,h,f){const d=a.append("switch"),p=d.append("foreignObject").attr("x",o).attr("y",s).attr("width",l).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");p.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,d,o,s,l,u,h,f),r(p,h)}function r(i,a){for(const o in a)o in a&&i.attr(o,a[o])}return function(i){return i.textPlacement==="fo"?n:i.textPlacement==="old"?t:e}}(),Tct=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},Kl={drawRect:Ed,drawCircle:sB,drawSection:vct,drawText:cB,drawLabel:_ct,drawTask:xct,drawBackgroundRect:kct,getTextObj:wct,getNoteRect:c5,initGraphics:Tct},Ect=function(t){Object.keys(t).forEach(function(e){Cd[e]=t[e]})},ha={};function Cct(t){const e=at().journey;let n=60;Object.keys(ha).forEach(r=>{const i=ha[r].color,a={cx:20,cy:n,r:7,fill:i,stroke:"#000",pos:ha[r].position};Kl.drawCircle(t,a);const o={x:40,y:n+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};Kl.drawText(t,o),n+=20})}const Cd=at().journey,bo=Cd.leftMargin,Sct=function(t,e,n,r){const i=at().journey;r.db.clear(),r.parser.parse(t+`
`);const a=at().securityLevel;let o;a==="sandbox"&&(o=Lt("#i"+e));const s=Lt(a==="sandbox"?o.nodes()[0].contentDocument.body:"body");Or.init();const l=s.select("#"+e);Kl.initGraphics(l);const u=r.db.getTasks(),h=r.db.getDiagramTitle(),f=r.db.getActors();for(const b in ha)delete ha[b];let d=0;f.forEach(b=>{ha[b]={color:i.actorColours[d%i.actorColours.length],position:d},d++}),Cct(l),Or.insert(0,0,bo,Object.keys(ha).length*50),Act(l,u,0);const p=Or.getBounds();h&&l.append("text").text(h).attr("x",bo).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const m=p.stopy-p.starty+2*i.diagramMarginY,_=bo+p.stopx+2*i.diagramMarginX;fi(l,m,_,i.useMaxWidth),l.append("line").attr("x1",bo).attr("y1",i.height*4).attr("x2",_-bo-4).attr("y2",i.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const y=h?70:0;l.attr("viewBox",`${p.startx} -25 ${_} ${m+y}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",m+y+25),xr(r.db,l,e)},Or={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,n,r){typeof t[e]>"u"?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=at().journey,a=this;let o=0;function s(l){return function(u){o++;const h=a.sequenceItems.length-o+1;a.updateVal(u,"starty",e-h*i.boxMargin,Math.min),a.updateVal(u,"stopy",r+h*i.boxMargin,Math.max),a.updateVal(Or.data,"startx",t-h*i.boxMargin,Math.min),a.updateVal(Or.data,"stopx",n+h*i.boxMargin,Math.max),l!=="activation"&&(a.updateVal(u,"startx",t-h*i.boxMargin,Math.min),a.updateVal(u,"stopx",n+h*i.boxMargin,Math.max),a.updateVal(Or.data,"starty",e-h*i.boxMargin,Math.min),a.updateVal(Or.data,"stopy",r+h*i.boxMargin,Math.max))}}this.sequenceItems.forEach(s())},insert:function(t,e,n,r){const i=Math.min(t,n),a=Math.max(t,n),o=Math.min(e,r),s=Math.max(e,r);this.updateVal(Or.data,"startx",i,Math.min),this.updateVal(Or.data,"starty",o,Math.min),this.updateVal(Or.data,"stopx",a,Math.max),this.updateVal(Or.data,"stopy",s,Math.max),this.updateBounds(i,o,a,s)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},nm=Cd.sectionFills,x9=Cd.sectionColours,Act=function(t,e,n){const r=at().journey;let i="";const a=r.height*2+r.diagramMarginY,o=n+a;let s=0,l="#CCC",u="black",h=0;for(let f=0;f<e.length;f++){const d=e[f];if(i!==d.section){l=nm[s%nm.length],h=s%nm.length,u=x9[s%x9.length];const m={x:f*r.taskMargin+f*r.width+bo,y:50,text:d.section,fill:l,num:h,colour:u};Kl.drawSection(t,m,r),i=d.section,s++}const p=d.people.reduce((m,_)=>(ha[_]&&(m[_]=ha[_]),m),{});d.x=f*r.taskMargin+f*r.width+bo,d.y=o,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=u,d.fill=l,d.num=h,d.actors=p,Kl.drawTask(t,d,r),Or.insert(d.x,d.y,d.x+d.width+r.taskMargin,300+5*30)}},k9={setConf:Ect,draw:Sct};let w9={};const Mct=function(t){w9={...w9,...t}},Lct=(t,e,n)=>{try{W.debug(`Renering svg for syntax error
`);const r=Lt("#"+e),i=r.append("g");i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+n),r.attr("height",100),r.attr("width",500),r.attr("viewBox","768 0 912 512")}catch(r){W.error("Error while rendering info diagram"),W.error($X(r))}},l5={setConf:Mct,draw:Lct};let T9=!1;const xu=()=>{T9||(T9=!0,En("error",{db:{clear:()=>{}},styles:aA,renderer:l5,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},t=>t.toLowerCase().trim()==="error"),En("c4",{parser:zl,db:TA,renderer:lv,styles:dA,init:t=>{lv.setConf(t.c4)}},eZ),En("class",{parser:$1,db:_s,renderer:Uet,styles:ll,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,_s.clear()}},KZ),En("classDiagram",{parser:$1,db:_s,renderer:Jnt,styles:ll,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,_s.clear()}},ZZ),En("er",{parser:y3,db:lrt,renderer:Ert,styles:iA},trt),En("gantt",{parser:b3,db:r5,renderer:Nat,styles:oA},eat),En("info",{parser:k3,db:$at,renderer:Yat,styles:sA},zat),En("pie",{parser:w3,db:Kat,renderer:Qat,styles:cA},jat),En("requirement",{parser:T3,db:bot,renderer:Sot,styles:lA},Jat),En("sequence",{parser:C3,db:h9,renderer:f9,styles:uA,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");h9.setWrap(t.wrap),f9.setConf(t.sequence)}},Aot),En("state",{parser:t0,db:sa,renderer:ect,styles:L1,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,sa.clear()}},kst),En("stateDiagram",{parser:t0,db:sa,renderer:sct,styles:L1,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,sa.clear()}},wst),En("journey",{parser:O3,db:_9,renderer:k9,styles:hA,init:t=>{k9.setConf(t.journey),_9.clear()}},cct),En("flowchart",{parser:G1,db:oa,renderer:tm,styles:M1,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Zb.setConf(t.flowchart),oa.clear(),oa.setGen("gen-1")}},Crt),En("flowchart-v2",{parser:G1,db:oa,renderer:tm,styles:M1,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,tA({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),tm.setConf(t.flowchart),oa.clear(),oa.setGen("gen-2")}},Srt),En("gitGraph",{parser:u3,db:WK,renderer:JK,styles:tZ},CK))};class Zl{constructor(e,n){kc(this,"type","graph"),kc(this,"parser"),kc(this,"renderer"),kc(this,"db"),kc(this,"detectTypeFailed",!1);var r,i;this.txt=e;const a=at();this.txt=e;try{this.type=ab(e,a)}catch(s){this.handleError(s,n),this.type="error",this.detectTypeFailed=!0}const o=gA(this.type);W.debug("Type "+this.type),this.db=o.db,(i=(r=this.db).clear)==null||i.call(r),this.renderer=o.renderer,this.parser=o.parser,this.parser.parser.yy=this.db,o.init&&(o.init(a),W.debug("Initialized diagram "+this.type,a)),this.txt+=`
`,this.parse(this.txt,n)}parse(e,n){if(this.detectTypeFailed)return!1;try{return e=e+`
`,this.db.clear(),this.parser.parse(e),!0}catch(r){this.handleError(r,n)}return!1}handleError(e,n){if(n)ub(e)?n(e.str,e.hash):n(e);else throw e}getParser(){return this.parser}getType(){return this.type}}const u5=(t,e)=>{const n=ab(t,at());try{return gA(n),new Zl(t,e)}catch(r){if(!(r instanceof yA))throw W.error(r),r;const i=KG(n);if(!i)throw new Error(`Loader for ${n} not found.`);return i().then(({diagram:a})=>(En(n,a,void 0),new Zl(t,e)))}};function Bct(t,e){return xu(),new Zl(t,e).parse(t,e)}async function Dct(t,e){return xu(),(await u5(t,e)).parse(t,e)}const uB=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),e},Sd=function(t){let e=t;return e=e.replace(/ﬂ°°/g,function(){return"&#"}),e=e.replace(/ﬂ°/g,function(){return"&"}),e=e.replace(/¶ß/g,function(){return";"}),e},Nct=function(t,e,n,r){var i;xu(),$l(),e=e.replace(/\r\n?/g,`
`);const a=we.detectInit(e);a&&(Fo(a),fb(a));const o=at();W.debug(o),e.length>o.maxTextSize&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let s=Lt("body");if(typeof r<"u"){if(r&&(r.innerHTML=""),o.securityLevel==="sandbox"){const x=Lt(r).append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(x.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt(r);s.append("div").attr("id","d"+t).attr("style","font-family: "+o.fontFamily).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g")}else{const x=document.getElementById(t);x&&x.remove();let A;if(o.securityLevel==="sandbox"?A=document.querySelector("#i"+t):A=document.querySelector("#d"+t),A&&A.remove(),o.securityLevel==="sandbox"){const C=Lt("body").append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(C.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt("body");s.append("div").attr("id","d"+t).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}e=uB(e);let l,u;try{if(l=u5(e),"then"in l)throw new Error("Diagram is a promise")}catch(x){l=new Zl("error"),u=x}const h=s.select("#d"+t).node(),f=l.type,d=h.firstChild,p=d.firstChild;let m="";if(o.themeCSS!==void 0&&(m+=`
${o.themeCSS}`),o.fontFamily!==void 0&&(m+=`
:root { --mermaid-font-family: ${o.fontFamily}}`),o.altFontFamily!==void 0&&(m+=`
:root { --mermaid-alt-font-family: ${o.altFontFamily}}`),f==="flowchart"||f==="flowchart-v2"||f==="graph"){const x=Zb.getClasses(e,l),A=o.htmlLabels||((i=o.flowchart)==null?void 0:i.htmlLabels);for(const C in x)A?(m+=`
.${C} > * { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} span { ${x[C].styles.join(" !important; ")} !important; }`):(m+=`
.${C} path { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} rect { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} polygon { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} ellipse { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} circle { ${x[C].styles.join(" !important; ")} !important; }`,x[C].textStyles&&(m+=`
.${C} tspan { ${x[C].textStyles.join(" !important; ")} !important; }`))}const _=((x,A)=>S1(KS(`${x}{${A}}`),ZS))(`#${t}`,fA(f,m,o.themeVariables)),y=document.createElement("style");y.innerHTML=`#${t} `+_,d.insertBefore(y,p);try{l.renderer.draw(e,t,A1.version,l)}catch(x){throw l5.draw(e,t,A1.version),x}s.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let b=s.select("#d"+t).node().innerHTML;if(W.debug("cnf.arrowMarkerAbsolute",o.arrowMarkerAbsolute),!Mn(o.arrowMarkerAbsolute)&&o.securityLevel!=="sandbox"&&(b=b.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),b=Sd(b),b=b.replace(/<br>/g,"<br/>"),o.securityLevel==="sandbox"){const x=s.select("#d"+t+" svg").node(),A="100%";let C="100%";x&&(C=x.viewBox.baseVal.height+"px"),b=`<iframe style="width:${A};height:${C};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+b+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The “iframe” tag is not supported by your browser.
</iframe>`}else o.securityLevel!=="loose"&&(b=Rl.sanitize(b,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(typeof n<"u")switch(f){case"flowchart":case"flowchart-v2":n(b,oa.bindFunctions);break;case"gantt":n(b,r5.bindFunctions);break;case"class":case"classDiagram":n(b,_s.bindFunctions);break;default:n(b)}else W.debug("CB = undefined!");GL();const k=o.securityLevel==="sandbox"?"#i"+t:"#d"+t,T=Lt(k).node();if(T&&"remove"in T&&T.remove(),u)throw u;return b},Oct=async function(t,e,n,r){var i;xu(),$l(),e=e.replace(/\r\n?/g,`
`);const a=we.detectInit(e);a&&(Fo(a),fb(a));const o=at();W.debug(o),e.length>o.maxTextSize&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let s=Lt("body");if(typeof r<"u"){if(r&&(r.innerHTML=""),o.securityLevel==="sandbox"){const x=Lt(r).append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(x.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt(r);s.append("div").attr("id","d"+t).attr("style","font-family: "+o.fontFamily).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g")}else{const x=document.getElementById(t);x&&x.remove();let A;if(o.securityLevel==="sandbox"?A=document.querySelector("#i"+t):A=document.querySelector("#d"+t),A&&A.remove(),o.securityLevel==="sandbox"){const C=Lt("body").append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");s=Lt(C.nodes()[0].contentDocument.body),s.node().style.margin=0}else s=Lt("body");s.append("div").attr("id","d"+t).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}e=uB(e);let l,u;try{l=await u5(e)}catch(x){l=new Zl("error"),u=x}const h=s.select("#d"+t).node(),f=l.type,d=h.firstChild,p=d.firstChild;let m="";if(o.themeCSS!==void 0&&(m+=`
${o.themeCSS}`),o.fontFamily!==void 0&&(m+=`
:root { --mermaid-font-family: ${o.fontFamily}}`),o.altFontFamily!==void 0&&(m+=`
:root { --mermaid-alt-font-family: ${o.altFontFamily}}`),f==="flowchart"||f==="flowchart-v2"||f==="graph"){const x=Zb.getClasses(e,l),A=o.htmlLabels||((i=o.flowchart)==null?void 0:i.htmlLabels);for(const C in x)A?(m+=`
.${C} > * { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} span { ${x[C].styles.join(" !important; ")} !important; }`):(m+=`
.${C} path { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} rect { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} polygon { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} ellipse { ${x[C].styles.join(" !important; ")} !important; }`,m+=`
.${C} circle { ${x[C].styles.join(" !important; ")} !important; }`,x[C].textStyles&&(m+=`
.${C} tspan { ${x[C].textStyles.join(" !important; ")} !important; }`))}const _=((x,A)=>S1(KS(`${x}{${A}}`),ZS))(`#${t}`,fA(f,m,o.themeVariables)),y=document.createElement("style");y.innerHTML=`#${t} `+_,d.insertBefore(y,p);try{await l.renderer.draw(e,t,A1.version,l)}catch(x){throw l5.draw(e,t,A1.version),x}s.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let b=s.select("#d"+t).node().innerHTML;if(W.debug("cnf.arrowMarkerAbsolute",o.arrowMarkerAbsolute),!Mn(o.arrowMarkerAbsolute)&&o.securityLevel!=="sandbox"&&(b=b.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),b=Sd(b),b=b.replace(/<br>/g,"<br/>"),o.securityLevel==="sandbox"){const x=s.select("#d"+t+" svg").node(),A="100%";let C="100%";x&&(C=x.viewBox.baseVal.height+"px"),b=`<iframe style="width:${A};height:${C};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+b+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The “iframe” tag is not supported by your browser.
</iframe>`}else o.securityLevel!=="loose"&&(b=Rl.sanitize(b,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(typeof n<"u")switch(f){case"flowchart":case"flowchart-v2":n(b,oa.bindFunctions);break;case"gantt":n(b,r5.bindFunctions);break;case"class":case"classDiagram":n(b,_s.bindFunctions);break;default:n(b)}else W.debug("CB = undefined!");GL();const k=o.securityLevel==="sandbox"?"#i"+t:"#d"+t,T=Lt(k).node();if(T&&"remove"in T&&T.remove(),u)throw u;return b};let fo={};const Rct=function(t,e,n,r){try{if(e!==void 0)switch(e=e.trim(),n){case"open_directive":fo={};break;case"type_directive":if(!fo)throw new Error("currentDirective is undefined");fo.type=e.toLowerCase();break;case"arg_directive":if(!fo)throw new Error("currentDirective is undefined");fo.args=JSON.parse(e);break;case"close_directive":Ict(t,fo,r),fo=void 0;break}}catch(i){W.error(`Error while rendering sequenceDiagram directive: ${e} jison context: ${n}`),W.error(i.message)}},Ict=function(t,e,n){switch(W.debug(`Directive type=${e.type} with args:`,e.args),e.type){case"init":case"initialize":{["config"].forEach(r=>{typeof e.args[r]<"u"&&(n==="flowchart-v2"&&(n="flowchart"),e.args[n]=e.args[r],delete e.args[r])}),W.debug("sanitize in handleDirective",e.args),Fo(e.args),W.debug("sanitize in handleDirective (done)",e.args),fb(e.args);break}case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap(e.type==="wrap");break;case"themeCss":W.warn("themeCss encountered");break;default:W.warn(`Unhandled directive: source: '%%{${e.type}: ${JSON.stringify(e.args?e.args:{})}}%%`,e);break}};function Fct(t={}){t.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),bK(t),(t==null?void 0:t.theme)&&t.theme in fa?t.themeVariables=fa[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=fa.default.getThemeVariables(t.themeVariables));const e=typeof t=="object"?mK(t):JS();R3(e.logLevel),xu()}const qe=Object.freeze({render:Nct,renderAsync:Oct,parse:Bct,parseAsync:Dct,parseDirective:Rct,initialize:Fct,getConfig:at,setConfig:tA,getSiteConfig:JS,updateSiteConfig:_K,reset:()=>{$l()},globalReset:()=>{$l(qs)},defaultConfig:qs});R3(at().logLevel);$l(at());let hB=!1;const $ct=async function(t,e,n){try{hB?await pB(t,e,n):fB(t,e,n)}catch(r){W.warn("Syntax Error rendering"),ub(r)&&W.warn(r.str),ui.parseError&&ui.parseError(r)}},dB=(t,e,n)=>{W.warn(t),ub(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},fB=function(t,e,n){const r=qe.getConfig();t&&(ui.sequenceConfig=t),W.debug(`${n?"":"No "}Callback function found`);let i;if(typeof e>"u")i=document.querySelectorAll(".mermaid");else if(typeof e=="string")i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else if(e instanceof NodeList)i=e;else throw new Error("Invalid argument nodes for mermaid.init");W.debug(`Found ${i.length} diagrams`),typeof(t==null?void 0:t.startOnLoad)<"u"&&(W.debug("Start On Load: "+(t==null?void 0:t.startOnLoad)),qe.updateSiteConfig({startOnLoad:t==null?void 0:t.startOnLoad}));const a=new we.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const s=[];for(const l of Array.from(i)){W.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const u=`mermaid-${a.next()}`;o=l.innerHTML,o=we.entityDecode(o).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=we.detectInit(o);h&&W.debug("Detected early reinit: ",h);try{qe.render(u,o,(f,d)=>{l.innerHTML=f,typeof n<"u"&&n(u),d&&d(l)},l)}catch(f){dB(f,s,ui.parseError)}}if(s.length>0)throw s[0]},Pct=t=>{for(const{id:e,detector:n,loader:r}of t)RS(e,n,r)},Yct=async t=>{W.debug(`Loading ${t.length} external diagrams`);const e=(await Promise.allSettled(t.map(async({id:n,detector:r,loader:i})=>{const{diagram:a}=await i();En(n,a,r)}))).filter(n=>n.status==="rejected");if(e.length>0){W.error(`Failed to load ${e.length} external diagrams`);for(const n of e)W.error(n);throw new Error(`Failed to load ${e.length} external diagrams`)}},pB=async function(t,e,n){const r=qe.getConfig();t&&(ui.sequenceConfig=t),W.debug(`${n?"":"No "}Callback function found`);let i;if(typeof e>"u")i=document.querySelectorAll(".mermaid");else if(typeof e=="string")i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else if(e instanceof NodeList)i=e;else throw new Error("Invalid argument nodes for mermaid.init");W.debug(`Found ${i.length} diagrams`),typeof(t==null?void 0:t.startOnLoad)<"u"&&(W.debug("Start On Load: "+(t==null?void 0:t.startOnLoad)),qe.updateSiteConfig({startOnLoad:t==null?void 0:t.startOnLoad}));const a=new we.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const s=[];for(const l of Array.from(i)){W.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const u=`mermaid-${a.next()}`;o=l.innerHTML,o=we.entityDecode(o).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=we.detectInit(o);h&&W.debug("Detected early reinit: ",h);try{await qe.renderAsync(u,o,(f,d)=>{l.innerHTML=f,typeof n<"u"&&n(u),d&&d(l)},l)}catch(f){dB(f,s,ui.parseError)}}if(s.length>0)throw s[0]},zct=function(t){qe.initialize(t)},jct=async(t,{lazyLoad:e=!0}={})=>{e?Pct(t):await Yct(t),hB=!0},gB=function(){if(ui.startOnLoad){const{startOnLoad:t}=qe.getConfig();t&&ui.init()}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",gB,!1)}const Uct=function(t){ui.parseError=t},Hct=t=>qe.parse(t,ui.parseError),r0=[];let rm=!1;const yB=async()=>{if(!rm){for(rm=!0;r0.length>0;){const t=r0.shift();if(t)try{await t()}catch(e){W.error("Error executing queue",e)}}rm=!1}},Wct=t=>new Promise((e,n)=>{const r=()=>new Promise((i,a)=>{qe.parseAsync(t,ui.parseError).then(o=>{i(o),e(o)},o=>{W.error("Error parsing",o),a(o),n(o)})});r0.push(r),yB()}),Gct=(t,e,n,r)=>new Promise((i,a)=>{const o=()=>new Promise((s,l)=>{qe.renderAsync(t,e,n,r).then(u=>{s(u),i(u)},u=>{W.error("Error parsing",u),l(u),a(u)})});r0.push(o),yB()}),ui={startOnLoad:!0,diagrams:{},mermaidAPI:qe,parse:Hct,parseAsync:Wct,render:qe.render,renderAsync:Gct,init:$ct,initThrowsErrors:fB,initThrowsErrorsAsync:pB,registerExternalDiagrams:jct,initialize:zct,parseError:void 0,contentLoaded:gB,setParseErrorHandler:Uct};export{ui as default};
